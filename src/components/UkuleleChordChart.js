import React, { useEffect, useRef } from 'react';
import { ChordBox } from 'vexchords';

const chordMappings = { // [STRING, FRET]
    A: [[4, 2], [3, 1], [2, 0], [1, 0]],
    Am: [[4, 2], [3, 0], [2, 0], [1, 0]],
    A7: [[4, 0], [3, 1], [2, 0], [1, 0]],
    Aaug: [[4, 2], [3, 1], [2, 1], [1, 0]],
    Amaj7: [[4, 1], [3, 1], [2, 0], [1, 0]],

    'A#': [[4, 3], [3, 2], [2, 1], [1, 1]],
    'A#m': [[4, 3], [3, 1], [2, 1], [1, 1]],
    'A#7': [[4, 1], [3, 2], [2, 1], [1, 1]],
    'A#aug': [[4, 3], [3, 2], [2, 2], [1, 1]],
    'A#maj7': [[4, 2], [3, 2], [2, 1], [1, 1]],

    Bb: [[4, 3], [3, 2], [2, 1], [1, 1]],
    Bbm: [[4, 3], [3, 1], [2, 1], [1, 1]],
    Bb7: [[4, 1], [3, 2], [2, 1], [1, 1]],
    Bbaug: [[4, 3], [3, 2], [2, 2], [1, 1]],
    Bbmaj7: [[4, 2], [3, 2], [2, 1], [1, 1]],

    B: [[4, 4], [3, 3], [2, 2], [1, 2]],
    Bm: [[4, 4], [3, 2], [2, 2], [1, 2]],
    B7: [[4, 2], [3, 3], [2, 2], [1, 2]],
    Baug: [[4, 4], [3, 3], [2, 3], [1, 2]],
    Bmaj7: [[4, 3], [3, 3], [2, 2], [1, 2]],

    C: [[4, 0], [3, 0], [2, 0], [1, 3]],
    Cm: [[4, 0], [3, 3], [2, 3], [1, 3]],
    C7: [[4, 0], [3, 0], [2, 0], [1, 1]],
    Caug: [[4, 0], [3, 1], [2, 1], [1, 3]],
    Cmaj7: [[4, 0], [3, 0], [2, 0], [1, 2]],

    'C#': [[4, 1], [3, 1], [2, 1], [1, 4]],
    'C#m': [[4, 1], [3, 4], [2, 4], [1, 4]],
    'C#7': [[4, 1], [3, 1], [2, 1], [1, 2]],
    'C#aug': [[4, 1], [3, 2], [2, 2], [1, 4]],
    'C#maj7': [[4, 1], [3, 1], [2, 1], [1, 3]],

    Db: [[4, 1], [3, 1], [2, 1], [1, 4]],
    Dbm: [[4, 1], [3, 4], [2, 4], [1, 4]],
    Db7: [[4, 1], [3, 1], [2, 1], [1, 2]],
    Dbaug: [[4, 1], [3, 2], [2, 2], [1, 4]],
    Dbmaj7: [[4, 1], [3, 1], [2, 1], [1, 3]],

    D: [[4, 2], [3, 2], [2, 2], [1, 0]],
    Dm: [[4, 2], [3, 2], [2, 1], [1, 0]],
    D7: [[4, 2], [3, 2], [2, 2], [1, 3]],
    Daug: [[4, 3], [3, 2], [2, 2], [1, 1]],
    Dmaj7: [[4, 2], [3, 2], [2, 2], [1, 2]],

    'D#': [[4, 3], [3, 3], [2, 3], [1, 1]],
    'D#m': [[4, 3], [3, 3], [2, 2], [1, 1]],
    'D#7': [[4, 3], [3, 3], [2, 3], [1, 4]],
    'D#aug': [[4, 4], [3, 3], [2, 3], [1, 2]],
    'D#maj7': [[4, 3], [3, 3], [2, 3], [1, 3]],

    Eb: [[4, 3], [3, 3], [2, 3], [1, 1]],
    Ebm: [[4, 3], [3, 3], [2, 2], [1, 1]],
    Eb7: [[4, 3], [3, 3], [2, 3], [1, 4]],
    Ebaug: [[4, 4], [3, 3], [2, 3], [1, 2]],
    Ebmaj7: [[4, 3], [3, 3], [2, 3], [1, 3]],

    E: [[4, 1], [3, 4], [2, 0], [1, 2]],
    Em: [[4, 0], [3, 4], [2, 3], [1, 2]],
    E7: [[4, 1], [3, 2], [2, 0], [1, 2]],
    Eaug: [[4, 1], [3, 4], [2, 1], [1, 2]],
    Emaj7: [[4, 1], [3, 3], [2, 0], [1, 2]],

    F: [[4, 2], [3, 0], [2, 1], [1, 0]],
    Fm: [[4, 1], [3, 0], [2, 1], [1, 0]],
    F7: [[4, 2], [3, 3], [2, 1], [1, 0]],
    Faug: [[4, 2], [3, 1], [2, 1], [1, 0]],
    Fmaj7: [[4, 2], [3, 0], [2, 1], [1, 4]],

    'F#': [[4, 3], [3, 1], [2, 2], [1, 1]],
    'F#m': [[4, 2], [3, 1], [2, 2], [1, 1]],
    'F#7': [[4, 3], [3, 4], [2, 2], [1, 1]],
    'F#aug': [[4, 3], [3, 2], [2, 2], [1, 1]],
    'F#maj7': [[4, 3], [3, 1], [2, 2], [1, 0]],

    Gb: [[4, 3], [3, 1], [2, 2], [1, 1]],
    Gbm: [[4, 2], [3, 1], [2, 2], [1, 1]],
    Gb7: [[4, 3], [3, 4], [2, 2], [1, 1]],
    Gbaug: [[4, 3], [3, 2], [2, 2], [1, 1]],
    Gbmaj7: [[4, 3], [3, 1], [2, 2], [1, 0]],

    G: [[4, 2], [3, 3], [2, 2], [1, 0]],
    Gm: [[4, 1], [3, 3], [2, 2], [1, 0]],
    G7: [[4, 2], [3, 1], [2, 2], [1, 0]],
    Gaug: [[4, 3], [3, 3], [2, 2], [1, 1]],
    Gmaj7: [[4, 2], [3, 2], [2, 2], [1, 0]],

    'G#': [[4, 3], [3, 4], [2, 3], [1, 1]],
    'G#m': [[4, 2], [3, 4], [2, 3], [1, 1]],
    'G#7': [[4, 3], [3, 2], [2, 3], [1, 1]],
    'G#aug': [[4, 4], [3, 4], [2, 3], [1, 2]],
    'G#maj7': [[4, 3], [3, 3], [2, 3], [1, 0]],

    Ab: [[4, 3], [3, 4], [2, 3], [1, 1]],
    Abm: [[4, 2], [3, 4], [2, 3], [1, 1]],
    Ab7: [[4, 3], [3, 2], [2, 3], [1, 1]],
    Abaug: [[4, 4], [3, 4], [2, 3], [1, 2]],
    Abmaj7: [[4, 3], [3, 3], [2, 3], [1, 0]],
};

const UkuleleChordChart = ({ chord }) => {
  const containerRef = useRef(null);

  useEffect(() => {
    const container = containerRef.current;
    container.innerHTML = ''; // Clear the container before drawing the new chart

    const chordBox = new ChordBox(container, {
      width: 100,
      height: 120,
      circleRadius: 5,
      numStrings: 4,
      numFrets: 5,
      showTuning: true,
      defaultColor: '#666',
      bgColor: '#FFF',
      strokeColor: '#666',
      textColor: '#666',
      stringColor: '#666',
      fretColor: '#666',
      labelColor: '#666',
      fretWidth: 1,
      stringWidth: 1,
    });

    chordBox.draw({
      chord: chordMappings[chord] || [[4, 0], [3, 0], [2, 0], [1, 0]],
      tuning: ['G', 'C', 'E', 'A'],
    });
  }, [chord]);

  return <div><div ref={containerRef}></div>{chord}</div>;
};

export default UkuleleChordChart;