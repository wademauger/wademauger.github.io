"use strict";(self.webpackChunkhobbies=self.webpackChunkhobbies||[]).push([[809],{6809:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ys});var i=t(9379),n=t(5043),r=t(9456),l=t(8964),o=t(3496),a=t(9073),c=t(7419),d=t(1645),h=t(4376),x=t(9831),p=t(4593),g=t(6051),m=t(3382);class u{constructor(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,a=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;this.type=e,this.primaryMotif=s,this.secondaryMotifs=t,this.mainColor=i,this.contrastColors=n,this.successor=r,this.truncatedBy=l,this.horizontalRepeat=o,this.verticalRepeat=a,this.height=c}getChild(e){let s=this,t=this.height;for(;s.successor&&e>=t;)e-=t,s=s.successor,t=s.height;if(e>=t)return null;const i=new u(s.type,s.primaryMotif,s.secondaryMotifs,s.mainColor,s.contrastColors,s.successor,s.truncatedBy,s.horizontalRepeat,s.verticalRepeat,s.height);return i.truncatedBy=e,i}}const j=u,f=(()=>{const e=["XXS","XS","S","M","L","XL","XXL"],s=s=>e.indexOf(s)-3,t={};return e.forEach((i=>{e.forEach((e=>{const n=s(i);if(n===s(e)-1){const s=(r=n,Math.pow(1.1,r)),l="men's ".concat(i.toLowerCase()," / women's ").concat(e.toLowerCase());t[l]=Math.round(1e3*s)/1e3}var r}))})),t})(),y=[{permalink:"cozy-raglan-sweater",title:"Cozy Raglan V-Neck Sweater",description:"A simple sweater with Raglan sleeves",sizes:f,shapes:{Front:{height:4,baseA:25,baseB:25,finishingSteps:["Hang hem."],successors:[{height:20,baseA:25,baseB:25,successors:[{height:0,baseA:1,baseB:1},{height:8,baseA:10,baseB:3},{height:0,baseA:2,baseB:2},{height:8,baseA:10,baseB:3},{height:0,baseA:1,baseB:1}]}]},Back:{height:4,baseA:25,baseB:25,finishingSteps:["Hang hem."],successors:[{height:20,baseA:25,baseB:25,successors:[{height:0,baseA:1,baseB:1},{height:8,baseA:23,baseB:15},{height:0,baseA:1,baseB:1}]}]},"Sleeves (make 2)":{height:4,baseA:10,baseB:10,successors:[{height:14,baseA:10,baseB:20,successors:[{height:7,baseA:20,baseB:3}]}]}},finishingSteps:["Lay out the panels and sleeves, right sides together, and knit the collar in whatever style you prefer.","Sew up the side seams and sleeve seams.","Weave in all ends."]},{permalink:"seam-top-hat",title:"Seam-Top Hat",description:"A simple hat with an elegant construction",sizes:{"One Size":1},shapes:{Hat:{height:4,baseA:22,baseB:22,finishingSteps:["Hang hem."],successors:[{height:10,baseA:22,baseB:22,successors:[{height:4,baseA:5.5,baseB:.2},{height:4,baseA:5.5,baseB:.2},{height:4,baseA:5.5,baseB:.2},{height:4,baseA:5.5,baseB:.2}]}]}},finishingSteps:["Either use sew-as-you-go to join the top panels on the machine, or sew with a tapestry needle after binding off.","Sew up the back seam.","Add braided ear strings if desired."]},{permalink:"drop-shoulder-crew-neck-sweater",title:"Drop-Shoulder Crew Neck Sweater",description:"A cozy drop-shoulder sweater with a classic crew neck",sizes:f,shapes:{Front:{height:5,baseA:5,baseB:5,successors:[{height:5,baseA:5,baseB:5,successors:[{height:5,baseA:5,baseB:5}]}]},Back:{height:5,baseA:30,baseB:30,finishingSteps:["Hang hem."],successors:[{height:20,baseA:30,baseB:30,successors:[{height:0,baseA:3,baseB:3},{height:10,baseA:10,baseB:10},{height:0,baseA:4,baseB:4},{height:10,baseA:10,baseB:10},{height:0,baseA:3,baseB:3}]}]},"Sleeves (make 2)":{height:4,baseA:10,baseB:10,successors:[{height:20,baseA:10,baseB:21}]}}}];new j({type:"SOLID",defaultColors:["#ffffff"],verticalRepeat:10,height:4,successor:{type:"SOLID",defaultColors:["#ffffff"],height:2}}),new j({type:"SOLID",defaultColors:["#ff0000"],verticalRepeat:10,height:4,successor:{type:"SOLID",defaultColors:["#ffffff"],verticalRepeat:10,height:4}}),new j({type:"STRANDED",defaultColors:["#ffffff","#000000"],primaryMotif:"Checkerboard",verticalRepeat:4}),new j({type:"INTARSIA",defaultColors:["#ffffff","#000000"],primaryMotif:"Argyle"}),new j({type:"SOLID",defaultColors:["#ffffff"],verticalRepeat:10,height:4});var v=t(7170),A=t(579);const b=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{minX:0,maxX:0,minY:0,maxY:0},r=arguments.length>5?arguments[5]:void 0;const l=[],o=Math.max(e.baseA,e.baseB)*s,a=t+(o-e.baseB*s)/2+(e.baseBHorizontalOffset||0)*s,c=t+(o+e.baseB*s)/2+(e.baseBHorizontalOffset||0)*s,d=t+(o-e.baseA*s)/2,h=t+(o+e.baseA*s)/2,x=i,p=i+e.height*s;if(n.minX=Math.min(n.minX,a,c,d,h),n.maxX=Math.max(n.maxX,a,c,d,h),n.minY=Math.min(n.minY,x,p),n.maxY=Math.max(n.maxY,x,p),l.push(function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0;const r=Math.max(e.baseA,e.baseB)*s,l=t+(r-e.baseB*s)/2+(e.baseBHorizontalOffset||0)*s,o=t+(r+e.baseB*s)/2+(e.baseBHorizontalOffset||0)*s,a=t+(r-e.baseA*s)/2,c=t+(r+e.baseA*s)/2,d=i,h=i+e.height*s;return(0,A.jsx)("polygon",{points:"".concat(l,",").concat(d," ").concat(o,",").concat(d," ").concat(c,",").concat(h," ").concat(a,",").concat(h),fill:n,stroke:"#a1a8af",strokeWidth:3,strokeLinejoin:"round"},"".concat(t,"-").concat(i))}(e,s,t,i,r)),e.successors&&e.successors.length>0){const i=e.successors.map((e=>Math.max(e.baseA,e.baseB)*s));let a=t+(o-i.reduce(((e,s)=>e+s),0))/2;for(let t=e.successors.length-1;t>=0;t--){const o=e.successors[t],c=i[t],d={minX:n.minX,maxX:n.maxX,minY:n.minY,maxY:n.maxY};l.push(...b(o,s,a,x-o.height*s,d,r)),n.minX=d.minX,n.maxX=d.maxX,n.minY=d.minY,n.maxY=d.maxY,a+=c}}return l},w=e=>{let{shape:s,label:t="",size:i=200,padding:n=10}=e;const{token:r}=v.A.useToken(),l=r.colorPrimary;let o={minX:0,maxX:0,minY:0,maxY:0};b(s,1,0,0,o,l);const a=o.maxX-o.minX,c=o.maxY-o.minY,d=i-2*n,h=i-2*n,x=Math.min(d/a,h/c),p=c*x,g=(i-a*x)/2-o.minX*x+n,m=(i-p)/2-o.minY*x+n;o={minX:0,maxX:0,minY:0,maxY:0};const u=b(s,x,0,0,o,l);return(0,A.jsxs)("div",{style:{width:i+2*n,height:i+3*n,float:"left"},children:[(0,A.jsx)("svg",{width:i,height:i,viewBox:"0 0 ".concat(i," ").concat(i+4),preserveAspectRatio:"none",children:(0,A.jsx)("g",{transform:"translate(".concat(g,", ").concat(m,")"),children:u})}),t]})},{Title:S,Text:k}=x.A,z=e=>{var s;let{data:t,onChange:i,onNext:r,onJumpToStep:l}=e;const o=[{id:"custom",name:"Create Custom Pattern",description:"Design your own pattern from scratch",shapes:null},...y.map((e=>({id:e.permalink,name:e.title,description:e.description,shapes:e.shapes,sizes:e.sizes,finishingSteps:e.finishingSteps})))];(0,n.useEffect)((()=>{if(!t.basePattern){const e=o.find((e=>"custom"===e.id));i({basePattern:e})}}),[t.basePattern,i,o]);return(0,A.jsx)("div",{className:"pattern-setup",children:(0,A.jsxs)(c.A,{gutter:[24,24],children:[(0,A.jsx)(d.A,{span:24,children:(0,A.jsxs)(a.A,{children:[(0,A.jsx)(S,{level:2,children:"Choose a Pattern"}),(0,A.jsx)(k,{type:"secondary",children:"Select a base pattern to start from. You'll be able to modify or customize any pattern in the next step."})]})}),(0,A.jsx)(d.A,{span:24,children:(0,A.jsx)(a.A,{title:"Available Patterns",children:(0,A.jsx)("div",{style:{maxHeight:"500px",overflowY:"auto"},children:(0,A.jsx)(p.Ay.Group,{value:(null===(s=t.basePattern)||void 0===s?void 0:s.id)||"custom",onChange:e=>(e=>{const s=o.find((s=>s.id===e));i({basePattern:s})})(e.target.value),style:{width:"100%"},children:(0,A.jsx)(g.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:o.map((e=>{var s;return(0,A.jsx)(p.Ay,{value:e.id,style:{display:"flex",alignItems:"flex-start",padding:"16px",border:"1px solid #f0f0f0",borderRadius:"8px",marginBottom:"12px",width:"100%",backgroundColor:(null===(s=t.basePattern)||void 0===s?void 0:s.id)===e.id?"#f6ffed":"#fff"},children:(0,A.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:[e.shapes&&(0,A.jsx)("div",{style:{marginRight:"20px",flexShrink:0},children:(0,A.jsx)("div",{style:{display:"flex",gap:"10px"},children:Object.entries(e.shapes).slice(0,3).map((e=>{let[s,t]=e;return(0,A.jsxs)("div",{style:{textAlign:"center"},children:[(0,A.jsx)(w,{shape:t,label:"",size:80,padding:8}),(0,A.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:s})]},s)}))})}),(0,A.jsxs)("div",{style:{flex:1},children:[(0,A.jsx)("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"16px"},children:e.name}),(0,A.jsx)("div",{style:{color:"#666",fontSize:"14px",marginBottom:"10px"},children:e.description}),e.sizes&&(0,A.jsxs)("div",{style:{fontSize:"12px",color:"#999"},children:["Available sizes: ",Object.keys(e.sizes).join(", ")]}),"custom"===e.id&&(0,A.jsx)("div",{style:{color:"#1890ff",fontSize:"13px",fontStyle:"italic",fontWeight:"bold"},children:"Design your own shapes and construction"})]})]})},e.id)}))})})})})}),(0,A.jsx)(d.A,{span:24,children:(0,A.jsx)("div",{style:{textAlign:"right",marginTop:"24px"},children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(m.Ay,{size:"large",type:"primary",onClick:()=>{r()},disabled:!t.basePattern,children:"Next: Pattern Editor"}),(0,A.jsx)(m.Ay,{size:"large",onClick:()=>{t.basePattern&&l&&l(2)},disabled:!t.basePattern,children:"Skip to Sizing"})]})})})]})})};var C=t(6233),P=t(5578),M=t(5055),B=t(9118),I=t(1118),T=t(8354),N=t(5337),W=t(6191),D=t(7407),R=t(1966);const{Title:O,Text:L}=x.A,{Option:Y}=C.A,{TextArea:X}=P.A,H=e=>{let{visible:s,shapeData:t,onSave:r,onCancel:l,existingShapes:o={}}=e;const[h]=M.A.useForm(),[x,p]=(0,n.useState)(null),[u,j]=(0,n.useState)([]);n.useEffect((()=>{s&&t&&(p((0,i.A)({},t.shape)),j(t.shape.successors||[]),h.setFieldsValue({name:t.name,height:t.shape.height,baseA:t.shape.baseA,baseB:t.shape.baseB,baseBHorizontalOffset:t.shape.baseBHorizontalOffset||0}))}),[s,t,h]);const f=(e,s)=>{const t=(0,i.A)((0,i.A)({},x),{},{[e]:s});p(t)},y=function(){let e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===s.length){const s=x.height||10,t=x.baseA||10,i=x.baseB||10;e={height:Math.max(1,Math.round(s/2)),baseA:Math.max(1,Math.round(t/2)),baseB:Math.max(1,Math.round(i/2)),baseBHorizontalOffset:0,successors:[],finishingSteps:[]},j([...u,e])}else{const t=JSON.parse(JSON.stringify(u));let i=t;for(let e=0;e<s.length-1;e++){const t=s[e];if(!i[t])return;i=i[t].successors}const n=s[s.length-1];if(!i[n])return;const r=i[n];e={height:Math.max(1,Math.round(r.height/2)),baseA:Math.max(1,Math.round(r.baseA/2)),baseB:Math.max(1,Math.round(r.baseB/2)),baseBHorizontalOffset:0,successors:[],finishingSteps:[]},i[n].successors||(i[n].successors=[]),i[n].successors.push(e),j(t)}},v=(e,s,t)=>{const n=JSON.parse(JSON.stringify(u));let r=n;for(let i=0;i<e.length-1;i++){const s=e[i];if(!r[s])return;r=r[s].successors}const l=e[e.length-1];r&&r[l]&&(r[l]=(0,i.A)((0,i.A)({},r[l]),{},{[s]:t}),j(n))},b=e=>{let{successor:s,path:t,level:i=0}=e;const n=t.join("-"),r=20*i;return(0,A.jsxs)("div",{style:{marginLeft:"".concat(r,"px")},children:[(0,A.jsx)(a.A,{size:"small",style:{backgroundColor:0===i?"#f9f9f9":"#f0f0f0",marginBottom:"8px"},children:(0,A.jsxs)(c.A,{gutter:[12,12],align:"middle",children:[(0,A.jsx)(d.A,{span:3,children:(0,A.jsx)(L,{strong:!0,style:{fontSize:"12px"},children:0===i?"Level ".concat(t[0]+1):"Child ".concat(t[t.length-1]+1)})}),(0,A.jsx)(d.A,{span:4,children:(0,A.jsxs)("div",{children:[(0,A.jsx)(L,{style:{fontSize:"11px"},children:"Height"}),(0,A.jsx)(I.A,{size:"small",min:1,value:s.height,onChange:e=>v(t,"height",e),style:{width:"100%"}})]})}),(0,A.jsx)(d.A,{span:4,children:(0,A.jsxs)("div",{children:[(0,A.jsx)(L,{style:{fontSize:"11px"},children:"Bottom W"}),(0,A.jsx)(I.A,{size:"small",min:0,value:s.baseA,onChange:e=>v(t,"baseA",e),style:{width:"100%"}})]})}),(0,A.jsx)(d.A,{span:4,children:(0,A.jsxs)("div",{children:[(0,A.jsx)(L,{style:{fontSize:"11px"},children:"Top W"}),(0,A.jsx)(I.A,{size:"small",min:0,value:s.baseB,onChange:e=>v(t,"baseB",e),style:{width:"100%"}})]})}),(0,A.jsx)(d.A,{span:4,children:(0,A.jsxs)("div",{children:[(0,A.jsx)(L,{style:{fontSize:"11px"},children:"Offset"}),(0,A.jsx)(I.A,{size:"small",value:s.baseBHorizontalOffset||0,onChange:e=>v(t,"baseBHorizontalOffset",e),style:{width:"100%"}})]})}),(0,A.jsx)(d.A,{span:5,children:(0,A.jsxs)(g.A,{size:"small",children:[(0,A.jsx)(m.Ay,{type:"dashed",size:"small",icon:(0,A.jsx)(N.A,{}),onClick:()=>y(t),title:"Add child successor",style:{fontSize:"10px"},children:"Child"}),(0,A.jsx)(m.Ay,{danger:!0,size:"small",icon:(0,A.jsx)(R.A,{}),onClick:()=>(e=>{if(1===e.length){const s=u.filter(((s,t)=>t!==e[0]));j(s)}else{const s=JSON.parse(JSON.stringify(u));let t=s;for(let n=0;n<e.length-1;n++){const s=e[n];if(!t[s])return;t=t[s].successors}const i=e[e.length-1];t&&Array.isArray(t)&&(t.splice(i,1),j(s))}})(t),title:"Remove this successor",style:{fontSize:"10px"}})]})})]})},n),s.successors&&s.successors.length>0&&(0,A.jsx)("div",{style:{marginTop:"4px"},children:s.successors.map(((e,s)=>(0,A.jsx)(b,{successor:e,path:[...t,s],level:i+1},"".concat(n,"-").concat(s))))})]})};return x?(0,A.jsx)(B.A,{title:"Edit Panel",open:s,onOk:()=>{h.validateFields().then((e=>{const s=(0,i.A)((0,i.A)({},x),{},{height:e.height,baseA:e.baseA,baseB:e.baseB,baseBHorizontalOffset:e.baseBHorizontalOffset,successors:u,finishingSteps:x.finishingSteps||[]});r({name:e.name,shape:s})}))},onCancel:l,width:1e3,style:{top:20},children:(0,A.jsxs)(c.A,{gutter:24,children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(M.A,{form:h,layout:"vertical",children:[(0,A.jsx)(M.A.Item,{name:"name",label:"Panel Name",rules:[{required:!0,message:"Please enter a panel name"}],children:(0,A.jsx)(P.A,{placeholder:"Front, Back, Sleeve, etc."})}),(0,A.jsx)(M.A.Item,{name:"height",label:"Height",rules:[{required:!0,message:"Please enter height"}],children:(0,A.jsx)(I.A,{min:1,style:{width:"100%"},onChange:e=>f("height",e)})}),(0,A.jsxs)(c.A,{gutter:12,children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsx)(M.A.Item,{name:"baseA",label:"Bottom Width",rules:[{required:!0,message:"Please enter bottom width"}],children:(0,A.jsx)(I.A,{min:0,style:{width:"100%"},onChange:e=>f("baseA",e)})})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsx)(M.A.Item,{name:"baseB",label:"Top Width",rules:[{required:!0,message:"Please enter top width"}],children:(0,A.jsx)(I.A,{min:0,style:{width:"100%"},onChange:e=>f("baseB",e)})})})]}),(0,A.jsx)(M.A.Item,{name:"baseBHorizontalOffset",label:"Top Horizontal Offset",children:(0,A.jsx)(I.A,{style:{width:"100%"},onChange:e=>f("baseBHorizontalOffset",e)})})]})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)("div",{style:{textAlign:"center"},children:[(0,A.jsx)(L,{strong:!0,children:"Preview"}),(0,A.jsx)("div",{style:{marginTop:"16px"},children:(0,A.jsx)(w,{shape:(0,i.A)((0,i.A)({},x),{},{successors:u}),label:"",size:180,padding:20})})]})}),(0,A.jsxs)(d.A,{span:24,children:[(0,A.jsx)(T.A,{}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,A.jsx)(L,{strong:!0,children:"Successor Shapes"}),(0,A.jsx)(m.Ay,{type:"dashed",icon:(0,A.jsx)(N.A,{}),onClick:()=>y(),children:"Add Successor"})]}),(0,A.jsx)(L,{type:"secondary",style:{display:"block",marginBottom:"16px"},children:'Successors are panels that continue from the top of this panel. Use "Child" buttons to create nested hierarchies.'}),0===u.length?(0,A.jsx)("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#fafafa",borderRadius:"6px"},children:(0,A.jsx)(L,{type:"secondary",children:'No successor panels. Click "Add Successor" to create connected panels.'})}):(0,A.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto"},children:(0,A.jsx)(g.A,{direction:"vertical",style:{width:"100%"},size:"small",children:u.map(((e,s)=>(0,A.jsx)(b,{successor:e,path:[s],level:0},s)))})})]})]})]})}):null},E=e=>{var s,t,r;let{data:l,onChange:h,onNext:x,onBack:p}=e;const[u]=M.A.useForm(),[j,f]=(0,n.useState)({}),[y,v]=(0,n.useState)(null),[b,S]=(0,n.useState)(null),[k,z]=(0,n.useState)(null);n.useEffect((()=>{let e={};l.customShapes&&Object.keys(l.customShapes).length>0?e=l.customShapes:l.basePattern&&l.basePattern.shapes&&"custom"!==l.basePattern.id&&(e=(0,i.A)({},l.basePattern.shapes)),f(e)}),[l.basePattern,l.customShapes]);const C="custom"===(null===(s=l.basePattern)||void 0===s?void 0:s.id),I=C?"Custom Pattern Design":"Pattern Editor",T=C?"Give your pattern a name and description, then create custom panels for your pattern. Each panel represents a knitted piece like front, back, or sleeves.":"Modify the selected pattern or add new panels. You can edit existing shapes or create entirely new ones.";return(0,A.jsxs)("div",{className:"custom-shape-step",children:[(0,A.jsxs)(c.A,{gutter:[24,24],children:[(0,A.jsx)(d.A,{span:24,children:(0,A.jsxs)(a.A,{children:[(0,A.jsx)(O,{level:2,children:I}),(0,A.jsx)(L,{type:"secondary",children:T})]})}),(0,A.jsx)(d.A,{span:24,children:(0,A.jsx)(a.A,{title:"Pattern Information",style:{marginBottom:"16px"},children:(0,A.jsxs)(c.A,{gutter:[24,16],children:[(0,A.jsx)(d.A,{lg:12,md:24,children:(0,A.jsx)(M.A,{layout:"vertical",children:(0,A.jsx)(M.A.Item,{label:"Pattern Name",required:!0,children:(0,A.jsx)(P.A,{value:l.name||(null===(t=l.basePattern)||void 0===t?void 0:t.name)||"",onChange:e=>h((0,i.A)((0,i.A)({},l),{},{name:e.target.value})),placeholder:C?"Enter your pattern name (e.g., My First Sweater)":"Modify pattern name or keep original",size:"large"})})})}),(0,A.jsx)(d.A,{lg:12,md:24,children:(0,A.jsx)(M.A,{layout:"vertical",children:(0,A.jsx)(M.A.Item,{label:"Description",children:(0,A.jsx)(X,{value:l.description||(null===(r=l.basePattern)||void 0===r?void 0:r.description)||"",onChange:e=>h((0,i.A)((0,i.A)({},l),{},{description:e.target.value})),placeholder:C?"Describe your custom pattern...":"Modify pattern description or add your own notes...",rows:4})})})})]})})}),(0,A.jsx)(d.A,{span:24,children:(0,A.jsx)(a.A,{title:C?"Pattern Panels":"Edit Pattern Panels",extra:(0,A.jsx)(m.Ay,{type:"primary",icon:(0,A.jsx)(N.A,{}),onClick:()=>{const e="Panel ".concat(Object.keys(j).length+1);S({name:e,shape:{height:10,baseA:20,baseB:20,baseBHorizontalOffset:0,successors:[],finishingSteps:[]}})},children:C?"New Panel":"Add Panel"}),children:0===Object.keys(j).length?(0,A.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:(0,A.jsx)(L,{children:C?'No panels created yet. Click "Add Panel" to start designing your pattern.':'No panels available from the selected pattern. Click "Add Panel" to create new panels.'})}):(0,A.jsx)(c.A,{gutter:[16,16],children:Object.entries(j).map((e=>{let[s,t]=e;return(0,A.jsx)(d.A,{lg:6,md:8,sm:12,xs:24,children:(0,A.jsx)(a.A,{size:"small",title:s,extra:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(m.Ay,{size:"small",icon:(0,A.jsx)(W.A,{}),onClick:()=>z({name:s,shape:t})}),(0,A.jsx)(m.Ay,{size:"small",icon:(0,A.jsx)(D.A,{}),onClick:()=>(e=>{S({name:e,shape:(0,i.A)({},j[e])})})(s)}),(0,A.jsx)(m.Ay,{size:"small",icon:(0,A.jsx)(R.A,{}),danger:!0,onClick:()=>(e=>{const s=(0,i.A)({},j);delete s[e],f(s),h((0,i.A)((0,i.A)({},l),{},{customShapes:s}))})(s)})]}),children:(0,A.jsxs)("div",{style:{textAlign:"center"},children:[(0,A.jsx)(w,{shape:t,label:"",size:120,padding:10}),(0,A.jsxs)(L,{type:"secondary",style:{fontSize:"12px"},children:[t.height,"h \xd7 ",t.baseA,"w \u2192 ",t.baseB,"w"]})]})})},s)}))})})}),(0,A.jsx)(d.A,{span:24,children:(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"24px"},children:[(0,A.jsx)(m.Ay,{size:"large",onClick:p,children:"Back to Setup"}),(0,A.jsx)(m.Ay,{size:"large",type:"primary",onClick:()=>{l.name&&""!==l.name.trim()?0!==Object.keys(j).length?x():o.Ay.warning("Please create or modify at least one panel to continue"):o.Ay.warning("Please enter a pattern name")},disabled:0===Object.keys(j).length,children:"Next: Sizing"})]})})]}),(0,A.jsx)(H,{visible:!!b,shapeData:b,existingShapes:j,onSave:e=>{const s=(0,i.A)((0,i.A)({},j),{},{[e.name]:e.shape});f(s),h((0,i.A)((0,i.A)({},l),{},{customShapes:s,basePattern:{id:"custom",name:"Custom Pattern",description:"Custom designed pattern",shapes:s}})),S(null)},onCancel:()=>S(null)}),(0,A.jsx)(B.A,{title:null===k||void 0===k?void 0:k.name,open:!!k,onCancel:()=>z(null),footer:null,width:400,children:k&&(0,A.jsx)("div",{style:{textAlign:"center"},children:(0,A.jsx)(w,{shape:k.shape,label:"",size:300,padding:20})})})]})};var F=t(9540),G=t(4786),U=t(45);const K=["panel","title","subtitle","scaleFactor","showInfoText","infoText","containerPadding","diagramSizeMin","diagramSizeMax","scalingMultiplier"],{Text:q}=x.A,J=e=>{let{panel:s,title:t="Pattern Dimensions",subtitle:n="Pattern dimensions with current scaling applied.",scaleFactor:r=1,showInfoText:l=!0,infoText:o="Dimension lines show the total pattern dimensions after scaling.",containerPadding:c="20px 10px",diagramSizeMin:d=200,diagramSizeMax:h=500,scalingMultiplier:x=8}=e,p=(0,U.A)(e,K);if(!s)return(0,A.jsx)(a.A,(0,i.A)((0,i.A)({title:t},p),{},{children:(0,A.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px",color:"#666",fontSize:"16px"},children:"No pattern data available"})}));const g=function(e){let s={minX:0,maxX:0,minY:0,maxY:0};const t=function(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const l=Math.max(e.baseA,e.baseB)*i,o=n+(l-e.baseB*i)/2+(e.baseBHorizontalOffset||0)*i,a=n+(l+e.baseB*i)/2+(e.baseBHorizontalOffset||0)*i,c=n+(l-e.baseA*i)/2,d=n+(l+e.baseA*i)/2,h=r,x=r+e.height*i;if(s.minX=Math.min(s.minX,o,a,c,d),s.maxX=Math.max(s.maxX,o,a,c,d),s.minY=Math.min(s.minY,h,x),s.maxY=Math.max(s.maxY,h,x),e.successors&&e.successors.length>0){const s=e.successors.map((e=>Math.max(e.baseA,e.baseB)*i));let r=n+(l-s.reduce(((e,s)=>e+s),0))/2;for(let n=e.successors.length-1;n>=0;n--){const l=e.successors[n];t(l,i,r,h-l.height*i),r+=s[n]}}};return t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,0,0),{width:s.maxX-s.minX,height:s.maxY-s.minY,minX:s.minX,maxX:s.maxX,minY:s.minY,maxY:s.maxY}},m=g(s,1),u=g(s,r),j=Math.max(m.width*x,m.height*x,d),f=Math.min(j+80,h),y=Math.min(f-40,j),v=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i={minX:0,maxX:0,minY:0,maxY:0};const n=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const l=Math.max(e.baseA,e.baseB)*s,o=t+(l-e.baseB*s)/2+(e.baseBHorizontalOffset||0)*s,a=t+(l+e.baseB*s)/2+(e.baseBHorizontalOffset||0)*s,c=t+(l-e.baseA*s)/2,d=t+(l+e.baseA*s)/2,h=r,x=r+e.height*s;if(i.minX=Math.min(i.minX,o,a,c,d),i.maxX=Math.max(i.maxX,o,a,c,d),i.minY=Math.min(i.minY,h,x),i.maxY=Math.max(i.maxY,h,x),e.successors&&e.successors.length>0){const i=e.successors.map((e=>Math.max(e.baseA,e.baseB)*s));let r=t+(l-i.reduce(((e,s)=>e+s),0))/2;for(let t=e.successors.length-1;t>=0;t--){const l=e.successors[t];n(l,s,r,h-l.height*s),r+=i[t]}}};n(e,1,0,0);const r=i.maxX-i.minX,l=i.maxY-i.minY,o=s-2*t,a=s-2*t,c=Math.min(o/r,a/l),d=r*c,h=l*c;return{scaledWidth:d,scaledHeight:h,translateX:(s-d)/2-i.minX*c+t,translateY:(s-h)/2-i.minY*c+t,scaleFactor:c,originalWidth:r,originalHeight:l}}(s,y,10),b=u.width,S=u.height;return(0,A.jsxs)(a.A,(0,i.A)((0,i.A)({title:(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:{fontWeight:"bold"},children:t}),(0,A.jsx)("div",{style:{fontSize:"12px",color:"#666",fontWeight:"normal"},children:n})]})},p),{},{children:[(0,A.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",padding:c},children:(0,A.jsxs)("div",{style:{position:"relative",display:"inline-block",width:"".concat(f+120,"px")},children:[(0,A.jsx)("div",{style:{position:"relative",width:"".concat(f,"px"),height:"".concat(f,"px"),margin:"0 auto",marginLeft:"60px",marginTop:"40px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,A.jsx)(w,{shape:s,size:y,padding:10})}),(0,A.jsxs)("svg",{style:{position:"absolute",top:"0px",left:"0px",width:"".concat(f+120,"px"),height:"".concat(f+80,"px"),pointerEvents:"none",zIndex:1},children:[(0,A.jsxs)("defs",{children:[(0,A.jsx)("marker",{id:"arrowStart",markerWidth:"8",markerHeight:"8",refX:"2",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:(0,A.jsx)("path",{d:"M6,3 L1,1 L1,5 Z",fill:"#333",stroke:"#333",strokeWidth:"0.5"})}),(0,A.jsx)("marker",{id:"arrowEnd",markerWidth:"8",markerHeight:"8",refX:"6",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:(0,A.jsx)("path",{d:"M1,3 L6,1 L6,5 Z",fill:"#333",stroke:"#333",strokeWidth:"0.5"})})]}),(()=>{const e=60+(f-y)/2,s=40+(f-y)/2,t=e+y/2,i=s+y/2,n=t-v.scaledWidth/2,r=i-v.scaledHeight/2,l=n+v.scaledWidth,o=r+v.scaledHeight;return console.log("SVG Pattern Position (Fixed):",{patternLeft:n,patternTop:r,patternRight:l,patternBottom:o,panelCenterX:t,panelCenterY:i,panelLeft:e,panelTop:s,panelBounds:v}),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("g",{children:[(0,A.jsx)("line",{x1:n,y1:r,x2:n,y2:r-35,stroke:"#999",strokeWidth:"0.6",strokeDasharray:"1,2"}),(0,A.jsx)("line",{x1:l,y1:r,x2:l,y2:r-35,stroke:"#999",strokeWidth:"0.6",strokeDasharray:"1,2"}),(0,A.jsx)("line",{x1:n,y1:r-35,x2:n,y2:r-40,stroke:"#666",strokeWidth:"0.8",strokeDasharray:"1,1"}),(0,A.jsx)("line",{x1:l,y1:r-35,x2:l,y2:r-40,stroke:"#666",strokeWidth:"0.8",strokeDasharray:"1,1"}),(0,A.jsx)("line",{x1:n,y1:r-37,x2:l,y2:r-37,stroke:"#333",strokeWidth:"1",markerStart:"url(#arrowStart)",markerEnd:"url(#arrowEnd)"}),(0,A.jsx)("rect",{x:(n+l)/2-18,y:r-45,width:"36",height:"14",fill:"white",stroke:"#ddd",strokeWidth:"0.3",rx:"1"}),(0,A.jsxs)("text",{x:(n+l)/2,y:r-35,textAnchor:"middle",fontSize:"11",fontWeight:"600",fill:"#333",fontFamily:"Arial, sans-serif",children:[Math.round(b),"\u2033"]})]}),(0,A.jsxs)("g",{children:[(0,A.jsx)("line",{x1:n,y1:r,x2:n-35,y2:r,stroke:"#999",strokeWidth:"0.6",strokeDasharray:"1,2"}),(0,A.jsx)("line",{x1:n,y1:o,x2:n-35,y2:o,stroke:"#999",strokeWidth:"0.6",strokeDasharray:"1,2"}),(0,A.jsx)("line",{x1:n-35,y1:r,x2:n-40,y2:r,stroke:"#666",strokeWidth:"0.8",strokeDasharray:"1,1"}),(0,A.jsx)("line",{x1:n-35,y1:o,x2:n-40,y2:o,stroke:"#666",strokeWidth:"0.8",strokeDasharray:"1,1"}),(0,A.jsx)("line",{x1:n-37,y1:r,x2:n-37,y2:o,stroke:"#333",strokeWidth:"1",markerStart:"url(#arrowStart)",markerEnd:"url(#arrowEnd)"}),(0,A.jsx)("rect",{x:n-55,y:(r+o)/2-7,width:"36",height:"14",fill:"white",stroke:"#ddd",strokeWidth:"0.3",rx:"1"}),(0,A.jsxs)("text",{x:n-35,y:(r+o)/2+4,textAnchor:"middle",fontSize:"11",fontWeight:"600",fill:"#333",fontFamily:"Arial, sans-serif",children:[Math.round(S),"\u2033"]})]}),(0,A.jsx)("g",{children:(()=>{const e=(n+l)/2,s=(r+o)/2;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("rect",{x:e-38,y:s-11,width:"76",height:"22",fill:"rgba(0, 0, 0, 0.1)",rx:"2",transform:"translate(1, 1)"}),(0,A.jsx)("rect",{x:e-38,y:s-11,width:"76",height:"22",fill:"white",stroke:"#ddd",strokeWidth:"0.3",rx:"2"}),(0,A.jsxs)("text",{x:e,y:s+4,textAnchor:"middle",fontSize:"13",fontWeight:"600",fill:"#333",fontFamily:"Arial, sans-serif",letterSpacing:"0.5px",children:[Math.round(b),"\u2033 \xd7 ",Math.round(S),"\u2033"]})]})})()})]})})()]})]})}),l&&(0,A.jsx)("div",{style:{marginTop:"16px"},children:(0,A.jsxs)(q,{type:"secondary",style:{fontSize:"12px"},children:[(0,A.jsx)(G.A,{style:{marginRight:"4px"}}),o]})})]}))};var V=t(8110);const{Title:Z,Text:_,Paragraph:Q}=x.A,{Option:$}=C.A,ee=e=>{let{onNext:s,onPrevious:t}=e;const l=(0,r.wA)(),o=(0,r.d4)((e=>e.knittingDesign.patternData)),h=(null===o||void 0===o?void 0:o.sizing)||{},[x,p]=(0,n.useState)({}),u=40,j=27,f=25,y=e=>Math.pow(1.1,e),v=["XXS","XS","S","M","L","XL","XXL"],b=e=>{const s={};return v.forEach((t=>{const i=(e=>v.indexOf(e)-3)(t);let n;if("mens"===e)n=y(i);else{n=y(i-1)}s[t]={chest:Math.round(u*n),length:Math.round(j*n),armLength:Math.round(f*n)}})),s};(0,n.useEffect)((()=>{if("standard"===(null===h||void 0===h?void 0:h.method)){const e=h.gender||"womens",s=h.standardSize||"M",t=b(e)[s];p(t)}else if("percentage"===(null===h||void 0===h?void 0:h.method)){const e=h.gender||"womens",s=h.standardSize||"M",t=b(e)[s],i={};Object.keys(t).forEach((e=>{i[e]=Math.round(t[e]*((h.scale||100)/100)*10)/10})),p(i)}else"custom"===(null===h||void 0===h?void 0:h.method)&&p(h.customDimensions||{})}),[h]);const w=e=>{l((0,V.g6)({section:"sizing",data:(0,i.A)((0,i.A)({},h),e)}))},S=e=>{w({gender:e})},k=e=>{w({standardSize:e})},z=e=>{w({scale:e})},P=(e,s,t)=>{if(null===h||void 0===h||!h.customDimensions)return;const n=(0,i.A)((0,i.A)({},h.customDimensions),{},{[e]:(0,i.A)((0,i.A)({},h.customDimensions[e]||{}),{},{[s]:t})});w({customDimensions:n})},M=(()=>{var e;if(null===o||void 0===o||null===(e=o.basePattern)||void 0===e||!e.shapes)return[];const s=o.basePattern.shapes;return Object.entries(s).map((e=>{let[s,t]=e;return{name:s,shape:t}}))})();let B=1;var N;if(h&&Object.keys(h).length>0)if("standard"===h.method||"percentage"===h.method){const e=h.gender||"womens",s=h.standardSize||"M",t=b(e)[s];if(t&&M.length>0){var W;const e=null===(W=M[0])||void 0===W?void 0:W.shape;if(null!==e&&void 0!==e&&e.baseA){const e=t.chest/u;B="percentage"===h.method?e*((h.scale||100)/100):e}}}else if("custom"===h.method&&null!==(N=h.customDimensions)&&void 0!==N&&N.chest&&M.length>0){var D;const e=null===(D=M[0])||void 0===D?void 0:D.shape;null!==e&&void 0!==e&&e.baseA&&(B=h.customDimensions.chest/e.baseA)}return(0,A.jsx)("div",{className:"sizing-step",children:(0,A.jsxs)(c.A,{gutter:[24,24],children:[(0,A.jsx)(d.A,{span:24,children:(0,A.jsxs)(a.A,{children:[(0,A.jsx)(Z,{level:2,children:"Pattern Sizing"}),(0,A.jsx)(Q,{type:"secondary",children:"Choose how you want to size your pattern. You can scale proportionally or input custom measurements."})]})}),(0,A.jsx)(d.A,{lg:12,md:24,children:(0,A.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:M.length>0?M.map(((e,s)=>{var t;let{name:i,shape:n}=e;return(0,A.jsx)(J,{panel:n,title:i,subtitle:"".concat((null===o||void 0===o||null===(t=o.basePattern)||void 0===t?void 0:t.name)||"Pattern"," - ").concat(i," panel"),scaleFactor:B,diagramSizeMin:200,diagramSizeMax:333,scalingMultiplier:4,containerPadding:12,showInfoText:!1},"".concat(i,"-").concat(s))})):(0,A.jsx)("div",{style:{textAlign:"center",padding:"40px 20px",background:"#fafafa",borderRadius:"8px",border:"1px dashed #d9d9d9"},children:(0,A.jsx)(_,{type:"secondary",children:"No pattern shapes available. Please select a pattern in the previous step."})})})}),(0,A.jsx)(d.A,{lg:12,md:24,children:(0,A.jsx)(a.A,{title:"Sizing Method",children:(0,A.jsxs)(g.A,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,A.jsx)(C.A,{value:(null===h||void 0===h?void 0:h.method)||"percentage",onChange:e=>{const s={method:e};"standard"===e?(s.gender=(null===h||void 0===h?void 0:h.gender)||"womens",s.standardSize=(null===h||void 0===h?void 0:h.standardSize)||"M"):"percentage"===e?(s.gender=(null===h||void 0===h?void 0:h.gender)||"womens",s.standardSize=(null===h||void 0===h?void 0:h.standardSize)||"M",s.scale=(null===h||void 0===h?void 0:h.scale)||100):"custom"===e&&(s.customDimensions=(null===h||void 0===h?void 0:h.customDimensions)||{front:{width:38,height:23},back:{width:38,height:23},leftSleeve:{width:15,height:24},rightSleeve:{width:15,height:24}}),w(s)},style:{width:"100%"},size:"large",placeholder:"Select sizing method",children:[{value:"standard",label:"Standard Sizes",description:"Choose from predefined men's or women's sizing"},{value:"percentage",label:"Scale by Percentage",description:"Scale a standard size by percentage"},{value:"custom",label:"Custom Dimensions",description:"Adjust individual panel dimensions independently"}].map((e=>(0,A.jsx)($,{value:e.value,children:(0,A.jsxs)("div",{style:{padding:"4px 0"},children:[(0,A.jsx)("div",{style:{fontWeight:"bold",lineHeight:"1.2"},children:e.label}),(0,A.jsx)("div",{style:{fontSize:"12px",color:"#666",lineHeight:"1.2",marginTop:"2px"},children:e.description})]})},e.value)))}),(0,A.jsx)(T.A,{}),"standard"===(null===h||void 0===h?void 0:h.method)?(0,A.jsxs)(g.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,A.jsx)(_,{strong:!0,children:"Gender"}),(0,A.jsxs)(C.A,{value:h.gender||"womens",onChange:S,style:{width:"100%"},children:[(0,A.jsx)($,{value:"womens",children:"Women's"}),(0,A.jsx)($,{value:"mens",children:"Men's"})]}),(0,A.jsx)(_,{strong:!0,children:"Size"}),(0,A.jsx)(c.A,{gutter:8,children:Object.keys(b(h.gender||"womens")).map((e=>(0,A.jsx)(d.A,{children:(0,A.jsx)(m.Ay,{size:"small",onClick:()=>k(e),type:(h.standardSize||"M")===e?"primary":"default",children:e})},e)))})]}):"percentage"===(null===h||void 0===h?void 0:h.method)?(0,A.jsxs)(g.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,A.jsx)(_,{strong:!0,children:"Base Size"}),(0,A.jsxs)(c.A,{gutter:16,align:"middle",children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(C.A,{value:h.gender||"womens",onChange:S,style:{width:"100%"},children:[(0,A.jsx)($,{value:"womens",children:"Women's"}),(0,A.jsx)($,{value:"mens",children:"Men's"})]})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsx)(C.A,{value:h.standardSize||"M",onChange:k,style:{width:"100%"},children:Object.keys(b(h.gender||"womens")).map((e=>(0,A.jsx)($,{value:e,children:e},e)))})})]}),(0,A.jsx)(_,{strong:!0,children:"Scale Percentage"}),(0,A.jsxs)(c.A,{gutter:16,align:"middle",children:[(0,A.jsx)(d.A,{flex:1,children:(0,A.jsx)(F.A,{min:50,max:200,step:5,value:(null===h||void 0===h?void 0:h.scale)||100,onChange:z,marks:{50:"50%",100:"100%",150:"150%",200:"200%"}})}),(0,A.jsx)(d.A,{children:(0,A.jsx)(I.A,{min:50,max:200,value:(null===h||void 0===h?void 0:h.scale)||100,onChange:z,formatter:e=>"".concat(e,"%"),parser:e=>e.replace("%",""),style:{width:"80px"}})})]}),(0,A.jsx)(a.A,{size:"small",style:{backgroundColor:"#f6ffed",border:"1px solid #b7eb8f"},children:(0,A.jsxs)(g.A,{align:"center",children:[(0,A.jsx)(G.A,{style:{color:"#52c41a"}}),(0,A.jsxs)(_,{children:["Scaling at ",(null===h||void 0===h?void 0:h.scale)||100,"% of ","mens"===(null===h||void 0===h?void 0:h.gender)?"Men's":"Women's"," ",(null===h||void 0===h?void 0:h.standardSize)||"M"," size"]})]})})]}):(0,A.jsxs)(g.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,A.jsx)(_,{strong:!0,children:"Individual Panel Dimensions"}),(0,A.jsx)(_,{type:"secondary",style:{fontSize:"12px"},children:"Adjust width and height for each panel independently"}),(null===h||void 0===h?void 0:h.customDimensions)&&Object.entries(h.customDimensions).map((e=>{let[s,t]=e;return(0,A.jsx)(a.A,{size:"small",title:s.charAt(0).toUpperCase()+s.slice(1),children:(0,A.jsxs)(c.A,{gutter:16,children:[(0,A.jsxs)(d.A,{span:12,children:[(0,A.jsx)(_,{children:"Width (inches):"}),(0,A.jsx)(I.A,{min:10,max:60,step:.5,value:t.width,onChange:e=>P(s,"width",e),style:{width:"100%",marginTop:"4px"}})]}),(0,A.jsxs)(d.A,{span:12,children:[(0,A.jsx)(_,{children:"Height (inches):"}),(0,A.jsx)(I.A,{min:10,max:40,step:.5,value:t.height,onChange:e=>P(s,"height",e),style:{width:"100%",marginTop:"4px"}})]})]})},s)}))]})]})})}),(0,A.jsx)(d.A,{span:24,children:(0,A.jsx)(a.A,{title:"Preview Dimensions",children:(0,A.jsxs)(g.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,A.jsx)(_,{strong:!0,children:"Calculated Garment Dimensions:"}),(0,A.jsx)("div",{className:"dimension-preview",children:"custom"===(null===h||void 0===h?void 0:h.method)&&null!==h&&void 0!==h&&h.customDimensions?(0,A.jsx)(c.A,{gutter:[16,16],children:Object.entries((null===h||void 0===h?void 0:h.customDimensions)||{}).map((e=>{let[s,t]=e;return(0,A.jsx)(d.A,{span:12,children:(0,A.jsx)(a.A,{size:"small",className:"dimension-card",children:(0,A.jsxs)("div",{style:{textAlign:"center"},children:[(0,A.jsxs)("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#1890ff"},children:[(null===t||void 0===t?void 0:t.width)||"--",'" \xd7 ',(null===t||void 0===t?void 0:t.height)||"--",'"']}),(0,A.jsx)("div",{style:{color:"#666"},children:s.charAt(0).toUpperCase()+s.slice(1)})]})})},s)}))}):(0,A.jsxs)(c.A,{gutter:[16,16],children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsx)(a.A,{size:"small",className:"dimension-card",children:(0,A.jsxs)("div",{style:{textAlign:"center"},children:[(0,A.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1890ff"},children:[x.chest||"--",'"']}),(0,A.jsx)("div",{style:{color:"#666"},children:"Chest"})]})})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsx)(a.A,{size:"small",className:"dimension-card",children:(0,A.jsxs)("div",{style:{textAlign:"center"},children:[(0,A.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#52c41a"},children:[x.length||"--",'"']}),(0,A.jsx)("div",{style:{color:"#666"},children:"Length"})]})})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsx)(a.A,{size:"small",className:"dimension-card",children:(0,A.jsxs)("div",{style:{textAlign:"center"},children:[(0,A.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#fa8c16"},children:[x.armLength||"--",'"']}),(0,A.jsx)("div",{style:{color:"#666"},children:"Arm Length"})]})})})]})}),(0,A.jsx)(a.A,{size:"small",style:{backgroundColor:"#fafafa"},children:(0,A.jsxs)(_,{type:"secondary",style:{fontSize:"12px"},children:[(0,A.jsx)(G.A,{style:{marginRight:"4px"}}),"These dimensions will be used to calculate stitch counts in the next step. Final measurements may vary slightly based on gauge and yarn choice."]})})]})})}),(0,A.jsx)(d.A,{span:24,children:(0,A.jsx)("div",{style:{textAlign:"right",marginTop:"24px"},children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(m.Ay,{size:"large",onClick:t,children:"Previous"}),(0,A.jsx)(m.Ay,{size:"large",type:"primary",onClick:()=>{s()},children:"Next: Gauge"})]})})})]})})};var se=t(6399),te=t(6237);const{Title:ie,Text:ne,Paragraph:re}=x.A,{Option:le}=C.A,oe={0:{name:"Lace",stitches:33,rows:41,needleSize:"1.5-2.25mm"},1:{name:"Super Fine",stitches:27,rows:37,needleSize:"2.25-3.25mm"},2:{name:"Fine",stitches:23,rows:32,needleSize:"3.25-3.75mm"},3:{name:"Light",stitches:21,rows:28,needleSize:"3.75-4.5mm"},4:{name:"Medium",stitches:16,rows:20,needleSize:"4.5-5.5mm"},5:{name:"Bulky",stitches:12,rows:16,needleSize:"5.5-8mm"},6:{name:"Super Bulky",stitches:7,rows:9,needleSize:"8mm+"},custom:{name:"Custom",stitches:0,rows:0,needleSize:"Custom"}},ae=e=>{var s,t;let{data:r,onUpdate:l,onNext:h,onPrev:x}=e;const[p,u]=(0,n.useState)(r.gauge||{stitches:19,rows:30,yarnWeight:"4",needleSize:"6",swatchSize:4}),[j,f]=(0,n.useState)({}),[y,v]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(p.stitches&&p.rows&&r.sizing){const e=b();f(e)}}),[p,r.sizing]);const b=()=>{const{stitches:e,rows:s}=p,t=r.sizing;if("percentage"===t.method){const i={chest:40,length:24,armLength:25},n=t.scale/100;return{chest:Math.round(i.chest*n*e),length:Math.round(i.length*n*s),armLength:Math.round(i.armLength*n*s),fabricWidth:(i.chest*n).toFixed(1),fabricLength:(i.length*n).toFixed(1)}}{const{chest:i,length:n,armLength:r}=t.customDimensions;return{chest:Math.round(i*e),length:Math.round(n*s),armLength:Math.round(r*s),fabricWidth:i.toFixed(1),fabricLength:n.toFixed(1)}}},w=(e,s)=>{u((t=>(0,i.A)((0,i.A)({},t),{},{[e]:s})))};return(0,A.jsxs)("div",{className:"gauge-step",children:[(0,A.jsxs)(c.A,{gutter:[24,24],children:[(0,A.jsx)(d.A,{xs:24,lg:14,children:(0,A.jsx)(a.A,{title:"Gauge Settings",className:"settings-card",children:(0,A.jsxs)(g.A,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(ie,{level:5,children:"Yarn Weight"}),(0,A.jsx)(C.A,{value:p.yarnWeight,onChange:e=>{if("custom"===e)return void u((s=>(0,i.A)((0,i.A)({},s),{},{yarnWeight:e})));const s=oe[e];u((t=>(0,i.A)((0,i.A)({},t),{},{yarnWeight:e,stitches:s.stitches,rows:s.rows,needleSize:s.needleSize})))},style:{width:"100%"},placeholder:"Select yarn weight",children:Object.entries(oe).map((e=>{let[s,t]=e;return(0,A.jsx)(le,{value:s,children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(ne,{strong:!0,children:t.name}),"custom"!==s&&(0,A.jsxs)(ne,{type:"secondary",children:["(",t.stitches," sts, ",t.rows," rows per inch)"]})]})},s)}))})]}),(0,A.jsx)(T.A,{}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ie,{level:5,children:(0,A.jsxs)(g.A,{children:["Gauge (per inch)",(0,A.jsx)(G.A,{style:{color:"#1890ff"}})]})}),(0,A.jsxs)(c.A,{gutter:16,children:[(0,A.jsxs)(d.A,{span:12,children:[(0,A.jsx)(ne,{children:"Stitches per inch"}),(0,A.jsx)(I.A,{value:p.stitches,onChange:e=>w("stitches",e),min:1,max:50,step:.5,style:{width:"100%"},placeholder:"19"})]}),(0,A.jsxs)(d.A,{span:12,children:[(0,A.jsx)(ne,{children:"Rows per inch"}),(0,A.jsx)(I.A,{value:p.rows,onChange:e=>w("rows",e),min:1,max:60,step:.5,style:{width:"100%"},placeholder:"30"})]})]})]}),(0,A.jsx)(T.A,{}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ie,{level:5,children:"Calculate from Swatch"}),(0,A.jsx)(re,{type:"secondary",children:"Measure your gauge swatch and let us calculate the gauge for you."}),(0,A.jsxs)(c.A,{gutter:16,children:[(0,A.jsxs)(d.A,{span:8,children:[(0,A.jsx)(ne,{children:"Swatch size (inches)"}),(0,A.jsx)(I.A,{value:p.swatchSize,onChange:e=>w("swatchSize",e),min:1,max:10,step:.5,style:{width:"100%"},placeholder:"4"})]}),(0,A.jsxs)(d.A,{span:8,children:[(0,A.jsx)(ne,{children:"Stitches in swatch"}),(0,A.jsx)(I.A,{value:p.swatchStitches,onChange:e=>w("swatchStitches",e),min:1,style:{width:"100%"},placeholder:"76"})]}),(0,A.jsxs)(d.A,{span:8,children:[(0,A.jsx)(ne,{children:"Rows in swatch"}),(0,A.jsx)(I.A,{value:p.swatchRows,onChange:e=>w("swatchRows",e),min:1,style:{width:"100%"},placeholder:"120"})]})]}),(0,A.jsx)(m.Ay,{type:"primary",ghost:!0,onClick:()=>{if(!p.swatchStitches||!p.swatchRows||!p.swatchSize)return void o.Ay.error("Please fill in all swatch measurements");const e=p.swatchStitches/p.swatchSize,s=p.swatchRows/p.swatchSize;u((t=>(0,i.A)((0,i.A)({},t),{},{stitches:Math.round(10*e)/10,rows:Math.round(10*s)/10}))),v(!0),o.Ay.success("Gauge calculated from swatch measurements")},style:{marginTop:16},children:"Calculate Gauge from Swatch"}),y&&(0,A.jsxs)(se.A,{color:"green",style:{marginTop:8},children:[(0,A.jsx)(te.A,{})," Calculated from swatch"]})]}),(0,A.jsx)(T.A,{}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ie,{level:5,children:"Needle Size"}),(0,A.jsx)(I.A,{value:p.needleSize,onChange:e=>w("needleSize",e),style:{width:"100%"},placeholder:"6 (US)",addonAfter:"US"})]})]})})}),(0,A.jsx)(d.A,{xs:24,lg:10,children:(0,A.jsx)(a.A,{title:"Calculated Fabric Dimensions",className:"preview-card",children:(0,A.jsxs)(g.A,{direction:"vertical",size:"medium",style:{width:"100%"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(ie,{level:5,children:"Stitch Counts"}),(0,A.jsxs)(c.A,{gutter:[16,8],children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"dimension-card",children:[(0,A.jsx)(ne,{type:"secondary",children:"Chest"}),(0,A.jsx)("br",{}),(0,A.jsxs)(ne,{strong:!0,style:{fontSize:"18px",color:"#1890ff"},children:[j.chest," stitches"]})]})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"dimension-card",children:[(0,A.jsx)(ne,{type:"secondary",children:"Length"}),(0,A.jsx)("br",{}),(0,A.jsxs)(ne,{strong:!0,style:{fontSize:"18px",color:"#52c41a"},children:[j.length," rows"]})]})})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ie,{level:5,children:"Finished Measurements"}),(0,A.jsxs)(c.A,{gutter:[16,8],children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"dimension-card",children:[(0,A.jsx)(ne,{type:"secondary",children:"Width"}),(0,A.jsx)("br",{}),(0,A.jsxs)(ne,{strong:!0,style:{fontSize:"16px"},children:[j.fabricWidth,'"']})]})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"dimension-card",children:[(0,A.jsx)(ne,{type:"secondary",children:"Length"}),(0,A.jsx)("br",{}),(0,A.jsxs)(ne,{strong:!0,style:{fontSize:"16px"},children:[j.fabricLength,'"']})]})})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ie,{level:5,children:"Current Gauge"}),(0,A.jsxs)(a.A,{size:"small",style:{textAlign:"center"},children:[(0,A.jsxs)(ne,{strong:!0,style:{fontSize:"20px",color:"#722ed1"},children:[p.stitches," \xd7 ",p.rows]}),(0,A.jsx)("br",{}),(0,A.jsx)(ne,{type:"secondary",children:"stitches \xd7 rows per inch"})]})]}),"custom"!==p.yarnWeight&&(0,A.jsxs)("div",{children:[(0,A.jsx)(ie,{level:5,children:"Yarn Information"}),(0,A.jsxs)(a.A,{size:"small",children:[(0,A.jsxs)(ne,{strong:!0,children:[null===(s=oe[p.yarnWeight])||void 0===s?void 0:s.name," Weight"]}),(0,A.jsx)("br",{}),(0,A.jsxs)(ne,{type:"secondary",children:["Recommended: ",null===(t=oe[p.yarnWeight])||void 0===t?void 0:t.needleSize]})]})]})]})})})]}),(0,A.jsx)("div",{className:"step-actions",children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(m.Ay,{size:"large",onClick:x,children:"Previous: Sizing"}),(0,A.jsx)(m.Ay,{size:"large",type:"primary",onClick:()=>{l({gauge:p}),o.Ay.success("Gauge settings saved"),h()},children:"Next: Colorwork"})]})})]})};var ce=t(8918),de=t(5964),he=t(1097),xe=t(6651),pe=t(647),ge=t(7490),me=t(2261),ue=t(9025),je=t(9933),fe=t(2692),ye=t(8810),ve=t(5037),Ae=t(8143);const be=e=>{let{color:s="#ffffff",size:t=12,strokeColor:n="#cccccc",strokeWidth:r=.5,style:l={},className:o="",onClick:a=null}=e;"knit-stitch-".concat(Math.random().toString(36).substr(2,9));return(0,A.jsxs)("svg",{width:t,height:.8*t,viewBox:"0 0 20 16",style:(0,i.A)({display:"block",cursor:a?"pointer":"default"},l),className:o,onClick:a,children:[(0,A.jsx)("path",{d:"M 0 0 L 10 12 L 20 0 L 20 16 L 15 16 L 10 8 L 5 16 L 0 16 Z",fill:s,stroke:n,strokeWidth:r}),(0,A.jsx)("path",{d:"M 2 2 L 10 10 L 18 2",fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:"1",strokeLinecap:"round"})]})},we=e=>{let{pattern:s=[],colors:t=["#ffffff"],gauge:r={stitches:19,rows:30},size:l={width:4,height:4},onStitchClick:o=null,className:a="",style:c={},showScrollbars:d=!1,maxDisplayStitches:h=1e3}=e;const x=(0,n.useMemo)((()=>{const e=Math.round(l.width*r.stitches),s=Math.round(l.height*r.rows);return{stitchesWide:e,rowsHigh:s,stitchSize:Math.min(16,Math.max(4,400/Math.max(e,s))),totalStitches:e*s}}),[l,r]),p=(0,n.useMemo)((()=>{const{stitchesWide:e,rowsHigh:i}=x;x.totalStitches>h&&console.warn("SwatchViewer: ".concat(x.totalStitches," stitches exceeds limit of ").concat(h,". Consider using scrollable view."));const n=[];for(let r=0;r<i;r++){const i=[];for(let n=0;n<e;n++){let e=0;if(s.length>0)if(Array.isArray(s[0])){const t=r%s.length,i=n%s[t].length;e=s[t][i]}else e=s[r%s.length];e=Math.min(e,t.length-1),i.push({row:r,stitch:n,colorIndex:e,color:t[e]||t[0]||"#ffffff",key:"".concat(r,"-").concat(n)})}n.push(i)}return n}),[s,t,x,h]),g=(0,n.useCallback)(((e,s)=>{o&&o(e,s)}),[o]);if(x.totalStitches>h&&!d)return(0,A.jsxs)("div",{style:(0,i.A)({padding:"20px",textAlign:"center",border:"2px dashed #ccc",borderRadius:"8px",backgroundColor:"#fafafa"},c),className:a,children:[(0,A.jsxs)("p",{children:["Pattern too large to display (",x.totalStitches," stitches)"]}),(0,A.jsx)("p",{children:"Enable scrollbars or reduce pattern size"}),(0,A.jsxs)("small",{children:["Size: ",x.stitchesWide," \xd7 ",x.rowsHigh," stitches"]})]});const m=(0,i.A)({display:"inline-block",border:"1px solid #ddd",borderRadius:"4px",padding:"8px",backgroundColor:"#fff"},c),u={display:"grid",gridTemplateColumns:"repeat(".concat(x.stitchesWide,", ").concat(x.stitchSize,"px)"),gap:"0px",lineHeight:0,maxWidth:d?"400px":"none",maxHeight:d?"400px":"none",overflow:d?"auto":"visible"};return(0,A.jsxs)("div",{className:a,style:m,children:[(0,A.jsx)("div",{style:u,children:p.map((e=>e.map((e=>{let{row:s,stitch:t,color:i,key:n}=e;return(0,A.jsx)(be,{color:i,size:x.stitchSize,strokeWidth:x.stitchSize>8?.5:.25,onClick:o?()=>g(s,t):null,style:{width:x.stitchSize,height:.75*x.stitchSize}},n)}))))}),(0,A.jsxs)("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666",textAlign:"center"},children:[x.stitchesWide," \xd7 ",x.rowsHigh," stitches (",l.width,'" \xd7 ',l.height,'")']})]})},{Title:Se,Text:ke}=x.A,{Option:ze}=C.A,Ce=e=>{let{pattern:s=[],colors:t=["#ffffff"],patternType:r="stranded",patternSize:l={width:8,height:8},gauge:o={stitches:19,rows:30},onPatternChange:h=()=>{},onColorsChange:x=()=>{},onSave:p=()=>{},title:u="Pattern Editor"}=e;const[j,f]=(0,n.useState)(0),[y,v]=(0,n.useState)(""),b=(0,n.useCallback)((()=>0===s.length?"stripes"===r?new Array(l.height).fill(0):Array(l.height).fill(null).map((()=>new Array(l.width).fill(0))):s),[s,r,l])(),w=(0,n.useCallback)(((e,s)=>{const t=[...b];"stripes"===r?t[e]=j:(t[e]||(t[e]=new Array(l.width).fill(0)),t[e]=[...t[e]],t[e][s]=j),h(t)}),[b,j,r,l,h]),S=(e,s)=>{const t=(0,i.A)((0,i.A)({},l),{},{[e]:s});let n;if("stripes"===r){n=new Array(t.height).fill(0);for(let e=0;e<Math.min(b.length,t.height);e++)n[e]=b[e]||0}else n=Array(t.height).fill(null).map(((e,s)=>{const i=new Array(t.width).fill(0);if(b[s])for(let n=0;n<Math.min(b[s].length,t.width);n++)i[n]=b[s][n];return i}));h(n)};return(0,A.jsx)(a.A,{title:u,style:{height:"fit-content"},children:(0,A.jsxs)(g.A,{direction:"vertical",size:"medium",style:{width:"100%"},children:[(0,A.jsxs)(c.A,{gutter:16,children:[(0,A.jsxs)(d.A,{span:8,children:[(0,A.jsx)(ke,{strong:!0,children:"Pattern Type"}),(0,A.jsxs)(C.A,{value:r,style:{width:"100%"},disabled:!0,children:[(0,A.jsx)(ze,{value:"stranded",children:"Stranded"}),(0,A.jsx)(ze,{value:"intarsia",children:"Intarsia"}),(0,A.jsx)(ze,{value:"stripes",children:"Stripes"})]})]}),"stripes"!==r&&(0,A.jsxs)(d.A,{span:8,children:[(0,A.jsx)(ke,{strong:!0,children:"Width (stitches)"}),(0,A.jsx)(I.A,{value:l.width,onChange:e=>S("width",e),min:1,max:50,style:{width:"100%"}})]}),(0,A.jsxs)(d.A,{span:8,children:[(0,A.jsx)(ke,{strong:!0,children:"stripes"===r?"Rows":"Height (rows)"}),(0,A.jsx)(I.A,{value:l.height,onChange:e=>S("height",e),min:1,max:50,style:{width:"100%"}})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,A.jsx)(ke,{strong:!0,children:"Color Palette"}),(0,A.jsx)(m.Ay,{size:"small",icon:(0,A.jsx)(N.A,{}),onClick:()=>{const e=[...t,"#ffffff"];x(e)},disabled:t.length>=8,children:"Add Color"})]}),(0,A.jsx)(c.A,{gutter:[8,8],children:t.map(((e,s)=>(0,A.jsxs)(d.A,{children:[(0,A.jsxs)("div",{style:{border:j===s?"3px solid #1890ff":"2px solid #ddd",borderRadius:"8px",padding:"4px",cursor:"pointer",backgroundColor:j===s?"#f0f8ff":"transparent"},onClick:()=>f(s),children:[(0,A.jsx)(ye.A,{value:e,onChange:e=>((e,s)=>{const i=[...t];i[e]=s,x(i)})(s,e.toHexString()),size:"small"}),(0,A.jsx)(m.Ay,{size:"small",type:"text",icon:(0,A.jsx)(ve.A,{}),onClick:e=>{e.stopPropagation(),(e=>{if(t.length>1){const s=t.filter(((s,t)=>t!==e));x(s),j>=s.length&&f(Math.max(0,s.length-1))}})(s)},disabled:t.length<=1,style:{marginLeft:"4px"}})]}),(0,A.jsxs)("div",{style:{textAlign:"center",fontSize:"10px",marginTop:"2px"},children:["Color ",s+1]})]},s)))}),(0,A.jsxs)(ke,{type:"secondary",style:{fontSize:"12px",marginTop:"8px",display:"block"},children:["Click a color to select it, then click stitches in the pattern to apply it.","stripes"===r&&" For stripes, clicking any stitch changes the entire row."]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ke,{strong:!0,children:"Pattern Grid"}),(0,A.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"16px",backgroundColor:"#fafafa",borderRadius:"8px",marginTop:"8px"},children:(0,A.jsx)(we,{pattern:b,colors:t,gauge:o,size:{width:"stripes"===r?4:l.width/o.stitches,height:l.height/o.rows},onStitchClick:w})})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ke,{strong:!0,children:"Save Pattern"}),(0,A.jsxs)(g.A.Compact,{style:{width:"100%",marginTop:"8px"},children:[(0,A.jsx)(P.A,{placeholder:"Pattern name",value:y,onChange:e=>v(e.target.value)}),(0,A.jsx)(m.Ay,{type:"primary",icon:(0,A.jsx)(Ae.A,{}),onClick:()=>{y.trim()&&(p({name:y.trim(),type:r,pattern:b,colors:t,size:l}),v(""))},disabled:!y.trim(),children:"Save"})]})]})]})})},Pe=e=>{let{gauge:s={stitches:19,rows:26},colors:t=["#ffffff"],pattern:r=[],size:l={width:4,height:4},stitchSize:o=8,className:a="",style:c={},onClick:d=null,showBorder:h=!0,borderColor:x="#cccccc"}=e;const p=(0,n.useMemo)((()=>{const e=Math.round(s.stitches/4*l.width),t=Math.round(s.rows/4*l.height);return{stitchesWide:e,rowsHigh:t,totalStitches:e*t}}),[s,l]),g=(0,n.useMemo)((()=>{const e=[];for(let s=0;s<p.rowsHigh;s++){const i=[];for(let e=0;e<p.stitchesWide;e++){let n=0;if(r.length>0)if(Array.isArray(r[0])){const t=s%r.length,i=e%r[t].length;n=r[t][i]||0}else n=r[s%r.length]||0;n=Math.min(n,t.length-1),i.push({row:s,stitch:e,colorIndex:n,color:t[n]||t[0]||"#ffffff",key:"".concat(s,"-").concat(e)})}e.push(i)}return e}),[r,t,p]),m=(0,i.A)({display:"inline-block",padding:"16px",backgroundColor:"#fafafa",borderRadius:"8px",border:h?"2px solid ".concat(x):"none"},c),u={display:"grid",gridTemplateColumns:"repeat(".concat(p.stitchesWide,", ").concat(o,"px)"),gap:"0px",backgroundColor:"#ffffff",padding:"8px",borderRadius:"4px",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"};return(0,A.jsxs)("div",{className:a,style:m,children:[(0,A.jsxs)("div",{style:{marginBottom:"12px",textAlign:"center",fontSize:"12px",color:"#666"},children:[(0,A.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:["Knit Swatch (",l.width,'" \xd7 ',l.height,'")']}),(0,A.jsxs)("div",{children:[p.stitchesWide," \xd7 ",p.rowsHigh," stitches"]}),(0,A.jsxs)("div",{children:["Gauge: ",s.stitches," sts \xd7 ",s.rows,' rows per 4"']})]}),(0,A.jsx)("div",{style:u,children:g.map((e=>e.map((e=>{let{row:s,stitch:t,color:i,key:n}=e;return(0,A.jsx)(be,{color:i,size:o,strokeWidth:0,onClick:d?()=>((e,s)=>{d&&d(e,s)})(s,t):null,style:{width:o,height:.75*o,display:"block",margin:0,padding:0}},n)}))))}),t.length>1&&(0,A.jsx)("div",{style:{marginTop:"12px",display:"flex",justifyContent:"center",gap:"8px",flexWrap:"wrap"},children:t.map(((e,s)=>(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:"#666"},children:[(0,A.jsx)("div",{style:{width:"12px",height:"12px",backgroundColor:e,border:"1px solid #ccc",borderRadius:"2px"}}),(0,A.jsxs)("span",{children:["Color ",s+1]})]},s)))}),(0,A.jsxs)("div",{style:{marginTop:"8px",textAlign:"center",fontSize:"10px",color:"#999"},children:[r.length>0?"Colorwork Pattern":"Solid Color"," \u2022 ",p.totalStitches," total stitches"]})]})},{Title:Me,Text:Be,Paragraph:Ie}=x.A,{Option:Te}=C.A,{TabPane:Ne}=ce.A,We={solid:{name:"Solid Color",description:"Single color throughout the panel",icon:"\u25a0",complexity:"Beginner",default:!0},stripes:{name:"Stripes",description:"Horizontal stripes with customizable row heights",icon:"\u2501\u2501\u2501",complexity:"Beginner"},stranded:{name:"Stranded Colorwork",description:"Two-color patterns carried across each row",icon:"\u2593\u2593\u2593",complexity:"Intermediate"},intarsia:{name:"Intarsia",description:"Block color patterns with separate yarn sources",icon:"\u25a0\u25a0\u25a0",complexity:"Advanced"}},De=[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"},{value:"custom",label:"Custom Offset"}],Re=e=>{let{data:s,onUpdate:t,onNext:l,onPrev:h}=e;const x=(0,r.wA)(),p=(0,r.d4)((e=>{var s,t;return null===(s=e.knittingDesign)||void 0===s||null===(t=s.patternData)||void 0===t?void 0:t.colorwork}))||{},u=(0,r.d4)((e=>{var s,t;return null===(s=e.knittingDesign)||void 0===s||null===(t=s.patternData)||void 0===t?void 0:t.gauge}))||{},j=(0,n.useRef)(!1),[f,y]=(0,n.useState)("basic"),[v,b]=(0,n.useState)(null),[w,S]=(0,n.useState)(""),[k,z]=(0,n.useState)("front"),[M,B]=(0,n.useState)({size:{width:4,height:4},stitchSize:8,testPattern:null}),[D,O]=(0,n.useState)(["#ffffff"]);(0,n.useEffect)((()=>{"solid"===p.type?O([p.color||"#ffffff"]):p.type&&1===D.length&&"#ffffff"===D[0]&&O(["#ffffff","#000000"])}),[p.type,p.color]),(0,n.useEffect)((()=>{if(!j.current&&(!p.initialized||0===Object.keys(p).length)){var e,t;console.log("Initializing colorwork state..."),j.current=!0;const i={type:(null===s||void 0===s||null===(e=s.colorwork)||void 0===e?void 0:e.type)||"solid",color:(null===s||void 0===s||null===(t=s.colorwork)||void 0===t?void 0:t.color)||"#ffffff",initialized:!0,savedPatterns:{},workingPatterns:{stripes:{pattern:[],colors:["#ffffff"],size:{height:4}},stranded:{pattern:[],colors:["#ffffff","#000000"],size:{width:8,height:8}},intarsia:{pattern:[],colors:["#ffffff","#ff0000"],size:{width:16,height:16}}},complexPatterns:{},garmentSequence:[],activeWorkingPattern:null};console.log("Dispatching initial colorwork state:",i),x((0,V.Y)(i))}}),[]);const L=e=>{const s=(0,i.A)((0,i.A)({},p),{},{color:e,initialized:!0});x((0,V.Y)(s)),t({colorwork:s})},Y=e=>{x((0,V.w)(e)),o.Ay.success('Pattern "'.concat(e.name,'" saved to library'))},X=()=>{if(!w.trim())return void o.Ay.error("Please enter a pattern name");const e={id:"complex_".concat(Date.now()),name:w,components:[],created:(new Date).toISOString()};x((0,V.R7)(e)),b(e.id),S(""),o.Ay.success('Complex pattern "'.concat(e.name,'" created'))},H=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t={id:"sequence_".concat(Date.now()),patternId:e,isComplex:s,positioning:"center",customOffset:{x:0,y:0},zIndex:0,opacity:100,visible:!0,garmentSection:k};x((0,V.ox)(t)),o.Ay.success("Pattern added to garment sequence")};return(0,A.jsxs)("div",{className:"colorwork-step",children:[(0,A.jsxs)("div",{className:"step-header",children:[(0,A.jsx)(Me,{level:3,children:"Colorwork Design"}),(0,A.jsx)(Ie,{children:"Create sophisticated colorwork patterns with our comprehensive design system. Choose from solid colors, stripes, stranded colorwork, or complex intarsia patterns."}),(0,A.jsx)(a.A,{title:"Colorwork Type",size:"small",style:{marginBottom:24},children:(0,A.jsx)(c.A,{gutter:[16,16],children:Object.entries(We).map((e=>{let[s,n]=e;return(0,A.jsx)(d.A,{xs:12,sm:8,md:6,children:(0,A.jsx)(a.A,{size:"small",hoverable:!0,style:{border:p.type===s?"2px solid #1890ff":"1px solid #d9d9d9",cursor:"pointer"},onClick:()=>(e=>{console.log("handleColorworkTypeChange called with type:",e),console.log("Current colorworkState:",p);const s=(0,i.A)((0,i.A)({},p),{},{type:e,initialized:!0,color:"solid"===e?p.color||"#ffffff":p.color,savedPatterns:(null===p||void 0===p?void 0:p.savedPatterns)||{},workingPatterns:(null===p||void 0===p?void 0:p.workingPatterns)||{stripes:{pattern:[],colors:["#ffffff"],size:{height:4}},stranded:{pattern:[],colors:["#ffffff","#000000"],size:{width:8,height:8}},intarsia:{pattern:[],colors:["#ffffff","#ff0000"],size:{width:16,height:16}}},complexPatterns:(null===p||void 0===p?void 0:p.complexPatterns)||{},garmentSequence:(null===p||void 0===p?void 0:p.garmentSequence)||[],activeWorkingPattern:(null===p||void 0===p?void 0:p.activeWorkingPattern)||null});console.log("Dispatching newState:",s),x((0,V.Y)(s)),t({colorwork:s})})(s),children:(0,A.jsxs)("div",{style:{textAlign:"center"},children:[(0,A.jsx)("div",{style:{fontSize:"24px",marginBottom:8,fontFamily:"monospace"},children:n.icon}),(0,A.jsx)(Be,{strong:!0,children:n.name}),(0,A.jsx)("br",{}),(0,A.jsx)(Be,{type:"secondary",style:{fontSize:"12px"},children:n.description}),(0,A.jsx)("br",{}),(0,A.jsx)(se.A,{color:"Beginner"===n.complexity?"green":"Intermediate"===n.complexity?"orange":"red",style:{marginTop:4},children:n.complexity})]})})},s)}))})}),"solid"===p.type&&(0,A.jsx)(a.A,{title:"Solid Color Selection",size:"small",style:{marginBottom:24},children:(0,A.jsxs)(c.A,{align:"middle",gutter:16,children:[(0,A.jsx)(d.A,{children:(0,A.jsx)("input",{type:"color",value:p.color||"#ffffff",onChange:e=>L(e.target.value),style:{width:50,height:50,border:"none",borderRadius:4,cursor:"pointer"}})}),(0,A.jsxs)(d.A,{children:[(0,A.jsxs)(Be,{strong:!0,children:["Selected Color: ",p.color||"#ffffff"]}),(0,A.jsx)("br",{}),(0,A.jsx)(Be,{type:"secondary",children:"This color will be applied to the entire panel"})]})]})}),(0,A.jsx)(a.A,{title:"Swatch Tester",style:{marginBottom:24},children:(()=>{var e;return(0,A.jsxs)(c.A,{gutter:[16,16],children:[(0,A.jsx)(d.A,{xs:24,lg:12,children:(0,A.jsx)(a.A,{title:"Swatch Settings",size:"small",children:(0,A.jsxs)(g.A,{direction:"vertical",style:{width:"100%"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(Be,{strong:!0,children:"Current Gauge"}),(0,A.jsxs)("div",{style:{marginTop:8,padding:"12px",border:"1px solid #d9d9d9",borderRadius:"4px",backgroundColor:"#f8f9fa",textAlign:"center"},children:[(0,A.jsxs)(Be,{strong:!0,style:{color:"#1890ff"},children:[(null===u||void 0===u?void 0:u.stitches)||(null!==u&&void 0!==u&&u.stitchesPerInch?4*u.stitchesPerInch:19)," sts \xd7 ",(null===u||void 0===u?void 0:u.rows)||(null!==u&&void 0!==u&&u.rowsPerInch?4*u.rowsPerInch:30),' rows per 4"']}),(0,A.jsx)("br",{}),(0,A.jsx)(Be,{type:"secondary",style:{fontSize:"12px"},children:"Set in the Gauge step"})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Be,{strong:!0,children:"Swatch Size"}),(0,A.jsxs)(c.A,{gutter:8,style:{marginTop:8},children:[(0,A.jsxs)(d.A,{span:12,children:[(0,A.jsx)(Be,{type:"secondary",children:"Width (inches)"}),(0,A.jsx)(I.A,{min:1,max:8,step:.5,value:M.size.width,onChange:e=>B((s=>(0,i.A)((0,i.A)({},s),{},{size:(0,i.A)((0,i.A)({},s.size),{},{width:e})}))),style:{width:"100%"}})]}),(0,A.jsxs)(d.A,{span:12,children:[(0,A.jsx)(Be,{type:"secondary",children:"Height (inches)"}),(0,A.jsx)(I.A,{min:1,max:8,step:.5,value:M.size.height,onChange:e=>B((s=>(0,i.A)((0,i.A)({},s),{},{size:(0,i.A)((0,i.A)({},s.size),{},{height:e})}))),style:{width:"100%"}})]})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Be,{strong:!0,children:"Display Settings"}),(0,A.jsxs)("div",{style:{marginTop:8},children:[(0,A.jsx)(Be,{type:"secondary",children:"Stitch Size (pixels)"}),(0,A.jsx)(I.A,{min:4,max:16,value:M.stitchSize,onChange:e=>B((s=>(0,i.A)((0,i.A)({},s),{},{stitchSize:e}))),style:{width:"100%"}})]})]}),(0,A.jsx)(T.A,{}),"solid"!==p.type&&(0,A.jsxs)("div",{children:[(0,A.jsx)(Be,{strong:!0,children:"Test Colors"}),(0,A.jsxs)("div",{style:{marginTop:8},children:[D.map(((e,s)=>(0,A.jsxs)(c.A,{gutter:8,style:{marginBottom:8},children:[(0,A.jsx)(d.A,{span:16,children:(0,A.jsx)("input",{type:"color",value:e,onChange:e=>{const t=[...D];t[s]=e.target.value,O(t)},style:{width:"100%",height:"32px",border:"1px solid #d9d9d9",borderRadius:"4px",cursor:"pointer"}})}),(0,A.jsx)(d.A,{span:8,children:(0,A.jsx)(m.Ay,{danger:!0,disabled:D.length<=1,onClick:()=>{O(D.filter(((e,t)=>t!==s)))},children:"Remove"})})]},s))),(0,A.jsx)(m.Ay,{type:"dashed",icon:(0,A.jsx)(N.A,{}),onClick:()=>{O([...D,"#ffffff"])},style:{width:"100%"},children:"Add Color"})]})]}),"solid"===p.type&&(0,A.jsxs)("div",{children:[(0,A.jsx)(Be,{strong:!0,children:"Current Solid Color"}),(0,A.jsx)("div",{style:{marginTop:8,padding:"12px",border:"1px solid #d9d9d9",borderRadius:"4px",backgroundColor:p.color||"#ffffff",textAlign:"center",color:"#ffffff"===p.color?"#000000":"#ffffff"},children:p.color||"#ffffff"}),(0,A.jsx)(Be,{type:"secondary",style:{fontSize:"12px",marginTop:4,display:"block"},children:'Change the color in the "Solid Color Selection" section above'})]}),(0,A.jsx)(T.A,{}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Be,{strong:!0,children:"Test Pattern"}),(0,A.jsx)(C.A,{placeholder:"Select a saved pattern to test",value:M.testPattern,onChange:e=>B((s=>(0,i.A)((0,i.A)({},s),{},{testPattern:e}))),style:{width:"100%",marginTop:8},allowClear:!0,children:Object.values(p.savedPatterns||{}).map((e=>{var s;return(0,A.jsxs)(Te,{value:e.id,children:[e.name," (",null===(s=We[e.type])||void 0===s?void 0:s.name,")"]},e.id)}))}),(0,A.jsx)(Be,{type:"secondary",style:{fontSize:"12px",marginTop:4,display:"block"},children:"Leave empty for solid color swatch"})]})]})})}),(0,A.jsx)(d.A,{xs:24,lg:12,children:(0,A.jsxs)(a.A,{title:"Swatch Preview",size:"small",children:[(0,A.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",padding:"16px"},children:(0,A.jsx)(Pe,{gauge:{stitches:(null===u||void 0===u?void 0:u.stitches)||(null!==u&&void 0!==u&&u.stitchesPerInch?4*u.stitchesPerInch:19),rows:(null===u||void 0===u?void 0:u.rows)||(null!==u&&void 0!==u&&u.rowsPerInch?4*u.rowsPerInch:30)},colors:"solid"===p.type?[p.color||"#ffffff"]:D,pattern:M.testPattern&&(null===(e=(p.savedPatterns||{})[M.testPattern])||void 0===e?void 0:e.pattern)||[],size:M.size,stitchSize:M.stitchSize,onClick:(e,s)=>{console.log("Clicked stitch at row ".concat(e,", position ").concat(s)),o.Ay.info("Clicked stitch at row ".concat(e+1,", position ").concat(s+1))}})}),(0,A.jsx)(me.A,{message:"Interactive Swatch",description:"This swatch shows how your colorwork pattern will look when knitted. The gauge is automatically taken from your gauge settings. Click on individual stitches to see their position.",type:"info",showIcon:!0,style:{marginTop:16}})]})})]})})()})]}),p.type&&"solid"!==p.type&&(0,A.jsxs)(ce.A,{activeKey:f,onChange:y,size:"large",children:[(0,A.jsx)(Ne,{tab:"Basic Patterns",children:(()=>{var e;return(0,A.jsxs)(c.A,{gutter:[16,16],children:[(0,A.jsxs)(d.A,{xs:24,lg:12,children:[(0,A.jsx)(a.A,{title:"Pattern Types",size:"small",children:(0,A.jsx)(g.A,{direction:"vertical",style:{width:"100%"},size:"large",children:Object.entries(We).filter((e=>{let[s]=e;return"solid"!==s})).map((e=>{var s;let[t,i]=e;return(0,A.jsx)(a.A,{size:"small",hoverable:!0,style:{border:(null===(s=p.activeWorkingPattern)||void 0===s?void 0:s.type)===t?"2px solid #1890ff":"1px solid #d9d9d9"},onClick:()=>x((0,V.KN)({type:t,pattern:null})),children:(0,A.jsxs)(c.A,{align:"middle",children:[(0,A.jsx)(d.A,{flex:"none",children:(0,A.jsx)(de.A,{style:{backgroundColor:"#f56a00",fontFamily:"monospace"},children:i.icon})}),(0,A.jsxs)(d.A,{flex:"auto",style:{marginLeft:12},children:[(0,A.jsx)(Be,{strong:!0,children:i.name}),(0,A.jsx)("br",{}),(0,A.jsx)(Be,{type:"secondary",style:{fontSize:"12px"},children:i.description}),(0,A.jsx)("br",{}),(0,A.jsx)(se.A,{color:"Beginner"===i.complexity?"green":"Intermediate"===i.complexity?"orange":"red",children:i.complexity})]})]})},t)}))})}),(0,A.jsx)(a.A,{title:"Pattern Library",size:"small",style:{marginTop:16},children:(0,A.jsx)(he.A,{size:"small",dataSource:Object.values(p.savedPatterns||{}),renderItem:e=>{var s,t,n,r;return(0,A.jsx)(he.A.Item,{actions:[(0,A.jsx)(xe.A,{title:"Load for editing",children:(0,A.jsx)(m.Ay,{type:"link",icon:(0,A.jsx)(W.A,{}),onClick:()=>x((0,V.KN)({type:e.type,pattern:e.id}))})}),(0,A.jsx)(xe.A,{title:"Duplicate",children:(0,A.jsx)(m.Ay,{type:"link",icon:(0,A.jsx)(ue.A,{}),onClick:()=>{const s=(0,i.A)((0,i.A)({},e),{},{id:"".concat(e.id,"_copy_").concat(Date.now()),name:"".concat(e.name," (Copy)")});x((0,V.w)(s))}})}),(0,A.jsx)(pe.A,{title:"Delete this pattern?",onConfirm:()=>{return s=e.id,x((0,V.WO)(s)),void o.Ay.success("Pattern deleted from library");var s},children:(0,A.jsx)(m.Ay,{type:"link",danger:!0,icon:(0,A.jsx)(R.A,{})})})],children:(0,A.jsx)(he.A.Item.Meta,{avatar:(0,A.jsx)(de.A,{style:{backgroundColor:(null===(s=e.colors)||void 0===s?void 0:s[0])||"#ccc"},children:(null===(t=We[e.type])||void 0===t?void 0:t.icon)||"?"}),title:e.name,description:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(se.A,{children:(null===(n=We[e.type])||void 0===n?void 0:n.name)||e.type}),(0,A.jsxs)(Be,{type:"secondary",children:[(null===(r=e.colors)||void 0===r?void 0:r.length)||0," colors"]})]})})})}})})]}),(0,A.jsx)(d.A,{xs:24,lg:12,children:(null===(e=p.activeWorkingPattern)||void 0===e?void 0:e.type)&&(0,A.jsx)(Ce,{type:p.activeWorkingPattern.type,initialPattern:p.activeWorkingPattern.pattern?p.savedPatterns[p.activeWorkingPattern.pattern]:null,onSave:Y,gauge:u})})]})})()},"basic"),(0,A.jsx)(Ne,{tab:"Complex Patterns",children:(()=>{var e,s,t,n;return(0,A.jsxs)(c.A,{gutter:[16,16],children:[(0,A.jsxs)(d.A,{xs:24,lg:8,children:[(0,A.jsx)(a.A,{title:"Complex Patterns",size:"small",children:(0,A.jsxs)(g.A,{direction:"vertical",style:{width:"100%"},children:[(0,A.jsxs)(P.A.Group,{compact:!0,children:[(0,A.jsx)(P.A,{placeholder:"New complex pattern name",value:w,onChange:e=>S(e.target.value),onPressEnter:X,style:{width:"calc(100% - 40px)"}}),(0,A.jsx)(m.Ay,{type:"primary",icon:(0,A.jsx)(N.A,{}),onClick:X})]}),(0,A.jsx)(he.A,{size:"small",dataSource:Object.values(p.complexPatterns||{}),renderItem:e=>{var s,t;return(0,A.jsx)(he.A.Item,{className:v===e.id?"ant-list-item-selected":"",style:{cursor:"pointer",backgroundColor:v===e.id?"#f0f8ff":"transparent"},onClick:()=>b(e.id),actions:[(0,A.jsx)(ge.A,{count:(null===(s=e.components)||void 0===s?void 0:s.length)||0,size:"small",children:(0,A.jsx)(je.A,{})}),(0,A.jsx)(pe.A,{title:"Delete this complex pattern?",onConfirm:()=>{x((0,V.u2)(e.id)),v===e.id&&b(null)},children:(0,A.jsx)(m.Ay,{type:"link",danger:!0,size:"small",icon:(0,A.jsx)(R.A,{})})})],children:(0,A.jsx)(he.A.Item.Meta,{title:e.name,description:"".concat((null===(t=e.components)||void 0===t?void 0:t.length)||0," components")})})}})]})}),(0,A.jsx)(a.A,{title:"Add Basic Patterns",size:"small",style:{marginTop:16},children:(0,A.jsx)(he.A,{size:"small",dataSource:Object.values(p.savedPatterns||{}),renderItem:e=>{var s,t,i;return(0,A.jsx)(he.A.Item,{actions:[(0,A.jsx)(m.Ay,{type:"link",icon:(0,A.jsx)(N.A,{}),disabled:!v,onClick:()=>((e,s)=>{var t,i;const n={id:"component_".concat(Date.now()),patternId:e,positioning:"center",customOffset:{x:0,y:0},zIndex:0,opacity:100,visible:!0};x((0,V.ud)({id:s,updates:{components:[...(null===(t=p.complexPatterns)||void 0===t||null===(i=t[s])||void 0===i?void 0:i.components)||[],n]}})),o.Ay.success("Pattern added to complex pattern")})(e.id,v),children:"Add"})],children:(0,A.jsx)(he.A.Item.Meta,{avatar:(0,A.jsx)(de.A,{style:{backgroundColor:(null===(s=e.colors)||void 0===s?void 0:s[0])||"#ccc"},children:(null===(t=We[e.type])||void 0===t?void 0:t.icon)||"?"}),title:e.name,description:null===(i=We[e.type])||void 0===i?void 0:i.name})})}})})]}),(0,A.jsx)(d.A,{xs:24,lg:16,children:v&&(0,A.jsx)(a.A,{title:"Editing: ".concat(null===(e=p.complexPatterns)||void 0===e||null===(s=e[v])||void 0===s?void 0:s.name),size:"small",children:(0,A.jsxs)(g.A,{direction:"vertical",style:{width:"100%"},children:[(0,A.jsx)(me.A,{message:"Complex Pattern Composition",description:"Arrange and position individual patterns to create complex designs. Use positioning and z-index to control layering.",type:"info",showIcon:!0}),(0,A.jsx)(he.A,{size:"small",dataSource:(null===(t=p.complexPatterns)||void 0===t||null===(n=t[v])||void 0===n?void 0:n.components)||[],renderItem:(e,s)=>{var t;return(0,A.jsx)(he.A.Item,{actions:[(0,A.jsx)(I.A,{size:"small",placeholder:"Z-Index",value:e.zIndex,onChange:t=>{var n,r;const l=[...(null===(n=p.complexPatterns)||void 0===n||null===(r=n[v])||void 0===r?void 0:r.components)||[]];l[s]=(0,i.A)((0,i.A)({},e),{},{zIndex:t}),x((0,V.ud)({id:v,updates:{components:l}}))}}),(0,A.jsx)(C.A,{size:"small",value:e.positioning,onChange:t=>{var n,r;const l=[...(null===(n=p.complexPatterns)||void 0===n||null===(r=n[v])||void 0===r?void 0:r.components)||[]];l[s]=(0,i.A)((0,i.A)({},e),{},{positioning:t}),x((0,V.ud)({id:v,updates:{components:l}}))},children:De.map((e=>(0,A.jsx)(Te,{value:e.value,children:e.label},e.value)))}),(0,A.jsx)(m.Ay,{type:"link",danger:!0,size:"small",icon:(0,A.jsx)(R.A,{}),onClick:()=>{var e,t;const i=((null===(e=p.complexPatterns)||void 0===e||null===(t=e[v])||void 0===t?void 0:t.components)||[]).filter(((e,t)=>t!==s));x((0,V.ud)({id:v,updates:{components:i}}))}})],children:(0,A.jsx)(he.A.Item.Meta,{title:(null===(t=(p.savedPatterns||{})[e.patternId])||void 0===t?void 0:t.name)||"Unknown Pattern",description:"Position: ".concat(e.positioning,", Z-Index: ").concat(e.zIndex)})})}})]})})})]})})()},"complex"),(0,A.jsx)(Ne,{tab:"Garment Sequence",children:(0,A.jsxs)(c.A,{gutter:[16,16],children:[(0,A.jsx)(d.A,{xs:24,lg:8,children:(0,A.jsxs)(a.A,{title:"Garment Sections",size:"small",children:[(0,A.jsxs)(C.A,{value:k,onChange:z,style:{width:"100%",marginBottom:16},children:[(0,A.jsx)(Te,{value:"front",children:"Front"}),(0,A.jsx)(Te,{value:"back",children:"Back"}),(0,A.jsx)(Te,{value:"sleeves",children:"Sleeves"}),(0,A.jsx)(Te,{value:"collar",children:"Collar"})]}),(0,A.jsx)(T.A,{orientation:"left",plain:!0,children:"Available Patterns"}),(0,A.jsxs)(g.A,{direction:"vertical",style:{width:"100%"},children:[(0,A.jsx)(Be,{strong:!0,children:"Basic Patterns"}),(0,A.jsx)(he.A,{size:"small",dataSource:Object.values(p.savedPatterns||{}),renderItem:e=>{var s,t,i;return(0,A.jsx)(he.A.Item,{actions:[(0,A.jsx)(m.Ay,{type:"link",icon:(0,A.jsx)(N.A,{}),onClick:()=>H(e.id,!1),children:"Add"})],children:(0,A.jsx)(he.A.Item.Meta,{avatar:(0,A.jsx)(de.A,{style:{backgroundColor:(null===(s=e.colors)||void 0===s?void 0:s[0])||"#ccc"},children:(null===(t=We[e.type])||void 0===t?void 0:t.icon)||"?"}),title:e.name,description:null===(i=We[e.type])||void 0===i?void 0:i.name})})}}),(0,A.jsx)(Be,{strong:!0,children:"Complex Patterns"}),(0,A.jsx)(he.A,{size:"small",dataSource:Object.values(p.complexPatterns||{}),renderItem:e=>{var s;return(0,A.jsx)(he.A.Item,{actions:[(0,A.jsx)(m.Ay,{type:"link",icon:(0,A.jsx)(N.A,{}),onClick:()=>H(e.id,!0),children:"Add"})],children:(0,A.jsx)(he.A.Item.Meta,{avatar:(0,A.jsx)(ge.A,{count:(null===(s=e.components)||void 0===s?void 0:s.length)||0,size:"small",children:(0,A.jsx)(de.A,{style:{backgroundColor:"#722ed1"},children:(0,A.jsx)(je.A,{})})}),title:e.name,description:"Complex Pattern"})})}})]})]})}),(0,A.jsx)(d.A,{xs:24,lg:16,children:(0,A.jsx)(a.A,{title:"".concat(k.charAt(0).toUpperCase()+k.slice(1)," Sequence"),size:"small",children:(0,A.jsxs)(g.A,{direction:"vertical",style:{width:"100%"},children:[(0,A.jsx)(me.A,{message:"Garment Pattern Sequencing",description:"Arrange patterns for the entire garment with positioning and z-index control. Patterns will be applied in sequence order.",type:"info",showIcon:!0}),(0,A.jsx)(he.A,{size:"small",dataSource:(p.garmentSequence||[]).filter((e=>e.garmentSection===k)),renderItem:(e,s)=>{var t,i;return(0,A.jsx)(he.A.Item,{actions:[(0,A.jsx)(I.A,{size:"small",placeholder:"Z-Index",value:e.zIndex,onChange:s=>{x((0,V.LC)({id:e.id,updates:{zIndex:s}}))}}),(0,A.jsx)(C.A,{size:"small",value:e.positioning,onChange:s=>{x((0,V.LC)({id:e.id,updates:{positioning:s}}))},children:De.map((e=>(0,A.jsx)(Te,{value:e.value,children:e.label},e.value)))}),(0,A.jsx)(m.Ay,{type:"link",icon:e.visible?(0,A.jsx)(W.A,{}):(0,A.jsx)(fe.A,{}),onClick:()=>{x((0,V.LC)({id:e.id,updates:{visible:!e.visible}}))}}),(0,A.jsx)(m.Ay,{type:"link",danger:!0,size:"small",icon:(0,A.jsx)(R.A,{}),onClick:()=>x((0,V.ug)(e.id))})],children:(0,A.jsx)(he.A.Item.Meta,{title:e.isComplex?null===(t=(p.complexPatterns||{})[e.patternId])||void 0===t?void 0:t.name:null===(i=(p.savedPatterns||{})[e.patternId])||void 0===i?void 0:i.name,description:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(se.A,{children:e.isComplex?"Complex":"Basic"}),(0,A.jsxs)(Be,{type:"secondary",children:["Position: ",e.positioning]}),(0,A.jsxs)(Be,{type:"secondary",children:["Z-Index: ",e.zIndex]})]})})})}})]})})})]})},"garment")]}),(0,A.jsx)("div",{className:"step-actions",style:{marginTop:32},children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(m.Ay,{size:"large",onClick:h,children:"Previous: Gauge"}),(0,A.jsx)(m.Ay,{size:"large",type:"primary",onClick:()=>{t({colorwork:p}),l()},children:"Next: Preview"})]})})]})};var Oe=t(9126),Le=t(2624),Ye=t(5520),Xe=t(6091),He=t(9741),Ee=t(8600),Fe=t(5958),Ge=t(5496),Ue=t(6784),Ke=t(9330);const{Title:qe,Text:Je}=x.A,{Option:Ve}=C.A,Ze={flat:"Flat Pattern","3d":"3D Model",technical:"Technical Drawing",schematic:"Schematic"},_e={realistic:"Realistic Texture",symbolic:"Symbolic Stitches",wireframe:"Wireframe",colorwork:"Colorwork Only"},Qe=e=>{var s,t,r,l,h,x,p,u,j,f,y,v,b,w,S,k,z,P,M,B,I,T,N,W,D,R,O,L,Y;let{data:X,onUpdate:H,onNext:E,onPrev:F}=e;const[G,U]=(0,n.useState)({mode:"flat",visualization:"realistic",showGrid:!0,showMeasurements:!0,showStitchCount:!1,zoom:100,rotation:{x:0,y:0,z:0},lighting:"natural",backgroundColor:"#f0f0f0"}),[K,q]=(0,n.useState)({});(0,n.useEffect)((()=>{J()}),[X]);const J=()=>{const{gauge:e,sizing:s,colorwork:t}=X;if(!e||!s)return;const i="percentage"===s.method?{chest:s.scale/100*40,length:s.scale/100*24,armLength:s.scale/100*25}:s.customDimensions,n=Math.round(i.chest*e.stitches),r=Math.round(i.length*e.rows),l=Math.round(n*r/1e3);q({totalStitches:n*r,bodyStitches:n,bodyRows:r,colors:t.enabled?t.colors.length:1,estimatedTime:l,difficulty:V()})},V=()=>{var e,s;let t=1;null!==(e=X.colorwork)&&void 0!==e&&e.enabled&&(t+=X.colorwork.colors.length>2?2:1,"intarsia"===X.colorwork.type&&(t+=2),"fairisle"===X.colorwork.type&&(t+=1)),(null===(s=X.gauge)||void 0===s?void 0:s.stitches)>20&&(t+=1);const i=["Beginner","Easy","Intermediate","Advanced","Expert"];return i[Math.min(t-1,i.length-1)]},Z=(e,s)=>{U((t=>(0,i.A)((0,i.A)({},t),{},{[e]:s})))},_=(e,s)=>{const t="positive"===s?15:-15;U((s=>(0,i.A)((0,i.A)({},s),{},{rotation:(0,i.A)((0,i.A)({},s.rotation),{},{[e]:(s.rotation[e]+t)%360})})))},Q=(0,A.jsxs)(Oe.A,{children:[(0,A.jsx)(Oe.A.Item,{icon:(0,A.jsx)(Xe.A,{}),children:"Export as PDF Pattern"},"pdf"),(0,A.jsx)(Oe.A.Item,{icon:(0,A.jsx)(He.A,{}),children:"Export as Image"},"image"),(0,A.jsx)(Oe.A.Item,{icon:(0,A.jsx)(Xe.A,{}),children:"Export Schematic"},"schematic")]});return(0,A.jsxs)("div",{className:"preview-step",children:[(0,A.jsxs)(c.A,{gutter:[24,24],children:[(0,A.jsx)(d.A,{xs:24,lg:14,children:(0,A.jsxs)(a.A,{title:"Pattern Preview",className:"preview-card",children:[(0,A.jsx)("div",{className:"preview-controls",style:{marginBottom:16},children:(0,A.jsxs)(c.A,{gutter:[16,16],align:"middle",children:[(0,A.jsxs)(d.A,{span:8,children:[(0,A.jsx)(Je,{children:"View Mode"}),(0,A.jsx)(C.A,{value:G.mode,onChange:e=>Z("mode",e),style:{width:"100%"},children:Object.entries(Ze).map((e=>{let[s,t]=e;return(0,A.jsx)(Ve,{value:s,children:t},s)}))})]}),(0,A.jsxs)(d.A,{span:8,children:[(0,A.jsx)(Je,{children:"Visualization"}),(0,A.jsx)(C.A,{value:G.visualization,onChange:e=>Z("visualization",e),style:{width:"100%"},children:Object.entries(_e).map((e=>{let[s,t]=e;return(0,A.jsx)(Ve,{value:s,children:t},s)}))})]}),(0,A.jsx)(d.A,{span:8,children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(m.Ay,{icon:(0,A.jsx)(Ee.A,{}),onClick:()=>Z("zoom",Math.max(25,G.zoom-25))}),(0,A.jsxs)(Je,{style:{minWidth:60,textAlign:"center"},children:[G.zoom,"%"]}),(0,A.jsx)(m.Ay,{icon:(0,A.jsx)(Fe.A,{}),onClick:()=>Z("zoom",Math.min(200,G.zoom+25))})]})})]})}),(0,A.jsxs)("div",{className:"pattern-preview-area",style:{height:"400px",backgroundColor:G.backgroundColor,border:"1px solid #d9d9d9",borderRadius:"8px",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,A.jsxs)("div",{style:{transform:"scale(".concat(G.zoom/100,") rotateX(").concat(G.rotation.x,"deg) rotateY(").concat(G.rotation.y,"deg) rotateZ(").concat(G.rotation.z,"deg)"),transition:"transform 0.3s ease"},children:["flat"===G.mode&&(0,A.jsxs)("div",{className:"flat-pattern",style:{width:"300px",height:"250px",background:"linear-gradient(45deg, #e6f7ff 25%, transparent 25%), linear-gradient(-45deg, #e6f7ff 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #e6f7ff 75%), linear-gradient(-45deg, transparent 75%, #e6f7ff 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px",border:"2px solid #1890ff",borderRadius:"8px",position:"relative"},children:[(null===(s=X.colorwork)||void 0===s?void 0:s.enabled)&&(0,A.jsx)("div",{style:{position:"absolute",top:"20%",left:"20%",right:"20%",height:"30%",background:"linear-gradient(90deg, ".concat(X.colorwork.colors.join(", "),")"),borderRadius:"4px"}}),G.showMeasurements&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:{position:"absolute",top:"-20px",left:"50%",transform:"translateX(-50%)",fontSize:"12px",color:"#666"},children:"percentage"===(null===(t=X.sizing)||void 0===t?void 0:t.method)?"".concat(X.sizing.scale/100*40,'"'):"".concat(null===(r=X.sizing)||void 0===r||null===(l=r.customDimensions)||void 0===l?void 0:l.chest,'"')}),(0,A.jsx)("div",{style:{position:"absolute",left:"-30px",top:"50%",transform:"translateY(-50%)",fontSize:"12px",color:"#666"},children:"percentage"===(null===(h=X.sizing)||void 0===h?void 0:h.method)?"".concat(X.sizing.scale/100*24,'"'):"".concat(null===(x=X.sizing)||void 0===x||null===(p=x.customDimensions)||void 0===p?void 0:p.length,'"')})]})]}),"3d"===G.mode&&(0,A.jsxs)("div",{className:"3d-model",style:{width:"250px",height:"300px",background:"linear-gradient(135deg, #f0f0f0, #d9d9d9)",borderRadius:"20px 20px 10px 10px",position:"relative",border:"1px solid #bfbfbf",boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},children:[(0,A.jsx)("div",{style:{position:"absolute",top:"10px",left:"20px",right:"20px",height:"30px",background:"#1890ff",borderRadius:"10px 10px 0 0"}}),(null===(u=X.colorwork)||void 0===u?void 0:u.enabled)&&(0,A.jsx)("div",{style:{position:"absolute",top:"40%",left:"10%",right:"10%",height:"20%",background:"repeating-linear-gradient(90deg, ".concat(X.colorwork.colors[0]," 0px, ").concat(X.colorwork.colors[0]," 10px, ").concat(X.colorwork.colors[1]," 10px, ").concat(X.colorwork.colors[1]," 20px)"),borderRadius:"4px"}})]}),"technical"===G.mode&&(0,A.jsx)("div",{className:"technical-drawing",style:{width:"350px",height:"280px",background:"white",border:"1px solid #000",position:"relative"},children:(0,A.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 350 280",children:G.showMeasurements&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("text",{x:"150",y:"250",textAnchor:"middle",fontSize:"12",fill:"#1890ff",children:"percentage"===(null===(j=X.sizing)||void 0===j?void 0:j.method)?"".concat(X.sizing.scale/100*40,'"'):"".concat(null===(f=X.sizing)||void 0===f||null===(y=f.customDimensions)||void 0===y?void 0:y.chest,'"')}),(0,A.jsx)("text",{x:"10",y:"125",textAnchor:"middle",fontSize:"12",fill:"#1890ff",transform:"rotate(125, 10)",children:"percentage"===(null===(v=X.sizing)||void 0===v?void 0:v.method)?"".concat(X.sizing.scale/100*24,'"'):"".concat(null===(b=X.sizing)||void 0===b||null===(w=b.customDimensions)||void 0===w?void 0:w.length,'"')})]})})}),"schematic"===G.mode&&(0,A.jsxs)("div",{className:"schematic",style:{width:"400px",height:"300px",background:"white",border:"1px solid #ccc",padding:"20px",fontSize:"12px",lineHeight:"18px"},children:[(0,A.jsx)(qe,{level:5,style:{margin:"0 0 16px 0"},children:"Pattern Schematic"}),(0,A.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{strong:!0,children:"Dimensions:"}),(0,A.jsx)("br",{}),"Chest: ","percentage"===(null===(S=X.sizing)||void 0===S?void 0:S.method)?"".concat(X.sizing.scale/100*40,'"'):"".concat(null===(k=X.sizing)||void 0===k||null===(z=k.customDimensions)||void 0===z?void 0:z.chest,'"'),(0,A.jsx)("br",{}),"Length: ","percentage"===(null===(P=X.sizing)||void 0===P?void 0:P.method)?"".concat(X.sizing.scale/100*24,'"'):"".concat(null===(M=X.sizing)||void 0===M||null===(B=M.customDimensions)||void 0===B?void 0:B.length,'"'),(0,A.jsx)("br",{}),(0,A.jsx)("br",{}),(0,A.jsx)(Je,{strong:!0,children:"Gauge:"}),(0,A.jsx)("br",{}),null===(I=X.gauge)||void 0===I?void 0:I.stitches," sts \xd7 ",null===(T=X.gauge)||void 0===T?void 0:T.rows," rows",(0,A.jsx)("br",{}),"per inch"]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{strong:!0,children:"Construction:"}),(0,A.jsx)("br",{}),"Body: ",K.bodyStitches," sts",(0,A.jsx)("br",{}),"Rows: ",K.bodyRows,(0,A.jsx)("br",{}),(0,A.jsx)("br",{}),(0,A.jsx)(Je,{strong:!0,children:"Colors:"}),(0,A.jsx)("br",{}),null!==(N=X.colorwork)&&void 0!==N&&N.enabled?X.colorwork.colors.length:1," color(s)"]})]})]})]}),G.showGrid&&(0,A.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px)",backgroundSize:"20px 20px",pointerEvents:"none"}})]}),(0,A.jsx)("div",{className:"view-controls",style:{marginTop:16},children:(0,A.jsxs)(c.A,{gutter:16,children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(Je,{children:"Options:"}),(0,A.jsx)(Le.A,{checkedChildren:"Grid",unCheckedChildren:"Grid",checked:G.showGrid,onChange:e=>Z("showGrid",e)}),(0,A.jsx)(Le.A,{checkedChildren:"Measure",unCheckedChildren:"Measure",checked:G.showMeasurements,onChange:e=>Z("showMeasurements",e)})]})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(g.A,{style:{float:"right"},children:[(0,A.jsx)(m.Ay,{icon:(0,A.jsx)(Ge.A,{}),onClick:()=>_("y","negative")}),(0,A.jsx)(m.Ay,{icon:(0,A.jsx)(Ue.A,{}),onClick:()=>_("y","positive")}),(0,A.jsx)(m.Ay,{onClick:()=>{U((e=>(0,i.A)((0,i.A)({},e),{},{zoom:100,rotation:{x:0,y:0,z:0}})))},children:"Reset"}),(0,A.jsx)(Ye.A,{overlay:Q,trigger:["click"],children:(0,A.jsx)(m.Ay,{type:"primary",icon:(0,A.jsx)(Ke.A,{}),children:"Export"})})]})})]})})]})}),(0,A.jsxs)(d.A,{xs:24,lg:10,children:[(0,A.jsx)(a.A,{title:"Pattern Statistics",className:"stats-card",style:{marginBottom:16},children:(0,A.jsxs)(g.A,{direction:"vertical",size:"medium",style:{width:"100%"},children:[(0,A.jsxs)(c.A,{gutter:16,children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"stat-card",children:[(0,A.jsx)(Je,{type:"secondary",children:"Total Stitches"}),(0,A.jsx)("br",{}),(0,A.jsx)(Je,{strong:!0,style:{fontSize:"18px",color:"#1890ff"},children:null===(W=K.totalStitches)||void 0===W?void 0:W.toLocaleString()})]})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"stat-card",children:[(0,A.jsx)(Je,{type:"secondary",children:"Estimated Time"}),(0,A.jsx)("br",{}),(0,A.jsxs)(Je,{strong:!0,style:{fontSize:"18px",color:"#52c41a"},children:[K.estimatedTime,"h"]})]})})]}),(0,A.jsxs)(c.A,{gutter:16,children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"stat-card",children:[(0,A.jsx)(Je,{type:"secondary",children:"Body Stitches"}),(0,A.jsx)("br",{}),(0,A.jsx)(Je,{strong:!0,style:{fontSize:"16px"},children:K.bodyStitches})]})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"stat-card",children:[(0,A.jsx)(Je,{type:"secondary",children:"Body Rows"}),(0,A.jsx)("br",{}),(0,A.jsx)(Je,{strong:!0,style:{fontSize:"16px"},children:K.bodyRows})]})})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{type:"secondary",children:"Difficulty Level"}),(0,A.jsx)("br",{}),(0,A.jsx)(se.A,{color:"Beginner"===K.difficulty?"green":"Easy"===K.difficulty?"blue":"Intermediate"===K.difficulty?"orange":"Advanced"===K.difficulty?"red":"purple",children:K.difficulty})]}),(null===(D=X.colorwork)||void 0===D?void 0:D.enabled)&&(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{type:"secondary",children:"Colorwork Colors"}),(0,A.jsx)("br",{}),(0,A.jsx)(g.A,{wrap:!0,children:X.colorwork.colors.map(((e,s)=>(0,A.jsx)("div",{style:{width:20,height:20,backgroundColor:e,borderRadius:"50%",border:"1px solid #d9d9d9"}},s)))})]})]})}),(0,A.jsx)(a.A,{title:"Pattern Summary",className:"summary-card",children:(0,A.jsxs)(g.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{strong:!0,children:"Pattern:"})," ",X.name||"Untitled Pattern"]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{strong:!0,children:"Type:"})," ",X.type||"Custom"]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{strong:!0,children:"Gauge:"})," ",null===(R=X.gauge)||void 0===R?void 0:R.stitches," \xd7 ",null===(O=X.gauge)||void 0===O?void 0:O.rows," per inch"]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{strong:!0,children:"Size:"})," ","percentage"===(null===(L=X.sizing)||void 0===L?void 0:L.method)?"".concat(X.sizing.scale,"% scale"):"Custom dimensions"]}),(null===(Y=X.colorwork)||void 0===Y?void 0:Y.enabled)&&(0,A.jsxs)("div",{children:[(0,A.jsx)(Je,{strong:!0,children:"Colorwork:"})," ",X.colorwork.type," with ",X.colorwork.colors.length," colors"]})]})})]})]}),(0,A.jsx)("div",{className:"step-actions",children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(m.Ay,{size:"large",onClick:F,children:"Previous: Colorwork"}),(0,A.jsx)(m.Ay,{size:"large",type:"primary",onClick:()=>{H({preview:G}),o.Ay.success("Preview settings saved"),E()},children:"Start Knitting"})]})})]})};var $e=t(7692),es=t(6282),ss=t(119),ts=t(2606),is=t(2511),ns=t(6869),rs=t(4004),ls=t(7677),os=t(4313),as=t(2115);const{Title:cs,Text:ds,Paragraph:hs}=x.A,{Option:xs}=C.A,{TextArea:ps}=P.A,gs={k:{symbol:"\u25a1",name:"Knit",color:"#e6f7ff"},p:{symbol:"\u25cf",name:"Purl",color:"#fff2e8"},yo:{symbol:"\u25cb",name:"Yarn Over",color:"#f6ffed"},k2tog:{symbol:"/",name:"Knit 2 Together",color:"#fff1f0"},ssk:{symbol:"\\",name:"Slip Slip Knit",color:"#fff1f0"},sl:{symbol:"|",name:"Slip Stitch",color:"#f9f0ff"}},ms=e=>{var s,t,i,r;let{data:l,onUpdate:h,onPrev:x}=e;const[p,u]=(0,n.useState)(1),[j,f]=(0,n.useState)(0),[y,v]=(0,n.useState)(!1),[b,w]=(0,n.useState)(1e3),[S,k]=(0,n.useState)(!0),[z,M]=(0,n.useState)(!0),[B,I]=(0,n.useState)(new Set),[T,N]=(0,n.useState)(""),[W,D]=(0,n.useState)(null),[R,O]=(0,n.useState)(0),[L,Y]=(0,n.useState)([]),X=(0,n.useRef)(),H=(0,n.useRef)(),E=Math.round(((null===(s=l.sizing)||void 0===s||null===(t=s.customDimensions)||void 0===t?void 0:t.length)||24)*(null===(i=l.gauge)||void 0===i?void 0:i.rows)),F=((e,s)=>{var t;const{gauge:i,sizing:n,colorwork:r}=s,l=Math.round(((null===(t=n.customDimensions)||void 0===t?void 0:t.chest)||40)*i.stitches);if(null!==r&&void 0!==r&&r.enabled&&"fairisle"===r.type)return{instruction:"Row ".concat(e,": *K2 MC, K2 CC, repeat from * to end (").concat(l," sts)"),stitches:Array.from({length:l},((e,s)=>s%4<2?{type:"k",color:r.colors[0]}:{type:"k",color:r.colors[1]})),notes:"Carry yarn loosely across back"};const o=e%2===1;return{instruction:"Row ".concat(e,": ").concat(o?"Knit":"Purl"," all stitches (").concat(l," sts)"),stitches:Array.from({length:l},(()=>{var e;return{type:o?"k":"p",color:(null===r||void 0===r||null===(e=r.colors)||void 0===e?void 0:e[0])||"#ffffff"}})),notes:o?"Right side row":"Wrong side row"}})(p,l),U=F.stitches.length,K=100*(p-1)/E;(0,n.useEffect)((()=>(y?(X.current=setInterval(q,b),W||D(Date.now())):clearInterval(X.current),()=>clearInterval(X.current))),[y,b,j]),(0,n.useEffect)((()=>(W&&(H.current=setInterval((()=>{O(Math.floor((Date.now()-W)/1e3))}),1e3)),()=>clearInterval(H.current))),[W]);const q=()=>{f((e=>{const s=e+1;return I((s=>new Set([...s,e]))),s>=U?(J(),0):s}))},J=()=>{const e={row:p,completedAt:(new Date).toLocaleTimeString(),notes:T};Y((s=>[...s,e])),u((e=>e+1)),I(new Set),N(""),o.Ay.success("Row ".concat(p," completed!")),p>=E&&(v(!1),o.Ay.success("Congratulations! Pattern completed!"))},V=e=>{u(Math.max(1,Math.min(e,E))),f(0),I(new Set),v(!1)};return(0,A.jsxs)("div",{className:"interactive-knitting",onKeyDown:e=>{switch(e.key){case" ":e.preventDefault(),v(!y);break;case"ArrowRight":q();break;case"ArrowLeft":f(Math.max(0,j-1));break;case"ArrowUp":V(p-1);break;case"ArrowDown":V(p+1)}},tabIndex:0,children:[(0,A.jsxs)(c.A,{gutter:[24,24],children:[(0,A.jsxs)(d.A,{xs:24,lg:8,children:[(0,A.jsx)(a.A,{title:"Knitting Progress",className:"progress-card",style:{marginBottom:16},children:(0,A.jsxs)(g.A,{direction:"vertical",size:"medium",style:{width:"100%"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(ds,{type:"secondary",children:"Overall Progress"}),(0,A.jsx)($e.A,{percent:K,status:p>=E?"success":"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}}),(0,A.jsxs)(ds,{strong:!0,children:["Row ",p," of ",E]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ds,{type:"secondary",children:"Current Row Progress"}),(0,A.jsx)($e.A,{percent:100*j/U,size:"small",showInfo:!1}),(0,A.jsxs)(ds,{children:["Stitch ",j+1," of ",U]})]}),(0,A.jsx)("div",{children:(0,A.jsxs)(c.A,{gutter:16,children:[(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"stat-card",children:[(0,A.jsx)(ss.A,{style:{color:"#1890ff"}}),(0,A.jsx)("br",{}),(0,A.jsx)(ds,{type:"secondary",children:"Time"}),(0,A.jsx)("br",{}),(0,A.jsx)(ds,{strong:!0,children:(e=>{const s=Math.floor(e/3600),t=Math.floor(e%3600/60),i=e%60;return s>0?"".concat(s,":").concat(t.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0")):"".concat(t,":").concat(i.toString().padStart(2,"0"))})(R)})]})}),(0,A.jsx)(d.A,{span:12,children:(0,A.jsxs)(a.A,{size:"small",className:"stat-card",children:[(0,A.jsx)(ts.A,{style:{color:"#52c41a"}}),(0,A.jsx)("br",{}),(0,A.jsx)(ds,{type:"secondary",children:"Completed"}),(0,A.jsx)("br",{}),(0,A.jsxs)(ds,{strong:!0,children:[p-1," rows"]})]})})]})})]})}),(0,A.jsx)(a.A,{title:"Playback Controls",className:"controls-card",style:{marginBottom:16},children:(0,A.jsxs)(g.A,{direction:"vertical",size:"medium",style:{width:"100%"},children:[(0,A.jsxs)(c.A,{gutter:8,children:[(0,A.jsx)(d.A,{span:6,children:(0,A.jsx)(m.Ay,{icon:(0,A.jsx)(is.A,{}),onClick:()=>V(p-1),disabled:p<=1,block:!0})}),(0,A.jsx)(d.A,{span:6,children:(0,A.jsx)(m.Ay,{icon:(0,A.jsx)(ns.A,{}),onClick:()=>f(Math.max(0,j-1)),disabled:j<=0,block:!0})}),(0,A.jsx)(d.A,{span:6,children:(0,A.jsx)(m.Ay,{type:"primary",icon:y?(0,A.jsx)(rs.A,{}):(0,A.jsx)(ls.A,{}),onClick:()=>v(!y),block:!0})}),(0,A.jsx)(d.A,{span:6,children:(0,A.jsx)(m.Ay,{icon:(0,A.jsx)(os.A,{}),onClick:q,disabled:j>=U,block:!0})})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ds,{children:"Playback Speed"}),(0,A.jsxs)(C.A,{value:b,onChange:w,style:{width:"100%"},children:[(0,A.jsx)(xs,{value:2e3,children:"Very Slow (2s)"}),(0,A.jsx)(xs,{value:1e3,children:"Slow (1s)"}),(0,A.jsx)(xs,{value:500,children:"Normal (0.5s)"}),(0,A.jsx)(xs,{value:250,children:"Fast (0.25s)"}),(0,A.jsx)(xs,{value:100,children:"Very Fast (0.1s)"})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ds,{children:"Jump to Row"}),(0,A.jsx)(P.A,{type:"number",min:1,max:E,value:p,onChange:e=>V(parseInt(e.target.value)||1),style:{width:"100%"}})]})]})}),(0,A.jsxs)(a.A,{title:"Session Notes",className:"notes-card",children:[(0,A.jsx)(ps,{value:T,onChange:e=>N(e.target.value),placeholder:"Add notes about this row...",rows:3}),(0,A.jsx)(ds,{type:"secondary",style:{fontSize:"12px"},children:"Notes will be saved when row is completed"})]})]}),(0,A.jsxs)(d.A,{xs:24,lg:16,children:[(0,A.jsxs)(a.A,{title:(0,A.jsxs)(g.A,{children:[(0,A.jsxs)(ds,{children:["Row ",p," Instructions"]}),(0,A.jsx)(Le.A,{checkedChildren:"Chart",unCheckedChildren:"Text",checked:S,onChange:k})]}),className:"pattern-view-card",children:[z&&(0,A.jsxs)("div",{className:"row-instructions",style:{marginBottom:16,padding:16,background:"#f5f5f5",borderRadius:8},children:[(0,A.jsx)(ds,{strong:!0,style:{fontSize:"16px"},children:F.instruction}),F.notes&&(0,A.jsxs)("div",{style:{marginTop:8},children:[(0,A.jsx)(G.A,{style:{color:"#1890ff",marginRight:8}}),(0,A.jsx)(ds,{type:"secondary",children:F.notes})]})]}),S?(0,A.jsxs)("div",{className:"stitch-chart",style:{display:"grid",gridTemplateColumns:"repeat(".concat(Math.min(U,40),", 1fr)"),gap:"2px",padding:"16px",background:"white",borderRadius:"8px",border:"1px solid #e8e8e8",maxHeight:"400px",overflowY:"auto"},children:[F.stitches.slice(0,Math.min(U,40)).map(((e,s)=>{const t=B.has(s),i=s===j,n=gs[e.type]||gs.k;return(0,A.jsx)(es.A,{content:(0,A.jsxs)("div",{children:[(0,A.jsx)(ds,{strong:!0,children:n.name}),(0,A.jsx)("br",{}),(0,A.jsxs)(ds,{type:"secondary",children:["Stitch ",s+1]}),"#ffffff"!==e.color&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("br",{}),(0,A.jsx)("div",{style:{width:16,height:16,backgroundColor:e.color,border:"1px solid #ccc",display:"inline-block",marginTop:4}})]})]}),trigger:"hover",children:(0,A.jsx)("div",{className:"stitch-cell ".concat(t?"completed":""," ").concat(i?"current":""),onClick:()=>{return e=s,f(Math.max(0,Math.min(e,U-1))),void v(!1);var e},style:{width:"24px",height:"24px",backgroundColor:t?"#52c41a":i?"#1890ff":n.color,border:"2px solid ".concat(i?"#1890ff":t?"#52c41a":"#d9d9d9"),borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"14px",fontWeight:"bold",color:t||i?"white":"#333",transition:"all 0.2s ease"},children:t?"\u2713":i?"\u25cf":n.symbol})},s)})),U>40&&(0,A.jsxs)("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"8px",color:"#666",fontSize:"12px"},children:["Showing first 40 of ",U," stitches"]})]}):(0,A.jsxs)("div",{className:"written-instructions",style:{fontSize:"16px",lineHeight:"28px",padding:"24px",background:"white",borderRadius:"8px",border:"1px solid #e8e8e8"},children:[(0,A.jsx)(hs,{children:F.instruction}),(null===(r=l.colorwork)||void 0===r?void 0:r.enabled)&&(0,A.jsxs)("div",{style:{marginTop:16},children:[(0,A.jsx)(ds,{strong:!0,children:"Color Key:"}),(0,A.jsx)("div",{style:{marginTop:8},children:l.colorwork.colors.map(((e,s)=>(0,A.jsxs)(g.A,{style:{marginRight:16},children:[(0,A.jsx)("div",{style:{width:16,height:16,backgroundColor:e,border:"1px solid #ccc",borderRadius:"2px"}}),(0,A.jsxs)(ds,{children:["Color ",s+1]})]},s)))})]})]}),(0,A.jsx)("div",{style:{marginTop:16,padding:12,background:"#fafafa",borderRadius:6},children:(0,A.jsxs)(ds,{type:"secondary",style:{fontSize:"12px"},children:[(0,A.jsx)(as.A,{})," Keyboard: Space (play/pause), \u2190 \u2192 (stitch), \u2191 \u2193 (row)"]})})]}),L.length>0&&(0,A.jsx)(a.A,{title:"Knitting Log",style:{marginTop:16},children:(0,A.jsx)(he.A,{size:"small",dataSource:L.slice(-5),renderItem:e=>(0,A.jsx)(he.A.Item,{children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(te.A,{style:{color:"#52c41a"}}),(0,A.jsxs)(ds,{strong:!0,children:["Row ",e.row]}),(0,A.jsx)(ds,{type:"secondary",children:e.completedAt}),e.notes&&(0,A.jsxs)(ds,{type:"secondary",children:["- ",e.notes]})]})})})})]})]}),(0,A.jsx)("div",{className:"step-actions",style:{marginTop:24},children:(0,A.jsxs)(g.A,{children:[(0,A.jsx)(m.Ay,{size:"large",onClick:x,children:"Back to Preview"}),p>=E&&(0,A.jsx)(m.Ay,{size:"large",style:{background:"linear-gradient(90deg, #52c41a, #73d13d)",borderColor:"transparent",color:"white",fontWeight:"bold"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},children:"Pattern Complete! \ud83c\udf89"})]})})]})},us={0:{name:"Red",primary:"#ff4d4f",secondary:"#ff7875"},1:{name:"Orange",primary:"#fa8c16",secondary:"#ffa940"},2:{name:"Yellow",primary:"#fadb14",secondary:"#ffec3d"},3:{name:"Green",primary:"#52c41a",secondary:"#73d13d"},4:{name:"Blue",primary:"#1890ff",secondary:"#40a9ff"},5:{name:"Indigo",primary:"#722ed1",secondary:"#9254de"},6:{name:"Violet",primary:"#eb2f96",secondary:"#f759ab"}},js=e=>us[e]||us[0],{Content:fs}=l.A,ys=e=>{let{view:s="designer"}=e;const t=(0,r.wA)(),x=(0,r.d4)(V.mK),p=(0,r.d4)(V.xs),{currentStep:g,steps:m,canGoNext:u,canGoPrevious:j}=((0,r.d4)(V.eH),(0,r.d4)(V.TY),(0,r.d4)(V.eJ),(0,r.d4)(V.Ks),x);(0,n.useEffect)((()=>{const e="knitting-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));t((0,V.g6)({section:null,data:{sessionId:e}}));t((0,V.g6)({section:null,data:{basePattern:{id:"custom",name:"Create Custom Pattern",description:"Design your own pattern from scratch",shapes:null}}}))}),[t]);const f=()=>{t((0,V.sk)())},y=()=>{t((0,V.sQ)())},v=e=>{t((0,V.s8)(e))};return(0,A.jsx)(l.A,{className:"knitting-design-app",children:(0,A.jsx)(fs,{children:(0,A.jsxs)("div",{className:"design-container",children:[(0,A.jsx)(a.A,{className:"progress-card",children:(0,A.jsx)(c.A,{gutter:[24,24],children:(0,A.jsx)(d.A,{span:24,children:(0,A.jsx)(h.A,{current:g,onChange:e=>{t((0,V.s8)(e))},items:m.map(((e,s)=>{const t=js(s);return{title:e.title,disabled:!1,icon:g===s?(0,A.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:t.primary,border:"2px solid white",boxShadow:"0 0 0 2px ".concat(t.primary)}}):g>s?(0,A.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:t.primary,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold"},children:"\u2713"}):(0,A.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"#f0f0f0",border:"2px solid ".concat(t.primary),color:t.primary,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:s+1})}})),className:"design-steps rainbow-steps"})})})}),(0,A.jsx)("div",{className:"step-content",children:(()=>{var e,s;const n=null===(e=m[g])||void 0===e?void 0:e.key;if(!p)return(0,A.jsxs)(a.A,{children:[(0,A.jsx)("h2",{children:"Loading..."}),(0,A.jsx)("p",{children:"Initializing pattern data..."})]});if("setup"===n)return(0,A.jsx)(z,{data:p,onChange:e=>t((0,V.g6)({section:null,data:e})),onNext:f,onJumpToStep:v});if("custom"===n)return(0,A.jsx)(E,{data:p,onChange:e=>t((0,V.g6)({section:null,data:e})),onNext:f,onBack:y});if("sizing"===n){var r,l,c,d,h,x;const e={chest:40,length:60,armLength:25},s={method:(null===(r=p.sizing)||void 0===r?void 0:r.method)||"percentage",scale:(null===(l=p.sizing)||void 0===l?void 0:l.percentage)||100,customDimensions:{chest:(null===(c=p.sizing)||void 0===c?void 0:c.width)||e.chest,length:(null===(d=p.sizing)||void 0===d?void 0:d.height)||e.length,armLength:(null===(h=p.sizing)||void 0===h?void 0:h.armLength)||e.armLength}},n=(0,i.A)((0,i.A)({},p),{},{basePattern:(0,i.A)((0,i.A)({},p.basePattern),{},{shapes:p.customShapes&&Object.keys(p.customShapes).length>0?p.customShapes:null===(x=p.basePattern)||void 0===x?void 0:x.shapes})});return(0,A.jsx)(ee,{data:s,patternData:n,onChange:e=>{var s,i,n;const r={method:e.method||"percentage",percentage:e.scale||100,width:(null===(s=e.customDimensions)||void 0===s?void 0:s.chest)||40,height:(null===(i=e.customDimensions)||void 0===i?void 0:i.length)||60,armLength:(null===(n=e.customDimensions)||void 0===n?void 0:n.armLength)||25};t((0,V.g6)({section:"sizing",data:r}))},onNext:f,onPrevious:y})}return"gauge"===n?(0,A.jsx)(ae,{data:p,onUpdate:e=>t((0,V.g6)({section:"gauge",data:e})),onNext:f,onPrev:y}):"colorwork"===n?(0,A.jsx)(Re,{data:p.colorwork||{enabled:!1,layers:[],type:"stranded"},onUpdate:e=>t((0,V.g6)({section:"colorwork",data:e})),onNext:f,onPrevious:y}):"preview"===n?(0,A.jsx)(Qe,{data:p,onUpdate:e=>t((0,V.g6)({section:"preview",data:e})),onNext:f,onPrev:y,onStartKnitting:()=>{o.Ay.success("Starting interactive knitting mode (debug)"),f()}}):"knitting"===n?(0,A.jsx)(ms,{data:p,onUpdate:e=>t((0,V.g6)({section:null,data:e})),onPrev:y,onExit:()=>{o.Ay.success("Exiting knitting mode (debug)"),y()}}):(0,A.jsxs)(a.A,{children:[(0,A.jsx)("h2",{children:"Debug Mode - All Components Loaded Successfully!"}),(0,A.jsxs)("p",{children:["Current step: ",g]}),(0,A.jsxs)("p",{children:["Step name: ",null===(s=m[g])||void 0===s?void 0:s.title]}),(0,A.jsxs)("p",{children:["Pattern name: ",p.name||"No name set"]}),(0,A.jsx)("p",{children:"All step components are now imported and working:"}),(0,A.jsxs)("ul",{children:[(0,A.jsx)("li",{children:"\u2705 PatternSetup"}),(0,A.jsx)("li",{children:"\u2705 PatternEditor (always available as step 2)"}),(0,A.jsx)("li",{children:"\u2705 SizingStep"}),(0,A.jsx)("li",{children:"\u2705 GaugeStep"}),(0,A.jsx)("li",{children:"\u2705 ColorworkStep"}),(0,A.jsx)("li",{children:"\u2705 PreviewStep"}),(0,A.jsx)("li",{children:"\u2705 InteractiveKnitting"})]}),(0,A.jsxs)("p",{children:[(0,A.jsx)("strong",{children:"New Flow:"})," Users can now edit any pattern in the Pattern Editor step!"]})]})})()})]})})})}}}]);
//# sourceMappingURL=809.fb53401e.chunk.js.map