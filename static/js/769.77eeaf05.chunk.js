"use strict";(self.webpackChunkhobbies=self.webpackChunkhobbies||[]).push([[769],{3769:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var n=s(9379),i=s(5043),r=s(3709);class o{constructor(){this.rows=[]}addRow(e){this.rows.push(e)}generateKnittingInstructions(){if(0===this.rows.length)return[];const e=[],t=this.rows[0].leftStitchesInWork,s=this.rows[0].rightStitchesInWork,n=this.rows[this.rows.length-1].leftStitchesInWork,i=this.rows[this.rows.length-1].rightStitchesInWork;if(t===n&&s===i)e.push("Knit ".concat(this.rows.length," rows (RC=").concat(this.rows[this.rows.length-1].rowNumber,", ").concat(this.rows[this.rows.length-1].leftStitchesInWork+this.rows[this.rows.length-1].rightStitchesInWork," sts in work)."));else{let t=1,s=this.rows[0];for(const n of this.rows){const i=n.leftStitchesInWork-s.leftStitchesInWork,r=n.rightStitchesInWork-s.rightStitchesInWork;if(0!==i||0!==r){let o="";i>0?o+="Increase ".concat(i," stitch").concat(i>1?"es":""," on the left. "):i<0&&(o+="Decrease ".concat(-i," stitch").concat(i<-1?"es":""," on the left. ")),r>0?o+="Increase ".concat(r," stitch").concat(r>1?"es":""," on the right. "):r<0&&(o+="Decrease ".concat(-r," stitch").concat(r<-1?"es":""," on the right. ")),s=n,o=t>1?"".concat(o,"Knit ").concat(t," rows. "):"".concat(o,"Knit 1 row. "),o+="(RC=".concat(n.rowNumber,", ").concat(n.leftStitchesInWork+n.rightStitchesInWork," sts in work)"),t=1,e.push(o)}else t++}}return e}}o.Row=class{constructor(e,t,s){this.rowNumber=e,this.leftStitchesInWork=t,this.rightStitchesInWork=s}};const a=new class{constructor(e,t){this.stitchesPerFourInches=e,this.rowsPerFourInches=t}getStitchesPerInch(){return this.stitchesPerFourInches/4}getRowsPerInch(){return this.rowsPerFourInches/4}}(19,30);class l{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;this.height=e,this.baseA=t,this.baseB=s,this.baseBHorizontalOffset=n,this.successors=i,this.modificationScale=o,this.finishingSteps=r}setSizeModifier(e){this.modificationScale=e}getHeight(){return this.height*this.modificationScale}getLowerBase(){return this.baseA*this.modificationScale}getUpperBase(){return this.baseB*this.modificationScale}getOffset(){return this.baseBHorizontalOffset*this.modificationScale}static fromObject(e){if(!e||e==[]||e=={})return null;const t=e.successors&&Array.isArray(e.successors)?e.successors.filter((e=>null!=e)).map((e=>l.fromObject(e))):[];return new l(e.height,e.baseA,e.baseB,e.baseBHorizontalOffset||0,t,e.finishingSteps||[])}getUpperBaseWidthInStitches(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return Math.round(this.getUpperBase()*e.getStitchesPerInch())}getStitchPlan(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=e.getStitchesPerInch()*t,i=e.getRowsPerInch()*t,r=Math.round(this.getLowerBase()*n),a=Math.floor(r/2),l=r%2===0?a:a+1,c=Math.round(this.getHeight()*i),h=this.getUpperBase()-this.getLowerBase(),d=h/2-this.getOffset(),u=h/2+this.getOffset(),g=Math.round(d*n),p=Math.round(u*n),f=Math.abs(g/c),w=Math.abs(p/c);let m=0,v=0;const x=new o(e,t);let b=new o.Row(s-1,a,l);for(let j=s;j<s+c;j++){let e=0,t=0;for(m+=f,v+=w;m>=1;)g>0?e+=1:e-=1,m-=1;for(;v>=1;)p>0?t+=1:t-=1,v-=1;const s=b.leftStitchesInWork+e,n=b.rightStitchesInWork+t,i=new o.Row(j,s,n);x.addRow(i),b=i}return x}generateKnittingInstructions(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const r=this.getStitchPlan(e,t,s),o=[];if(n&&r.rows.length>0&&o.push("Cast on ".concat(r.rows[0].leftStitchesInWork+r.rows[0].rightStitchesInWork," stitches.")),o.push(...r.generateKnittingInstructions(i)),o.push(...this.finishingSteps),this.successors.length>1){o.push("Divide into ".concat(this.successors.length," sections:"));for(let n=0;n<this.successors.length;n++){const a=this.successors[n],l=a.getUpperBaseWidthInStitches(e,t);if(a.getHeight()>0){o.push("Section ".concat(n+1,": ").concat(l," stitches"));const c=a.generateKnittingInstructions(e,t,r.rows.length>0?r.rows[r.rows.length-1].rowNumber+1:s,!1,i?i.getChild(r.rows.length):null);o.push(...c)}else o.push("Section ".concat(n+1,": bind off ").concat(a.getUpperBaseWidthInStitches(e,t)," stitches."))}}else if(1===this.successors.length){const n=this.successors[0],a=n.getUpperBaseWidthInStitches(e,t);if(n.getHeight()>0){const a=n.generateKnittingInstructions(e,t,r.rows.length>0?r.rows[r.rows.length-1].rowNumber+1:s,!1,i?i.getChild(r.rows.length):null);o.push(...a)}else o.push("Bind off ".concat(a," stitches."))}else r.rows.length>0&&o.push("Bind off ".concat(r.rows[r.rows.length-1].leftStitchesInWork+r.rows[r.rows.length-1].rightStitchesInWork," stitches."));return o}}var c=s(579);const h=e=>{let{patterns:t,activePatternId:s,onSelectPattern:n}=e;return(0,c.jsxs)("div",{className:"pattern-list",children:[(0,c.jsx)("h2",{children:"My Patterns"}),(0,c.jsxs)("ul",{children:[t.map((e=>(0,c.jsxs)("li",{className:s===e.id?"active":"",onClick:()=>n(e),children:[e.name,(0,c.jsx)("span",{className:"pattern-description",children:e.description})]},e.id))),0===t.length&&(0,c.jsx)("li",{className:"empty-message",children:"No patterns found."})]})]})},d=e=>{var t,s,r,o;let{pattern:a,onPatternChange:h}=e;const[d,u]=(0,i.useState)({height:(null===a||void 0===a||null===(t=a.panel)||void 0===t?void 0:t.height)||0,baseA:(null===a||void 0===a||null===(s=a.panel)||void 0===s?void 0:s.baseA)||0,baseB:(null===a||void 0===a||null===(r=a.panel)||void 0===r?void 0:r.baseB)||0,baseBHorizontalOffset:(null===a||void 0===a||null===(o=a.panel)||void 0===o?void 0:o.baseBHorizontalOffset)||0});if(!a)return null;const g=e=>{const{name:t,value:s}=e.target,i=parseFloat(s);u((0,n.A)((0,n.A)({},d),{},{[t]:i}));const r=new l("height"===t?i:d.height,"baseA"===t?i:d.baseA,"baseB"===t?i:d.baseB,"baseBHorizontalOffset"===t?i:d.baseBHorizontalOffset,a.panel.successors,a.panel.finishingSteps,a.panel.modificationScale);h((0,n.A)((0,n.A)({},a),{},{panel:r}))};return(0,c.jsxs)("div",{className:"pattern-editor",children:[(0,c.jsx)("h2",{children:"Edit Pattern"}),(0,c.jsxs)("div",{className:"editor-section",children:[(0,c.jsx)("h3",{children:"Panel Properties"}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"height",children:"Height (inches):"}),(0,c.jsx)("input",{type:"number",id:"height",name:"height",value:d.height,onChange:g,step:"0.25",min:"0"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"baseA",children:"Lower Width (inches):"}),(0,c.jsx)("input",{type:"number",id:"baseA",name:"baseA",value:d.baseA,onChange:g,step:"0.25",min:"0"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"baseB",children:"Upper Width (inches):"}),(0,c.jsx)("input",{type:"number",id:"baseB",name:"baseB",value:d.baseB,onChange:g,step:"0.25",min:"0"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"baseBHorizontalOffset",children:"Horizontal Offset (inches):"}),(0,c.jsx)("input",{type:"number",id:"baseBHorizontalOffset",name:"baseBHorizontalOffset",value:d.baseBHorizontalOffset,onChange:g,step:"0.25"})]})]}),(0,c.jsxs)("div",{className:"successors-section",children:[(0,c.jsx)("h3",{children:"Successor Panels"}),(0,c.jsx)("p",{children:"Advanced panel editing not available in this view"})]})]})},u=e=>{let{pattern:t,colorwork:s,currentRow:n,onRowChange:r,sizeModifier:o}=e;const[l,h]=(0,i.useState)([]),[d,u]=(0,i.useState)(0);return(0,i.useEffect)((()=>{if(null!==t&&void 0!==t&&t.panel){const e=t.panel.getStitchPlan(a,o),n=t.panel.generateKnittingInstructions(a,o,1,!0,s);h(n),u(e.rows.length)}}),[t,s,o]),t?(0,c.jsxs)("div",{className:"pattern-viewer",children:[(0,c.jsxs)("div",{className:"pattern-header",children:[(0,c.jsx)("h2",{children:t.name}),(0,c.jsx)("p",{className:"pattern-description",children:t.description})]}),(0,c.jsx)("div",{className:"pattern-controls",children:(0,c.jsxs)("div",{className:"row-controls",children:[(0,c.jsx)("button",{onClick:()=>r(Math.max(1,n-1)),disabled:n<=1,children:"Previous Row"}),(0,c.jsxs)("span",{className:"row-indicator",children:["Row ",n," of ",d]}),(0,c.jsx)("button",{onClick:()=>r(Math.min(d,n+1)),disabled:n>=d,children:"Next Row"})]})}),(0,c.jsxs)("div",{className:"pattern-display",children:[(0,c.jsxs)("div",{className:"shape-visualization",children:[(0,c.jsx)("h3",{children:"Pattern Shape"}),(0,c.jsx)("div",{className:"trapezoid-visual",style:{height:"".concat(20*t.panel.getHeight(),"px"),width:"".concat(20*t.panel.getLowerBase(),"px"),borderTop:"".concat(20*t.panel.getHeight(),"px solid transparent"),borderLeft:"".concat(20*t.panel.getOffset(),"px solid transparent"),borderRight:"".concat(20*(t.panel.getUpperBase()-t.panel.getLowerBase()-t.panel.getOffset()),"px solid transparent")}})]}),(0,c.jsxs)("div",{className:"current-row-display",children:[(0,c.jsx)("h3",{children:"Current Row"}),(0,c.jsx)("div",{className:"stitch-visualization",children:(0,c.jsx)("div",{className:"stitch-row",children:Array(20).fill().map(((e,t)=>(0,c.jsx)("div",{className:"stitch",style:{backgroundColor:t%3===0?"#3498db":"#e74c3c"}},t)))})})]}),(0,c.jsxs)("div",{className:"instructions",children:[(0,c.jsx)("h3",{children:"Knitting Instructions"}),(0,c.jsx)("ol",{className:"instruction-list",children:l.map(((e,t)=>(0,c.jsx)("li",{className:t===n-1?"active":"",children:e},t)))})]})]})]}):null},g=e=>{let{pattern:t,colorwork:s,onColorworkChange:n}=e;const[r,o]=(0,i.useState)(Array(20).fill().map((()=>Array(20).fill("#FFFFFF")))),[a,l]=(0,i.useState)("#3498db");if(!t)return null;return(0,c.jsxs)("div",{className:"colorwork-editor",children:[(0,c.jsx)("h2",{children:"Colorwork Pattern"}),(0,c.jsxs)("div",{className:"color-controls",children:[(0,c.jsxs)("div",{className:"color-picker",children:[(0,c.jsx)("label",{children:"Selected Color: "}),(0,c.jsx)("input",{type:"color",value:a,onChange:e=>{l(e.target.value)}})]}),(0,c.jsx)("button",{onClick:()=>{const e=Array(20).fill().map((()=>Array(20).fill("#FFFFFF")));o(e),n(null)},children:"Clear Colorwork"})]}),(0,c.jsx)("div",{className:"colorwork-grid",children:r.map(((e,t)=>(0,c.jsx)("div",{className:"grid-row",children:e.map(((e,s)=>(0,c.jsx)("div",{className:"grid-cell",style:{backgroundColor:e},onClick:()=>((e,t)=>{const s=[...r];s[e][t]=a,o(s),n({grid:s,name:"Custom Colorwork"})})(t,s)},s)))},t)))}),(0,c.jsx)("div",{className:"colorwork-note",children:(0,c.jsx)("p",{children:"Click on cells to apply the selected color. This will overlay the colorwork pattern onto your knitting pattern."})})]})},p=e=>{let{view:t="viewer"}=e;const[s,o]=(0,i.useState)([]),[a,p]=(0,i.useState)(null),[f,w]=(0,i.useState)(1),[m,v]=(0,i.useState)(null),[x,b]=(0,i.useState)(1),{patternId:j}=(0,r.g)();(0,i.useEffect)((()=>{o([{id:"1",name:"Basic Sweater Front",description:"Simple sweater front panel with v-neck",panel:{height:20,baseA:16,baseB:16,successors:[{height:5,baseA:8,baseB:8,baseBHorizontalOffset:-2},{height:5,baseA:8,baseB:8,baseBHorizontalOffset:2}]}}])}),[]),(0,i.useEffect)((()=>{if(j&&s.length){const e=s.find((e=>e.id===j));if(e){const t=l.fromObject(e.panel);p((0,n.A)((0,n.A)({},e),{},{panel:t}))}}}),[j,s]);return(0,c.jsxs)("div",{className:"knitting-app",children:[(0,c.jsxs)("div",{className:"app-header",children:[(0,c.jsx)("h1",{children:"Knitting Patterns"}),(0,c.jsx)("div",{className:"view-controls",children:a&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"size-controls",children:[(0,c.jsx)("label",{children:"Size: "}),(0,c.jsx)("input",{type:"range",min:"0.5",max:"2",step:"0.05",value:f,onChange:e=>{return t=parseFloat(e.target.value),w(t),void(null!==a&&void 0!==a&&a.panel&&(a.panel.setSizeModifier(t),p((0,n.A)({},a))));var t}}),(0,c.jsxs)("span",{children:[Math.round(100*f),"%"]})]}),(0,c.jsx)("div",{className:"mode-toggle",children:"editor"===t?"Edit Mode":"View Mode"})]})})]}),(0,c.jsxs)("div",{className:"knitting-content",children:[(0,c.jsx)(h,{patterns:s,activePatternId:null===a||void 0===a?void 0:a.id,onSelectPattern:e=>{const t=l.fromObject(e.panel);p((0,n.A)((0,n.A)({},e),{},{panel:t})),b(1)}}),"editor"===t&&a?(0,c.jsxs)("div",{className:"editor-container",children:[(0,c.jsx)(d,{pattern:a,onPatternChange:e=>p(e)}),(0,c.jsx)(g,{pattern:a,colorwork:m,onColorworkChange:e=>{v(e)}})]}):a?(0,c.jsx)(u,{pattern:a,colorwork:m,currentRow:x,onRowChange:e=>{b(e)},sizeModifier:f}):(0,c.jsx)("div",{className:"empty-state",children:(0,c.jsx)("p",{children:"Select a pattern to view or edit"})})]})]})}}}]);
//# sourceMappingURL=769.77eeaf05.chunk.js.map