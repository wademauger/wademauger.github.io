{"version":3,"file":"PanelShapeCreator-C0yu9UAY.js","sources":["../../../node_modules/@rc-component/color-picker/es/hooks/useColorDrag.js","../../../node_modules/@rc-component/color-picker/es/components/Handler.js","../../../node_modules/@rc-component/color-picker/es/components/Palette.js","../../../node_modules/@rc-component/color-picker/es/components/Transform.js","../../../node_modules/@rc-component/color-picker/es/components/Picker.js","../../../node_modules/@rc-component/color-picker/es/hooks/useColorState.js","../../../node_modules/@rc-component/color-picker/es/components/Gradient.js","../../../node_modules/@rc-component/color-picker/es/components/Slider.js","../../../node_modules/@rc-component/color-picker/es/hooks/useComponent.js","../../../node_modules/@rc-component/color-picker/es/ColorPicker.js","../../../node_modules/rc-tabs/es/TabContext.js","../../../node_modules/rc-tabs/es/hooks/useIndicator.js","../../../node_modules/rc-tabs/es/hooks/useOffsets.js","../../../node_modules/rc-tabs/es/hooks/useSyncState.js","../../../node_modules/rc-tabs/es/hooks/useTouchMove.js","../../../node_modules/rc-tabs/es/hooks/useUpdate.js","../../../node_modules/rc-tabs/es/hooks/useVisibleRange.js","../../../node_modules/rc-tabs/es/util.js","../../../node_modules/rc-tabs/es/TabNavList/AddButton.js","../../../node_modules/rc-tabs/es/TabNavList/ExtraContent.js","../../../node_modules/rc-tabs/es/TabNavList/OperationNode.js","../../../node_modules/rc-tabs/es/TabNavList/TabNode.js","../../../node_modules/rc-tabs/es/TabNavList/index.js","../../../node_modules/rc-tabs/es/TabPanelList/TabPane.js","../../../node_modules/rc-tabs/es/TabNavList/Wrapper.js","../../../node_modules/rc-tabs/es/TabPanelList/index.js","../../../node_modules/rc-tabs/es/hooks/useAnimateConfig.js","../../../node_modules/rc-tabs/es/Tabs.js","../../../node_modules/antd/es/tabs/hooks/useAnimateConfig.js","../../../node_modules/antd/es/tabs/hooks/useLegacyItems.js","../../../node_modules/antd/es/tabs/style/motion.js","../../../node_modules/antd/es/tabs/style/index.js","../../../node_modules/antd/es/tabs/TabPane.js","../../../node_modules/antd/es/tabs/index.js","../../../node_modules/antd/es/card/Grid.js","../../../node_modules/antd/es/card/style/index.js","../../../node_modules/antd/es/card/Card.js","../../../node_modules/antd/es/card/Meta.js","../../../node_modules/antd/es/card/index.js","../../../node_modules/rc-segmented/es/MotionThumb.js","../../../node_modules/rc-segmented/es/index.js","../../../node_modules/antd/es/segmented/style/index.js","../../../node_modules/antd/es/segmented/index.js","../../../node_modules/antd/es/color-picker/context.js","../../../node_modules/antd/es/color-picker/components/ColorClear.js","../../../node_modules/antd/es/color-picker/interface.js","../../../node_modules/antd/es/color-picker/components/ColorSteppers.js","../../../node_modules/antd/es/color-picker/components/ColorAlphaInput.js","../../../node_modules/antd/es/color-picker/components/ColorHexInput.js","../../../node_modules/antd/es/color-picker/components/ColorHsbInput.js","../../../node_modules/antd/es/color-picker/components/ColorRgbInput.js","../../../node_modules/antd/es/color-picker/components/ColorInput.js","../../../node_modules/rc-slider/es/util.js","../../../node_modules/rc-slider/es/context.js","../../../node_modules/rc-slider/es/Handles/Handle.js","../../../node_modules/rc-slider/es/Handles/index.js","../../../node_modules/rc-slider/es/Marks/Mark.js","../../../node_modules/rc-slider/es/Marks/index.js","../../../node_modules/rc-slider/es/Steps/Dot.js","../../../node_modules/rc-slider/es/Steps/index.js","../../../node_modules/rc-slider/es/Tracks/Track.js","../../../node_modules/rc-slider/es/Tracks/index.js","../../../node_modules/rc-slider/es/hooks/useDrag.js","../../../node_modules/rc-slider/es/hooks/useOffset.js","../../../node_modules/rc-slider/es/hooks/useRange.js","../../../node_modules/rc-slider/es/Slider.js","../../../node_modules/antd/es/slider/Context.js","../../../node_modules/antd/es/slider/SliderTooltip.js","../../../node_modules/antd/es/slider/style/index.js","../../../node_modules/antd/es/slider/useRafLock.js","../../../node_modules/antd/es/slider/index.js","../../../node_modules/antd/es/color-picker/components/ColorSlider.js","../../../node_modules/antd/es/color-picker/components/PanelPicker/GradientColorBar.js","../../../node_modules/antd/es/color-picker/components/PanelPicker/index.js","../../../node_modules/antd/es/color-picker/components/PanelPresets.js","../../../node_modules/antd/es/color-picker/ColorPickerPanel.js","../../../node_modules/antd/es/color-picker/components/ColorTrigger.js","../../../node_modules/antd/es/color-picker/hooks/useModeColor.js","../../../node_modules/antd/es/color-picker/style/color-block.js","../../../node_modules/antd/es/color-picker/style/input.js","../../../node_modules/antd/es/color-picker/style/picker.js","../../../node_modules/antd/es/color-picker/style/presets.js","../../../node_modules/antd/es/color-picker/style/slider.js","../../../node_modules/antd/es/color-picker/style/index.js","../../../node_modules/antd/es/color-picker/ColorPicker.js","../../../node_modules/@ant-design/icons-svg/es/asn/ZoomInOutlined.js","../../../node_modules/@ant-design/icons/es/icons/ZoomInOutlined.js","../../../node_modules/@ant-design/icons-svg/es/asn/ZoomOutOutlined.js","../../../node_modules/@ant-design/icons/es/icons/ZoomOutOutlined.js","../../../node_modules/antd/es/layout/hooks/useHasSider.js","../../../node_modules/antd/es/layout/layout.js","../../../node_modules/antd/es/layout/index.js","../../../node_modules/rc-progress/es/common.js","../../../node_modules/rc-progress/es/hooks/useId.js","../../../node_modules/rc-progress/es/Circle/PtgCircle.js","../../../node_modules/rc-progress/es/Circle/util.js","../../../node_modules/rc-progress/es/Circle/index.js","../../../node_modules/antd/es/progress/utils.js","../../../node_modules/antd/es/progress/Circle.js","../../../node_modules/antd/es/progress/style/index.js","../../../node_modules/antd/es/progress/Line.js","../../../node_modules/antd/es/progress/Steps.js","../../../node_modules/antd/es/progress/progress.js","../../../node_modules/@ant-design/icons-svg/es/asn/ArrowDownOutlined.js","../../../node_modules/@ant-design/icons/es/icons/ArrowDownOutlined.js","../../../node_modules/@ant-design/icons-svg/es/asn/ArrowUpOutlined.js","../../../node_modules/@ant-design/icons/es/icons/ArrowUpOutlined.js","../../../node_modules/@ant-design/icons-svg/es/asn/DragOutlined.js","../../../node_modules/@ant-design/icons/es/icons/DragOutlined.js","../../../node_modules/@ant-design/icons-svg/es/asn/ExpandOutlined.js","../../../node_modules/@ant-design/icons/es/icons/ExpandOutlined.js","../../../node_modules/@ant-design/icons-svg/es/asn/SaveOutlined.js","../../../node_modules/@ant-design/icons/es/icons/SaveOutlined.js","../../../src/utils/mergeEntityIntoLibrary.ts","../../../src/components/modals/SaveAsModal.tsx","../../../src/models/ColorworkPattern.ts","../../../src/models/StitchPlan.ts","../../../src/models/Gauge.ts","../../../src/models/Trapezoid.ts","../../../src/models/Panel.ts","../../../src/models/PanelColorworkComposer.ts","../../../src/models/ColorworkVisualizer.tsx","../../../src/models/InstructionGenerator.ts","../../../node_modules/bind-event-listener/dist/bind.js","../../../node_modules/bind-event-listener/dist/bind-all.js","../../../node_modules/bind-event-listener/dist/index.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/honey-pot-fix/honey-pot-data-attribute.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/honey-pot-fix/is-honey-pot-element.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/honey-pot-fix/get-element-from-point-without-honey-pot.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/max-z-index.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/honey-pot-fix/make-honey-pot-fix.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/public-utils/once.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/is-firefox.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/is-safari.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/changing-window/count-events-for-safari.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/changing-window/is-from-another-window.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/changing-window/is-leaving-window.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/detect-broken-drag.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/get-input.js","../../../node_modules/raf-schd/dist/raf-schd.esm.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/ledger/dispatch-consumer-event.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/ledger/lifecycle-manager.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/ledger/usage-ledger.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/public-utils/combine.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/add-attribute.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/make-adapter/make-drop-target.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/make-adapter/make-monitor.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/make-adapter/make-adapter.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/android.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/media-types/text-media-type.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/util/media-types/url-media-type.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/adapter/element-adapter-native-data-key.js","../../../node_modules/@atlaskit/pragmatic-drag-and-drop/dist/esm/adapter/element-adapter.js","../../../src/components/ColorworkCanvasEditor.tsx","../../../src/components/RowByRowInstructions.tsx","../../../src/models/ColorworkStitchPlanService.ts","../../../src/components/InteractiveKnittingView.tsx","../../../src/components/ColorworkPanelDiagram.tsx","../../../src/components/ColorworkPanelEditor.tsx","../../../src/components/PanelDiagram.tsx","../../../src/apps/colorwork-designer/PanelShapeCreator.tsx"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nfunction getPosition(e) {\n  var obj = 'touches' in e ? e.touches[0] : e;\n  var scrollXOffset = document.documentElement.scrollLeft || document.body.scrollLeft || window.pageXOffset;\n  var scrollYOffset = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset;\n  return {\n    pageX: obj.pageX - scrollXOffset,\n    pageY: obj.pageY - scrollYOffset\n  };\n}\nfunction useColorDrag(props) {\n  var targetRef = props.targetRef,\n    containerRef = props.containerRef,\n    direction = props.direction,\n    onDragChange = props.onDragChange,\n    onDragChangeComplete = props.onDragChangeComplete,\n    calculate = props.calculate,\n    color = props.color,\n    disabledDrag = props.disabledDrag;\n  var _useState = useState({\n      x: 0,\n      y: 0\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    offsetValue = _useState2[0],\n    setOffsetValue = _useState2[1];\n  var mouseMoveRef = useRef(null);\n  var mouseUpRef = useRef(null);\n\n  // Always get position from `color`\n  useEffect(function () {\n    setOffsetValue(calculate());\n  }, [color]);\n  useEffect(function () {\n    return function () {\n      document.removeEventListener('mousemove', mouseMoveRef.current);\n      document.removeEventListener('mouseup', mouseUpRef.current);\n      document.removeEventListener('touchmove', mouseMoveRef.current);\n      document.removeEventListener('touchend', mouseUpRef.current);\n      mouseMoveRef.current = null;\n      mouseUpRef.current = null;\n    };\n  }, []);\n  var updateOffset = function updateOffset(e) {\n    var _getPosition = getPosition(e),\n      pageX = _getPosition.pageX,\n      pageY = _getPosition.pageY;\n    var _containerRef$current = containerRef.current.getBoundingClientRect(),\n      rectX = _containerRef$current.x,\n      rectY = _containerRef$current.y,\n      width = _containerRef$current.width,\n      height = _containerRef$current.height;\n    var _targetRef$current$ge = targetRef.current.getBoundingClientRect(),\n      targetWidth = _targetRef$current$ge.width,\n      targetHeight = _targetRef$current$ge.height;\n    var centerOffsetX = targetWidth / 2;\n    var centerOffsetY = targetHeight / 2;\n    var offsetX = Math.max(0, Math.min(pageX - rectX, width)) - centerOffsetX;\n    var offsetY = Math.max(0, Math.min(pageY - rectY, height)) - centerOffsetY;\n    var calcOffset = {\n      x: offsetX,\n      y: direction === 'x' ? offsetValue.y : offsetY\n    };\n\n    // Exclusion of boundary cases\n    if (targetWidth === 0 && targetHeight === 0 || targetWidth !== targetHeight) {\n      return false;\n    }\n    onDragChange === null || onDragChange === void 0 || onDragChange(calcOffset);\n  };\n  var onDragMove = function onDragMove(e) {\n    e.preventDefault();\n    updateOffset(e);\n  };\n  var onDragStop = function onDragStop(e) {\n    e.preventDefault();\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    document.removeEventListener('touchmove', mouseMoveRef.current);\n    document.removeEventListener('touchend', mouseUpRef.current);\n    mouseMoveRef.current = null;\n    mouseUpRef.current = null;\n    onDragChangeComplete === null || onDragChangeComplete === void 0 || onDragChangeComplete();\n  };\n  var onDragStart = function onDragStart(e) {\n    // https://github.com/ant-design/ant-design/issues/43529\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    if (disabledDrag) {\n      return;\n    }\n    updateOffset(e);\n    document.addEventListener('mousemove', onDragMove);\n    document.addEventListener('mouseup', onDragStop);\n    document.addEventListener('touchmove', onDragMove);\n    document.addEventListener('touchend', onDragStop);\n    mouseMoveRef.current = onDragMove;\n    mouseUpRef.current = onDragStop;\n  };\n  return [offsetValue, onDragStart];\n}\nexport default useColorDrag;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport classNames from 'classnames';\nimport React from 'react';\nvar Handler = function Handler(_ref) {\n  var _ref$size = _ref.size,\n    size = _ref$size === void 0 ? 'default' : _ref$size,\n    color = _ref.color,\n    prefixCls = _ref.prefixCls;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-handler\"), _defineProperty({}, \"\".concat(prefixCls, \"-handler-sm\"), size === 'small')),\n    style: {\n      backgroundColor: color\n    }\n  });\n};\nexport default Handler;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport React from 'react';\nvar Palette = function Palette(_ref) {\n  var children = _ref.children,\n    style = _ref.style,\n    prefixCls = _ref.prefixCls;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-palette\"),\n    style: _objectSpread({\n      position: 'relative'\n    }, style)\n  }, children);\n};\nexport default Palette;","import React, { forwardRef } from 'react';\nvar Transform = /*#__PURE__*/forwardRef(function (props, ref) {\n  var children = props.children,\n    x = props.x,\n    y = props.y;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    style: {\n      position: 'absolute',\n      left: \"\".concat(x, \"%\"),\n      top: \"\".concat(y, \"%\"),\n      zIndex: 1,\n      transform: 'translate(-50%, -50%)'\n    }\n  }, children);\n});\nexport default Transform;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef } from 'react';\nimport useColorDrag from \"../hooks/useColorDrag\";\nimport { calcOffset, calculateColor } from \"../util\";\nimport { useEvent } from 'rc-util';\nimport Handler from \"./Handler\";\nimport Palette from \"./Palette\";\nimport Transform from \"./Transform\";\nvar Picker = function Picker(_ref) {\n  var color = _ref.color,\n    onChange = _ref.onChange,\n    prefixCls = _ref.prefixCls,\n    onChangeComplete = _ref.onChangeComplete,\n    disabled = _ref.disabled;\n  var pickerRef = useRef();\n  var transformRef = useRef();\n  var colorRef = useRef(color);\n  var onDragChange = useEvent(function (offsetValue) {\n    var calcColor = calculateColor({\n      offset: offsetValue,\n      targetRef: transformRef,\n      containerRef: pickerRef,\n      color: color\n    });\n    colorRef.current = calcColor;\n    onChange(calcColor);\n  });\n  var _useColorDrag = useColorDrag({\n      color: color,\n      containerRef: pickerRef,\n      targetRef: transformRef,\n      calculate: function calculate() {\n        return calcOffset(color);\n      },\n      onDragChange: onDragChange,\n      onDragChangeComplete: function onDragChangeComplete() {\n        return onChangeComplete === null || onChangeComplete === void 0 ? void 0 : onChangeComplete(colorRef.current);\n      },\n      disabledDrag: disabled\n    }),\n    _useColorDrag2 = _slicedToArray(_useColorDrag, 2),\n    offset = _useColorDrag2[0],\n    dragStartHandle = _useColorDrag2[1];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: pickerRef,\n    className: \"\".concat(prefixCls, \"-select\"),\n    onMouseDown: dragStartHandle,\n    onTouchStart: dragStartHandle\n  }, /*#__PURE__*/React.createElement(Palette, {\n    prefixCls: prefixCls\n  }, /*#__PURE__*/React.createElement(Transform, {\n    x: offset.x,\n    y: offset.y,\n    ref: transformRef\n  }, /*#__PURE__*/React.createElement(Handler, {\n    color: color.toRgbString(),\n    prefixCls: prefixCls\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-saturation\"),\n    style: {\n      backgroundColor: \"hsl(\".concat(color.toHsb().h, \",100%, 50%)\"),\n      backgroundImage: 'linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))'\n    }\n  })));\n};\nexport default Picker;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useMergedState } from 'rc-util';\nimport { useMemo } from 'react';\nimport { generateColor } from \"../util\";\nvar useColorState = function useColorState(defaultValue, value) {\n  var _useMergedState = useMergedState(defaultValue, {\n      value: value\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    mergedValue = _useMergedState2[0],\n    setValue = _useMergedState2[1];\n  var color = useMemo(function () {\n    return generateColor(mergedValue);\n  }, [mergedValue]);\n  return [color, setValue];\n};\nexport default useColorState;","import React, { useMemo } from 'react';\nimport { Color } from \"../color\";\nimport { generateColor } from \"../util\";\nvar Gradient = function Gradient(_ref) {\n  var colors = _ref.colors,\n    children = _ref.children,\n    _ref$direction = _ref.direction,\n    direction = _ref$direction === void 0 ? 'to right' : _ref$direction,\n    type = _ref.type,\n    prefixCls = _ref.prefixCls;\n  var gradientColors = useMemo(function () {\n    return colors.map(function (color, idx) {\n      var result = generateColor(color);\n      if (type === 'alpha' && idx === colors.length - 1) {\n        result = new Color(result.setA(1));\n      }\n      return result.toRgbString();\n    }).join(',');\n  }, [colors, type]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-gradient\"),\n    style: {\n      position: 'absolute',\n      inset: 0,\n      background: \"linear-gradient(\".concat(direction, \", \").concat(gradientColors, \")\")\n    }\n  }, children);\n};\nexport default Gradient;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef } from 'react';\nimport useColorDrag from \"../hooks/useColorDrag\";\nimport Palette from \"./Palette\";\nimport classNames from 'classnames';\nimport { useEvent } from 'rc-util';\nimport { Color } from \"../color\";\nimport { calcOffset, calculateColor } from \"../util\";\nimport Gradient from \"./Gradient\";\nimport Handler from \"./Handler\";\nimport Transform from \"./Transform\";\nvar Slider = function Slider(props) {\n  var prefixCls = props.prefixCls,\n    colors = props.colors,\n    disabled = props.disabled,\n    onChange = props.onChange,\n    onChangeComplete = props.onChangeComplete,\n    color = props.color,\n    type = props.type;\n  var sliderRef = useRef();\n  var transformRef = useRef();\n  var colorRef = useRef(color);\n  var getValue = function getValue(c) {\n    return type === 'hue' ? c.getHue() : c.a * 100;\n  };\n  var onDragChange = useEvent(function (offsetValue) {\n    var calcColor = calculateColor({\n      offset: offsetValue,\n      targetRef: transformRef,\n      containerRef: sliderRef,\n      color: color,\n      type: type\n    });\n    colorRef.current = calcColor;\n    onChange(getValue(calcColor));\n  });\n  var _useColorDrag = useColorDrag({\n      color: color,\n      targetRef: transformRef,\n      containerRef: sliderRef,\n      calculate: function calculate() {\n        return calcOffset(color, type);\n      },\n      onDragChange: onDragChange,\n      onDragChangeComplete: function onDragChangeComplete() {\n        onChangeComplete(getValue(colorRef.current));\n      },\n      direction: 'x',\n      disabledDrag: disabled\n    }),\n    _useColorDrag2 = _slicedToArray(_useColorDrag, 2),\n    offset = _useColorDrag2[0],\n    dragStartHandle = _useColorDrag2[1];\n  var handleColor = React.useMemo(function () {\n    if (type === 'hue') {\n      var hsb = color.toHsb();\n      hsb.s = 1;\n      hsb.b = 1;\n      hsb.a = 1;\n      var lightColor = new Color(hsb);\n      return lightColor;\n    }\n    return color;\n  }, [color, type]);\n\n  // ========================= Gradient =========================\n  var gradientList = React.useMemo(function () {\n    return colors.map(function (info) {\n      return \"\".concat(info.color, \" \").concat(info.percent, \"%\");\n    });\n  }, [colors]);\n\n  // ========================== Render ==========================\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: sliderRef,\n    className: classNames(\"\".concat(prefixCls, \"-slider\"), \"\".concat(prefixCls, \"-slider-\").concat(type)),\n    onMouseDown: dragStartHandle,\n    onTouchStart: dragStartHandle\n  }, /*#__PURE__*/React.createElement(Palette, {\n    prefixCls: prefixCls\n  }, /*#__PURE__*/React.createElement(Transform, {\n    x: offset.x,\n    y: offset.y,\n    ref: transformRef\n  }, /*#__PURE__*/React.createElement(Handler, {\n    size: \"small\",\n    color: handleColor.toHexString(),\n    prefixCls: prefixCls\n  })), /*#__PURE__*/React.createElement(Gradient, {\n    colors: gradientList,\n    type: type,\n    prefixCls: prefixCls\n  })));\n};\nexport default Slider;","import * as React from 'react';\nimport Slider from \"../components/Slider\";\nexport default function useComponent(components) {\n  return React.useMemo(function () {\n    var _ref = components || {},\n      slider = _ref.slider;\n    return [slider || Slider];\n  }, [components]);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { forwardRef, useMemo } from 'react';\nimport { ColorPickerPrefixCls, defaultColor } from \"./util\";\nimport classNames from 'classnames';\nimport { Color } from \"./color\";\nimport ColorBlock from \"./components/ColorBlock\";\nimport Picker from \"./components/Picker\";\nimport useColorState from \"./hooks/useColorState\";\nimport useComponent from \"./hooks/useComponent\";\nvar HUE_COLORS = [{\n  color: 'rgb(255, 0, 0)',\n  percent: 0\n}, {\n  color: 'rgb(255, 255, 0)',\n  percent: 17\n}, {\n  color: 'rgb(0, 255, 0)',\n  percent: 33\n}, {\n  color: 'rgb(0, 255, 255)',\n  percent: 50\n}, {\n  color: 'rgb(0, 0, 255)',\n  percent: 67\n}, {\n  color: 'rgb(255, 0, 255)',\n  percent: 83\n}, {\n  color: 'rgb(255, 0, 0)',\n  percent: 100\n}];\nvar ColorPicker = /*#__PURE__*/forwardRef(function (props, ref) {\n  var value = props.value,\n    defaultValue = props.defaultValue,\n    _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? ColorPickerPrefixCls : _props$prefixCls,\n    onChange = props.onChange,\n    onChangeComplete = props.onChangeComplete,\n    className = props.className,\n    style = props.style,\n    panelRender = props.panelRender,\n    _props$disabledAlpha = props.disabledAlpha,\n    disabledAlpha = _props$disabledAlpha === void 0 ? false : _props$disabledAlpha,\n    _props$disabled = props.disabled,\n    disabled = _props$disabled === void 0 ? false : _props$disabled,\n    components = props.components;\n\n  // ========================== Components ==========================\n  var _useComponent = useComponent(components),\n    _useComponent2 = _slicedToArray(_useComponent, 1),\n    Slider = _useComponent2[0];\n\n  // ============================ Color =============================\n  var _useColorState = useColorState(defaultValue || defaultColor, value),\n    _useColorState2 = _slicedToArray(_useColorState, 2),\n    colorValue = _useColorState2[0],\n    setColorValue = _useColorState2[1];\n  var alphaColor = useMemo(function () {\n    return colorValue.setA(1).toRgbString();\n  }, [colorValue]);\n\n  // ============================ Events ============================\n  var handleChange = function handleChange(data, type) {\n    if (!value) {\n      setColorValue(data);\n    }\n    onChange === null || onChange === void 0 || onChange(data, type);\n  };\n\n  // Convert\n  var getHueColor = function getHueColor(hue) {\n    return new Color(colorValue.setHue(hue));\n  };\n  var getAlphaColor = function getAlphaColor(alpha) {\n    return new Color(colorValue.setA(alpha / 100));\n  };\n\n  // Slider change\n  var onHueChange = function onHueChange(hue) {\n    handleChange(getHueColor(hue), {\n      type: 'hue',\n      value: hue\n    });\n  };\n  var onAlphaChange = function onAlphaChange(alpha) {\n    handleChange(getAlphaColor(alpha), {\n      type: 'alpha',\n      value: alpha\n    });\n  };\n\n  // Complete\n  var onHueChangeComplete = function onHueChangeComplete(hue) {\n    if (onChangeComplete) {\n      onChangeComplete(getHueColor(hue));\n    }\n  };\n  var onAlphaChangeComplete = function onAlphaChangeComplete(alpha) {\n    if (onChangeComplete) {\n      onChangeComplete(getAlphaColor(alpha));\n    }\n  };\n\n  // ============================ Render ============================\n  var mergeCls = classNames(\"\".concat(prefixCls, \"-panel\"), className, _defineProperty({}, \"\".concat(prefixCls, \"-panel-disabled\"), disabled));\n  var sharedSliderProps = {\n    prefixCls: prefixCls,\n    disabled: disabled,\n    color: colorValue\n  };\n  var defaultPanel = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Picker, _extends({\n    onChange: handleChange\n  }, sharedSliderProps, {\n    onChangeComplete: onChangeComplete\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-slider-container\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-slider-group\"), _defineProperty({}, \"\".concat(prefixCls, \"-slider-group-disabled-alpha\"), disabledAlpha))\n  }, /*#__PURE__*/React.createElement(Slider, _extends({}, sharedSliderProps, {\n    type: \"hue\",\n    colors: HUE_COLORS,\n    min: 0,\n    max: 359,\n    value: colorValue.getHue(),\n    onChange: onHueChange,\n    onChangeComplete: onHueChangeComplete\n  })), !disabledAlpha && /*#__PURE__*/React.createElement(Slider, _extends({}, sharedSliderProps, {\n    type: \"alpha\",\n    colors: [{\n      percent: 0,\n      color: 'rgba(255, 0, 4, 0)'\n    }, {\n      percent: 100,\n      color: alphaColor\n    }],\n    min: 0,\n    max: 100,\n    value: colorValue.a * 100,\n    onChange: onAlphaChange,\n    onChangeComplete: onAlphaChangeComplete\n  }))), /*#__PURE__*/React.createElement(ColorBlock, {\n    color: colorValue.toRgbString(),\n    prefixCls: prefixCls\n  })));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: mergeCls,\n    style: style,\n    ref: ref\n  }, typeof panelRender === 'function' ? panelRender(defaultPanel) : defaultPanel);\n});\nif (process.env.NODE_ENV !== 'production') {\n  ColorPicker.displayName = 'ColorPicker';\n}\nexport default ColorPicker;","import { createContext } from 'react';\nexport default /*#__PURE__*/createContext(null);","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport raf from \"rc-util/es/raf\";\nimport React, { useEffect, useRef, useState } from 'react';\nvar useIndicator = function useIndicator(options) {\n  var activeTabOffset = options.activeTabOffset,\n    horizontal = options.horizontal,\n    rtl = options.rtl,\n    _options$indicator = options.indicator,\n    indicator = _options$indicator === void 0 ? {} : _options$indicator;\n  var size = indicator.size,\n    _indicator$align = indicator.align,\n    align = _indicator$align === void 0 ? 'center' : _indicator$align;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    inkStyle = _useState2[0],\n    setInkStyle = _useState2[1];\n  var inkBarRafRef = useRef();\n  var getLength = React.useCallback(function (origin) {\n    if (typeof size === 'function') {\n      return size(origin);\n    }\n    if (typeof size === 'number') {\n      return size;\n    }\n    return origin;\n  }, [size]);\n\n  // Delay set ink style to avoid remove tab blink\n  function cleanInkBarRaf() {\n    raf.cancel(inkBarRafRef.current);\n  }\n  useEffect(function () {\n    var newInkStyle = {};\n    if (activeTabOffset) {\n      if (horizontal) {\n        newInkStyle.width = getLength(activeTabOffset.width);\n        var key = rtl ? 'right' : 'left';\n        if (align === 'start') {\n          newInkStyle[key] = activeTabOffset[key];\n        }\n        if (align === 'center') {\n          newInkStyle[key] = activeTabOffset[key] + activeTabOffset.width / 2;\n          newInkStyle.transform = rtl ? 'translateX(50%)' : 'translateX(-50%)';\n        }\n        if (align === 'end') {\n          newInkStyle[key] = activeTabOffset[key] + activeTabOffset.width;\n          newInkStyle.transform = 'translateX(-100%)';\n        }\n      } else {\n        newInkStyle.height = getLength(activeTabOffset.height);\n        if (align === 'start') {\n          newInkStyle.top = activeTabOffset.top;\n        }\n        if (align === 'center') {\n          newInkStyle.top = activeTabOffset.top + activeTabOffset.height / 2;\n          newInkStyle.transform = 'translateY(-50%)';\n        }\n        if (align === 'end') {\n          newInkStyle.top = activeTabOffset.top + activeTabOffset.height;\n          newInkStyle.transform = 'translateY(-100%)';\n        }\n      }\n    }\n    cleanInkBarRaf();\n    inkBarRafRef.current = raf(function () {\n      // Avoid jitter caused by tiny numerical differences\n      // fix https://github.com/ant-design/ant-design/issues/53378\n      var isEqual = inkStyle && newInkStyle && Object.keys(newInkStyle).every(function (key) {\n        var newValue = newInkStyle[key];\n        var oldValue = inkStyle[key];\n        return typeof newValue === 'number' && typeof oldValue === 'number' ? Math.round(newValue) === Math.round(oldValue) : newValue === oldValue;\n      });\n      if (!isEqual) {\n        setInkStyle(newInkStyle);\n      }\n    });\n    return cleanInkBarRaf;\n  }, [JSON.stringify(activeTabOffset), horizontal, rtl, align, getLength]);\n  return {\n    style: inkStyle\n  };\n};\nexport default useIndicator;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { useMemo } from 'react';\nvar DEFAULT_SIZE = {\n  width: 0,\n  height: 0,\n  left: 0,\n  top: 0\n};\nexport default function useOffsets(tabs, tabSizes, holderScrollWidth) {\n  return useMemo(function () {\n    var _tabs$;\n    var map = new Map();\n    var lastOffset = tabSizes.get((_tabs$ = tabs[0]) === null || _tabs$ === void 0 ? void 0 : _tabs$.key) || DEFAULT_SIZE;\n    var rightOffset = lastOffset.left + lastOffset.width;\n    for (var i = 0; i < tabs.length; i += 1) {\n      var key = tabs[i].key;\n      var data = tabSizes.get(key);\n\n      // Reuse last one when not exist yet\n      if (!data) {\n        var _tabs;\n        data = tabSizes.get((_tabs = tabs[i - 1]) === null || _tabs === void 0 ? void 0 : _tabs.key) || DEFAULT_SIZE;\n      }\n      var entity = map.get(key) || _objectSpread({}, data);\n\n      // Right\n      entity.right = rightOffset - entity.left - entity.width;\n\n      // Update entity\n      map.set(key, entity);\n    }\n    return map;\n  }, [tabs.map(function (tab) {\n    return tab.key;\n  }).join('_'), tabSizes, holderScrollWidth]);\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nexport default function useSyncState(defaultState, onChange) {\n  var stateRef = React.useRef(defaultState);\n  var _React$useState = React.useState({}),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    forceUpdate = _React$useState2[1];\n  function setState(updater) {\n    var newValue = typeof updater === 'function' ? updater(stateRef.current) : updater;\n    if (newValue !== stateRef.current) {\n      onChange(newValue, stateRef.current);\n    }\n    stateRef.current = newValue;\n    forceUpdate({});\n  }\n  return [stateRef.current, setState];\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useRef, useState } from 'react';\nvar MIN_SWIPE_DISTANCE = 0.1;\nvar STOP_SWIPE_DISTANCE = 0.01;\nvar REFRESH_INTERVAL = 20;\nvar SPEED_OFF_MULTIPLE = Math.pow(0.995, REFRESH_INTERVAL);\n\n// ================================= Hook =================================\nexport default function useTouchMove(ref, onOffset) {\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    touchPosition = _useState2[0],\n    setTouchPosition = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    lastTimestamp = _useState4[0],\n    setLastTimestamp = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    lastTimeDiff = _useState6[0],\n    setLastTimeDiff = _useState6[1];\n  var _useState7 = useState(),\n    _useState8 = _slicedToArray(_useState7, 2),\n    lastOffset = _useState8[0],\n    setLastOffset = _useState8[1];\n  var motionRef = useRef();\n\n  // ========================= Events =========================\n  // >>> Touch events\n  function onTouchStart(e) {\n    var _e$touches$ = e.touches[0],\n      screenX = _e$touches$.screenX,\n      screenY = _e$touches$.screenY;\n    setTouchPosition({\n      x: screenX,\n      y: screenY\n    });\n    window.clearInterval(motionRef.current);\n  }\n  function onTouchMove(e) {\n    if (!touchPosition) return;\n\n    // e.preventDefault();\n    var _e$touches$2 = e.touches[0],\n      screenX = _e$touches$2.screenX,\n      screenY = _e$touches$2.screenY;\n    setTouchPosition({\n      x: screenX,\n      y: screenY\n    });\n    var offsetX = screenX - touchPosition.x;\n    var offsetY = screenY - touchPosition.y;\n    onOffset(offsetX, offsetY);\n    var now = Date.now();\n    setLastTimestamp(now);\n    setLastTimeDiff(now - lastTimestamp);\n    setLastOffset({\n      x: offsetX,\n      y: offsetY\n    });\n  }\n  function onTouchEnd() {\n    if (!touchPosition) return;\n    setTouchPosition(null);\n    setLastOffset(null);\n\n    // Swipe if needed\n    if (lastOffset) {\n      var distanceX = lastOffset.x / lastTimeDiff;\n      var distanceY = lastOffset.y / lastTimeDiff;\n      var absX = Math.abs(distanceX);\n      var absY = Math.abs(distanceY);\n\n      // Skip swipe if low distance\n      if (Math.max(absX, absY) < MIN_SWIPE_DISTANCE) return;\n      var currentX = distanceX;\n      var currentY = distanceY;\n      motionRef.current = window.setInterval(function () {\n        if (Math.abs(currentX) < STOP_SWIPE_DISTANCE && Math.abs(currentY) < STOP_SWIPE_DISTANCE) {\n          window.clearInterval(motionRef.current);\n          return;\n        }\n        currentX *= SPEED_OFF_MULTIPLE;\n        currentY *= SPEED_OFF_MULTIPLE;\n        onOffset(currentX * REFRESH_INTERVAL, currentY * REFRESH_INTERVAL);\n      }, REFRESH_INTERVAL);\n    }\n  }\n\n  // >>> Wheel event\n  var lastWheelDirectionRef = useRef();\n  function onWheel(e) {\n    var deltaX = e.deltaX,\n      deltaY = e.deltaY;\n\n    // Convert both to x & y since wheel only happened on PC\n    var mixed = 0;\n    var absX = Math.abs(deltaX);\n    var absY = Math.abs(deltaY);\n    if (absX === absY) {\n      mixed = lastWheelDirectionRef.current === 'x' ? deltaX : deltaY;\n    } else if (absX > absY) {\n      mixed = deltaX;\n      lastWheelDirectionRef.current = 'x';\n    } else {\n      mixed = deltaY;\n      lastWheelDirectionRef.current = 'y';\n    }\n    if (onOffset(-mixed, -mixed)) {\n      e.preventDefault();\n    }\n  }\n\n  // ========================= Effect =========================\n  var touchEventsRef = useRef(null);\n  touchEventsRef.current = {\n    onTouchStart: onTouchStart,\n    onTouchMove: onTouchMove,\n    onTouchEnd: onTouchEnd,\n    onWheel: onWheel\n  };\n  React.useEffect(function () {\n    function onProxyTouchStart(e) {\n      touchEventsRef.current.onTouchStart(e);\n    }\n    function onProxyTouchMove(e) {\n      touchEventsRef.current.onTouchMove(e);\n    }\n    function onProxyTouchEnd(e) {\n      touchEventsRef.current.onTouchEnd(e);\n    }\n    function onProxyWheel(e) {\n      touchEventsRef.current.onWheel(e);\n    }\n    document.addEventListener('touchmove', onProxyTouchMove, {\n      passive: false\n    });\n    document.addEventListener('touchend', onProxyTouchEnd, {\n      passive: true\n    });\n\n    // No need to clean up since element removed\n    ref.current.addEventListener('touchstart', onProxyTouchStart, {\n      passive: true\n    });\n    ref.current.addEventListener('wheel', onProxyWheel, {\n      passive: false\n    });\n    return function () {\n      document.removeEventListener('touchmove', onProxyTouchMove);\n      document.removeEventListener('touchend', onProxyTouchEnd);\n    };\n  }, []);\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useLayoutUpdateEffect } from \"rc-util/es/hooks/useLayoutEffect\";\nimport { useRef, useState } from 'react';\n\n/**\n * Help to merge callback with `useLayoutEffect`.\n * One time will only trigger once.\n */\nexport default function useUpdate(callback) {\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    count = _useState2[0],\n    setCount = _useState2[1];\n  var effectRef = useRef(0);\n  var callbackRef = useRef();\n  callbackRef.current = callback;\n\n  // Trigger on `useLayoutEffect`\n  useLayoutUpdateEffect(function () {\n    var _callbackRef$current;\n    (_callbackRef$current = callbackRef.current) === null || _callbackRef$current === void 0 || _callbackRef$current.call(callbackRef);\n  }, [count]);\n\n  // Trigger to update count\n  return function () {\n    if (effectRef.current !== count) {\n      return;\n    }\n    effectRef.current += 1;\n    setCount(effectRef.current);\n  };\n}\nexport function useUpdateState(defaultState) {\n  var batchRef = useRef([]);\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    forceUpdate = _useState4[1];\n  var state = useRef(typeof defaultState === 'function' ? defaultState() : defaultState);\n  var flushUpdate = useUpdate(function () {\n    var current = state.current;\n    batchRef.current.forEach(function (callback) {\n      current = callback(current);\n    });\n    batchRef.current = [];\n    state.current = current;\n    forceUpdate({});\n  });\n  function updater(callback) {\n    batchRef.current.push(callback);\n    flushUpdate();\n  }\n  return [state.current, updater];\n}","import { useMemo } from 'react';\nvar DEFAULT_SIZE = {\n  width: 0,\n  height: 0,\n  left: 0,\n  top: 0,\n  right: 0\n};\nexport default function useVisibleRange(tabOffsets, visibleTabContentValue, transform, tabContentSizeValue, addNodeSizeValue, operationNodeSizeValue, _ref) {\n  var tabs = _ref.tabs,\n    tabPosition = _ref.tabPosition,\n    rtl = _ref.rtl;\n  var charUnit;\n  var position;\n  var transformSize;\n  if (['top', 'bottom'].includes(tabPosition)) {\n    charUnit = 'width';\n    position = rtl ? 'right' : 'left';\n    transformSize = Math.abs(transform);\n  } else {\n    charUnit = 'height';\n    position = 'top';\n    transformSize = -transform;\n  }\n  return useMemo(function () {\n    if (!tabs.length) {\n      return [0, 0];\n    }\n    var len = tabs.length;\n    var endIndex = len;\n    for (var i = 0; i < len; i += 1) {\n      var offset = tabOffsets.get(tabs[i].key) || DEFAULT_SIZE;\n      if (Math.floor(offset[position] + offset[charUnit]) > Math.floor(transformSize + visibleTabContentValue)) {\n        endIndex = i - 1;\n        break;\n      }\n    }\n    var startIndex = 0;\n    for (var _i = len - 1; _i >= 0; _i -= 1) {\n      var _offset = tabOffsets.get(tabs[_i].key) || DEFAULT_SIZE;\n      if (_offset[position] < transformSize) {\n        startIndex = _i + 1;\n        break;\n      }\n    }\n    return startIndex >= endIndex ? [0, 0] : [startIndex, endIndex];\n  }, [tabOffsets, visibleTabContentValue, tabContentSizeValue, addNodeSizeValue, operationNodeSizeValue, transformSize, tabPosition, tabs.map(function (tab) {\n    return tab.key;\n  }).join('_'), rtl]);\n}","/**\n * We trade Map as deps which may change with same value but different ref object.\n * We should make it as hash for deps\n * */\nexport function stringify(obj) {\n  var tgt;\n  if (obj instanceof Map) {\n    tgt = {};\n    obj.forEach(function (v, k) {\n      tgt[k] = v;\n    });\n  } else {\n    tgt = obj;\n  }\n  return JSON.stringify(tgt);\n}\nvar RC_TABS_DOUBLE_QUOTE = 'TABS_DQ';\nexport function genDataNodeKey(key) {\n  return String(key).replace(/\"/g, RC_TABS_DOUBLE_QUOTE);\n}\nexport function getRemovable(closable, closeIcon, editable, disabled) {\n  if (\n  // Only editable tabs can be removed\n  !editable ||\n  // Tabs cannot be removed when disabled\n  disabled ||\n  // closable is false\n  closable === false ||\n  // If closable is undefined, the remove button should be hidden when closeIcon is null or false\n  closable === undefined && (closeIcon === false || closeIcon === null)) {\n    return false;\n  }\n  return true;\n}","import * as React from 'react';\nvar AddButton = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    editable = props.editable,\n    locale = props.locale,\n    style = props.style;\n  if (!editable || editable.showAdd === false) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"button\", {\n    ref: ref,\n    type: \"button\",\n    className: \"\".concat(prefixCls, \"-nav-add\"),\n    style: style,\n    \"aria-label\": (locale === null || locale === void 0 ? void 0 : locale.addAriaLabel) || 'Add tab',\n    onClick: function onClick(event) {\n      editable.onEdit('add', {\n        event: event\n      });\n    }\n  }, editable.addIcon || '+');\n});\nexport default AddButton;","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport * as React from 'react';\nvar ExtraContent = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var position = props.position,\n    prefixCls = props.prefixCls,\n    extra = props.extra;\n  if (!extra) {\n    return null;\n  }\n  var content;\n\n  // Parse extra\n  var assertExtra = {};\n  if (_typeof(extra) === 'object' && ! /*#__PURE__*/React.isValidElement(extra)) {\n    assertExtra = extra;\n  } else {\n    assertExtra.right = extra;\n  }\n  if (position === 'right') {\n    content = assertExtra.right;\n  }\n  if (position === 'left') {\n    content = assertExtra.left;\n  }\n  return content ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-extra-content\"),\n    ref: ref\n  }, content) : null;\n});\nif (process.env.NODE_ENV !== 'production') {\n  ExtraContent.displayName = 'ExtraContent';\n}\nexport default ExtraContent;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport Dropdown from 'rc-dropdown';\nimport Menu, { MenuItem } from 'rc-menu';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { getRemovable } from \"../util\";\nimport AddButton from \"./AddButton\";\nvar OperationNode = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    id = props.id,\n    tabs = props.tabs,\n    locale = props.locale,\n    mobile = props.mobile,\n    _props$more = props.more,\n    moreProps = _props$more === void 0 ? {} : _props$more,\n    style = props.style,\n    className = props.className,\n    editable = props.editable,\n    tabBarGutter = props.tabBarGutter,\n    rtl = props.rtl,\n    removeAriaLabel = props.removeAriaLabel,\n    onTabClick = props.onTabClick,\n    getPopupContainer = props.getPopupContainer,\n    popupClassName = props.popupClassName;\n  // ======================== Dropdown ========================\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    open = _useState2[0],\n    setOpen = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedKey = _useState4[0],\n    setSelectedKey = _useState4[1];\n  var _moreProps$icon = moreProps.icon,\n    moreIcon = _moreProps$icon === void 0 ? 'More' : _moreProps$icon;\n  var popupId = \"\".concat(id, \"-more-popup\");\n  var dropdownPrefix = \"\".concat(prefixCls, \"-dropdown\");\n  var selectedItemId = selectedKey !== null ? \"\".concat(popupId, \"-\").concat(selectedKey) : null;\n  var dropdownAriaLabel = locale === null || locale === void 0 ? void 0 : locale.dropdownAriaLabel;\n  function onRemoveTab(event, key) {\n    event.preventDefault();\n    event.stopPropagation();\n    editable.onEdit('remove', {\n      key: key,\n      event: event\n    });\n  }\n  var menu = /*#__PURE__*/React.createElement(Menu, {\n    onClick: function onClick(_ref) {\n      var key = _ref.key,\n        domEvent = _ref.domEvent;\n      onTabClick(key, domEvent);\n      setOpen(false);\n    },\n    prefixCls: \"\".concat(dropdownPrefix, \"-menu\"),\n    id: popupId,\n    tabIndex: -1,\n    role: \"listbox\",\n    \"aria-activedescendant\": selectedItemId,\n    selectedKeys: [selectedKey],\n    \"aria-label\": dropdownAriaLabel !== undefined ? dropdownAriaLabel : 'expanded dropdown'\n  }, tabs.map(function (tab) {\n    var closable = tab.closable,\n      disabled = tab.disabled,\n      closeIcon = tab.closeIcon,\n      key = tab.key,\n      label = tab.label;\n    var removable = getRemovable(closable, closeIcon, editable, disabled);\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: key,\n      id: \"\".concat(popupId, \"-\").concat(key),\n      role: \"option\",\n      \"aria-controls\": id && \"\".concat(id, \"-panel-\").concat(key),\n      disabled: disabled\n    }, /*#__PURE__*/React.createElement(\"span\", null, label), removable && /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"aria-label\": removeAriaLabel || 'remove',\n      tabIndex: 0,\n      className: \"\".concat(dropdownPrefix, \"-menu-item-remove\"),\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        onRemoveTab(e, key);\n      }\n    }, closeIcon || editable.removeIcon || 'Ã—'));\n  }));\n  function selectOffset(offset) {\n    var enabledTabs = tabs.filter(function (tab) {\n      return !tab.disabled;\n    });\n    var selectedIndex = enabledTabs.findIndex(function (tab) {\n      return tab.key === selectedKey;\n    }) || 0;\n    var len = enabledTabs.length;\n    for (var i = 0; i < len; i += 1) {\n      selectedIndex = (selectedIndex + offset + len) % len;\n      var tab = enabledTabs[selectedIndex];\n      if (!tab.disabled) {\n        setSelectedKey(tab.key);\n        return;\n      }\n    }\n  }\n  function onKeyDown(e) {\n    var which = e.which;\n    if (!open) {\n      if ([KeyCode.DOWN, KeyCode.SPACE, KeyCode.ENTER].includes(which)) {\n        setOpen(true);\n        e.preventDefault();\n      }\n      return;\n    }\n    switch (which) {\n      case KeyCode.UP:\n        selectOffset(-1);\n        e.preventDefault();\n        break;\n      case KeyCode.DOWN:\n        selectOffset(1);\n        e.preventDefault();\n        break;\n      case KeyCode.ESC:\n        setOpen(false);\n        break;\n      case KeyCode.SPACE:\n      case KeyCode.ENTER:\n        if (selectedKey !== null) {\n          onTabClick(selectedKey, e);\n        }\n        break;\n    }\n  }\n\n  // ========================= Effect =========================\n  useEffect(function () {\n    // We use query element here to avoid React strict warning\n    var ele = document.getElementById(selectedItemId);\n    if (ele && ele.scrollIntoView) {\n      ele.scrollIntoView(false);\n    }\n  }, [selectedKey]);\n  useEffect(function () {\n    if (!open) {\n      setSelectedKey(null);\n    }\n  }, [open]);\n\n  // ========================= Render =========================\n  var moreStyle = _defineProperty({}, rtl ? 'marginRight' : 'marginLeft', tabBarGutter);\n  if (!tabs.length) {\n    moreStyle.visibility = 'hidden';\n    moreStyle.order = 1;\n  }\n  var overlayClassName = classNames(_defineProperty({}, \"\".concat(dropdownPrefix, \"-rtl\"), rtl));\n  var moreNode = mobile ? null : /*#__PURE__*/React.createElement(Dropdown, _extends({\n    prefixCls: dropdownPrefix,\n    overlay: menu,\n    visible: tabs.length ? open : false,\n    onVisibleChange: setOpen,\n    overlayClassName: classNames(overlayClassName, popupClassName),\n    mouseEnterDelay: 0.1,\n    mouseLeaveDelay: 0.1,\n    getPopupContainer: getPopupContainer\n  }, moreProps), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"\".concat(prefixCls, \"-nav-more\"),\n    style: moreStyle,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-controls\": popupId,\n    id: \"\".concat(id, \"-more\"),\n    \"aria-expanded\": open,\n    onKeyDown: onKeyDown\n  }, moreIcon));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-nav-operations\"), className),\n    style: style,\n    ref: ref\n  }, moreNode, /*#__PURE__*/React.createElement(AddButton, {\n    prefixCls: prefixCls,\n    locale: locale,\n    editable: editable\n  }));\n});\nexport default /*#__PURE__*/React.memo(OperationNode, function (_, next) {\n  return (\n    // https://github.com/ant-design/ant-design/issues/32544\n    // We'd better remove syntactic sugar in `rc-menu` since this has perf issue\n    next.tabMoving\n  );\n});","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { genDataNodeKey, getRemovable } from \"../util\";\nvar TabNode = function TabNode(props) {\n  var prefixCls = props.prefixCls,\n    id = props.id,\n    active = props.active,\n    focus = props.focus,\n    _props$tab = props.tab,\n    key = _props$tab.key,\n    label = _props$tab.label,\n    disabled = _props$tab.disabled,\n    closeIcon = _props$tab.closeIcon,\n    icon = _props$tab.icon,\n    closable = props.closable,\n    renderWrapper = props.renderWrapper,\n    removeAriaLabel = props.removeAriaLabel,\n    editable = props.editable,\n    onClick = props.onClick,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    onKeyDown = props.onKeyDown,\n    onMouseDown = props.onMouseDown,\n    onMouseUp = props.onMouseUp,\n    style = props.style,\n    tabCount = props.tabCount,\n    currentPosition = props.currentPosition;\n  var tabPrefix = \"\".concat(prefixCls, \"-tab\");\n  var removable = getRemovable(closable, closeIcon, editable, disabled);\n  function onInternalClick(e) {\n    if (disabled) {\n      return;\n    }\n    onClick(e);\n  }\n  function onRemoveTab(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    editable.onEdit('remove', {\n      key: key,\n      event: event\n    });\n  }\n  var labelNode = React.useMemo(function () {\n    return icon && typeof label === 'string' ? /*#__PURE__*/React.createElement(\"span\", null, label) : label;\n  }, [label, icon]);\n  var btnRef = React.useRef(null);\n  React.useEffect(function () {\n    if (focus && btnRef.current) {\n      btnRef.current.focus();\n    }\n  }, [focus]);\n  var node = /*#__PURE__*/React.createElement(\"div\", {\n    key: key,\n    \"data-node-key\": genDataNodeKey(key),\n    className: classNames(tabPrefix, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, \"\".concat(tabPrefix, \"-with-remove\"), removable), \"\".concat(tabPrefix, \"-active\"), active), \"\".concat(tabPrefix, \"-disabled\"), disabled), \"\".concat(tabPrefix, \"-focus\"), focus)),\n    style: style,\n    onClick: onInternalClick\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: btnRef,\n    role: \"tab\",\n    \"aria-selected\": active,\n    id: id && \"\".concat(id, \"-tab-\").concat(key),\n    className: \"\".concat(tabPrefix, \"-btn\"),\n    \"aria-controls\": id && \"\".concat(id, \"-panel-\").concat(key),\n    \"aria-disabled\": disabled,\n    tabIndex: disabled ? null : active ? 0 : -1,\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      onInternalClick(e);\n    },\n    onKeyDown: onKeyDown,\n    onMouseDown: onMouseDown,\n    onMouseUp: onMouseUp,\n    onFocus: onFocus,\n    onBlur: onBlur\n  }, focus && /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-live\": \"polite\",\n    style: {\n      width: 0,\n      height: 0,\n      position: 'absolute',\n      overflow: 'hidden',\n      opacity: 0\n    }\n  }, \"Tab \".concat(currentPosition, \" of \").concat(tabCount)), icon && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(tabPrefix, \"-icon\")\n  }, icon), label && labelNode), removable && /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    role: \"tab\",\n    \"aria-label\": removeAriaLabel || 'remove',\n    tabIndex: active ? 0 : -1,\n    className: \"\".concat(tabPrefix, \"-remove\"),\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      onRemoveTab(e);\n    }\n  }, closeIcon || editable.removeIcon || 'Ã—'));\n  return renderWrapper ? renderWrapper(node) : node;\n};\nexport default TabNode;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n/* eslint-disable react-hooks/exhaustive-deps */\nimport classNames from 'classnames';\nimport ResizeObserver from 'rc-resize-observer';\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport { useComposeRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\nimport { useEffect, useRef, useState } from 'react';\nimport TabContext from \"../TabContext\";\nimport useIndicator from \"../hooks/useIndicator\";\nimport useOffsets from \"../hooks/useOffsets\";\nimport useSyncState from \"../hooks/useSyncState\";\nimport useTouchMove from \"../hooks/useTouchMove\";\nimport useUpdate, { useUpdateState } from \"../hooks/useUpdate\";\nimport useVisibleRange from \"../hooks/useVisibleRange\";\nimport { genDataNodeKey, getRemovable, stringify } from \"../util\";\nimport AddButton from \"./AddButton\";\nimport ExtraContent from \"./ExtraContent\";\nimport OperationNode from \"./OperationNode\";\nimport TabNode from \"./TabNode\";\nvar getTabSize = function getTabSize(tab, containerRect) {\n  // tabListRef\n  var offsetWidth = tab.offsetWidth,\n    offsetHeight = tab.offsetHeight,\n    offsetTop = tab.offsetTop,\n    offsetLeft = tab.offsetLeft;\n  var _tab$getBoundingClien = tab.getBoundingClientRect(),\n    width = _tab$getBoundingClien.width,\n    height = _tab$getBoundingClien.height,\n    left = _tab$getBoundingClien.left,\n    top = _tab$getBoundingClien.top;\n\n  // Use getBoundingClientRect to avoid decimal inaccuracy\n  if (Math.abs(width - offsetWidth) < 1) {\n    return [width, height, left - containerRect.left, top - containerRect.top];\n  }\n  return [offsetWidth, offsetHeight, offsetLeft, offsetTop];\n};\nvar getSize = function getSize(refObj) {\n  var _ref = refObj.current || {},\n    _ref$offsetWidth = _ref.offsetWidth,\n    offsetWidth = _ref$offsetWidth === void 0 ? 0 : _ref$offsetWidth,\n    _ref$offsetHeight = _ref.offsetHeight,\n    offsetHeight = _ref$offsetHeight === void 0 ? 0 : _ref$offsetHeight;\n\n  // Use getBoundingClientRect to avoid decimal inaccuracy\n  if (refObj.current) {\n    var _refObj$current$getBo = refObj.current.getBoundingClientRect(),\n      width = _refObj$current$getBo.width,\n      height = _refObj$current$getBo.height;\n    if (Math.abs(width - offsetWidth) < 1) {\n      return [width, height];\n    }\n  }\n  return [offsetWidth, offsetHeight];\n};\n\n/**\n * Convert `SizeInfo` to unit value. Such as [123, 456] with `top` position get `123`\n */\nvar getUnitValue = function getUnitValue(size, tabPositionTopOrBottom) {\n  return size[tabPositionTopOrBottom ? 0 : 1];\n};\nvar TabNavList = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var className = props.className,\n    style = props.style,\n    id = props.id,\n    animated = props.animated,\n    activeKey = props.activeKey,\n    rtl = props.rtl,\n    extra = props.extra,\n    editable = props.editable,\n    locale = props.locale,\n    tabPosition = props.tabPosition,\n    tabBarGutter = props.tabBarGutter,\n    children = props.children,\n    onTabClick = props.onTabClick,\n    onTabScroll = props.onTabScroll,\n    indicator = props.indicator;\n  var _React$useContext = React.useContext(TabContext),\n    prefixCls = _React$useContext.prefixCls,\n    tabs = _React$useContext.tabs;\n  var containerRef = useRef(null);\n  var extraLeftRef = useRef(null);\n  var extraRightRef = useRef(null);\n  var tabsWrapperRef = useRef(null);\n  var tabListRef = useRef(null);\n  var operationsRef = useRef(null);\n  var innerAddButtonRef = useRef(null);\n  var tabPositionTopOrBottom = tabPosition === 'top' || tabPosition === 'bottom';\n  var _useSyncState = useSyncState(0, function (next, prev) {\n      if (tabPositionTopOrBottom && onTabScroll) {\n        onTabScroll({\n          direction: next > prev ? 'left' : 'right'\n        });\n      }\n    }),\n    _useSyncState2 = _slicedToArray(_useSyncState, 2),\n    transformLeft = _useSyncState2[0],\n    setTransformLeft = _useSyncState2[1];\n  var _useSyncState3 = useSyncState(0, function (next, prev) {\n      if (!tabPositionTopOrBottom && onTabScroll) {\n        onTabScroll({\n          direction: next > prev ? 'top' : 'bottom'\n        });\n      }\n    }),\n    _useSyncState4 = _slicedToArray(_useSyncState3, 2),\n    transformTop = _useSyncState4[0],\n    setTransformTop = _useSyncState4[1];\n  var _useState = useState([0, 0]),\n    _useState2 = _slicedToArray(_useState, 2),\n    containerExcludeExtraSize = _useState2[0],\n    setContainerExcludeExtraSize = _useState2[1];\n  var _useState3 = useState([0, 0]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    tabContentSize = _useState4[0],\n    setTabContentSize = _useState4[1];\n  var _useState5 = useState([0, 0]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    addSize = _useState6[0],\n    setAddSize = _useState6[1];\n  var _useState7 = useState([0, 0]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    operationSize = _useState8[0],\n    setOperationSize = _useState8[1];\n  var _useUpdateState = useUpdateState(new Map()),\n    _useUpdateState2 = _slicedToArray(_useUpdateState, 2),\n    tabSizes = _useUpdateState2[0],\n    setTabSizes = _useUpdateState2[1];\n  var tabOffsets = useOffsets(tabs, tabSizes, tabContentSize[0]);\n\n  // ========================== Unit =========================\n  var containerExcludeExtraSizeValue = getUnitValue(containerExcludeExtraSize, tabPositionTopOrBottom);\n  var tabContentSizeValue = getUnitValue(tabContentSize, tabPositionTopOrBottom);\n  var addSizeValue = getUnitValue(addSize, tabPositionTopOrBottom);\n  var operationSizeValue = getUnitValue(operationSize, tabPositionTopOrBottom);\n  var needScroll = Math.floor(containerExcludeExtraSizeValue) < Math.floor(tabContentSizeValue + addSizeValue);\n  var visibleTabContentValue = needScroll ? containerExcludeExtraSizeValue - operationSizeValue : containerExcludeExtraSizeValue - addSizeValue;\n\n  // ========================== Util =========================\n  var operationsHiddenClassName = \"\".concat(prefixCls, \"-nav-operations-hidden\");\n  var transformMin = 0;\n  var transformMax = 0;\n  if (!tabPositionTopOrBottom) {\n    transformMin = Math.min(0, visibleTabContentValue - tabContentSizeValue);\n    transformMax = 0;\n  } else if (rtl) {\n    transformMin = 0;\n    transformMax = Math.max(0, tabContentSizeValue - visibleTabContentValue);\n  } else {\n    transformMin = Math.min(0, visibleTabContentValue - tabContentSizeValue);\n    transformMax = 0;\n  }\n  function alignInRange(value) {\n    if (value < transformMin) {\n      return transformMin;\n    }\n    if (value > transformMax) {\n      return transformMax;\n    }\n    return value;\n  }\n\n  // ========================= Mobile ========================\n  var touchMovingRef = useRef(null);\n  var _useState9 = useState(),\n    _useState10 = _slicedToArray(_useState9, 2),\n    lockAnimation = _useState10[0],\n    setLockAnimation = _useState10[1];\n  function doLockAnimation() {\n    setLockAnimation(Date.now());\n  }\n  function clearTouchMoving() {\n    if (touchMovingRef.current) {\n      clearTimeout(touchMovingRef.current);\n    }\n  }\n  useTouchMove(tabsWrapperRef, function (offsetX, offsetY) {\n    function doMove(setState, offset) {\n      setState(function (value) {\n        var newValue = alignInRange(value + offset);\n        return newValue;\n      });\n    }\n\n    // Skip scroll if place is enough\n    if (!needScroll) {\n      return false;\n    }\n    if (tabPositionTopOrBottom) {\n      doMove(setTransformLeft, offsetX);\n    } else {\n      doMove(setTransformTop, offsetY);\n    }\n    clearTouchMoving();\n    doLockAnimation();\n    return true;\n  });\n  useEffect(function () {\n    clearTouchMoving();\n    if (lockAnimation) {\n      touchMovingRef.current = setTimeout(function () {\n        setLockAnimation(0);\n      }, 100);\n    }\n    return clearTouchMoving;\n  }, [lockAnimation]);\n\n  // ===================== Visible Range =====================\n  // Render tab node & collect tab offset\n  var _useVisibleRange = useVisibleRange(tabOffsets,\n    // Container\n    visibleTabContentValue,\n    // Transform\n    tabPositionTopOrBottom ? transformLeft : transformTop,\n    // Tabs\n    tabContentSizeValue,\n    // Add\n    addSizeValue,\n    // Operation\n    operationSizeValue, _objectSpread(_objectSpread({}, props), {}, {\n      tabs: tabs\n    })),\n    _useVisibleRange2 = _slicedToArray(_useVisibleRange, 2),\n    visibleStart = _useVisibleRange2[0],\n    visibleEnd = _useVisibleRange2[1];\n\n  // ========================= Scroll ========================\n  var scrollToTab = useEvent(function () {\n    var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : activeKey;\n    var tabOffset = tabOffsets.get(key) || {\n      width: 0,\n      height: 0,\n      left: 0,\n      right: 0,\n      top: 0\n    };\n    if (tabPositionTopOrBottom) {\n      // ============ Align with top & bottom ============\n      var newTransform = transformLeft;\n\n      // RTL\n      if (rtl) {\n        if (tabOffset.right < transformLeft) {\n          newTransform = tabOffset.right;\n        } else if (tabOffset.right + tabOffset.width > transformLeft + visibleTabContentValue) {\n          newTransform = tabOffset.right + tabOffset.width - visibleTabContentValue;\n        }\n      }\n      // LTR\n      else if (tabOffset.left < -transformLeft) {\n        newTransform = -tabOffset.left;\n      } else if (tabOffset.left + tabOffset.width > -transformLeft + visibleTabContentValue) {\n        newTransform = -(tabOffset.left + tabOffset.width - visibleTabContentValue);\n      }\n      setTransformTop(0);\n      setTransformLeft(alignInRange(newTransform));\n    } else {\n      // ============ Align with left & right ============\n      var _newTransform = transformTop;\n      if (tabOffset.top < -transformTop) {\n        _newTransform = -tabOffset.top;\n      } else if (tabOffset.top + tabOffset.height > -transformTop + visibleTabContentValue) {\n        _newTransform = -(tabOffset.top + tabOffset.height - visibleTabContentValue);\n      }\n      setTransformLeft(0);\n      setTransformTop(alignInRange(_newTransform));\n    }\n  });\n\n  // ========================= Focus =========================\n  var _useState11 = useState(),\n    _useState12 = _slicedToArray(_useState11, 2),\n    focusKey = _useState12[0],\n    setFocusKey = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    isMouse = _useState14[0],\n    setIsMouse = _useState14[1];\n  var enabledTabs = tabs.filter(function (tab) {\n    return !tab.disabled;\n  }).map(function (tab) {\n    return tab.key;\n  });\n  var onOffset = function onOffset(offset) {\n    var currentIndex = enabledTabs.indexOf(focusKey || activeKey);\n    var len = enabledTabs.length;\n    var nextIndex = (currentIndex + offset + len) % len;\n    var newKey = enabledTabs[nextIndex];\n    setFocusKey(newKey);\n  };\n  var handleKeyDown = function handleKeyDown(e) {\n    var code = e.code;\n    var isRTL = rtl && tabPositionTopOrBottom;\n    var firstEnabledTab = enabledTabs[0];\n    var lastEnabledTab = enabledTabs[enabledTabs.length - 1];\n    switch (code) {\n      // LEFT\n      case 'ArrowLeft':\n        {\n          if (tabPositionTopOrBottom) {\n            onOffset(isRTL ? 1 : -1);\n          }\n          break;\n        }\n\n      // RIGHT\n      case 'ArrowRight':\n        {\n          if (tabPositionTopOrBottom) {\n            onOffset(isRTL ? -1 : 1);\n          }\n          break;\n        }\n\n      // UP\n      case 'ArrowUp':\n        {\n          e.preventDefault();\n          if (!tabPositionTopOrBottom) {\n            onOffset(-1);\n          }\n          break;\n        }\n\n      // DOWN\n      case 'ArrowDown':\n        {\n          e.preventDefault();\n          if (!tabPositionTopOrBottom) {\n            onOffset(1);\n          }\n          break;\n        }\n\n      // HOME\n      case 'Home':\n        {\n          e.preventDefault();\n          setFocusKey(firstEnabledTab);\n          break;\n        }\n\n      // END\n      case 'End':\n        {\n          e.preventDefault();\n          setFocusKey(lastEnabledTab);\n          break;\n        }\n\n      // Enter & Space\n      case 'Enter':\n      case 'Space':\n        {\n          e.preventDefault();\n          onTabClick(focusKey !== null && focusKey !== void 0 ? focusKey : activeKey, e);\n          break;\n        }\n      // Backspace\n      case 'Backspace':\n      case 'Delete':\n        {\n          var removeIndex = enabledTabs.indexOf(focusKey);\n          var removeTab = tabs.find(function (tab) {\n            return tab.key === focusKey;\n          });\n          var removable = getRemovable(removeTab === null || removeTab === void 0 ? void 0 : removeTab.closable, removeTab === null || removeTab === void 0 ? void 0 : removeTab.closeIcon, editable, removeTab === null || removeTab === void 0 ? void 0 : removeTab.disabled);\n          if (removable) {\n            e.preventDefault();\n            e.stopPropagation();\n            editable.onEdit('remove', {\n              key: focusKey,\n              event: e\n            });\n            // when remove last tab, focus previous tab\n            if (removeIndex === enabledTabs.length - 1) {\n              onOffset(-1);\n            } else {\n              onOffset(1);\n            }\n          }\n          break;\n        }\n    }\n  };\n\n  // ========================== Tab ==========================\n  var tabNodeStyle = {};\n  if (tabPositionTopOrBottom) {\n    tabNodeStyle[rtl ? 'marginRight' : 'marginLeft'] = tabBarGutter;\n  } else {\n    tabNodeStyle.marginTop = tabBarGutter;\n  }\n  var tabNodes = tabs.map(function (tab, i) {\n    var key = tab.key;\n    return /*#__PURE__*/React.createElement(TabNode, {\n      id: id,\n      prefixCls: prefixCls,\n      key: key,\n      tab: tab\n      /* first node should not have margin left */,\n      style: i === 0 ? undefined : tabNodeStyle,\n      closable: tab.closable,\n      editable: editable,\n      active: key === activeKey,\n      focus: key === focusKey,\n      renderWrapper: children,\n      removeAriaLabel: locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\n      tabCount: enabledTabs.length,\n      currentPosition: i + 1,\n      onClick: function onClick(e) {\n        onTabClick(key, e);\n      },\n      onKeyDown: handleKeyDown,\n      onFocus: function onFocus() {\n        if (!isMouse) {\n          setFocusKey(key);\n        }\n        scrollToTab(key);\n        doLockAnimation();\n        if (!tabsWrapperRef.current) {\n          return;\n        }\n        // Focus element will make scrollLeft change which we should reset back\n        if (!rtl) {\n          tabsWrapperRef.current.scrollLeft = 0;\n        }\n        tabsWrapperRef.current.scrollTop = 0;\n      },\n      onBlur: function onBlur() {\n        setFocusKey(undefined);\n      },\n      onMouseDown: function onMouseDown() {\n        setIsMouse(true);\n      },\n      onMouseUp: function onMouseUp() {\n        setIsMouse(false);\n      }\n    });\n  });\n\n  // Update buttons records\n  var updateTabSizes = function updateTabSizes() {\n    return setTabSizes(function () {\n      var _tabListRef$current;\n      var newSizes = new Map();\n      var listRect = (_tabListRef$current = tabListRef.current) === null || _tabListRef$current === void 0 ? void 0 : _tabListRef$current.getBoundingClientRect();\n      tabs.forEach(function (_ref2) {\n        var _tabListRef$current2;\n        var key = _ref2.key;\n        var btnNode = (_tabListRef$current2 = tabListRef.current) === null || _tabListRef$current2 === void 0 ? void 0 : _tabListRef$current2.querySelector(\"[data-node-key=\\\"\".concat(genDataNodeKey(key), \"\\\"]\"));\n        if (btnNode) {\n          var _getTabSize = getTabSize(btnNode, listRect),\n            _getTabSize2 = _slicedToArray(_getTabSize, 4),\n            width = _getTabSize2[0],\n            height = _getTabSize2[1],\n            left = _getTabSize2[2],\n            top = _getTabSize2[3];\n          newSizes.set(key, {\n            width: width,\n            height: height,\n            left: left,\n            top: top\n          });\n        }\n      });\n      return newSizes;\n    });\n  };\n  useEffect(function () {\n    updateTabSizes();\n  }, [tabs.map(function (tab) {\n    return tab.key;\n  }).join('_')]);\n  var onListHolderResize = useUpdate(function () {\n    // Update wrapper records\n    var containerSize = getSize(containerRef);\n    var extraLeftSize = getSize(extraLeftRef);\n    var extraRightSize = getSize(extraRightRef);\n    setContainerExcludeExtraSize([containerSize[0] - extraLeftSize[0] - extraRightSize[0], containerSize[1] - extraLeftSize[1] - extraRightSize[1]]);\n    var newAddSize = getSize(innerAddButtonRef);\n    setAddSize(newAddSize);\n    var newOperationSize = getSize(operationsRef);\n    setOperationSize(newOperationSize);\n\n    // Which includes add button size\n    var tabContentFullSize = getSize(tabListRef);\n    setTabContentSize([tabContentFullSize[0] - newAddSize[0], tabContentFullSize[1] - newAddSize[1]]);\n\n    // Update buttons records\n    updateTabSizes();\n  });\n\n  // ======================== Dropdown =======================\n  var startHiddenTabs = tabs.slice(0, visibleStart);\n  var endHiddenTabs = tabs.slice(visibleEnd + 1);\n  var hiddenTabs = [].concat(_toConsumableArray(startHiddenTabs), _toConsumableArray(endHiddenTabs));\n\n  // =================== Link & Operations ===================\n  var activeTabOffset = tabOffsets.get(activeKey);\n  var _useIndicator = useIndicator({\n      activeTabOffset: activeTabOffset,\n      horizontal: tabPositionTopOrBottom,\n      indicator: indicator,\n      rtl: rtl\n    }),\n    indicatorStyle = _useIndicator.style;\n\n  // ========================= Effect ========================\n  useEffect(function () {\n    scrollToTab();\n  }, [activeKey, transformMin, transformMax, stringify(activeTabOffset), stringify(tabOffsets), tabPositionTopOrBottom]);\n\n  // Should recalculate when rtl changed\n  useEffect(function () {\n    onListHolderResize();\n    // eslint-disable-next-line\n  }, [rtl]);\n\n  // ========================= Render ========================\n  var hasDropdown = !!hiddenTabs.length;\n  var wrapPrefix = \"\".concat(prefixCls, \"-nav-wrap\");\n  var pingLeft;\n  var pingRight;\n  var pingTop;\n  var pingBottom;\n  if (tabPositionTopOrBottom) {\n    if (rtl) {\n      pingRight = transformLeft > 0;\n      pingLeft = transformLeft !== transformMax;\n    } else {\n      pingLeft = transformLeft < 0;\n      pingRight = transformLeft !== transformMin;\n    }\n  } else {\n    pingTop = transformTop < 0;\n    pingBottom = transformTop !== transformMin;\n  }\n  return /*#__PURE__*/React.createElement(ResizeObserver, {\n    onResize: onListHolderResize\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: useComposeRef(ref, containerRef),\n    role: \"tablist\",\n    \"aria-orientation\": tabPositionTopOrBottom ? 'horizontal' : 'vertical',\n    className: classNames(\"\".concat(prefixCls, \"-nav\"), className),\n    style: style,\n    onKeyDown: function onKeyDown() {\n      // No need animation when use keyboard\n      doLockAnimation();\n    }\n  }, /*#__PURE__*/React.createElement(ExtraContent, {\n    ref: extraLeftRef,\n    position: \"left\",\n    extra: extra,\n    prefixCls: prefixCls\n  }), /*#__PURE__*/React.createElement(ResizeObserver, {\n    onResize: onListHolderResize\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(wrapPrefix, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, \"\".concat(wrapPrefix, \"-ping-left\"), pingLeft), \"\".concat(wrapPrefix, \"-ping-right\"), pingRight), \"\".concat(wrapPrefix, \"-ping-top\"), pingTop), \"\".concat(wrapPrefix, \"-ping-bottom\"), pingBottom)),\n    ref: tabsWrapperRef\n  }, /*#__PURE__*/React.createElement(ResizeObserver, {\n    onResize: onListHolderResize\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: tabListRef,\n    className: \"\".concat(prefixCls, \"-nav-list\"),\n    style: {\n      transform: \"translate(\".concat(transformLeft, \"px, \").concat(transformTop, \"px)\"),\n      transition: lockAnimation ? 'none' : undefined\n    }\n  }, tabNodes, /*#__PURE__*/React.createElement(AddButton, {\n    ref: innerAddButtonRef,\n    prefixCls: prefixCls,\n    locale: locale,\n    editable: editable,\n    style: _objectSpread(_objectSpread({}, tabNodes.length === 0 ? undefined : tabNodeStyle), {}, {\n      visibility: hasDropdown ? 'hidden' : null\n    })\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-ink-bar\"), _defineProperty({}, \"\".concat(prefixCls, \"-ink-bar-animated\"), animated.inkBar)),\n    style: indicatorStyle\n  }))))), /*#__PURE__*/React.createElement(OperationNode, _extends({}, props, {\n    removeAriaLabel: locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\n    ref: operationsRef,\n    prefixCls: prefixCls,\n    tabs: hiddenTabs,\n    className: !hasDropdown && operationsHiddenClassName,\n    tabMoving: !!lockAnimation\n  })), /*#__PURE__*/React.createElement(ExtraContent, {\n    ref: extraRightRef,\n    position: \"right\",\n    extra: extra,\n    prefixCls: prefixCls\n  })));\n  /* eslint-enable */\n});\nexport default TabNavList;","import classNames from 'classnames';\nimport * as React from 'react';\nvar TabPane = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    className = props.className,\n    style = props.style,\n    id = props.id,\n    active = props.active,\n    tabKey = props.tabKey,\n    children = props.children;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: id && \"\".concat(id, \"-panel-\").concat(tabKey),\n    role: \"tabpanel\",\n    tabIndex: active ? 0 : -1,\n    \"aria-labelledby\": id && \"\".concat(id, \"-tab-\").concat(tabKey),\n    \"aria-hidden\": !active,\n    style: style,\n    className: classNames(prefixCls, active && \"\".concat(prefixCls, \"-active\"), className),\n    ref: ref\n  }, children);\n});\nif (process.env.NODE_ENV !== 'production') {\n  TabPane.displayName = 'TabPane';\n}\nexport default TabPane;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"renderTabBar\"],\n  _excluded2 = [\"label\", \"key\"];\n// zombieJ: To compatible with `renderTabBar` usage.\n\nimport * as React from 'react';\nimport TabNavList from '.';\nimport TabContext from \"../TabContext\";\nimport TabPane from \"../TabPanelList/TabPane\";\n// We have to create a TabNavList components.\nvar TabNavListWrapper = function TabNavListWrapper(_ref) {\n  var renderTabBar = _ref.renderTabBar,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var _React$useContext = React.useContext(TabContext),\n    tabs = _React$useContext.tabs;\n  if (renderTabBar) {\n    var tabNavBarProps = _objectSpread(_objectSpread({}, restProps), {}, {\n      // Legacy support. We do not use this actually\n      panes: tabs.map(function (_ref2) {\n        var label = _ref2.label,\n          key = _ref2.key,\n          restTabProps = _objectWithoutProperties(_ref2, _excluded2);\n        return /*#__PURE__*/React.createElement(TabPane, _extends({\n          tab: label,\n          key: key,\n          tabKey: key\n        }, restTabProps));\n      })\n    });\n    return renderTabBar(tabNavBarProps, TabNavList);\n  }\n  return /*#__PURE__*/React.createElement(TabNavList, restProps);\n};\nif (process.env.NODE_ENV !== 'production') {\n  TabNavListWrapper.displayName = 'TabNavListWrapper';\n}\nexport default TabNavListWrapper;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"key\", \"forceRender\", \"style\", \"className\", \"destroyInactiveTabPane\"];\nimport classNames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport * as React from 'react';\nimport TabContext from \"../TabContext\";\nimport TabPane from \"./TabPane\";\nvar TabPanelList = function TabPanelList(props) {\n  var id = props.id,\n    activeKey = props.activeKey,\n    animated = props.animated,\n    tabPosition = props.tabPosition,\n    destroyInactiveTabPane = props.destroyInactiveTabPane;\n  var _React$useContext = React.useContext(TabContext),\n    prefixCls = _React$useContext.prefixCls,\n    tabs = _React$useContext.tabs;\n  var tabPaneAnimated = animated.tabPane;\n  var tabPanePrefixCls = \"\".concat(prefixCls, \"-tabpane\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-content-holder\"))\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-content\"), \"\".concat(prefixCls, \"-content-\").concat(tabPosition), _defineProperty({}, \"\".concat(prefixCls, \"-content-animated\"), tabPaneAnimated))\n  }, tabs.map(function (item) {\n    var key = item.key,\n      forceRender = item.forceRender,\n      paneStyle = item.style,\n      paneClassName = item.className,\n      itemDestroyInactiveTabPane = item.destroyInactiveTabPane,\n      restTabProps = _objectWithoutProperties(item, _excluded);\n    var active = key === activeKey;\n    return /*#__PURE__*/React.createElement(CSSMotion, _extends({\n      key: key,\n      visible: active,\n      forceRender: forceRender,\n      removeOnLeave: !!(destroyInactiveTabPane || itemDestroyInactiveTabPane),\n      leavedClassName: \"\".concat(tabPanePrefixCls, \"-hidden\")\n    }, animated.tabPaneMotion), function (_ref, ref) {\n      var motionStyle = _ref.style,\n        motionClassName = _ref.className;\n      return /*#__PURE__*/React.createElement(TabPane, _extends({}, restTabProps, {\n        prefixCls: tabPanePrefixCls,\n        id: id,\n        tabKey: key,\n        animated: tabPaneAnimated,\n        active: active,\n        style: _objectSpread(_objectSpread({}, paneStyle), motionStyle),\n        className: classNames(paneClassName, motionClassName),\n        ref: ref\n      }));\n    });\n  })));\n};\nexport default TabPanelList;","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport warning from \"rc-util/es/warning\";\nexport default function useAnimateConfig() {\n  var animated = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    inkBar: true,\n    tabPane: false\n  };\n  var mergedAnimated;\n  if (animated === false) {\n    mergedAnimated = {\n      inkBar: false,\n      tabPane: false\n    };\n  } else if (animated === true) {\n    mergedAnimated = {\n      inkBar: true,\n      tabPane: false\n    };\n  } else {\n    mergedAnimated = _objectSpread({\n      inkBar: true\n    }, _typeof(animated) === 'object' ? animated : {});\n  }\n\n  // Enable tabPane animation if provide motion\n  if (mergedAnimated.tabPaneMotion && mergedAnimated.tabPane === undefined) {\n    mergedAnimated.tabPane = true;\n  }\n  if (!mergedAnimated.tabPaneMotion && mergedAnimated.tabPane) {\n    if (process.env.NODE_ENV !== 'production') {\n      warning(false, '`animated.tabPane` is true but `animated.tabPaneMotion` is not provided. Motion will not work.');\n    }\n    mergedAnimated.tabPane = false;\n  }\n  return mergedAnimated;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"id\", \"prefixCls\", \"className\", \"items\", \"direction\", \"activeKey\", \"defaultActiveKey\", \"editable\", \"animated\", \"tabPosition\", \"tabBarGutter\", \"tabBarStyle\", \"tabBarExtraContent\", \"locale\", \"more\", \"destroyInactiveTabPane\", \"renderTabBar\", \"onChange\", \"onTabClick\", \"onTabScroll\", \"getPopupContainer\", \"popupClassName\", \"indicator\"];\n// Accessibility https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Tab_Role\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport isMobile from \"rc-util/es/isMobile\";\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport TabContext from \"./TabContext\";\nimport TabNavListWrapper from \"./TabNavList/Wrapper\";\nimport TabPanelList from \"./TabPanelList\";\nimport useAnimateConfig from \"./hooks/useAnimateConfig\";\n/**\n * Should added antd:\n * - type\n *\n * Removed:\n * - onNextClick\n * - onPrevClick\n * - keyboard\n */\n\n// Used for accessibility\nvar uuid = 0;\nvar Tabs = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var id = props.id,\n    _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-tabs' : _props$prefixCls,\n    className = props.className,\n    items = props.items,\n    direction = props.direction,\n    activeKey = props.activeKey,\n    defaultActiveKey = props.defaultActiveKey,\n    editable = props.editable,\n    animated = props.animated,\n    _props$tabPosition = props.tabPosition,\n    tabPosition = _props$tabPosition === void 0 ? 'top' : _props$tabPosition,\n    tabBarGutter = props.tabBarGutter,\n    tabBarStyle = props.tabBarStyle,\n    tabBarExtraContent = props.tabBarExtraContent,\n    locale = props.locale,\n    more = props.more,\n    destroyInactiveTabPane = props.destroyInactiveTabPane,\n    renderTabBar = props.renderTabBar,\n    onChange = props.onChange,\n    onTabClick = props.onTabClick,\n    onTabScroll = props.onTabScroll,\n    getPopupContainer = props.getPopupContainer,\n    popupClassName = props.popupClassName,\n    indicator = props.indicator,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var tabs = React.useMemo(function () {\n    return (items || []).filter(function (item) {\n      return item && _typeof(item) === 'object' && 'key' in item;\n    });\n  }, [items]);\n  var rtl = direction === 'rtl';\n  var mergedAnimated = useAnimateConfig(animated);\n\n  // ======================== Mobile ========================\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    mobile = _useState2[0],\n    setMobile = _useState2[1];\n  useEffect(function () {\n    // Only update on the client side\n    setMobile(isMobile());\n  }, []);\n\n  // ====================== Active Key ======================\n  var _useMergedState = useMergedState(function () {\n      var _tabs$;\n      return (_tabs$ = tabs[0]) === null || _tabs$ === void 0 ? void 0 : _tabs$.key;\n    }, {\n      value: activeKey,\n      defaultValue: defaultActiveKey\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    mergedActiveKey = _useMergedState2[0],\n    setMergedActiveKey = _useMergedState2[1];\n  var _useState3 = useState(function () {\n      return tabs.findIndex(function (tab) {\n        return tab.key === mergedActiveKey;\n      });\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    activeIndex = _useState4[0],\n    setActiveIndex = _useState4[1];\n\n  // Reset active key if not exist anymore\n  useEffect(function () {\n    var newActiveIndex = tabs.findIndex(function (tab) {\n      return tab.key === mergedActiveKey;\n    });\n    if (newActiveIndex === -1) {\n      var _tabs$newActiveIndex;\n      newActiveIndex = Math.max(0, Math.min(activeIndex, tabs.length - 1));\n      setMergedActiveKey((_tabs$newActiveIndex = tabs[newActiveIndex]) === null || _tabs$newActiveIndex === void 0 ? void 0 : _tabs$newActiveIndex.key);\n    }\n    setActiveIndex(newActiveIndex);\n  }, [tabs.map(function (tab) {\n    return tab.key;\n  }).join('_'), mergedActiveKey, activeIndex]);\n\n  // ===================== Accessibility ====================\n  var _useMergedState3 = useMergedState(null, {\n      value: id\n    }),\n    _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n    mergedId = _useMergedState4[0],\n    setMergedId = _useMergedState4[1];\n\n  // Async generate id to avoid ssr mapping failed\n  useEffect(function () {\n    if (!id) {\n      setMergedId(\"rc-tabs-\".concat(process.env.NODE_ENV === 'test' ? 'test' : uuid));\n      uuid += 1;\n    }\n  }, []);\n\n  // ======================== Events ========================\n  function onInternalTabClick(key, e) {\n    onTabClick === null || onTabClick === void 0 || onTabClick(key, e);\n    var isActiveChanged = key !== mergedActiveKey;\n    setMergedActiveKey(key);\n    if (isActiveChanged) {\n      onChange === null || onChange === void 0 || onChange(key);\n    }\n  }\n\n  // ======================== Render ========================\n  var sharedProps = {\n    id: mergedId,\n    activeKey: mergedActiveKey,\n    animated: mergedAnimated,\n    tabPosition: tabPosition,\n    rtl: rtl,\n    mobile: mobile\n  };\n  var tabNavBarProps = _objectSpread(_objectSpread({}, sharedProps), {}, {\n    editable: editable,\n    locale: locale,\n    more: more,\n    tabBarGutter: tabBarGutter,\n    onTabClick: onInternalTabClick,\n    onTabScroll: onTabScroll,\n    extra: tabBarExtraContent,\n    style: tabBarStyle,\n    panes: null,\n    getPopupContainer: getPopupContainer,\n    popupClassName: popupClassName,\n    indicator: indicator\n  });\n  return /*#__PURE__*/React.createElement(TabContext.Provider, {\n    value: {\n      tabs: tabs,\n      prefixCls: prefixCls\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref,\n    id: id,\n    className: classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(tabPosition), _defineProperty(_defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-mobile\"), mobile), \"\".concat(prefixCls, \"-editable\"), editable), \"\".concat(prefixCls, \"-rtl\"), rtl), className)\n  }, restProps), /*#__PURE__*/React.createElement(TabNavListWrapper, _extends({}, tabNavBarProps, {\n    renderTabBar: renderTabBar\n  })), /*#__PURE__*/React.createElement(TabPanelList, _extends({\n    destroyInactiveTabPane: destroyInactiveTabPane\n  }, sharedProps, {\n    animated: mergedAnimated\n  }))));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Tabs.displayName = 'Tabs';\n}\nexport default Tabs;","import { getTransitionName } from '../../_util/motion';\nconst motion = {\n  motionAppear: false,\n  motionEnter: true,\n  motionLeave: true\n};\nexport default function useAnimateConfig(prefixCls, animated = {\n  inkBar: true,\n  tabPane: false\n}) {\n  let mergedAnimated;\n  if (animated === false) {\n    mergedAnimated = {\n      inkBar: false,\n      tabPane: false\n    };\n  } else if (animated === true) {\n    mergedAnimated = {\n      inkBar: true,\n      tabPane: true\n    };\n  } else {\n    mergedAnimated = Object.assign({\n      inkBar: true\n    }, typeof animated === 'object' ? animated : {});\n  }\n  if (mergedAnimated.tabPane) {\n    mergedAnimated.tabPaneMotion = Object.assign(Object.assign({}, motion), {\n      motionName: getTransitionName(prefixCls, 'switch')\n    });\n  }\n  return mergedAnimated;\n}","var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport { devUseWarning } from '../../_util/warning';\nfunction filter(items) {\n  return items.filter(item => item);\n}\nexport default function useLegacyItems(items, children) {\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Tabs');\n    warning.deprecated(!children, 'Tabs.TabPane', 'items');\n  }\n  if (items) {\n    return items.map(item => {\n      var _a;\n      const mergedDestroyOnHidden = (_a = item.destroyOnHidden) !== null && _a !== void 0 ? _a : item.destroyInactiveTabPane;\n      return Object.assign(Object.assign({}, item), {\n        // TODO: In the future, destroyInactiveTabPane in rc-tabs needs to be upgrade to destroyOnHidden\n        destroyInactiveTabPane: mergedDestroyOnHidden\n      });\n    });\n  }\n  const childrenItems = toArray(children).map(node => {\n    if (/*#__PURE__*/React.isValidElement(node)) {\n      const {\n        key,\n        props\n      } = node;\n      const _a = props || {},\n        {\n          tab\n        } = _a,\n        restProps = __rest(_a, [\"tab\"]);\n      const item = Object.assign(Object.assign({\n        key: String(key)\n      }, restProps), {\n        label: tab\n      });\n      return item;\n    }\n    return null;\n  });\n  return filter(childrenItems);\n}","import { initSlideMotion } from '../../style/motion';\nconst genMotionStyle = token => {\n  const {\n    componentCls,\n    motionDurationSlow\n  } = token;\n  return [{\n    [componentCls]: {\n      [`${componentCls}-switch`]: {\n        '&-appear, &-enter': {\n          transition: 'none',\n          '&-start': {\n            opacity: 0\n          },\n          '&-active': {\n            opacity: 1,\n            transition: `opacity ${motionDurationSlow}`\n          }\n        },\n        '&-leave': {\n          position: 'absolute',\n          transition: 'none',\n          inset: 0,\n          '&-start': {\n            opacity: 1\n          },\n          '&-active': {\n            opacity: 0,\n            transition: `opacity ${motionDurationSlow}`\n          }\n        }\n      }\n    }\n  },\n  // Follow code may reuse in other components\n  [initSlideMotion(token, 'slide-up'), initSlideMotion(token, 'slide-down')]];\n};\nexport default genMotionStyle;","import { unit } from '@ant-design/cssinjs';\nimport { genFocusOutline, genFocusStyle, resetComponent, textEllipsis } from '../../style';\nimport { genStyleHooks, mergeToken } from '../../theme/internal';\nimport genMotionStyle from './motion';\nconst genCardStyle = token => {\n  const {\n    componentCls,\n    tabsCardPadding,\n    cardBg,\n    cardGutter,\n    colorBorderSecondary,\n    itemSelectedColor\n  } = token;\n  return {\n    [`${componentCls}-card`]: {\n      [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n        [`${componentCls}-tab`]: {\n          margin: 0,\n          padding: tabsCardPadding,\n          background: cardBg,\n          border: `${unit(token.lineWidth)} ${token.lineType} ${colorBorderSecondary}`,\n          transition: `all ${token.motionDurationSlow} ${token.motionEaseInOut}`\n        },\n        [`${componentCls}-tab-active`]: {\n          color: itemSelectedColor,\n          background: token.colorBgContainer\n        },\n        [`${componentCls}-tab-focus:has(${componentCls}-tab-btn:focus-visible)`]: genFocusOutline(token, -3),\n        [`& ${componentCls}-tab${componentCls}-tab-focus ${componentCls}-tab-btn:focus-visible`]: {\n          outline: 'none'\n        },\n        [`${componentCls}-ink-bar`]: {\n          visibility: 'hidden'\n        }\n      },\n      // ========================== Top & Bottom ==========================\n      [`&${componentCls}-top, &${componentCls}-bottom`]: {\n        [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n          [`${componentCls}-tab + ${componentCls}-tab`]: {\n            marginLeft: {\n              _skip_check_: true,\n              value: unit(cardGutter)\n            }\n          }\n        }\n      },\n      [`&${componentCls}-top`]: {\n        [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n          [`${componentCls}-tab`]: {\n            borderRadius: `${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)} 0 0`\n          },\n          [`${componentCls}-tab-active`]: {\n            borderBottomColor: token.colorBgContainer\n          }\n        }\n      },\n      [`&${componentCls}-bottom`]: {\n        [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n          [`${componentCls}-tab`]: {\n            borderRadius: `0 0 ${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)}`\n          },\n          [`${componentCls}-tab-active`]: {\n            borderTopColor: token.colorBgContainer\n          }\n        }\n      },\n      // ========================== Left & Right ==========================\n      [`&${componentCls}-left, &${componentCls}-right`]: {\n        [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n          [`${componentCls}-tab + ${componentCls}-tab`]: {\n            marginTop: unit(cardGutter)\n          }\n        }\n      },\n      [`&${componentCls}-left`]: {\n        [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n          [`${componentCls}-tab`]: {\n            borderRadius: {\n              _skip_check_: true,\n              value: `${unit(token.borderRadiusLG)} 0 0 ${unit(token.borderRadiusLG)}`\n            }\n          },\n          [`${componentCls}-tab-active`]: {\n            borderRightColor: {\n              _skip_check_: true,\n              value: token.colorBgContainer\n            }\n          }\n        }\n      },\n      [`&${componentCls}-right`]: {\n        [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n          [`${componentCls}-tab`]: {\n            borderRadius: {\n              _skip_check_: true,\n              value: `0 ${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)} 0`\n            }\n          },\n          [`${componentCls}-tab-active`]: {\n            borderLeftColor: {\n              _skip_check_: true,\n              value: token.colorBgContainer\n            }\n          }\n        }\n      }\n    }\n  };\n};\nconst genDropdownStyle = token => {\n  const {\n    componentCls,\n    itemHoverColor,\n    dropdownEdgeChildVerticalPadding\n  } = token;\n  return {\n    [`${componentCls}-dropdown`]: Object.assign(Object.assign({}, resetComponent(token)), {\n      position: 'absolute',\n      top: -9999,\n      left: {\n        _skip_check_: true,\n        value: -9999\n      },\n      zIndex: token.zIndexPopup,\n      display: 'block',\n      '&-hidden': {\n        display: 'none'\n      },\n      [`${componentCls}-dropdown-menu`]: {\n        maxHeight: token.tabsDropdownHeight,\n        margin: 0,\n        padding: `${unit(dropdownEdgeChildVerticalPadding)} 0`,\n        overflowX: 'hidden',\n        overflowY: 'auto',\n        textAlign: {\n          _skip_check_: true,\n          value: 'left'\n        },\n        listStyleType: 'none',\n        backgroundColor: token.colorBgContainer,\n        backgroundClip: 'padding-box',\n        borderRadius: token.borderRadiusLG,\n        outline: 'none',\n        boxShadow: token.boxShadowSecondary,\n        '&-item': Object.assign(Object.assign({}, textEllipsis), {\n          display: 'flex',\n          alignItems: 'center',\n          minWidth: token.tabsDropdownWidth,\n          margin: 0,\n          padding: `${unit(token.paddingXXS)} ${unit(token.paddingSM)}`,\n          color: token.colorText,\n          fontWeight: 'normal',\n          fontSize: token.fontSize,\n          lineHeight: token.lineHeight,\n          cursor: 'pointer',\n          transition: `all ${token.motionDurationSlow}`,\n          '> span': {\n            flex: 1,\n            whiteSpace: 'nowrap'\n          },\n          '&-remove': {\n            flex: 'none',\n            marginLeft: {\n              _skip_check_: true,\n              value: token.marginSM\n            },\n            color: token.colorIcon,\n            fontSize: token.fontSizeSM,\n            background: 'transparent',\n            border: 0,\n            cursor: 'pointer',\n            '&:hover': {\n              color: itemHoverColor\n            }\n          },\n          '&:hover': {\n            background: token.controlItemBgHover\n          },\n          '&-disabled': {\n            '&, &:hover': {\n              color: token.colorTextDisabled,\n              background: 'transparent',\n              cursor: 'not-allowed'\n            }\n          }\n        })\n      }\n    })\n  };\n};\nconst genPositionStyle = token => {\n  const {\n    componentCls,\n    margin,\n    colorBorderSecondary,\n    horizontalMargin,\n    verticalItemPadding,\n    verticalItemMargin,\n    calc\n  } = token;\n  return {\n    // ========================== Top & Bottom ==========================\n    [`${componentCls}-top, ${componentCls}-bottom`]: {\n      flexDirection: 'column',\n      [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n        margin: horizontalMargin,\n        '&::before': {\n          position: 'absolute',\n          right: {\n            _skip_check_: true,\n            value: 0\n          },\n          left: {\n            _skip_check_: true,\n            value: 0\n          },\n          borderBottom: `${unit(token.lineWidth)} ${token.lineType} ${colorBorderSecondary}`,\n          content: \"''\"\n        },\n        [`${componentCls}-ink-bar`]: {\n          height: token.lineWidthBold,\n          '&-animated': {\n            transition: `width ${token.motionDurationSlow}, left ${token.motionDurationSlow},\n            right ${token.motionDurationSlow}`\n          }\n        },\n        [`${componentCls}-nav-wrap`]: {\n          '&::before, &::after': {\n            top: 0,\n            bottom: 0,\n            width: token.controlHeight\n          },\n          '&::before': {\n            left: {\n              _skip_check_: true,\n              value: 0\n            },\n            boxShadow: token.boxShadowTabsOverflowLeft\n          },\n          '&::after': {\n            right: {\n              _skip_check_: true,\n              value: 0\n            },\n            boxShadow: token.boxShadowTabsOverflowRight\n          },\n          [`&${componentCls}-nav-wrap-ping-left::before`]: {\n            opacity: 1\n          },\n          [`&${componentCls}-nav-wrap-ping-right::after`]: {\n            opacity: 1\n          }\n        }\n      }\n    },\n    [`${componentCls}-top`]: {\n      [`> ${componentCls}-nav,\n        > div > ${componentCls}-nav`]: {\n        '&::before': {\n          bottom: 0\n        },\n        [`${componentCls}-ink-bar`]: {\n          bottom: 0\n        }\n      }\n    },\n    [`${componentCls}-bottom`]: {\n      [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n        order: 1,\n        marginTop: margin,\n        marginBottom: 0,\n        '&::before': {\n          top: 0\n        },\n        [`${componentCls}-ink-bar`]: {\n          top: 0\n        }\n      },\n      [`> ${componentCls}-content-holder, > div > ${componentCls}-content-holder`]: {\n        order: 0\n      }\n    },\n    // ========================== Left & Right ==========================\n    [`${componentCls}-left, ${componentCls}-right`]: {\n      [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n        flexDirection: 'column',\n        minWidth: calc(token.controlHeight).mul(1.25).equal(),\n        // >>>>>>>>>>> Tab\n        [`${componentCls}-tab`]: {\n          padding: verticalItemPadding,\n          textAlign: 'center'\n        },\n        [`${componentCls}-tab + ${componentCls}-tab`]: {\n          margin: verticalItemMargin\n        },\n        // >>>>>>>>>>> Nav\n        [`${componentCls}-nav-wrap`]: {\n          flexDirection: 'column',\n          '&::before, &::after': {\n            right: {\n              _skip_check_: true,\n              value: 0\n            },\n            left: {\n              _skip_check_: true,\n              value: 0\n            },\n            height: token.controlHeight\n          },\n          '&::before': {\n            top: 0,\n            boxShadow: token.boxShadowTabsOverflowTop\n          },\n          '&::after': {\n            bottom: 0,\n            boxShadow: token.boxShadowTabsOverflowBottom\n          },\n          [`&${componentCls}-nav-wrap-ping-top::before`]: {\n            opacity: 1\n          },\n          [`&${componentCls}-nav-wrap-ping-bottom::after`]: {\n            opacity: 1\n          }\n        },\n        // >>>>>>>>>>> Ink Bar\n        [`${componentCls}-ink-bar`]: {\n          width: token.lineWidthBold,\n          '&-animated': {\n            transition: `height ${token.motionDurationSlow}, top ${token.motionDurationSlow}`\n          }\n        },\n        [`${componentCls}-nav-list, ${componentCls}-nav-operations`]: {\n          flex: '1 0 auto',\n          // fix safari scroll problem\n          flexDirection: 'column'\n        }\n      }\n    },\n    [`${componentCls}-left`]: {\n      [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n        [`${componentCls}-ink-bar`]: {\n          right: {\n            _skip_check_: true,\n            value: 0\n          }\n        }\n      },\n      [`> ${componentCls}-content-holder, > div > ${componentCls}-content-holder`]: {\n        marginLeft: {\n          _skip_check_: true,\n          value: unit(calc(token.lineWidth).mul(-1).equal())\n        },\n        borderLeft: {\n          _skip_check_: true,\n          value: `${unit(token.lineWidth)} ${token.lineType} ${token.colorBorder}`\n        },\n        [`> ${componentCls}-content > ${componentCls}-tabpane`]: {\n          paddingLeft: {\n            _skip_check_: true,\n            value: token.paddingLG\n          }\n        }\n      }\n    },\n    [`${componentCls}-right`]: {\n      [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n        order: 1,\n        [`${componentCls}-ink-bar`]: {\n          left: {\n            _skip_check_: true,\n            value: 0\n          }\n        }\n      },\n      [`> ${componentCls}-content-holder, > div > ${componentCls}-content-holder`]: {\n        order: 0,\n        marginRight: {\n          _skip_check_: true,\n          value: calc(token.lineWidth).mul(-1).equal()\n        },\n        borderRight: {\n          _skip_check_: true,\n          value: `${unit(token.lineWidth)} ${token.lineType} ${token.colorBorder}`\n        },\n        [`> ${componentCls}-content > ${componentCls}-tabpane`]: {\n          paddingRight: {\n            _skip_check_: true,\n            value: token.paddingLG\n          }\n        }\n      }\n    }\n  };\n};\nconst genSizeStyle = token => {\n  const {\n    componentCls,\n    cardPaddingSM,\n    cardPaddingLG,\n    cardHeightSM,\n    cardHeightLG,\n    horizontalItemPaddingSM,\n    horizontalItemPaddingLG\n  } = token;\n  return {\n    // >>>>> shared\n    [componentCls]: {\n      '&-small': {\n        [`> ${componentCls}-nav`]: {\n          [`${componentCls}-tab`]: {\n            padding: horizontalItemPaddingSM,\n            fontSize: token.titleFontSizeSM\n          }\n        }\n      },\n      '&-large': {\n        [`> ${componentCls}-nav`]: {\n          [`${componentCls}-tab`]: {\n            padding: horizontalItemPaddingLG,\n            fontSize: token.titleFontSizeLG,\n            lineHeight: token.lineHeightLG\n          }\n        }\n      }\n    },\n    // >>>>> card\n    [`${componentCls}-card`]: {\n      // Small\n      [`&${componentCls}-small`]: {\n        [`> ${componentCls}-nav`]: {\n          [`${componentCls}-tab`]: {\n            padding: cardPaddingSM\n          },\n          [`${componentCls}-nav-add`]: {\n            minWidth: cardHeightSM,\n            minHeight: cardHeightSM\n          }\n        },\n        [`&${componentCls}-bottom`]: {\n          [`> ${componentCls}-nav ${componentCls}-tab`]: {\n            borderRadius: `0 0 ${unit(token.borderRadius)} ${unit(token.borderRadius)}`\n          }\n        },\n        [`&${componentCls}-top`]: {\n          [`> ${componentCls}-nav ${componentCls}-tab`]: {\n            borderRadius: `${unit(token.borderRadius)} ${unit(token.borderRadius)} 0 0`\n          }\n        },\n        [`&${componentCls}-right`]: {\n          [`> ${componentCls}-nav ${componentCls}-tab`]: {\n            borderRadius: {\n              _skip_check_: true,\n              value: `0 ${unit(token.borderRadius)} ${unit(token.borderRadius)} 0`\n            }\n          }\n        },\n        [`&${componentCls}-left`]: {\n          [`> ${componentCls}-nav ${componentCls}-tab`]: {\n            borderRadius: {\n              _skip_check_: true,\n              value: `${unit(token.borderRadius)} 0 0 ${unit(token.borderRadius)}`\n            }\n          }\n        }\n      },\n      // Large\n      [`&${componentCls}-large`]: {\n        [`> ${componentCls}-nav`]: {\n          [`${componentCls}-tab`]: {\n            padding: cardPaddingLG\n          },\n          [`${componentCls}-nav-add`]: {\n            minWidth: cardHeightLG,\n            minHeight: cardHeightLG\n          }\n        }\n      }\n    }\n  };\n};\nconst genTabStyle = token => {\n  const {\n    componentCls,\n    itemActiveColor,\n    itemHoverColor,\n    iconCls,\n    tabsHorizontalItemMargin,\n    horizontalItemPadding,\n    itemSelectedColor,\n    itemColor\n  } = token;\n  const tabCls = `${componentCls}-tab`;\n  return {\n    [tabCls]: {\n      position: 'relative',\n      WebkitTouchCallout: 'none',\n      WebkitTapHighlightColor: 'transparent',\n      display: 'inline-flex',\n      alignItems: 'center',\n      padding: horizontalItemPadding,\n      fontSize: token.titleFontSize,\n      background: 'transparent',\n      border: 0,\n      outline: 'none',\n      cursor: 'pointer',\n      color: itemColor,\n      '&-btn, &-remove': {\n        '&:focus:not(:focus-visible), &:active': {\n          color: itemActiveColor\n        }\n      },\n      '&-btn': {\n        outline: 'none',\n        transition: `all ${token.motionDurationSlow}`,\n        [`${tabCls}-icon:not(:last-child)`]: {\n          marginInlineEnd: token.marginSM\n        }\n      },\n      '&-remove': Object.assign({\n        flex: 'none',\n        marginRight: {\n          _skip_check_: true,\n          value: token.calc(token.marginXXS).mul(-1).equal()\n        },\n        marginLeft: {\n          _skip_check_: true,\n          value: token.marginXS\n        },\n        color: token.colorIcon,\n        fontSize: token.fontSizeSM,\n        background: 'transparent',\n        border: 'none',\n        outline: 'none',\n        cursor: 'pointer',\n        transition: `all ${token.motionDurationSlow}`,\n        '&:hover': {\n          color: token.colorTextHeading\n        }\n      }, genFocusStyle(token)),\n      '&:hover': {\n        color: itemHoverColor\n      },\n      [`&${tabCls}-active ${tabCls}-btn`]: {\n        color: itemSelectedColor,\n        textShadow: token.tabsActiveTextShadow\n      },\n      [`&${tabCls}-focus ${tabCls}-btn:focus-visible`]: genFocusOutline(token),\n      [`&${tabCls}-disabled`]: {\n        color: token.colorTextDisabled,\n        cursor: 'not-allowed'\n      },\n      [`&${tabCls}-disabled ${tabCls}-btn, &${tabCls}-disabled ${componentCls}-remove`]: {\n        '&:focus, &:active': {\n          color: token.colorTextDisabled\n        }\n      },\n      [`& ${tabCls}-remove ${iconCls}`]: {\n        margin: 0\n      },\n      [`${iconCls}:not(:last-child)`]: {\n        marginRight: {\n          _skip_check_: true,\n          value: token.marginSM\n        }\n      }\n    },\n    [`${tabCls} + ${tabCls}`]: {\n      margin: {\n        _skip_check_: true,\n        value: tabsHorizontalItemMargin\n      }\n    }\n  };\n};\nconst genRtlStyle = token => {\n  const {\n    componentCls,\n    tabsHorizontalItemMarginRTL,\n    iconCls,\n    cardGutter,\n    calc\n  } = token;\n  const rtlCls = `${componentCls}-rtl`;\n  return {\n    [rtlCls]: {\n      direction: 'rtl',\n      [`${componentCls}-nav`]: {\n        [`${componentCls}-tab`]: {\n          margin: {\n            _skip_check_: true,\n            value: tabsHorizontalItemMarginRTL\n          },\n          [`${componentCls}-tab:last-of-type`]: {\n            marginLeft: {\n              _skip_check_: true,\n              value: 0\n            }\n          },\n          [iconCls]: {\n            marginRight: {\n              _skip_check_: true,\n              value: 0\n            },\n            marginLeft: {\n              _skip_check_: true,\n              value: unit(token.marginSM)\n            }\n          },\n          [`${componentCls}-tab-remove`]: {\n            marginRight: {\n              _skip_check_: true,\n              value: unit(token.marginXS)\n            },\n            marginLeft: {\n              _skip_check_: true,\n              value: unit(calc(token.marginXXS).mul(-1).equal())\n            },\n            [iconCls]: {\n              margin: 0\n            }\n          }\n        }\n      },\n      [`&${componentCls}-left`]: {\n        [`> ${componentCls}-nav`]: {\n          order: 1\n        },\n        [`> ${componentCls}-content-holder`]: {\n          order: 0\n        }\n      },\n      [`&${componentCls}-right`]: {\n        [`> ${componentCls}-nav`]: {\n          order: 0\n        },\n        [`> ${componentCls}-content-holder`]: {\n          order: 1\n        }\n      },\n      // ====================== Card ======================\n      [`&${componentCls}-card${componentCls}-top, &${componentCls}-card${componentCls}-bottom`]: {\n        [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n          [`${componentCls}-tab + ${componentCls}-tab`]: {\n            marginRight: {\n              _skip_check_: true,\n              value: cardGutter\n            },\n            marginLeft: {\n              _skip_check_: true,\n              value: 0\n            }\n          }\n        }\n      }\n    },\n    [`${componentCls}-dropdown-rtl`]: {\n      direction: 'rtl'\n    },\n    [`${componentCls}-menu-item`]: {\n      [`${componentCls}-dropdown-rtl`]: {\n        textAlign: {\n          _skip_check_: true,\n          value: 'right'\n        }\n      }\n    }\n  };\n};\nconst genTabsStyle = token => {\n  const {\n    componentCls,\n    tabsCardPadding,\n    cardHeight,\n    cardGutter,\n    itemHoverColor,\n    itemActiveColor,\n    colorBorderSecondary\n  } = token;\n  return {\n    [componentCls]: Object.assign(Object.assign(Object.assign(Object.assign({}, resetComponent(token)), {\n      display: 'flex',\n      // ========================== Navigation ==========================\n      [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n        position: 'relative',\n        display: 'flex',\n        flex: 'none',\n        alignItems: 'center',\n        [`${componentCls}-nav-wrap`]: {\n          position: 'relative',\n          display: 'flex',\n          flex: 'auto',\n          alignSelf: 'stretch',\n          overflow: 'hidden',\n          whiteSpace: 'nowrap',\n          transform: 'translate(0)',\n          // Fix chrome render bug\n          // >>>>> Ping shadow\n          '&::before, &::after': {\n            position: 'absolute',\n            zIndex: 1,\n            opacity: 0,\n            transition: `opacity ${token.motionDurationSlow}`,\n            content: \"''\",\n            pointerEvents: 'none'\n          }\n        },\n        [`${componentCls}-nav-list`]: {\n          position: 'relative',\n          display: 'flex',\n          transition: `opacity ${token.motionDurationSlow}`\n        },\n        // >>>>>>>> Operations\n        [`${componentCls}-nav-operations`]: {\n          display: 'flex',\n          alignSelf: 'stretch'\n        },\n        [`${componentCls}-nav-operations-hidden`]: {\n          position: 'absolute',\n          visibility: 'hidden',\n          pointerEvents: 'none'\n        },\n        [`${componentCls}-nav-more`]: {\n          position: 'relative',\n          padding: tabsCardPadding,\n          background: 'transparent',\n          border: 0,\n          color: token.colorText,\n          '&::after': {\n            position: 'absolute',\n            right: {\n              _skip_check_: true,\n              value: 0\n            },\n            bottom: 0,\n            left: {\n              _skip_check_: true,\n              value: 0\n            },\n            height: token.calc(token.controlHeightLG).div(8).equal(),\n            transform: 'translateY(100%)',\n            content: \"''\"\n          }\n        },\n        [`${componentCls}-nav-add`]: Object.assign({\n          minWidth: cardHeight,\n          minHeight: cardHeight,\n          marginLeft: {\n            _skip_check_: true,\n            value: cardGutter\n          },\n          background: 'transparent',\n          border: `${unit(token.lineWidth)} ${token.lineType} ${colorBorderSecondary}`,\n          borderRadius: `${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)} 0 0`,\n          outline: 'none',\n          cursor: 'pointer',\n          color: token.colorText,\n          transition: `all ${token.motionDurationSlow} ${token.motionEaseInOut}`,\n          '&:hover': {\n            color: itemHoverColor\n          },\n          '&:active, &:focus:not(:focus-visible)': {\n            color: itemActiveColor\n          }\n        }, genFocusStyle(token, -3))\n      },\n      [`${componentCls}-extra-content`]: {\n        flex: 'none'\n      },\n      // ============================ InkBar ============================\n      [`${componentCls}-ink-bar`]: {\n        position: 'absolute',\n        background: token.inkBarColor,\n        pointerEvents: 'none'\n      }\n    }), genTabStyle(token)), {\n      // =========================== TabPanes ===========================\n      [`${componentCls}-content`]: {\n        position: 'relative',\n        width: '100%'\n      },\n      [`${componentCls}-content-holder`]: {\n        flex: 'auto',\n        minWidth: 0,\n        minHeight: 0\n      },\n      [`${componentCls}-tabpane`]: Object.assign(Object.assign({}, genFocusStyle(token)), {\n        '&-hidden': {\n          display: 'none'\n        }\n      })\n    }),\n    [`${componentCls}-centered`]: {\n      [`> ${componentCls}-nav, > div > ${componentCls}-nav`]: {\n        [`${componentCls}-nav-wrap`]: {\n          [`&:not([class*='${componentCls}-nav-wrap-ping']) > ${componentCls}-nav-list`]: {\n            margin: 'auto'\n          }\n        }\n      }\n    }\n  };\n};\nexport const prepareComponentToken = token => {\n  const {\n    cardHeight,\n    cardHeightSM,\n    cardHeightLG,\n    controlHeight,\n    controlHeightLG\n  } = token;\n  const mergedCardHeight = cardHeight || controlHeightLG;\n  const mergedCardHeightSM = cardHeightSM || controlHeight;\n  // `controlHeight` missing XL variable, so we directly write it here:\n  const mergedCardHeightLG = cardHeightLG || controlHeightLG + 8;\n  return {\n    zIndexPopup: token.zIndexPopupBase + 50,\n    cardBg: token.colorFillAlter,\n    // We can not pass this as valid value,\n    // Since `cardHeight` will lock nav add button height.\n    cardHeight: mergedCardHeight,\n    cardHeightSM: mergedCardHeightSM,\n    cardHeightLG: mergedCardHeightLG,\n    // Initialize with empty string, because cardPadding will be calculated with cardHeight by default.\n    cardPadding: `${(mergedCardHeight - token.fontHeight) / 2 - token.lineWidth}px ${token.padding}px`,\n    cardPaddingSM: `${(mergedCardHeightSM - token.fontHeight) / 2 - token.lineWidth}px ${token.paddingXS}px`,\n    cardPaddingLG: `${(mergedCardHeightLG - token.fontHeightLG) / 2 - token.lineWidth}px ${token.padding}px`,\n    titleFontSize: token.fontSize,\n    titleFontSizeLG: token.fontSizeLG,\n    titleFontSizeSM: token.fontSize,\n    inkBarColor: token.colorPrimary,\n    horizontalMargin: `0 0 ${token.margin}px 0`,\n    horizontalItemGutter: 32,\n    // Fixed Value\n    // Initialize with empty string, because horizontalItemMargin will be calculated with horizontalItemGutter by default.\n    horizontalItemMargin: ``,\n    horizontalItemMarginRTL: ``,\n    horizontalItemPadding: `${token.paddingSM}px 0`,\n    horizontalItemPaddingSM: `${token.paddingXS}px 0`,\n    horizontalItemPaddingLG: `${token.padding}px 0`,\n    verticalItemPadding: `${token.paddingXS}px ${token.paddingLG}px`,\n    verticalItemMargin: `${token.margin}px 0 0 0`,\n    itemColor: token.colorText,\n    itemSelectedColor: token.colorPrimary,\n    itemHoverColor: token.colorPrimaryHover,\n    itemActiveColor: token.colorPrimaryActive,\n    cardGutter: token.marginXXS / 2\n  };\n};\n// ============================== Export ==============================\nexport default genStyleHooks('Tabs', token => {\n  const tabsToken = mergeToken(token, {\n    // `cardPadding` is empty by default, so we could calculate with dynamic `cardHeight`\n    tabsCardPadding: token.cardPadding,\n    dropdownEdgeChildVerticalPadding: token.paddingXXS,\n    tabsActiveTextShadow: '0 0 0.25px currentcolor',\n    tabsDropdownHeight: 200,\n    tabsDropdownWidth: 120,\n    tabsHorizontalItemMargin: `0 0 0 ${unit(token.horizontalItemGutter)}`,\n    tabsHorizontalItemMarginRTL: `0 0 0 ${unit(token.horizontalItemGutter)}`\n  });\n  return [genSizeStyle(tabsToken), genRtlStyle(tabsToken), genPositionStyle(tabsToken), genDropdownStyle(tabsToken), genCardStyle(tabsToken), genTabsStyle(tabsToken), genMotionStyle(tabsToken)];\n}, prepareComponentToken);","const TabPane = () => null;\nif (process.env.NODE_ENV !== 'production') {\n  TabPane.displayName = 'DeprecatedTabPane';\n}\nexport default TabPane;","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport EllipsisOutlined from \"@ant-design/icons/es/icons/EllipsisOutlined\";\nimport PlusOutlined from \"@ant-design/icons/es/icons/PlusOutlined\";\nimport classNames from 'classnames';\nimport RcTabs from 'rc-tabs';\nimport { devUseWarning } from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport useCSSVarCls from '../config-provider/hooks/useCSSVarCls';\nimport useSize from '../config-provider/hooks/useSize';\nimport useAnimateConfig from './hooks/useAnimateConfig';\nimport useLegacyItems from './hooks/useLegacyItems';\nimport useStyle from './style';\nimport TabPane from './TabPane';\nconst Tabs = props => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n  const {\n      type,\n      className,\n      rootClassName,\n      size: customSize,\n      onEdit,\n      hideAdd,\n      centered,\n      addIcon,\n      removeIcon,\n      moreIcon,\n      more,\n      popupClassName,\n      children,\n      items,\n      animated,\n      style,\n      indicatorSize,\n      indicator,\n      destroyInactiveTabPane,\n      destroyOnHidden\n    } = props,\n    otherProps = __rest(props, [\"type\", \"className\", \"rootClassName\", \"size\", \"onEdit\", \"hideAdd\", \"centered\", \"addIcon\", \"removeIcon\", \"moreIcon\", \"more\", \"popupClassName\", \"children\", \"items\", \"animated\", \"style\", \"indicatorSize\", \"indicator\", \"destroyInactiveTabPane\", \"destroyOnHidden\"]);\n  const {\n    prefixCls: customizePrefixCls\n  } = otherProps;\n  const {\n    direction,\n    tabs,\n    getPrefixCls,\n    getPopupContainer\n  } = React.useContext(ConfigContext);\n  const prefixCls = getPrefixCls('tabs', customizePrefixCls);\n  const rootCls = useCSSVarCls(prefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls, rootCls);\n  let editable;\n  if (type === 'editable-card') {\n    editable = {\n      onEdit: (editType, {\n        key,\n        event\n      }) => {\n        onEdit === null || onEdit === void 0 ? void 0 : onEdit(editType === 'add' ? event : key, editType);\n      },\n      removeIcon: (_a = removeIcon !== null && removeIcon !== void 0 ? removeIcon : tabs === null || tabs === void 0 ? void 0 : tabs.removeIcon) !== null && _a !== void 0 ? _a : /*#__PURE__*/React.createElement(CloseOutlined, null),\n      addIcon: (addIcon !== null && addIcon !== void 0 ? addIcon : tabs === null || tabs === void 0 ? void 0 : tabs.addIcon) || /*#__PURE__*/React.createElement(PlusOutlined, null),\n      showAdd: hideAdd !== true\n    };\n  }\n  const rootPrefixCls = getPrefixCls();\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Tabs');\n    process.env.NODE_ENV !== \"production\" ? warning(!('onPrevClick' in props) && !('onNextClick' in props), 'breaking', '`onPrevClick` and `onNextClick` has been removed. Please use `onTabScroll` instead.') : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(indicatorSize || (tabs === null || tabs === void 0 ? void 0 : tabs.indicatorSize)), 'deprecated', '`indicatorSize` has been deprecated. Please use `indicator={{ size: ... }}` instead.') : void 0;\n    warning.deprecated(!('destroyInactiveTabPane' in props || (items === null || items === void 0 ? void 0 : items.some(item => 'destroyInactiveTabPane' in item))), 'destroyInactiveTabPane', 'destroyOnHidden');\n  }\n  const size = useSize(customSize);\n  const mergedItems = useLegacyItems(items, children);\n  const mergedAnimated = useAnimateConfig(prefixCls, animated);\n  const mergedStyle = Object.assign(Object.assign({}, tabs === null || tabs === void 0 ? void 0 : tabs.style), style);\n  const mergedIndicator = {\n    align: (_b = indicator === null || indicator === void 0 ? void 0 : indicator.align) !== null && _b !== void 0 ? _b : (_c = tabs === null || tabs === void 0 ? void 0 : tabs.indicator) === null || _c === void 0 ? void 0 : _c.align,\n    size: (_g = (_e = (_d = indicator === null || indicator === void 0 ? void 0 : indicator.size) !== null && _d !== void 0 ? _d : indicatorSize) !== null && _e !== void 0 ? _e : (_f = tabs === null || tabs === void 0 ? void 0 : tabs.indicator) === null || _f === void 0 ? void 0 : _f.size) !== null && _g !== void 0 ? _g : tabs === null || tabs === void 0 ? void 0 : tabs.indicatorSize\n  };\n  return wrapCSSVar(/*#__PURE__*/React.createElement(RcTabs, Object.assign({\n    direction: direction,\n    getPopupContainer: getPopupContainer\n  }, otherProps, {\n    items: mergedItems,\n    className: classNames({\n      [`${prefixCls}-${size}`]: size,\n      [`${prefixCls}-card`]: ['card', 'editable-card'].includes(type),\n      [`${prefixCls}-editable-card`]: type === 'editable-card',\n      [`${prefixCls}-centered`]: centered\n    }, tabs === null || tabs === void 0 ? void 0 : tabs.className, className, rootClassName, hashId, cssVarCls, rootCls),\n    popupClassName: classNames(popupClassName, hashId, cssVarCls, rootCls),\n    style: mergedStyle,\n    editable: editable,\n    more: Object.assign({\n      icon: (_l = (_k = (_j = (_h = tabs === null || tabs === void 0 ? void 0 : tabs.more) === null || _h === void 0 ? void 0 : _h.icon) !== null && _j !== void 0 ? _j : tabs === null || tabs === void 0 ? void 0 : tabs.moreIcon) !== null && _k !== void 0 ? _k : moreIcon) !== null && _l !== void 0 ? _l : /*#__PURE__*/React.createElement(EllipsisOutlined, null),\n      transitionName: `${rootPrefixCls}-slide-up`\n    }, more),\n    prefixCls: prefixCls,\n    animated: mergedAnimated,\n    indicator: mergedIndicator,\n    // TODO: In the future, destroyInactiveTabPane in rc-tabs needs to be upgrade to destroyOnHidden\n    destroyInactiveTabPane: destroyOnHidden !== null && destroyOnHidden !== void 0 ? destroyOnHidden : destroyInactiveTabPane\n  })));\n};\nTabs.TabPane = TabPane;\nif (process.env.NODE_ENV !== 'production') {\n  Tabs.displayName = 'Tabs';\n}\nexport default Tabs;","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigContext } from '../config-provider';\nconst Grid = _a => {\n  var {\n      prefixCls,\n      className,\n      hoverable = true\n    } = _a,\n    props = __rest(_a, [\"prefixCls\", \"className\", \"hoverable\"]);\n  const {\n    getPrefixCls\n  } = React.useContext(ConfigContext);\n  const prefix = getPrefixCls('card', prefixCls);\n  const classString = classNames(`${prefix}-grid`, className, {\n    [`${prefix}-grid-hoverable`]: hoverable\n  });\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({}, props, {\n    className: classString\n  }));\n};\nexport default Grid;","import { unit } from '@ant-design/cssinjs';\nimport { clearFix, resetComponent, textEllipsis } from '../../style';\nimport { genStyleHooks, mergeToken } from '../../theme/internal';\n// ============================== Styles ==============================\n// ============================== Head ==============================\nconst genCardHeadStyle = token => {\n  const {\n    antCls,\n    componentCls,\n    headerHeight,\n    headerPadding,\n    tabsMarginBottom\n  } = token;\n  return Object.assign(Object.assign({\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    minHeight: headerHeight,\n    marginBottom: -1,\n    padding: `0 ${unit(headerPadding)}`,\n    color: token.colorTextHeading,\n    fontWeight: token.fontWeightStrong,\n    fontSize: token.headerFontSize,\n    background: token.headerBg,\n    borderBottom: `${unit(token.lineWidth)} ${token.lineType} ${token.colorBorderSecondary}`,\n    borderRadius: `${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)} 0 0`\n  }, clearFix()), {\n    '&-wrapper': {\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center'\n    },\n    '&-title': Object.assign(Object.assign({\n      display: 'inline-block',\n      flex: 1\n    }, textEllipsis), {\n      [`\n          > ${componentCls}-typography,\n          > ${componentCls}-typography-edit-content\n        `]: {\n        insetInlineStart: 0,\n        marginTop: 0,\n        marginBottom: 0\n      }\n    }),\n    [`${antCls}-tabs-top`]: {\n      clear: 'both',\n      marginBottom: tabsMarginBottom,\n      color: token.colorText,\n      fontWeight: 'normal',\n      fontSize: token.fontSize,\n      '&-bar': {\n        borderBottom: `${unit(token.lineWidth)} ${token.lineType} ${token.colorBorderSecondary}`\n      }\n    }\n  });\n};\n// ============================== Grid ==============================\nconst genCardGridStyle = token => {\n  const {\n    cardPaddingBase,\n    colorBorderSecondary,\n    cardShadow,\n    lineWidth\n  } = token;\n  return {\n    width: '33.33%',\n    padding: cardPaddingBase,\n    border: 0,\n    borderRadius: 0,\n    boxShadow: `\n      ${unit(lineWidth)} 0 0 0 ${colorBorderSecondary},\n      0 ${unit(lineWidth)} 0 0 ${colorBorderSecondary},\n      ${unit(lineWidth)} ${unit(lineWidth)} 0 0 ${colorBorderSecondary},\n      ${unit(lineWidth)} 0 0 0 ${colorBorderSecondary} inset,\n      0 ${unit(lineWidth)} 0 0 ${colorBorderSecondary} inset;\n    `,\n    transition: `all ${token.motionDurationMid}`,\n    '&-hoverable:hover': {\n      position: 'relative',\n      zIndex: 1,\n      boxShadow: cardShadow\n    }\n  };\n};\n// ============================== Actions ==============================\nconst genCardActionsStyle = token => {\n  const {\n    componentCls,\n    iconCls,\n    actionsLiMargin,\n    cardActionsIconSize,\n    colorBorderSecondary,\n    actionsBg\n  } = token;\n  return Object.assign(Object.assign({\n    margin: 0,\n    padding: 0,\n    listStyle: 'none',\n    background: actionsBg,\n    borderTop: `${unit(token.lineWidth)} ${token.lineType} ${colorBorderSecondary}`,\n    display: 'flex',\n    borderRadius: `0 0 ${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)}`\n  }, clearFix()), {\n    '& > li': {\n      margin: actionsLiMargin,\n      color: token.colorTextDescription,\n      textAlign: 'center',\n      '> span': {\n        position: 'relative',\n        display: 'block',\n        minWidth: token.calc(token.cardActionsIconSize).mul(2).equal(),\n        fontSize: token.fontSize,\n        lineHeight: token.lineHeight,\n        cursor: 'pointer',\n        '&:hover': {\n          color: token.colorPrimary,\n          transition: `color ${token.motionDurationMid}`\n        },\n        [`a:not(${componentCls}-btn), > ${iconCls}`]: {\n          display: 'inline-block',\n          width: '100%',\n          color: token.colorIcon,\n          lineHeight: unit(token.fontHeight),\n          transition: `color ${token.motionDurationMid}`,\n          '&:hover': {\n            color: token.colorPrimary\n          }\n        },\n        [`> ${iconCls}`]: {\n          fontSize: cardActionsIconSize,\n          lineHeight: unit(token.calc(cardActionsIconSize).mul(token.lineHeight).equal())\n        }\n      },\n      '&:not(:last-child)': {\n        borderInlineEnd: `${unit(token.lineWidth)} ${token.lineType} ${colorBorderSecondary}`\n      }\n    }\n  });\n};\n// ============================== Meta ==============================\nconst genCardMetaStyle = token => Object.assign(Object.assign({\n  margin: `${unit(token.calc(token.marginXXS).mul(-1).equal())} 0`,\n  display: 'flex'\n}, clearFix()), {\n  '&-avatar': {\n    paddingInlineEnd: token.padding\n  },\n  '&-detail': {\n    overflow: 'hidden',\n    flex: 1,\n    '> div:not(:last-child)': {\n      marginBottom: token.marginXS\n    }\n  },\n  '&-title': Object.assign({\n    color: token.colorTextHeading,\n    fontWeight: token.fontWeightStrong,\n    fontSize: token.fontSizeLG\n  }, textEllipsis),\n  '&-description': {\n    color: token.colorTextDescription\n  }\n});\n// ============================== Inner ==============================\nconst genCardTypeInnerStyle = token => {\n  const {\n    componentCls,\n    colorFillAlter,\n    headerPadding,\n    bodyPadding\n  } = token;\n  return {\n    [`${componentCls}-head`]: {\n      padding: `0 ${unit(headerPadding)}`,\n      background: colorFillAlter,\n      '&-title': {\n        fontSize: token.fontSize\n      }\n    },\n    [`${componentCls}-body`]: {\n      padding: `${unit(token.padding)} ${unit(bodyPadding)}`\n    }\n  };\n};\n// ============================== Loading ==============================\nconst genCardLoadingStyle = token => {\n  const {\n    componentCls\n  } = token;\n  return {\n    overflow: 'hidden',\n    [`${componentCls}-body`]: {\n      userSelect: 'none'\n    }\n  };\n};\n// ============================== Basic ==============================\nconst genCardStyle = token => {\n  const {\n    componentCls,\n    cardShadow,\n    cardHeadPadding,\n    colorBorderSecondary,\n    boxShadowTertiary,\n    bodyPadding,\n    extraColor\n  } = token;\n  return {\n    [componentCls]: Object.assign(Object.assign({}, resetComponent(token)), {\n      position: 'relative',\n      background: token.colorBgContainer,\n      borderRadius: token.borderRadiusLG,\n      [`&:not(${componentCls}-bordered)`]: {\n        boxShadow: boxShadowTertiary\n      },\n      [`${componentCls}-head`]: genCardHeadStyle(token),\n      [`${componentCls}-extra`]: {\n        // https://stackoverflow.com/a/22429853/3040605\n        marginInlineStart: 'auto',\n        color: extraColor,\n        fontWeight: 'normal',\n        fontSize: token.fontSize\n      },\n      [`${componentCls}-body`]: Object.assign({\n        padding: bodyPadding,\n        borderRadius: `0 0 ${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)}`\n      }, clearFix()),\n      [`${componentCls}-grid`]: genCardGridStyle(token),\n      [`${componentCls}-cover`]: {\n        '> *': {\n          display: 'block',\n          width: '100%',\n          borderRadius: `${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)} 0 0`\n        }\n      },\n      [`${componentCls}-actions`]: genCardActionsStyle(token),\n      [`${componentCls}-meta`]: genCardMetaStyle(token)\n    }),\n    [`${componentCls}-bordered`]: {\n      border: `${unit(token.lineWidth)} ${token.lineType} ${colorBorderSecondary}`,\n      [`${componentCls}-cover`]: {\n        marginTop: -1,\n        marginInlineStart: -1,\n        marginInlineEnd: -1\n      }\n    },\n    [`${componentCls}-hoverable`]: {\n      cursor: 'pointer',\n      transition: `box-shadow ${token.motionDurationMid}, border-color ${token.motionDurationMid}`,\n      '&:hover': {\n        borderColor: 'transparent',\n        boxShadow: cardShadow\n      }\n    },\n    [`${componentCls}-contain-grid`]: {\n      borderRadius: `${unit(token.borderRadiusLG)} ${unit(token.borderRadiusLG)} 0 0 `,\n      [`${componentCls}-body`]: {\n        display: 'flex',\n        flexWrap: 'wrap'\n      },\n      [`&:not(${componentCls}-loading) ${componentCls}-body`]: {\n        marginBlockStart: token.calc(token.lineWidth).mul(-1).equal(),\n        marginInlineStart: token.calc(token.lineWidth).mul(-1).equal(),\n        padding: 0\n      }\n    },\n    [`${componentCls}-contain-tabs`]: {\n      [`> div${componentCls}-head`]: {\n        minHeight: 0,\n        [`${componentCls}-head-title, ${componentCls}-extra`]: {\n          paddingTop: cardHeadPadding\n        }\n      }\n    },\n    [`${componentCls}-type-inner`]: genCardTypeInnerStyle(token),\n    [`${componentCls}-loading`]: genCardLoadingStyle(token),\n    [`${componentCls}-rtl`]: {\n      direction: 'rtl'\n    }\n  };\n};\n// ============================== Size ==============================\nconst genCardSizeStyle = token => {\n  const {\n    componentCls,\n    bodyPaddingSM,\n    headerPaddingSM,\n    headerHeightSM,\n    headerFontSizeSM\n  } = token;\n  return {\n    [`${componentCls}-small`]: {\n      [`> ${componentCls}-head`]: {\n        minHeight: headerHeightSM,\n        padding: `0 ${unit(headerPaddingSM)}`,\n        fontSize: headerFontSizeSM,\n        [`> ${componentCls}-head-wrapper`]: {\n          [`> ${componentCls}-extra`]: {\n            fontSize: token.fontSize\n          }\n        }\n      },\n      [`> ${componentCls}-body`]: {\n        padding: bodyPaddingSM\n      }\n    },\n    [`${componentCls}-small${componentCls}-contain-tabs`]: {\n      [`> ${componentCls}-head`]: {\n        [`${componentCls}-head-title, ${componentCls}-extra`]: {\n          paddingTop: 0,\n          display: 'flex',\n          alignItems: 'center'\n        }\n      }\n    }\n  };\n};\nexport const prepareComponentToken = token => {\n  var _a, _b;\n  return {\n    headerBg: 'transparent',\n    headerFontSize: token.fontSizeLG,\n    headerFontSizeSM: token.fontSize,\n    headerHeight: token.fontSizeLG * token.lineHeightLG + token.padding * 2,\n    headerHeightSM: token.fontSize * token.lineHeight + token.paddingXS * 2,\n    actionsBg: token.colorBgContainer,\n    actionsLiMargin: `${token.paddingSM}px 0`,\n    tabsMarginBottom: -token.padding - token.lineWidth,\n    extraColor: token.colorText,\n    bodyPaddingSM: 12,\n    // Fixed padding.\n    headerPaddingSM: 12,\n    bodyPadding: (_a = token.bodyPadding) !== null && _a !== void 0 ? _a : token.paddingLG,\n    headerPadding: (_b = token.headerPadding) !== null && _b !== void 0 ? _b : token.paddingLG\n  };\n};\n// ============================== Export ==============================\nexport default genStyleHooks('Card', token => {\n  const cardToken = mergeToken(token, {\n    cardShadow: token.boxShadowCard,\n    cardHeadPadding: token.padding,\n    cardPaddingBase: token.paddingLG,\n    cardActionsIconSize: token.fontSize\n  });\n  return [\n  // Style\n  genCardStyle(cardToken),\n  // Size\n  genCardSizeStyle(cardToken)];\n}, prepareComponentToken);","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport { devUseWarning } from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport useSize from '../config-provider/hooks/useSize';\nimport Skeleton from '../skeleton';\nimport Tabs from '../tabs';\nimport Grid from './Grid';\nimport useStyle from './style';\nimport useVariant from '../form/hooks/useVariants';\nconst ActionNode = props => {\n  const {\n    actionClasses,\n    actions = [],\n    actionStyle\n  } = props;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: actionClasses,\n    style: actionStyle\n  }, actions.map((action, index) => {\n    // Move this out since eslint not allow index key\n    // And eslint-disable makes conflict with rollup\n    // ref https://github.com/ant-design/ant-design/issues/46022\n    const key = `action-${index}`;\n    return /*#__PURE__*/React.createElement(\"li\", {\n      style: {\n        width: `${100 / actions.length}%`\n      },\n      key: key\n    }, /*#__PURE__*/React.createElement(\"span\", null, action));\n  }));\n};\nconst Card = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      prefixCls: customizePrefixCls,\n      className,\n      rootClassName,\n      style,\n      extra,\n      headStyle = {},\n      bodyStyle = {},\n      title,\n      loading,\n      bordered,\n      variant: customVariant,\n      size: customizeSize,\n      type,\n      cover,\n      actions,\n      tabList,\n      children,\n      activeTabKey,\n      defaultActiveTabKey,\n      tabBarExtraContent,\n      hoverable,\n      tabProps = {},\n      classNames: customClassNames,\n      styles: customStyles\n    } = props,\n    others = __rest(props, [\"prefixCls\", \"className\", \"rootClassName\", \"style\", \"extra\", \"headStyle\", \"bodyStyle\", \"title\", \"loading\", \"bordered\", \"variant\", \"size\", \"type\", \"cover\", \"actions\", \"tabList\", \"children\", \"activeTabKey\", \"defaultActiveTabKey\", \"tabBarExtraContent\", \"hoverable\", \"tabProps\", \"classNames\", \"styles\"]);\n  const {\n    getPrefixCls,\n    direction,\n    card\n  } = React.useContext(ConfigContext);\n  const [variant] = useVariant('card', customVariant, bordered);\n  // =================Warning===================\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Card');\n    [['headStyle', 'styles.header'], ['bodyStyle', 'styles.body'], ['bordered', 'variant']].forEach(([deprecatedName, newName]) => {\n      warning.deprecated(!(deprecatedName in props), deprecatedName, newName);\n    });\n  }\n  const onTabChange = key => {\n    var _a;\n    (_a = props.onTabChange) === null || _a === void 0 ? void 0 : _a.call(props, key);\n  };\n  const moduleClass = moduleName => {\n    var _a;\n    return classNames((_a = card === null || card === void 0 ? void 0 : card.classNames) === null || _a === void 0 ? void 0 : _a[moduleName], customClassNames === null || customClassNames === void 0 ? void 0 : customClassNames[moduleName]);\n  };\n  const moduleStyle = moduleName => {\n    var _a;\n    return Object.assign(Object.assign({}, (_a = card === null || card === void 0 ? void 0 : card.styles) === null || _a === void 0 ? void 0 : _a[moduleName]), customStyles === null || customStyles === void 0 ? void 0 : customStyles[moduleName]);\n  };\n  const isContainGrid = React.useMemo(() => {\n    let containGrid = false;\n    React.Children.forEach(children, element => {\n      if ((element === null || element === void 0 ? void 0 : element.type) === Grid) {\n        containGrid = true;\n      }\n    });\n    return containGrid;\n  }, [children]);\n  const prefixCls = getPrefixCls('card', customizePrefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls);\n  const loadingBlock = /*#__PURE__*/React.createElement(Skeleton, {\n    loading: true,\n    active: true,\n    paragraph: {\n      rows: 4\n    },\n    title: false\n  }, children);\n  const hasActiveTabKey = activeTabKey !== undefined;\n  const extraProps = Object.assign(Object.assign({}, tabProps), {\n    [hasActiveTabKey ? 'activeKey' : 'defaultActiveKey']: hasActiveTabKey ? activeTabKey : defaultActiveTabKey,\n    tabBarExtraContent\n  });\n  let head;\n  const mergedSize = useSize(customizeSize);\n  const tabSize = !mergedSize || mergedSize === 'default' ? 'large' : mergedSize;\n  const tabs = tabList ? (/*#__PURE__*/React.createElement(Tabs, Object.assign({\n    size: tabSize\n  }, extraProps, {\n    className: `${prefixCls}-head-tabs`,\n    onChange: onTabChange,\n    items: tabList.map(_a => {\n      var {\n          tab\n        } = _a,\n        item = __rest(_a, [\"tab\"]);\n      return Object.assign({\n        label: tab\n      }, item);\n    })\n  }))) : null;\n  if (title || extra || tabs) {\n    const headClasses = classNames(`${prefixCls}-head`, moduleClass('header'));\n    const titleClasses = classNames(`${prefixCls}-head-title`, moduleClass('title'));\n    const extraClasses = classNames(`${prefixCls}-extra`, moduleClass('extra'));\n    const mergedHeadStyle = Object.assign(Object.assign({}, headStyle), moduleStyle('header'));\n    head = /*#__PURE__*/React.createElement(\"div\", {\n      className: headClasses,\n      style: mergedHeadStyle\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `${prefixCls}-head-wrapper`\n    }, title && (/*#__PURE__*/React.createElement(\"div\", {\n      className: titleClasses,\n      style: moduleStyle('title')\n    }, title)), extra && (/*#__PURE__*/React.createElement(\"div\", {\n      className: extraClasses,\n      style: moduleStyle('extra')\n    }, extra))), tabs);\n  }\n  const coverClasses = classNames(`${prefixCls}-cover`, moduleClass('cover'));\n  const coverDom = cover ? (/*#__PURE__*/React.createElement(\"div\", {\n    className: coverClasses,\n    style: moduleStyle('cover')\n  }, cover)) : null;\n  const bodyClasses = classNames(`${prefixCls}-body`, moduleClass('body'));\n  const mergedBodyStyle = Object.assign(Object.assign({}, bodyStyle), moduleStyle('body'));\n  const body = /*#__PURE__*/React.createElement(\"div\", {\n    className: bodyClasses,\n    style: mergedBodyStyle\n  }, loading ? loadingBlock : children);\n  const actionClasses = classNames(`${prefixCls}-actions`, moduleClass('actions'));\n  const actionDom = (actions === null || actions === void 0 ? void 0 : actions.length) ? (/*#__PURE__*/React.createElement(ActionNode, {\n    actionClasses: actionClasses,\n    actionStyle: moduleStyle('actions'),\n    actions: actions\n  })) : null;\n  const divProps = omit(others, ['onTabChange']);\n  const classString = classNames(prefixCls, card === null || card === void 0 ? void 0 : card.className, {\n    [`${prefixCls}-loading`]: loading,\n    [`${prefixCls}-bordered`]: variant !== 'borderless',\n    [`${prefixCls}-hoverable`]: hoverable,\n    [`${prefixCls}-contain-grid`]: isContainGrid,\n    [`${prefixCls}-contain-tabs`]: tabList === null || tabList === void 0 ? void 0 : tabList.length,\n    [`${prefixCls}-${mergedSize}`]: mergedSize,\n    [`${prefixCls}-type-${type}`]: !!type,\n    [`${prefixCls}-rtl`]: direction === 'rtl'\n  }, className, rootClassName, hashId, cssVarCls);\n  const mergedStyle = Object.assign(Object.assign({}, card === null || card === void 0 ? void 0 : card.style), style);\n  return wrapCSSVar(/*#__PURE__*/React.createElement(\"div\", Object.assign({\n    ref: ref\n  }, divProps, {\n    className: classString,\n    style: mergedStyle\n  }), head, coverDom, body, actionDom));\n});\nexport default Card;","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigContext } from '../config-provider';\nconst Meta = props => {\n  const {\n      prefixCls: customizePrefixCls,\n      className,\n      avatar,\n      title,\n      description\n    } = props,\n    others = __rest(props, [\"prefixCls\", \"className\", \"avatar\", \"title\", \"description\"]);\n  const {\n    getPrefixCls\n  } = React.useContext(ConfigContext);\n  const prefixCls = getPrefixCls('card', customizePrefixCls);\n  const classString = classNames(`${prefixCls}-meta`, className);\n  const avatarDom = avatar ? (/*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-meta-avatar`\n  }, avatar)) : null;\n  const titleDom = title ? (/*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-meta-title`\n  }, title)) : null;\n  const descriptionDom = description ? (/*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-meta-description`\n  }, description)) : null;\n  const MetaDetail = titleDom || descriptionDom ? (/*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-meta-detail`\n  }, titleDom, descriptionDom)) : null;\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({}, others, {\n    className: classString\n  }), avatarDom, MetaDetail);\n};\nexport default Meta;","\"use client\";\n\nimport InternalCard from './Card';\nimport Grid from './Grid';\nimport Meta from './Meta';\nconst Card = InternalCard;\nCard.Grid = Grid;\nCard.Meta = Meta;\nif (process.env.NODE_ENV !== 'production') {\n  Card.displayName = 'Card';\n}\nexport default Card;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport { composeRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\nvar calcThumbStyle = function calcThumbStyle(targetElement, vertical) {\n  if (!targetElement) return null;\n  var style = {\n    left: targetElement.offsetLeft,\n    right: targetElement.parentElement.clientWidth - targetElement.clientWidth - targetElement.offsetLeft,\n    width: targetElement.clientWidth,\n    top: targetElement.offsetTop,\n    bottom: targetElement.parentElement.clientHeight - targetElement.clientHeight - targetElement.offsetTop,\n    height: targetElement.clientHeight\n  };\n  if (vertical) {\n    // Adjusts positioning and size for vertical layout by setting horizontal properties to 0 and using vertical properties from the style object.\n    return {\n      left: 0,\n      right: 0,\n      width: 0,\n      top: style.top,\n      bottom: style.bottom,\n      height: style.height\n    };\n  }\n  return {\n    left: style.left,\n    right: style.right,\n    width: style.width,\n    top: 0,\n    bottom: 0,\n    height: 0\n  };\n};\nvar toPX = function toPX(value) {\n  return value !== undefined ? \"\".concat(value, \"px\") : undefined;\n};\nexport default function MotionThumb(props) {\n  var prefixCls = props.prefixCls,\n    containerRef = props.containerRef,\n    value = props.value,\n    getValueIndex = props.getValueIndex,\n    motionName = props.motionName,\n    onMotionStart = props.onMotionStart,\n    onMotionEnd = props.onMotionEnd,\n    direction = props.direction,\n    _props$vertical = props.vertical,\n    vertical = _props$vertical === void 0 ? false : _props$vertical;\n  var thumbRef = React.useRef(null);\n  var _React$useState = React.useState(value),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    prevValue = _React$useState2[0],\n    setPrevValue = _React$useState2[1];\n\n  // =========================== Effect ===========================\n  var findValueElement = function findValueElement(val) {\n    var _containerRef$current;\n    var index = getValueIndex(val);\n    var ele = (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.querySelectorAll(\".\".concat(prefixCls, \"-item\"))[index];\n    return (ele === null || ele === void 0 ? void 0 : ele.offsetParent) && ele;\n  };\n  var _React$useState3 = React.useState(null),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    prevStyle = _React$useState4[0],\n    setPrevStyle = _React$useState4[1];\n  var _React$useState5 = React.useState(null),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    nextStyle = _React$useState6[0],\n    setNextStyle = _React$useState6[1];\n  useLayoutEffect(function () {\n    if (prevValue !== value) {\n      var prev = findValueElement(prevValue);\n      var next = findValueElement(value);\n      var calcPrevStyle = calcThumbStyle(prev, vertical);\n      var calcNextStyle = calcThumbStyle(next, vertical);\n      setPrevValue(value);\n      setPrevStyle(calcPrevStyle);\n      setNextStyle(calcNextStyle);\n      if (prev && next) {\n        onMotionStart();\n      } else {\n        onMotionEnd();\n      }\n    }\n  }, [value]);\n  var thumbStart = React.useMemo(function () {\n    if (vertical) {\n      var _prevStyle$top;\n      return toPX((_prevStyle$top = prevStyle === null || prevStyle === void 0 ? void 0 : prevStyle.top) !== null && _prevStyle$top !== void 0 ? _prevStyle$top : 0);\n    }\n    if (direction === 'rtl') {\n      return toPX(-(prevStyle === null || prevStyle === void 0 ? void 0 : prevStyle.right));\n    }\n    return toPX(prevStyle === null || prevStyle === void 0 ? void 0 : prevStyle.left);\n  }, [vertical, direction, prevStyle]);\n  var thumbActive = React.useMemo(function () {\n    if (vertical) {\n      var _nextStyle$top;\n      return toPX((_nextStyle$top = nextStyle === null || nextStyle === void 0 ? void 0 : nextStyle.top) !== null && _nextStyle$top !== void 0 ? _nextStyle$top : 0);\n    }\n    if (direction === 'rtl') {\n      return toPX(-(nextStyle === null || nextStyle === void 0 ? void 0 : nextStyle.right));\n    }\n    return toPX(nextStyle === null || nextStyle === void 0 ? void 0 : nextStyle.left);\n  }, [vertical, direction, nextStyle]);\n\n  // =========================== Motion ===========================\n  var onAppearStart = function onAppearStart() {\n    if (vertical) {\n      return {\n        transform: 'translateY(var(--thumb-start-top))',\n        height: 'var(--thumb-start-height)'\n      };\n    }\n    return {\n      transform: 'translateX(var(--thumb-start-left))',\n      width: 'var(--thumb-start-width)'\n    };\n  };\n  var onAppearActive = function onAppearActive() {\n    if (vertical) {\n      return {\n        transform: 'translateY(var(--thumb-active-top))',\n        height: 'var(--thumb-active-height)'\n      };\n    }\n    return {\n      transform: 'translateX(var(--thumb-active-left))',\n      width: 'var(--thumb-active-width)'\n    };\n  };\n  var onVisibleChanged = function onVisibleChanged() {\n    setPrevStyle(null);\n    setNextStyle(null);\n    onMotionEnd();\n  };\n\n  // =========================== Render ===========================\n  // No need motion when nothing exist in queue\n  if (!prevStyle || !nextStyle) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(CSSMotion, {\n    visible: true,\n    motionName: motionName,\n    motionAppear: true,\n    onAppearStart: onAppearStart,\n    onAppearActive: onAppearActive,\n    onVisibleChanged: onVisibleChanged\n  }, function (_ref, ref) {\n    var motionClassName = _ref.className,\n      motionStyle = _ref.style;\n    var mergedStyle = _objectSpread(_objectSpread({}, motionStyle), {}, {\n      '--thumb-start-left': thumbStart,\n      '--thumb-start-width': toPX(prevStyle === null || prevStyle === void 0 ? void 0 : prevStyle.width),\n      '--thumb-active-left': thumbActive,\n      '--thumb-active-width': toPX(nextStyle === null || nextStyle === void 0 ? void 0 : nextStyle.width),\n      '--thumb-start-top': thumbStart,\n      '--thumb-start-height': toPX(prevStyle === null || prevStyle === void 0 ? void 0 : prevStyle.height),\n      '--thumb-active-top': thumbActive,\n      '--thumb-active-height': toPX(nextStyle === null || nextStyle === void 0 ? void 0 : nextStyle.height)\n    });\n\n    // It's little ugly which should be refactor when @umi/test update to latest jsdom\n    var motionProps = {\n      ref: composeRef(thumbRef, ref),\n      style: mergedStyle,\n      className: classNames(\"\".concat(prefixCls, \"-thumb\"), motionClassName)\n    };\n    if (process.env.NODE_ENV === 'test') {\n      motionProps['data-test-style'] = JSON.stringify(mergedStyle);\n    }\n    return /*#__PURE__*/React.createElement(\"div\", motionProps);\n  });\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar _excluded = [\"prefixCls\", \"direction\", \"vertical\", \"options\", \"disabled\", \"defaultValue\", \"value\", \"name\", \"onChange\", \"className\", \"motionName\"];\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport omit from \"rc-util/es/omit\";\nimport { composeRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\nimport MotionThumb from \"./MotionThumb\";\nfunction getValidTitle(option) {\n  if (typeof option.title !== 'undefined') {\n    return option.title;\n  }\n\n  // read `label` when title is `undefined`\n  if (_typeof(option.label) !== 'object') {\n    var _option$label;\n    return (_option$label = option.label) === null || _option$label === void 0 ? void 0 : _option$label.toString();\n  }\n}\nfunction normalizeOptions(options) {\n  return options.map(function (option) {\n    if (_typeof(option) === 'object' && option !== null) {\n      var validTitle = getValidTitle(option);\n      return _objectSpread(_objectSpread({}, option), {}, {\n        title: validTitle\n      });\n    }\n    return {\n      label: option === null || option === void 0 ? void 0 : option.toString(),\n      title: option === null || option === void 0 ? void 0 : option.toString(),\n      value: option\n    };\n  });\n}\nvar InternalSegmentedOption = function InternalSegmentedOption(_ref) {\n  var prefixCls = _ref.prefixCls,\n    className = _ref.className,\n    disabled = _ref.disabled,\n    checked = _ref.checked,\n    label = _ref.label,\n    title = _ref.title,\n    value = _ref.value,\n    name = _ref.name,\n    onChange = _ref.onChange,\n    onFocus = _ref.onFocus,\n    onBlur = _ref.onBlur,\n    onKeyDown = _ref.onKeyDown,\n    onKeyUp = _ref.onKeyUp,\n    onMouseDown = _ref.onMouseDown;\n  var handleChange = function handleChange(event) {\n    if (disabled) {\n      return;\n    }\n    onChange(event, value);\n  };\n  return /*#__PURE__*/React.createElement(\"label\", {\n    className: classNames(className, _defineProperty({}, \"\".concat(prefixCls, \"-item-disabled\"), disabled)),\n    onMouseDown: onMouseDown\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: name,\n    className: \"\".concat(prefixCls, \"-item-input\"),\n    type: \"radio\",\n    disabled: disabled,\n    checked: checked,\n    onChange: handleChange,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onKeyDown: onKeyDown,\n    onKeyUp: onKeyUp\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-item-label\"),\n    title: title,\n    \"aria-selected\": checked\n  }, label));\n};\nvar Segmented = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _segmentedOptions$, _classNames2;\n  var _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-segmented' : _props$prefixCls,\n    direction = props.direction,\n    vertical = props.vertical,\n    _props$options = props.options,\n    options = _props$options === void 0 ? [] : _props$options,\n    disabled = props.disabled,\n    defaultValue = props.defaultValue,\n    value = props.value,\n    name = props.name,\n    onChange = props.onChange,\n    _props$className = props.className,\n    className = _props$className === void 0 ? '' : _props$className,\n    _props$motionName = props.motionName,\n    motionName = _props$motionName === void 0 ? 'thumb-motion' : _props$motionName,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var containerRef = React.useRef(null);\n  var mergedRef = React.useMemo(function () {\n    return composeRef(containerRef, ref);\n  }, [containerRef, ref]);\n  var segmentedOptions = React.useMemo(function () {\n    return normalizeOptions(options);\n  }, [options]);\n\n  // Note: We should not auto switch value when value not exist in options\n  // which may break single source of truth.\n  var _useMergedState = useMergedState((_segmentedOptions$ = segmentedOptions[0]) === null || _segmentedOptions$ === void 0 ? void 0 : _segmentedOptions$.value, {\n      value: value,\n      defaultValue: defaultValue\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    rawValue = _useMergedState2[0],\n    setRawValue = _useMergedState2[1];\n\n  // ======================= Change ========================\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    thumbShow = _React$useState2[0],\n    setThumbShow = _React$useState2[1];\n  var handleChange = function handleChange(event, val) {\n    setRawValue(val);\n    onChange === null || onChange === void 0 || onChange(val);\n  };\n  var divProps = omit(restProps, ['children']);\n\n  // ======================= Focus ========================\n  var _React$useState3 = React.useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    isKeyboard = _React$useState4[0],\n    setIsKeyboard = _React$useState4[1];\n  var _React$useState5 = React.useState(false),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    isFocused = _React$useState6[0],\n    setIsFocused = _React$useState6[1];\n  var handleFocus = function handleFocus() {\n    setIsFocused(true);\n  };\n  var handleBlur = function handleBlur() {\n    setIsFocused(false);\n  };\n  var handleMouseDown = function handleMouseDown() {\n    setIsKeyboard(false);\n  };\n\n  // capture keyboard tab interaction for correct focus style\n  var handleKeyUp = function handleKeyUp(event) {\n    if (event.key === 'Tab') {\n      setIsKeyboard(true);\n    }\n  };\n\n  // ======================= Keyboard ========================\n  var onOffset = function onOffset(offset) {\n    var currentIndex = segmentedOptions.findIndex(function (option) {\n      return option.value === rawValue;\n    });\n    var total = segmentedOptions.length;\n    var nextIndex = (currentIndex + offset + total) % total;\n    var nextOption = segmentedOptions[nextIndex];\n    if (nextOption) {\n      setRawValue(nextOption.value);\n      onChange === null || onChange === void 0 || onChange(nextOption.value);\n    }\n  };\n  var handleKeyDown = function handleKeyDown(event) {\n    switch (event.key) {\n      case 'ArrowLeft':\n      case 'ArrowUp':\n        onOffset(-1);\n        break;\n      case 'ArrowRight':\n      case 'ArrowDown':\n        onOffset(1);\n        break;\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    role: \"radiogroup\",\n    \"aria-label\": \"segmented control\",\n    tabIndex: disabled ? undefined : 0\n  }, divProps, {\n    className: classNames(prefixCls, (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-vertical\"), vertical), _classNames2), className),\n    ref: mergedRef\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-group\")\n  }, /*#__PURE__*/React.createElement(MotionThumb, {\n    vertical: vertical,\n    prefixCls: prefixCls,\n    value: rawValue,\n    containerRef: containerRef,\n    motionName: \"\".concat(prefixCls, \"-\").concat(motionName),\n    direction: direction,\n    getValueIndex: function getValueIndex(val) {\n      return segmentedOptions.findIndex(function (n) {\n        return n.value === val;\n      });\n    },\n    onMotionStart: function onMotionStart() {\n      setThumbShow(true);\n    },\n    onMotionEnd: function onMotionEnd() {\n      setThumbShow(false);\n    }\n  }), segmentedOptions.map(function (segmentedOption) {\n    var _classNames3;\n    return /*#__PURE__*/React.createElement(InternalSegmentedOption, _extends({}, segmentedOption, {\n      name: name,\n      key: segmentedOption.value,\n      prefixCls: prefixCls,\n      className: classNames(segmentedOption.className, \"\".concat(prefixCls, \"-item\"), (_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(prefixCls, \"-item-selected\"), segmentedOption.value === rawValue && !thumbShow), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-item-focused\"), isFocused && isKeyboard && segmentedOption.value === rawValue), _classNames3)),\n      checked: segmentedOption.value === rawValue,\n      onChange: handleChange,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      onKeyDown: handleKeyDown,\n      onKeyUp: handleKeyUp,\n      onMouseDown: handleMouseDown,\n      disabled: !!disabled || !!segmentedOption.disabled\n    }));\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Segmented.displayName = 'Segmented';\n}\nvar TypedSegmented = Segmented;\nexport default TypedSegmented;","import { unit } from '@ant-design/cssinjs';\nimport { genFocusOutline, genFocusStyle, resetComponent, textEllipsis } from '../../style';\nimport { genStyleHooks, mergeToken } from '../../theme/internal';\n// ============================== Mixins ==============================\nfunction getItemDisabledStyle(cls, token) {\n  return {\n    [`${cls}, ${cls}:hover, ${cls}:focus`]: {\n      color: token.colorTextDisabled,\n      cursor: 'not-allowed'\n    }\n  };\n}\nfunction getItemSelectedStyle(token) {\n  return {\n    backgroundColor: token.itemSelectedBg,\n    boxShadow: token.boxShadowTertiary\n  };\n}\nconst segmentedTextEllipsisCss = Object.assign({\n  overflow: 'hidden'\n}, textEllipsis);\n// ============================== Styles ==============================\nconst genSegmentedStyle = token => {\n  const {\n    componentCls\n  } = token;\n  const labelHeight = token.calc(token.controlHeight).sub(token.calc(token.trackPadding).mul(2)).equal();\n  const labelHeightLG = token.calc(token.controlHeightLG).sub(token.calc(token.trackPadding).mul(2)).equal();\n  const labelHeightSM = token.calc(token.controlHeightSM).sub(token.calc(token.trackPadding).mul(2)).equal();\n  return {\n    [componentCls]: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, resetComponent(token)), {\n      display: 'inline-block',\n      padding: token.trackPadding,\n      color: token.itemColor,\n      background: token.trackBg,\n      borderRadius: token.borderRadius,\n      transition: `all ${token.motionDurationMid} ${token.motionEaseInOut}`\n    }), genFocusStyle(token)), {\n      [`${componentCls}-group`]: {\n        position: 'relative',\n        display: 'flex',\n        alignItems: 'stretch',\n        justifyItems: 'flex-start',\n        flexDirection: 'row',\n        width: '100%'\n      },\n      // RTL styles\n      [`&${componentCls}-rtl`]: {\n        direction: 'rtl'\n      },\n      [`&${componentCls}-vertical`]: {\n        [`${componentCls}-group`]: {\n          flexDirection: 'column'\n        },\n        [`${componentCls}-thumb`]: {\n          width: '100%',\n          height: 0,\n          padding: `0 ${unit(token.paddingXXS)}`\n        }\n      },\n      // block styles\n      [`&${componentCls}-block`]: {\n        display: 'flex'\n      },\n      [`&${componentCls}-block ${componentCls}-item`]: {\n        flex: 1,\n        minWidth: 0\n      },\n      // item styles\n      [`${componentCls}-item`]: {\n        position: 'relative',\n        textAlign: 'center',\n        cursor: 'pointer',\n        transition: `color ${token.motionDurationMid} ${token.motionEaseInOut}`,\n        borderRadius: token.borderRadiusSM,\n        // Fix Safari render bug\n        // https://github.com/ant-design/ant-design/issues/45250\n        transform: 'translateZ(0)',\n        '&-selected': Object.assign(Object.assign({}, getItemSelectedStyle(token)), {\n          color: token.itemSelectedColor\n        }),\n        '&-focused': Object.assign({}, genFocusOutline(token)),\n        '&::after': {\n          content: '\"\"',\n          position: 'absolute',\n          zIndex: -1,\n          width: '100%',\n          height: '100%',\n          top: 0,\n          insetInlineStart: 0,\n          borderRadius: 'inherit',\n          opacity: 0,\n          transition: `opacity ${token.motionDurationMid}`,\n          // This is mandatory to make it not clickable or hoverable\n          // Ref: https://github.com/ant-design/ant-design/issues/40888\n          pointerEvents: 'none'\n        },\n        [`&:hover:not(${componentCls}-item-selected):not(${componentCls}-item-disabled)`]: {\n          color: token.itemHoverColor,\n          '&::after': {\n            opacity: 1,\n            backgroundColor: token.itemHoverBg\n          }\n        },\n        [`&:active:not(${componentCls}-item-selected):not(${componentCls}-item-disabled)`]: {\n          color: token.itemHoverColor,\n          '&::after': {\n            opacity: 1,\n            backgroundColor: token.itemActiveBg\n          }\n        },\n        '&-label': Object.assign({\n          minHeight: labelHeight,\n          lineHeight: unit(labelHeight),\n          padding: `0 ${unit(token.segmentedPaddingHorizontal)}`\n        }, segmentedTextEllipsisCss),\n        // syntactic sugar to add `icon` for Segmented Item\n        '&-icon + *': {\n          marginInlineStart: token.calc(token.marginSM).div(2).equal()\n        },\n        '&-input': {\n          position: 'absolute',\n          insetBlockStart: 0,\n          insetInlineStart: 0,\n          width: 0,\n          height: 0,\n          opacity: 0,\n          pointerEvents: 'none'\n        }\n      },\n      // thumb styles\n      [`${componentCls}-thumb`]: Object.assign(Object.assign({}, getItemSelectedStyle(token)), {\n        position: 'absolute',\n        insetBlockStart: 0,\n        insetInlineStart: 0,\n        width: 0,\n        height: '100%',\n        padding: `${unit(token.paddingXXS)} 0`,\n        borderRadius: token.borderRadiusSM,\n        transition: `transform ${token.motionDurationSlow} ${token.motionEaseInOut}, height ${token.motionDurationSlow} ${token.motionEaseInOut}`,\n        [`& ~ ${componentCls}-item:not(${componentCls}-item-selected):not(${componentCls}-item-disabled)::after`]: {\n          backgroundColor: 'transparent'\n        }\n      }),\n      // size styles\n      [`&${componentCls}-lg`]: {\n        borderRadius: token.borderRadiusLG,\n        [`${componentCls}-item-label`]: {\n          minHeight: labelHeightLG,\n          lineHeight: unit(labelHeightLG),\n          padding: `0 ${unit(token.segmentedPaddingHorizontal)}`,\n          fontSize: token.fontSizeLG\n        },\n        [`${componentCls}-item, ${componentCls}-thumb`]: {\n          borderRadius: token.borderRadius\n        }\n      },\n      [`&${componentCls}-sm`]: {\n        borderRadius: token.borderRadiusSM,\n        [`${componentCls}-item-label`]: {\n          minHeight: labelHeightSM,\n          lineHeight: unit(labelHeightSM),\n          padding: `0 ${unit(token.segmentedPaddingHorizontalSM)}`\n        },\n        [`${componentCls}-item, ${componentCls}-thumb`]: {\n          borderRadius: token.borderRadiusXS\n        }\n      }\n    }), getItemDisabledStyle(`&-disabled ${componentCls}-item`, token)), getItemDisabledStyle(`${componentCls}-item-disabled`, token)), {\n      // transition effect when `appear-active`\n      [`${componentCls}-thumb-motion-appear-active`]: {\n        transition: `transform ${token.motionDurationSlow} ${token.motionEaseInOut}, width ${token.motionDurationSlow} ${token.motionEaseInOut}`,\n        willChange: 'transform, width'\n      },\n      [`&${componentCls}-shape-round`]: {\n        borderRadius: 9999,\n        [`${componentCls}-item, ${componentCls}-thumb`]: {\n          borderRadius: 9999\n        }\n      }\n    })\n  };\n};\n// ============================== Export ==============================\nexport const prepareComponentToken = token => {\n  const {\n    colorTextLabel,\n    colorText,\n    colorFillSecondary,\n    colorBgElevated,\n    colorFill,\n    lineWidthBold,\n    colorBgLayout\n  } = token;\n  return {\n    trackPadding: lineWidthBold,\n    trackBg: colorBgLayout,\n    itemColor: colorTextLabel,\n    itemHoverColor: colorText,\n    itemHoverBg: colorFillSecondary,\n    itemSelectedBg: colorBgElevated,\n    itemActiveBg: colorFill,\n    itemSelectedColor: colorText\n  };\n};\nexport default genStyleHooks('Segmented', token => {\n  const {\n    lineWidth,\n    calc\n  } = token;\n  const segmentedToken = mergeToken(token, {\n    segmentedPaddingHorizontal: calc(token.controlPaddingHorizontal).sub(lineWidth).equal(),\n    segmentedPaddingHorizontalSM: calc(token.controlPaddingHorizontalSM).sub(lineWidth).equal()\n  });\n  return [genSegmentedStyle(segmentedToken)];\n}, prepareComponentToken);","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport RcSegmented from 'rc-segmented';\nimport useId from \"rc-util/es/hooks/useId\";\nimport { useComponentConfig } from '../config-provider/context';\nimport useSize from '../config-provider/hooks/useSize';\nimport useStyle from './style';\nfunction isSegmentedLabeledOptionWithIcon(option) {\n  return typeof option === 'object' && !!(option === null || option === void 0 ? void 0 : option.icon);\n}\nconst InternalSegmented = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const defaultName = useId();\n  const {\n      prefixCls: customizePrefixCls,\n      className,\n      rootClassName,\n      block,\n      options = [],\n      size: customSize = 'middle',\n      style,\n      vertical,\n      shape = 'default',\n      name = defaultName\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"className\", \"rootClassName\", \"block\", \"options\", \"size\", \"style\", \"vertical\", \"shape\", \"name\"]);\n  const {\n    getPrefixCls,\n    direction,\n    className: contextClassName,\n    style: contextStyle\n  } = useComponentConfig('segmented');\n  const prefixCls = getPrefixCls('segmented', customizePrefixCls);\n  // Style\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls);\n  // ===================== Size =====================\n  const mergedSize = useSize(customSize);\n  // syntactic sugar to support `icon` for Segmented Item\n  const extendedOptions = React.useMemo(() => options.map(option => {\n    if (isSegmentedLabeledOptionWithIcon(option)) {\n      const {\n          icon,\n          label\n        } = option,\n        restOption = __rest(option, [\"icon\", \"label\"]);\n      return Object.assign(Object.assign({}, restOption), {\n        label: (/*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n          className: `${prefixCls}-item-icon`\n        }, icon), label && /*#__PURE__*/React.createElement(\"span\", null, label)))\n      });\n    }\n    return option;\n  }), [options, prefixCls]);\n  const cls = classNames(className, rootClassName, contextClassName, {\n    [`${prefixCls}-block`]: block,\n    [`${prefixCls}-sm`]: mergedSize === 'small',\n    [`${prefixCls}-lg`]: mergedSize === 'large',\n    [`${prefixCls}-vertical`]: vertical,\n    [`${prefixCls}-shape-${shape}`]: shape === 'round'\n  }, hashId, cssVarCls);\n  const mergedStyle = Object.assign(Object.assign({}, contextStyle), style);\n  return wrapCSSVar(/*#__PURE__*/React.createElement(RcSegmented, Object.assign({}, restProps, {\n    name: name,\n    className: cls,\n    style: mergedStyle,\n    options: extendedOptions,\n    ref: ref,\n    prefixCls: prefixCls,\n    direction: direction,\n    vertical: vertical\n  })));\n});\nconst Segmented = InternalSegmented;\nif (process.env.NODE_ENV !== 'production') {\n  Segmented.displayName = 'Segmented';\n}\nexport default Segmented;","import React from 'react';\nexport const PanelPickerContext = /*#__PURE__*/React.createContext({});\nexport const PanelPresetsContext = /*#__PURE__*/React.createContext({});","\"use client\";\n\nimport React from 'react';\nimport { generateColor } from '../util';\nconst ColorClear = ({\n  prefixCls,\n  value,\n  onChange\n}) => {\n  const handleClick = () => {\n    if (onChange && value && !value.cleared) {\n      const hsba = value.toHsb();\n      hsba.a = 0;\n      const genColor = generateColor(hsba);\n      genColor.cleared = true;\n      onChange(genColor);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-clear`,\n    onClick: handleClick\n  });\n};\nexport default ColorClear;","export const FORMAT_HEX = 'hex';\nexport const FORMAT_RGB = 'rgb';\nexport const FORMAT_HSB = 'hsb';","\"use client\";\n\nimport React, { useState } from 'react';\nimport classNames from 'classnames';\nimport InputNumber from '../../input-number';\nconst ColorSteppers = ({\n  prefixCls,\n  min = 0,\n  max = 100,\n  value,\n  onChange,\n  className,\n  formatter\n}) => {\n  const colorSteppersPrefixCls = `${prefixCls}-steppers`;\n  const [internalValue, setInternalValue] = useState(0);\n  const stepValue = !Number.isNaN(value) ? value : internalValue;\n  return /*#__PURE__*/React.createElement(InputNumber, {\n    className: classNames(colorSteppersPrefixCls, className),\n    min: min,\n    max: max,\n    value: stepValue,\n    formatter: formatter,\n    size: \"small\",\n    onChange: step => {\n      setInternalValue(step || 0);\n      onChange === null || onChange === void 0 ? void 0 : onChange(step);\n    }\n  });\n};\nexport default ColorSteppers;","\"use client\";\n\nimport React, { useState } from 'react';\nimport { generateColor, getColorAlpha } from '../util';\nimport ColorSteppers from './ColorSteppers';\nconst ColorAlphaInput = ({\n  prefixCls,\n  value,\n  onChange\n}) => {\n  const colorAlphaInputPrefixCls = `${prefixCls}-alpha-input`;\n  const [internalValue, setInternalValue] = useState(() => generateColor(value || '#000'));\n  const alphaValue = value || internalValue;\n  const handleAlphaChange = step => {\n    const hsba = alphaValue.toHsb();\n    hsba.a = (step || 0) / 100;\n    const genColor = generateColor(hsba);\n    setInternalValue(genColor);\n    onChange === null || onChange === void 0 ? void 0 : onChange(genColor);\n  };\n  return /*#__PURE__*/React.createElement(ColorSteppers, {\n    value: getColorAlpha(alphaValue),\n    prefixCls: prefixCls,\n    formatter: step => `${step}%`,\n    className: colorAlphaInputPrefixCls,\n    onChange: handleAlphaChange\n  });\n};\nexport default ColorAlphaInput;","\"use client\";\n\nimport React, { useEffect, useState } from 'react';\nimport Input from '../../input/Input';\nimport { toHexFormat } from '../color';\nimport { generateColor } from '../util';\nconst hexReg = /(^#[\\da-f]{6}$)|(^#[\\da-f]{8}$)/i;\nconst isHexString = hex => hexReg.test(`#${hex}`);\nconst ColorHexInput = ({\n  prefixCls,\n  value,\n  onChange\n}) => {\n  const colorHexInputPrefixCls = `${prefixCls}-hex-input`;\n  const [hexValue, setHexValue] = useState(() => value ? toHexFormat(value.toHexString()) : undefined);\n  // Update step value\n  useEffect(() => {\n    if (value) {\n      setHexValue(toHexFormat(value.toHexString()));\n    }\n  }, [value]);\n  const handleHexChange = e => {\n    const originValue = e.target.value;\n    setHexValue(toHexFormat(originValue));\n    if (isHexString(toHexFormat(originValue, true))) {\n      onChange === null || onChange === void 0 ? void 0 : onChange(generateColor(originValue));\n    }\n  };\n  return /*#__PURE__*/React.createElement(Input, {\n    className: colorHexInputPrefixCls,\n    value: hexValue,\n    prefix: \"#\",\n    onChange: handleHexChange,\n    size: \"small\"\n  });\n};\nexport default ColorHexInput;","\"use client\";\n\nimport React, { useState } from 'react';\nimport { generateColor, getRoundNumber } from '../util';\nimport ColorSteppers from './ColorSteppers';\nconst ColorHsbInput = ({\n  prefixCls,\n  value,\n  onChange\n}) => {\n  const colorHsbInputPrefixCls = `${prefixCls}-hsb-input`;\n  const [internalValue, setInternalValue] = useState(() => generateColor(value || '#000'));\n  const hsbValue = value || internalValue;\n  const handleHsbChange = (step, type) => {\n    const hsb = hsbValue.toHsb();\n    hsb[type] = type === 'h' ? step : (step || 0) / 100;\n    const genColor = generateColor(hsb);\n    setInternalValue(genColor);\n    onChange === null || onChange === void 0 ? void 0 : onChange(genColor);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: colorHsbInputPrefixCls\n  }, /*#__PURE__*/React.createElement(ColorSteppers, {\n    max: 360,\n    min: 0,\n    value: Number(hsbValue.toHsb().h),\n    prefixCls: prefixCls,\n    className: colorHsbInputPrefixCls,\n    formatter: step => getRoundNumber(step || 0).toString(),\n    onChange: step => handleHsbChange(Number(step), 'h')\n  }), /*#__PURE__*/React.createElement(ColorSteppers, {\n    max: 100,\n    min: 0,\n    value: Number(hsbValue.toHsb().s) * 100,\n    prefixCls: prefixCls,\n    className: colorHsbInputPrefixCls,\n    formatter: step => `${getRoundNumber(step || 0)}%`,\n    onChange: step => handleHsbChange(Number(step), 's')\n  }), /*#__PURE__*/React.createElement(ColorSteppers, {\n    max: 100,\n    min: 0,\n    value: Number(hsbValue.toHsb().b) * 100,\n    prefixCls: prefixCls,\n    className: colorHsbInputPrefixCls,\n    formatter: step => `${getRoundNumber(step || 0)}%`,\n    onChange: step => handleHsbChange(Number(step), 'b')\n  }));\n};\nexport default ColorHsbInput;","\"use client\";\n\nimport React, { useState } from 'react';\nimport { generateColor } from '../util';\nimport ColorSteppers from './ColorSteppers';\nconst ColorRgbInput = ({\n  prefixCls,\n  value,\n  onChange\n}) => {\n  const colorRgbInputPrefixCls = `${prefixCls}-rgb-input`;\n  const [internalValue, setInternalValue] = useState(() => generateColor(value || '#000'));\n  const rgbValue = value || internalValue;\n  const handleRgbChange = (step, type) => {\n    const rgb = rgbValue.toRgb();\n    rgb[type] = step || 0;\n    const genColor = generateColor(rgb);\n    setInternalValue(genColor);\n    onChange === null || onChange === void 0 ? void 0 : onChange(genColor);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: colorRgbInputPrefixCls\n  }, /*#__PURE__*/React.createElement(ColorSteppers, {\n    max: 255,\n    min: 0,\n    value: Number(rgbValue.toRgb().r),\n    prefixCls: prefixCls,\n    className: colorRgbInputPrefixCls,\n    onChange: step => handleRgbChange(Number(step), 'r')\n  }), /*#__PURE__*/React.createElement(ColorSteppers, {\n    max: 255,\n    min: 0,\n    value: Number(rgbValue.toRgb().g),\n    prefixCls: prefixCls,\n    className: colorRgbInputPrefixCls,\n    onChange: step => handleRgbChange(Number(step), 'g')\n  }), /*#__PURE__*/React.createElement(ColorSteppers, {\n    max: 255,\n    min: 0,\n    value: Number(rgbValue.toRgb().b),\n    prefixCls: prefixCls,\n    className: colorRgbInputPrefixCls,\n    onChange: step => handleRgbChange(Number(step), 'b')\n  }));\n};\nexport default ColorRgbInput;","\"use client\";\n\nimport React, { useMemo } from 'react';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport Select from '../../select';\nimport { FORMAT_HEX, FORMAT_HSB, FORMAT_RGB } from '../interface';\nimport ColorAlphaInput from './ColorAlphaInput';\nimport ColorHexInput from './ColorHexInput';\nimport ColorHsbInput from './ColorHsbInput';\nimport ColorRgbInput from './ColorRgbInput';\nconst selectOptions = [FORMAT_HEX, FORMAT_HSB, FORMAT_RGB].map(format => ({\n  value: format,\n  label: format.toUpperCase()\n}));\nconst ColorInput = props => {\n  const {\n    prefixCls,\n    format,\n    value,\n    disabledAlpha,\n    onFormatChange,\n    onChange,\n    disabledFormat\n  } = props;\n  const [colorFormat, setColorFormat] = useMergedState(FORMAT_HEX, {\n    value: format,\n    onChange: onFormatChange\n  });\n  const colorInputPrefixCls = `${prefixCls}-input`;\n  const handleFormatChange = newFormat => {\n    setColorFormat(newFormat);\n  };\n  const steppersNode = useMemo(() => {\n    const inputProps = {\n      value,\n      prefixCls,\n      onChange\n    };\n    switch (colorFormat) {\n      case FORMAT_HSB:\n        return /*#__PURE__*/React.createElement(ColorHsbInput, Object.assign({}, inputProps));\n      case FORMAT_RGB:\n        return /*#__PURE__*/React.createElement(ColorRgbInput, Object.assign({}, inputProps));\n      // case FORMAT_HEX:\n      default:\n        return /*#__PURE__*/React.createElement(ColorHexInput, Object.assign({}, inputProps));\n    }\n  }, [colorFormat, prefixCls, value, onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `${colorInputPrefixCls}-container`\n  }, !disabledFormat && (/*#__PURE__*/React.createElement(Select, {\n    value: colorFormat,\n    variant: \"borderless\",\n    getPopupContainer: current => current,\n    popupMatchSelectWidth: 68,\n    placement: \"bottomRight\",\n    onChange: handleFormatChange,\n    className: `${prefixCls}-format-select`,\n    size: \"small\",\n    options: selectOptions\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: colorInputPrefixCls\n  }, steppersNode), !disabledAlpha && (/*#__PURE__*/React.createElement(ColorAlphaInput, {\n    prefixCls: prefixCls,\n    value: value,\n    onChange: onChange\n  })));\n};\nexport default ColorInput;","export function getOffset(value, min, max) {\n  return (value - min) / (max - min);\n}\nexport function getDirectionStyle(direction, value, min, max) {\n  var offset = getOffset(value, min, max);\n  var positionStyle = {};\n  switch (direction) {\n    case 'rtl':\n      positionStyle.right = \"\".concat(offset * 100, \"%\");\n      positionStyle.transform = 'translateX(50%)';\n      break;\n    case 'btt':\n      positionStyle.bottom = \"\".concat(offset * 100, \"%\");\n      positionStyle.transform = 'translateY(50%)';\n      break;\n    case 'ttb':\n      positionStyle.top = \"\".concat(offset * 100, \"%\");\n      positionStyle.transform = 'translateY(-50%)';\n      break;\n    default:\n      positionStyle.left = \"\".concat(offset * 100, \"%\");\n      positionStyle.transform = 'translateX(-50%)';\n      break;\n  }\n  return positionStyle;\n}\n\n/** Return index value if is list or return value directly */\nexport function getIndex(value, index) {\n  return Array.isArray(value) ? value[index] : value;\n}","import * as React from 'react';\nvar SliderContext = /*#__PURE__*/React.createContext({\n  min: 0,\n  max: 0,\n  direction: 'ltr',\n  step: 1,\n  includedStart: 0,\n  includedEnd: 0,\n  tabIndex: 0,\n  keyboard: true,\n  styles: {},\n  classNames: {}\n});\nexport default SliderContext;\n/** @private NOT PROMISE AVAILABLE. DO NOT USE IN PRODUCTION. */\nexport var UnstableContext = /*#__PURE__*/React.createContext({});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"value\", \"valueIndex\", \"onStartMove\", \"onDelete\", \"style\", \"render\", \"dragging\", \"draggingDelete\", \"onOffsetChange\", \"onChangeComplete\", \"onFocus\", \"onMouseEnter\"];\nimport cls from 'classnames';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getDirectionStyle, getIndex } from \"../util\";\nvar Handle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    value = props.value,\n    valueIndex = props.valueIndex,\n    onStartMove = props.onStartMove,\n    onDelete = props.onDelete,\n    style = props.style,\n    render = props.render,\n    dragging = props.dragging,\n    draggingDelete = props.draggingDelete,\n    onOffsetChange = props.onOffsetChange,\n    onChangeComplete = props.onChangeComplete,\n    onFocus = props.onFocus,\n    onMouseEnter = props.onMouseEnter,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var _React$useContext = React.useContext(SliderContext),\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    direction = _React$useContext.direction,\n    disabled = _React$useContext.disabled,\n    keyboard = _React$useContext.keyboard,\n    range = _React$useContext.range,\n    tabIndex = _React$useContext.tabIndex,\n    ariaLabelForHandle = _React$useContext.ariaLabelForHandle,\n    ariaLabelledByForHandle = _React$useContext.ariaLabelledByForHandle,\n    ariaRequired = _React$useContext.ariaRequired,\n    ariaValueTextFormatterForHandle = _React$useContext.ariaValueTextFormatterForHandle,\n    styles = _React$useContext.styles,\n    classNames = _React$useContext.classNames;\n  var handlePrefixCls = \"\".concat(prefixCls, \"-handle\");\n\n  // ============================ Events ============================\n  var onInternalStartMove = function onInternalStartMove(e) {\n    if (!disabled) {\n      onStartMove(e, valueIndex);\n    }\n  };\n  var onInternalFocus = function onInternalFocus(e) {\n    onFocus === null || onFocus === void 0 || onFocus(e, valueIndex);\n  };\n  var onInternalMouseEnter = function onInternalMouseEnter(e) {\n    onMouseEnter(e, valueIndex);\n  };\n\n  // =========================== Keyboard ===========================\n  var onKeyDown = function onKeyDown(e) {\n    if (!disabled && keyboard) {\n      var offset = null;\n\n      // Change the value\n      switch (e.which || e.keyCode) {\n        case KeyCode.LEFT:\n          offset = direction === 'ltr' || direction === 'btt' ? -1 : 1;\n          break;\n        case KeyCode.RIGHT:\n          offset = direction === 'ltr' || direction === 'btt' ? 1 : -1;\n          break;\n\n        // Up is plus\n        case KeyCode.UP:\n          offset = direction !== 'ttb' ? 1 : -1;\n          break;\n\n        // Down is minus\n        case KeyCode.DOWN:\n          offset = direction !== 'ttb' ? -1 : 1;\n          break;\n        case KeyCode.HOME:\n          offset = 'min';\n          break;\n        case KeyCode.END:\n          offset = 'max';\n          break;\n        case KeyCode.PAGE_UP:\n          offset = 2;\n          break;\n        case KeyCode.PAGE_DOWN:\n          offset = -2;\n          break;\n        case KeyCode.BACKSPACE:\n        case KeyCode.DELETE:\n          onDelete(valueIndex);\n          break;\n      }\n      if (offset !== null) {\n        e.preventDefault();\n        onOffsetChange(offset, valueIndex);\n      }\n    }\n  };\n  var handleKeyUp = function handleKeyUp(e) {\n    switch (e.which || e.keyCode) {\n      case KeyCode.LEFT:\n      case KeyCode.RIGHT:\n      case KeyCode.UP:\n      case KeyCode.DOWN:\n      case KeyCode.HOME:\n      case KeyCode.END:\n      case KeyCode.PAGE_UP:\n      case KeyCode.PAGE_DOWN:\n        onChangeComplete === null || onChangeComplete === void 0 || onChangeComplete();\n        break;\n    }\n  };\n\n  // ============================ Offset ============================\n  var positionStyle = getDirectionStyle(direction, value, min, max);\n\n  // ============================ Render ============================\n  var divProps = {};\n  if (valueIndex !== null) {\n    var _getIndex;\n    divProps = {\n      tabIndex: disabled ? null : getIndex(tabIndex, valueIndex),\n      role: 'slider',\n      'aria-valuemin': min,\n      'aria-valuemax': max,\n      'aria-valuenow': value,\n      'aria-disabled': disabled,\n      'aria-label': getIndex(ariaLabelForHandle, valueIndex),\n      'aria-labelledby': getIndex(ariaLabelledByForHandle, valueIndex),\n      'aria-required': getIndex(ariaRequired, valueIndex),\n      'aria-valuetext': (_getIndex = getIndex(ariaValueTextFormatterForHandle, valueIndex)) === null || _getIndex === void 0 ? void 0 : _getIndex(value),\n      'aria-orientation': direction === 'ltr' || direction === 'rtl' ? 'horizontal' : 'vertical',\n      onMouseDown: onInternalStartMove,\n      onTouchStart: onInternalStartMove,\n      onFocus: onInternalFocus,\n      onMouseEnter: onInternalMouseEnter,\n      onKeyDown: onKeyDown,\n      onKeyUp: handleKeyUp\n    };\n  }\n  var handleNode = /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref,\n    className: cls(handlePrefixCls, _defineProperty(_defineProperty(_defineProperty({}, \"\".concat(handlePrefixCls, \"-\").concat(valueIndex + 1), valueIndex !== null && range), \"\".concat(handlePrefixCls, \"-dragging\"), dragging), \"\".concat(handlePrefixCls, \"-dragging-delete\"), draggingDelete), classNames.handle),\n    style: _objectSpread(_objectSpread(_objectSpread({}, positionStyle), style), styles.handle)\n  }, divProps, restProps));\n\n  // Customize\n  if (render) {\n    handleNode = render(handleNode, {\n      index: valueIndex,\n      prefixCls: prefixCls,\n      value: value,\n      dragging: dragging,\n      draggingDelete: draggingDelete\n    });\n  }\n  return handleNode;\n});\nif (process.env.NODE_ENV !== 'production') {\n  Handle.displayName = 'Handle';\n}\nexport default Handle;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"style\", \"onStartMove\", \"onOffsetChange\", \"values\", \"handleRender\", \"activeHandleRender\", \"draggingIndex\", \"draggingDelete\", \"onFocus\"];\nimport * as React from 'react';\nimport { flushSync } from 'react-dom';\nimport { getIndex } from \"../util\";\nimport Handle from \"./Handle\";\nvar Handles = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    onStartMove = props.onStartMove,\n    onOffsetChange = props.onOffsetChange,\n    values = props.values,\n    handleRender = props.handleRender,\n    activeHandleRender = props.activeHandleRender,\n    draggingIndex = props.draggingIndex,\n    draggingDelete = props.draggingDelete,\n    onFocus = props.onFocus,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var handlesRef = React.useRef({});\n\n  // =========================== Active ===========================\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    activeVisible = _React$useState2[0],\n    setActiveVisible = _React$useState2[1];\n  var _React$useState3 = React.useState(-1),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    activeIndex = _React$useState4[0],\n    setActiveIndex = _React$useState4[1];\n  var onActive = function onActive(index) {\n    setActiveIndex(index);\n    setActiveVisible(true);\n  };\n  var onHandleFocus = function onHandleFocus(e, index) {\n    onActive(index);\n    onFocus === null || onFocus === void 0 || onFocus(e);\n  };\n  var onHandleMouseEnter = function onHandleMouseEnter(e, index) {\n    onActive(index);\n  };\n\n  // =========================== Render ===========================\n  React.useImperativeHandle(ref, function () {\n    return {\n      focus: function focus(index) {\n        var _handlesRef$current$i;\n        (_handlesRef$current$i = handlesRef.current[index]) === null || _handlesRef$current$i === void 0 || _handlesRef$current$i.focus();\n      },\n      hideHelp: function hideHelp() {\n        flushSync(function () {\n          setActiveVisible(false);\n        });\n      }\n    };\n  });\n\n  // =========================== Render ===========================\n  // Handle Props\n  var handleProps = _objectSpread({\n    prefixCls: prefixCls,\n    onStartMove: onStartMove,\n    onOffsetChange: onOffsetChange,\n    render: handleRender,\n    onFocus: onHandleFocus,\n    onMouseEnter: onHandleMouseEnter\n  }, restProps);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, values.map(function (value, index) {\n    var dragging = draggingIndex === index;\n    return /*#__PURE__*/React.createElement(Handle, _extends({\n      ref: function ref(node) {\n        if (!node) {\n          delete handlesRef.current[index];\n        } else {\n          handlesRef.current[index] = node;\n        }\n      },\n      dragging: dragging,\n      draggingDelete: dragging && draggingDelete,\n      style: getIndex(style, index),\n      key: index,\n      value: value,\n      valueIndex: index\n    }, handleProps));\n  }), activeHandleRender && activeVisible && /*#__PURE__*/React.createElement(Handle, _extends({\n    key: \"a11y\"\n  }, handleProps, {\n    value: values[activeIndex],\n    valueIndex: null,\n    dragging: draggingIndex !== -1,\n    draggingDelete: draggingDelete,\n    render: activeHandleRender,\n    style: {\n      pointerEvents: 'none'\n    },\n    tabIndex: null,\n    \"aria-hidden\": true\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Handles.displayName = 'Handles';\n}\nexport default Handles;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getDirectionStyle } from \"../util\";\nvar Mark = function Mark(props) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    children = props.children,\n    value = props.value,\n    _onClick = props.onClick;\n  var _React$useContext = React.useContext(SliderContext),\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    direction = _React$useContext.direction,\n    includedStart = _React$useContext.includedStart,\n    includedEnd = _React$useContext.includedEnd,\n    included = _React$useContext.included;\n  var textCls = \"\".concat(prefixCls, \"-text\");\n\n  // ============================ Offset ============================\n  var positionStyle = getDirectionStyle(direction, value, min, max);\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: classNames(textCls, _defineProperty({}, \"\".concat(textCls, \"-active\"), included && includedStart <= value && value <= includedEnd)),\n    style: _objectSpread(_objectSpread({}, positionStyle), style),\n    onMouseDown: function onMouseDown(e) {\n      e.stopPropagation();\n    },\n    onClick: function onClick() {\n      _onClick(value);\n    }\n  }, children);\n};\nexport default Mark;","import * as React from 'react';\nimport Mark from \"./Mark\";\nvar Marks = function Marks(props) {\n  var prefixCls = props.prefixCls,\n    marks = props.marks,\n    onClick = props.onClick;\n  var markPrefixCls = \"\".concat(prefixCls, \"-mark\");\n\n  // Not render mark if empty\n  if (!marks.length) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: markPrefixCls\n  }, marks.map(function (_ref) {\n    var value = _ref.value,\n      style = _ref.style,\n      label = _ref.label;\n    return /*#__PURE__*/React.createElement(Mark, {\n      key: value,\n      prefixCls: markPrefixCls,\n      style: style,\n      value: value,\n      onClick: onClick\n    }, label);\n  }));\n};\nexport default Marks;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getDirectionStyle } from \"../util\";\nvar Dot = function Dot(props) {\n  var prefixCls = props.prefixCls,\n    value = props.value,\n    style = props.style,\n    activeStyle = props.activeStyle;\n  var _React$useContext = React.useContext(SliderContext),\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    direction = _React$useContext.direction,\n    included = _React$useContext.included,\n    includedStart = _React$useContext.includedStart,\n    includedEnd = _React$useContext.includedEnd;\n  var dotClassName = \"\".concat(prefixCls, \"-dot\");\n  var active = included && includedStart <= value && value <= includedEnd;\n\n  // ============================ Offset ============================\n  var mergedStyle = _objectSpread(_objectSpread({}, getDirectionStyle(direction, value, min, max)), typeof style === 'function' ? style(value) : style);\n  if (active) {\n    mergedStyle = _objectSpread(_objectSpread({}, mergedStyle), typeof activeStyle === 'function' ? activeStyle(value) : activeStyle);\n  }\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: classNames(dotClassName, _defineProperty({}, \"\".concat(dotClassName, \"-active\"), active)),\n    style: mergedStyle\n  });\n};\nexport default Dot;","import * as React from 'react';\nimport SliderContext from \"../context\";\nimport Dot from \"./Dot\";\nvar Steps = function Steps(props) {\n  var prefixCls = props.prefixCls,\n    marks = props.marks,\n    dots = props.dots,\n    style = props.style,\n    activeStyle = props.activeStyle;\n  var _React$useContext = React.useContext(SliderContext),\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    step = _React$useContext.step;\n  var stepDots = React.useMemo(function () {\n    var dotSet = new Set();\n\n    // Add marks\n    marks.forEach(function (mark) {\n      dotSet.add(mark.value);\n    });\n\n    // Fill dots\n    if (dots && step !== null) {\n      var current = min;\n      while (current <= max) {\n        dotSet.add(current);\n        current += step;\n      }\n    }\n    return Array.from(dotSet);\n  }, [min, max, step, dots, marks]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-step\")\n  }, stepDots.map(function (dotValue) {\n    return /*#__PURE__*/React.createElement(Dot, {\n      prefixCls: prefixCls,\n      key: dotValue,\n      value: dotValue,\n      style: style,\n      activeStyle: activeStyle\n    });\n  }));\n};\nexport default Steps;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport cls from 'classnames';\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getOffset } from \"../util\";\nvar Track = function Track(props) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    start = props.start,\n    end = props.end,\n    index = props.index,\n    onStartMove = props.onStartMove,\n    replaceCls = props.replaceCls;\n  var _React$useContext = React.useContext(SliderContext),\n    direction = _React$useContext.direction,\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    disabled = _React$useContext.disabled,\n    range = _React$useContext.range,\n    classNames = _React$useContext.classNames;\n  var trackPrefixCls = \"\".concat(prefixCls, \"-track\");\n  var offsetStart = getOffset(start, min, max);\n  var offsetEnd = getOffset(end, min, max);\n\n  // ============================ Events ============================\n  var onInternalStartMove = function onInternalStartMove(e) {\n    if (!disabled && onStartMove) {\n      onStartMove(e, -1);\n    }\n  };\n\n  // ============================ Render ============================\n  var positionStyle = {};\n  switch (direction) {\n    case 'rtl':\n      positionStyle.right = \"\".concat(offsetStart * 100, \"%\");\n      positionStyle.width = \"\".concat(offsetEnd * 100 - offsetStart * 100, \"%\");\n      break;\n    case 'btt':\n      positionStyle.bottom = \"\".concat(offsetStart * 100, \"%\");\n      positionStyle.height = \"\".concat(offsetEnd * 100 - offsetStart * 100, \"%\");\n      break;\n    case 'ttb':\n      positionStyle.top = \"\".concat(offsetStart * 100, \"%\");\n      positionStyle.height = \"\".concat(offsetEnd * 100 - offsetStart * 100, \"%\");\n      break;\n    default:\n      positionStyle.left = \"\".concat(offsetStart * 100, \"%\");\n      positionStyle.width = \"\".concat(offsetEnd * 100 - offsetStart * 100, \"%\");\n  }\n  var className = replaceCls || cls(trackPrefixCls, _defineProperty(_defineProperty({}, \"\".concat(trackPrefixCls, \"-\").concat(index + 1), index !== null && range), \"\".concat(prefixCls, \"-track-draggable\"), onStartMove), classNames.track);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    style: _objectSpread(_objectSpread({}, positionStyle), style),\n    onMouseDown: onInternalStartMove,\n    onTouchStart: onInternalStartMove\n  });\n};\nexport default Track;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport cls from 'classnames';\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getIndex } from \"../util\";\nimport Track from \"./Track\";\nvar Tracks = function Tracks(props) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    values = props.values,\n    startPoint = props.startPoint,\n    onStartMove = props.onStartMove;\n  var _React$useContext = React.useContext(SliderContext),\n    included = _React$useContext.included,\n    range = _React$useContext.range,\n    min = _React$useContext.min,\n    styles = _React$useContext.styles,\n    classNames = _React$useContext.classNames;\n\n  // =========================== List ===========================\n  var trackList = React.useMemo(function () {\n    if (!range) {\n      // null value do not have track\n      if (values.length === 0) {\n        return [];\n      }\n      var startValue = startPoint !== null && startPoint !== void 0 ? startPoint : min;\n      var endValue = values[0];\n      return [{\n        start: Math.min(startValue, endValue),\n        end: Math.max(startValue, endValue)\n      }];\n    }\n\n    // Multiple\n    var list = [];\n    for (var i = 0; i < values.length - 1; i += 1) {\n      list.push({\n        start: values[i],\n        end: values[i + 1]\n      });\n    }\n    return list;\n  }, [values, range, startPoint, min]);\n  if (!included) {\n    return null;\n  }\n\n  // ========================== Render ==========================\n  var tracksNode = trackList !== null && trackList !== void 0 && trackList.length && (classNames.tracks || styles.tracks) ? /*#__PURE__*/React.createElement(Track, {\n    index: null,\n    prefixCls: prefixCls,\n    start: trackList[0].start,\n    end: trackList[trackList.length - 1].end,\n    replaceCls: cls(classNames.tracks, \"\".concat(prefixCls, \"-tracks\")),\n    style: styles.tracks\n  }) : null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, tracksNode, trackList.map(function (_ref, index) {\n    var start = _ref.start,\n      end = _ref.end;\n    return /*#__PURE__*/React.createElement(Track, {\n      index: index,\n      prefixCls: prefixCls,\n      style: _objectSpread(_objectSpread({}, getIndex(style, index)), styles.track),\n      start: start,\n      end: end,\n      key: index,\n      onStartMove: onStartMove\n    });\n  }));\n};\nexport default Tracks;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport { UnstableContext } from \"../context\";\n/** Drag to delete offset. It's a user experience number for dragging out */\nvar REMOVE_DIST = 130;\nfunction getPosition(e) {\n  var obj = 'targetTouches' in e ? e.targetTouches[0] : e;\n  return {\n    pageX: obj.pageX,\n    pageY: obj.pageY\n  };\n}\nfunction useDrag(containerRef, direction, rawValues, min, max, formatValue, triggerChange, finishChange, offsetValues, editable, minCount) {\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    draggingValue = _React$useState2[0],\n    setDraggingValue = _React$useState2[1];\n  var _React$useState3 = React.useState(-1),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    draggingIndex = _React$useState4[0],\n    setDraggingIndex = _React$useState4[1];\n  var _React$useState5 = React.useState(false),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    draggingDelete = _React$useState6[0],\n    setDraggingDelete = _React$useState6[1];\n  var _React$useState7 = React.useState(rawValues),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    cacheValues = _React$useState8[0],\n    setCacheValues = _React$useState8[1];\n  var _React$useState9 = React.useState(rawValues),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    originValues = _React$useState10[0],\n    setOriginValues = _React$useState10[1];\n  var mouseMoveEventRef = React.useRef(null);\n  var mouseUpEventRef = React.useRef(null);\n  var touchEventTargetRef = React.useRef(null);\n  var _React$useContext = React.useContext(UnstableContext),\n    onDragStart = _React$useContext.onDragStart,\n    onDragChange = _React$useContext.onDragChange;\n  useLayoutEffect(function () {\n    if (draggingIndex === -1) {\n      setCacheValues(rawValues);\n    }\n  }, [rawValues, draggingIndex]);\n\n  // Clean up event\n  React.useEffect(function () {\n    return function () {\n      document.removeEventListener('mousemove', mouseMoveEventRef.current);\n      document.removeEventListener('mouseup', mouseUpEventRef.current);\n      if (touchEventTargetRef.current) {\n        touchEventTargetRef.current.removeEventListener('touchmove', mouseMoveEventRef.current);\n        touchEventTargetRef.current.removeEventListener('touchend', mouseUpEventRef.current);\n      }\n    };\n  }, []);\n  var flushValues = function flushValues(nextValues, nextValue, deleteMark) {\n    // Perf: Only update state when value changed\n    if (nextValue !== undefined) {\n      setDraggingValue(nextValue);\n    }\n    setCacheValues(nextValues);\n    var changeValues = nextValues;\n    if (deleteMark) {\n      changeValues = nextValues.filter(function (_, i) {\n        return i !== draggingIndex;\n      });\n    }\n    triggerChange(changeValues);\n    if (onDragChange) {\n      onDragChange({\n        rawValues: nextValues,\n        deleteIndex: deleteMark ? draggingIndex : -1,\n        draggingIndex: draggingIndex,\n        draggingValue: nextValue\n      });\n    }\n  };\n  var updateCacheValue = useEvent(function (valueIndex, offsetPercent, deleteMark) {\n    if (valueIndex === -1) {\n      // >>>> Dragging on the track\n      var startValue = originValues[0];\n      var endValue = originValues[originValues.length - 1];\n      var maxStartOffset = min - startValue;\n      var maxEndOffset = max - endValue;\n\n      // Get valid offset\n      var offset = offsetPercent * (max - min);\n      offset = Math.max(offset, maxStartOffset);\n      offset = Math.min(offset, maxEndOffset);\n\n      // Use first value to revert back of valid offset (like steps marks)\n      var formatStartValue = formatValue(startValue + offset);\n      offset = formatStartValue - startValue;\n      var cloneCacheValues = originValues.map(function (val) {\n        return val + offset;\n      });\n      flushValues(cloneCacheValues);\n    } else {\n      // >>>> Dragging on the handle\n      var offsetDist = (max - min) * offsetPercent;\n\n      // Always start with the valueIndex origin value\n      var cloneValues = _toConsumableArray(cacheValues);\n      cloneValues[valueIndex] = originValues[valueIndex];\n      var next = offsetValues(cloneValues, offsetDist, valueIndex, 'dist');\n      flushValues(next.values, next.value, deleteMark);\n    }\n  });\n  var onStartMove = function onStartMove(e, valueIndex, startValues) {\n    e.stopPropagation();\n\n    // å¦‚æžœæ˜¯ç‚¹å‡» track è§¦å‘çš„ï¼Œéœ€è¦ä¼ å…¥å˜åŒ–åŽçš„åˆå§‹å€¼ï¼Œè€Œä¸èƒ½ç›´æŽ¥ç”¨ rawValues\n    var initialValues = startValues || rawValues;\n    var originValue = initialValues[valueIndex];\n    setDraggingIndex(valueIndex);\n    setDraggingValue(originValue);\n    setOriginValues(initialValues);\n    setCacheValues(initialValues);\n    setDraggingDelete(false);\n    var _getPosition = getPosition(e),\n      startX = _getPosition.pageX,\n      startY = _getPosition.pageY;\n\n    // We declare it here since closure can't get outer latest value\n    var deleteMark = false;\n\n    // Internal trigger event\n    if (onDragStart) {\n      onDragStart({\n        rawValues: initialValues,\n        draggingIndex: valueIndex,\n        draggingValue: originValue\n      });\n    }\n\n    // Moving\n    var onMouseMove = function onMouseMove(event) {\n      event.preventDefault();\n      var _getPosition2 = getPosition(event),\n        moveX = _getPosition2.pageX,\n        moveY = _getPosition2.pageY;\n      var offsetX = moveX - startX;\n      var offsetY = moveY - startY;\n      var _containerRef$current = containerRef.current.getBoundingClientRect(),\n        width = _containerRef$current.width,\n        height = _containerRef$current.height;\n      var offSetPercent;\n      var removeDist;\n      switch (direction) {\n        case 'btt':\n          offSetPercent = -offsetY / height;\n          removeDist = offsetX;\n          break;\n        case 'ttb':\n          offSetPercent = offsetY / height;\n          removeDist = offsetX;\n          break;\n        case 'rtl':\n          offSetPercent = -offsetX / width;\n          removeDist = offsetY;\n          break;\n        default:\n          offSetPercent = offsetX / width;\n          removeDist = offsetY;\n      }\n\n      // Check if need mark remove\n      deleteMark = editable ? Math.abs(removeDist) > REMOVE_DIST && minCount < cacheValues.length : false;\n      setDraggingDelete(deleteMark);\n      updateCacheValue(valueIndex, offSetPercent, deleteMark);\n    };\n\n    // End\n    var onMouseUp = function onMouseUp(event) {\n      event.preventDefault();\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('mousemove', onMouseMove);\n      if (touchEventTargetRef.current) {\n        touchEventTargetRef.current.removeEventListener('touchmove', mouseMoveEventRef.current);\n        touchEventTargetRef.current.removeEventListener('touchend', mouseUpEventRef.current);\n      }\n      mouseMoveEventRef.current = null;\n      mouseUpEventRef.current = null;\n      touchEventTargetRef.current = null;\n      finishChange(deleteMark);\n      setDraggingIndex(-1);\n      setDraggingDelete(false);\n    };\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('mousemove', onMouseMove);\n    e.currentTarget.addEventListener('touchend', onMouseUp);\n    e.currentTarget.addEventListener('touchmove', onMouseMove);\n    mouseMoveEventRef.current = onMouseMove;\n    mouseUpEventRef.current = onMouseUp;\n    touchEventTargetRef.current = e.currentTarget;\n  };\n\n  // Only return cache value when it mapping with rawValues\n  var returnValues = React.useMemo(function () {\n    var sourceValues = _toConsumableArray(rawValues).sort(function (a, b) {\n      return a - b;\n    });\n    var targetValues = _toConsumableArray(cacheValues).sort(function (a, b) {\n      return a - b;\n    });\n    var counts = {};\n    targetValues.forEach(function (val) {\n      counts[val] = (counts[val] || 0) + 1;\n    });\n    sourceValues.forEach(function (val) {\n      counts[val] = (counts[val] || 0) - 1;\n    });\n    var maxDiffCount = editable ? 1 : 0;\n    var diffCount = Object.values(counts).reduce(function (prev, next) {\n      return prev + Math.abs(next);\n    }, 0);\n    return diffCount <= maxDiffCount ? cacheValues : rawValues;\n  }, [rawValues, cacheValues, editable]);\n  return [draggingIndex, draggingValue, draggingDelete, returnValues, onStartMove];\n}\nexport default useDrag;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\n\n/** Format the value in the range of [min, max] */\n\n/** Format value align with step */\n\n/** Format value align with step & marks */\n\nexport default function useOffset(min, max, step, markList, allowCross, pushable) {\n  var formatRangeValue = React.useCallback(function (val) {\n    return Math.max(min, Math.min(max, val));\n  }, [min, max]);\n  var formatStepValue = React.useCallback(function (val) {\n    if (step !== null) {\n      var stepValue = min + Math.round((formatRangeValue(val) - min) / step) * step;\n\n      // Cut number in case to be like 0.30000000000000004\n      var getDecimal = function getDecimal(num) {\n        return (String(num).split('.')[1] || '').length;\n      };\n      var maxDecimal = Math.max(getDecimal(step), getDecimal(max), getDecimal(min));\n      var fixedValue = Number(stepValue.toFixed(maxDecimal));\n      return min <= fixedValue && fixedValue <= max ? fixedValue : null;\n    }\n    return null;\n  }, [step, min, max, formatRangeValue]);\n  var formatValue = React.useCallback(function (val) {\n    var formatNextValue = formatRangeValue(val);\n\n    // List align values\n    var alignValues = markList.map(function (mark) {\n      return mark.value;\n    });\n    if (step !== null) {\n      alignValues.push(formatStepValue(val));\n    }\n\n    // min & max\n    alignValues.push(min, max);\n\n    // Align with marks\n    var closeValue = alignValues[0];\n    var closeDist = max - min;\n    alignValues.forEach(function (alignValue) {\n      var dist = Math.abs(formatNextValue - alignValue);\n      if (dist <= closeDist) {\n        closeValue = alignValue;\n        closeDist = dist;\n      }\n    });\n    return closeValue;\n  }, [min, max, markList, step, formatRangeValue, formatStepValue]);\n\n  // ========================== Offset ==========================\n  // Single Value\n  var offsetValue = function offsetValue(values, offset, valueIndex) {\n    var mode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'unit';\n    if (typeof offset === 'number') {\n      var nextValue;\n      var originValue = values[valueIndex];\n\n      // Only used for `dist` mode\n      var targetDistValue = originValue + offset;\n\n      // Compare next step value & mark value which is best match\n      var potentialValues = [];\n      markList.forEach(function (mark) {\n        potentialValues.push(mark.value);\n      });\n\n      // Min & Max\n      potentialValues.push(min, max);\n\n      // In case origin value is align with mark but not with step\n      potentialValues.push(formatStepValue(originValue));\n\n      // Put offset step value also\n      var sign = offset > 0 ? 1 : -1;\n      if (mode === 'unit') {\n        potentialValues.push(formatStepValue(originValue + sign * step));\n      } else {\n        potentialValues.push(formatStepValue(targetDistValue));\n      }\n\n      // Find close one\n      potentialValues = potentialValues.filter(function (val) {\n        return val !== null;\n      })\n      // Remove reverse value\n      .filter(function (val) {\n        return offset < 0 ? val <= originValue : val >= originValue;\n      });\n      if (mode === 'unit') {\n        // `unit` mode can not contain itself\n        potentialValues = potentialValues.filter(function (val) {\n          return val !== originValue;\n        });\n      }\n      var compareValue = mode === 'unit' ? originValue : targetDistValue;\n      nextValue = potentialValues[0];\n      var valueDist = Math.abs(nextValue - compareValue);\n      potentialValues.forEach(function (potentialValue) {\n        var dist = Math.abs(potentialValue - compareValue);\n        if (dist < valueDist) {\n          nextValue = potentialValue;\n          valueDist = dist;\n        }\n      });\n\n      // Out of range will back to range\n      if (nextValue === undefined) {\n        return offset < 0 ? min : max;\n      }\n\n      // `dist` mode\n      if (mode === 'dist') {\n        return nextValue;\n      }\n\n      // `unit` mode may need another round\n      if (Math.abs(offset) > 1) {\n        var cloneValues = _toConsumableArray(values);\n        cloneValues[valueIndex] = nextValue;\n        return offsetValue(cloneValues, offset - sign, valueIndex, mode);\n      }\n      return nextValue;\n    } else if (offset === 'min') {\n      return min;\n    } else if (offset === 'max') {\n      return max;\n    }\n  };\n\n  /** Same as `offsetValue` but return `changed` mark to tell value changed */\n  var offsetChangedValue = function offsetChangedValue(values, offset, valueIndex) {\n    var mode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'unit';\n    var originValue = values[valueIndex];\n    var nextValue = offsetValue(values, offset, valueIndex, mode);\n    return {\n      value: nextValue,\n      changed: nextValue !== originValue\n    };\n  };\n  var needPush = function needPush(dist) {\n    return pushable === null && dist === 0 || typeof pushable === 'number' && dist < pushable;\n  };\n\n  // Values\n  var offsetValues = function offsetValues(values, offset, valueIndex) {\n    var mode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'unit';\n    var nextValues = values.map(formatValue);\n    var originValue = nextValues[valueIndex];\n    var nextValue = offsetValue(nextValues, offset, valueIndex, mode);\n    nextValues[valueIndex] = nextValue;\n    if (allowCross === false) {\n      // >>>>> Allow Cross\n      var pushNum = pushable || 0;\n\n      // ============ AllowCross ===============\n      if (valueIndex > 0 && nextValues[valueIndex - 1] !== originValue) {\n        nextValues[valueIndex] = Math.max(nextValues[valueIndex], nextValues[valueIndex - 1] + pushNum);\n      }\n      if (valueIndex < nextValues.length - 1 && nextValues[valueIndex + 1] !== originValue) {\n        nextValues[valueIndex] = Math.min(nextValues[valueIndex], nextValues[valueIndex + 1] - pushNum);\n      }\n    } else if (typeof pushable === 'number' || pushable === null) {\n      // >>>>> Pushable\n      // =============== Push ==================\n\n      // >>>>>> Basic push\n      // End values\n      for (var i = valueIndex + 1; i < nextValues.length; i += 1) {\n        var changed = true;\n        while (needPush(nextValues[i] - nextValues[i - 1]) && changed) {\n          var _offsetChangedValue = offsetChangedValue(nextValues, 1, i);\n          nextValues[i] = _offsetChangedValue.value;\n          changed = _offsetChangedValue.changed;\n        }\n      }\n\n      // Start values\n      for (var _i = valueIndex; _i > 0; _i -= 1) {\n        var _changed = true;\n        while (needPush(nextValues[_i] - nextValues[_i - 1]) && _changed) {\n          var _offsetChangedValue2 = offsetChangedValue(nextValues, -1, _i - 1);\n          nextValues[_i - 1] = _offsetChangedValue2.value;\n          _changed = _offsetChangedValue2.changed;\n        }\n      }\n\n      // >>>>> Revert back to safe push range\n      // End to Start\n      for (var _i2 = nextValues.length - 1; _i2 > 0; _i2 -= 1) {\n        var _changed2 = true;\n        while (needPush(nextValues[_i2] - nextValues[_i2 - 1]) && _changed2) {\n          var _offsetChangedValue3 = offsetChangedValue(nextValues, -1, _i2 - 1);\n          nextValues[_i2 - 1] = _offsetChangedValue3.value;\n          _changed2 = _offsetChangedValue3.changed;\n        }\n      }\n\n      // Start to End\n      for (var _i3 = 0; _i3 < nextValues.length - 1; _i3 += 1) {\n        var _changed3 = true;\n        while (needPush(nextValues[_i3 + 1] - nextValues[_i3]) && _changed3) {\n          var _offsetChangedValue4 = offsetChangedValue(nextValues, 1, _i3 + 1);\n          nextValues[_i3 + 1] = _offsetChangedValue4.value;\n          _changed3 = _offsetChangedValue4.changed;\n        }\n      }\n    }\n    return {\n      value: nextValues[valueIndex],\n      values: nextValues\n    };\n  };\n  return [formatValue, offsetValues];\n}","import { warning } from \"rc-util/es/warning\";\nimport { useMemo } from 'react';\nexport default function useRange(range) {\n  return useMemo(function () {\n    if (range === true || !range) {\n      return [!!range, false, false, 0];\n    }\n    var editable = range.editable,\n      draggableTrack = range.draggableTrack,\n      minCount = range.minCount,\n      maxCount = range.maxCount;\n    if (process.env.NODE_ENV !== 'production') {\n      warning(!editable || !draggableTrack, '`editable` can not work with `draggableTrack`.');\n    }\n    return [true, editable, !editable && draggableTrack, minCount || 0, maxCount];\n  }, [range]);\n}","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport cls from 'classnames';\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport isEqual from \"rc-util/es/isEqual\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport Handles from \"./Handles\";\nimport Marks from \"./Marks\";\nimport Steps from \"./Steps\";\nimport Tracks from \"./Tracks\";\nimport SliderContext from \"./context\";\nimport useDrag from \"./hooks/useDrag\";\nimport useOffset from \"./hooks/useOffset\";\nimport useRange from \"./hooks/useRange\";\n\n/**\n * New:\n * - click mark to update range value\n * - handleRender\n * - Fix handle with count not correct\n * - Fix pushable not work in some case\n * - No more FindDOMNode\n * - Move all position related style into inline style\n * - Key: up is plus, down is minus\n * - fix Key with step = null not align with marks\n * - Change range should not trigger onChange\n * - keyboard support pushable\n */\n\nvar Slider = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-slider' : _props$prefixCls,\n    className = props.className,\n    style = props.style,\n    classNames = props.classNames,\n    styles = props.styles,\n    id = props.id,\n    _props$disabled = props.disabled,\n    disabled = _props$disabled === void 0 ? false : _props$disabled,\n    _props$keyboard = props.keyboard,\n    keyboard = _props$keyboard === void 0 ? true : _props$keyboard,\n    autoFocus = props.autoFocus,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    _props$min = props.min,\n    min = _props$min === void 0 ? 0 : _props$min,\n    _props$max = props.max,\n    max = _props$max === void 0 ? 100 : _props$max,\n    _props$step = props.step,\n    step = _props$step === void 0 ? 1 : _props$step,\n    value = props.value,\n    defaultValue = props.defaultValue,\n    range = props.range,\n    count = props.count,\n    onChange = props.onChange,\n    onBeforeChange = props.onBeforeChange,\n    onAfterChange = props.onAfterChange,\n    onChangeComplete = props.onChangeComplete,\n    _props$allowCross = props.allowCross,\n    allowCross = _props$allowCross === void 0 ? true : _props$allowCross,\n    _props$pushable = props.pushable,\n    pushable = _props$pushable === void 0 ? false : _props$pushable,\n    reverse = props.reverse,\n    vertical = props.vertical,\n    _props$included = props.included,\n    included = _props$included === void 0 ? true : _props$included,\n    startPoint = props.startPoint,\n    trackStyle = props.trackStyle,\n    handleStyle = props.handleStyle,\n    railStyle = props.railStyle,\n    dotStyle = props.dotStyle,\n    activeDotStyle = props.activeDotStyle,\n    marks = props.marks,\n    dots = props.dots,\n    handleRender = props.handleRender,\n    activeHandleRender = props.activeHandleRender,\n    track = props.track,\n    _props$tabIndex = props.tabIndex,\n    tabIndex = _props$tabIndex === void 0 ? 0 : _props$tabIndex,\n    ariaLabelForHandle = props.ariaLabelForHandle,\n    ariaLabelledByForHandle = props.ariaLabelledByForHandle,\n    ariaRequired = props.ariaRequired,\n    ariaValueTextFormatterForHandle = props.ariaValueTextFormatterForHandle;\n  var handlesRef = React.useRef(null);\n  var containerRef = React.useRef(null);\n  var direction = React.useMemo(function () {\n    if (vertical) {\n      return reverse ? 'ttb' : 'btt';\n    }\n    return reverse ? 'rtl' : 'ltr';\n  }, [reverse, vertical]);\n\n  // ============================ Range =============================\n  var _useRange = useRange(range),\n    _useRange2 = _slicedToArray(_useRange, 5),\n    rangeEnabled = _useRange2[0],\n    rangeEditable = _useRange2[1],\n    rangeDraggableTrack = _useRange2[2],\n    minCount = _useRange2[3],\n    maxCount = _useRange2[4];\n  var mergedMin = React.useMemo(function () {\n    return isFinite(min) ? min : 0;\n  }, [min]);\n  var mergedMax = React.useMemo(function () {\n    return isFinite(max) ? max : 100;\n  }, [max]);\n\n  // ============================= Step =============================\n  var mergedStep = React.useMemo(function () {\n    return step !== null && step <= 0 ? 1 : step;\n  }, [step]);\n\n  // ============================= Push =============================\n  var mergedPush = React.useMemo(function () {\n    if (typeof pushable === 'boolean') {\n      return pushable ? mergedStep : false;\n    }\n    return pushable >= 0 ? pushable : false;\n  }, [pushable, mergedStep]);\n\n  // ============================ Marks =============================\n  var markList = React.useMemo(function () {\n    return Object.keys(marks || {}).map(function (key) {\n      var mark = marks[key];\n      var markObj = {\n        value: Number(key)\n      };\n      if (mark && _typeof(mark) === 'object' && ! /*#__PURE__*/React.isValidElement(mark) && ('label' in mark || 'style' in mark)) {\n        markObj.style = mark.style;\n        markObj.label = mark.label;\n      } else {\n        markObj.label = mark;\n      }\n      return markObj;\n    }).filter(function (_ref) {\n      var label = _ref.label;\n      return label || typeof label === 'number';\n    }).sort(function (a, b) {\n      return a.value - b.value;\n    });\n  }, [marks]);\n\n  // ============================ Format ============================\n  var _useOffset = useOffset(mergedMin, mergedMax, mergedStep, markList, allowCross, mergedPush),\n    _useOffset2 = _slicedToArray(_useOffset, 2),\n    formatValue = _useOffset2[0],\n    offsetValues = _useOffset2[1];\n\n  // ============================ Values ============================\n  var _useMergedState = useMergedState(defaultValue, {\n      value: value\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    mergedValue = _useMergedState2[0],\n    setValue = _useMergedState2[1];\n  var rawValues = React.useMemo(function () {\n    var valueList = mergedValue === null || mergedValue === undefined ? [] : Array.isArray(mergedValue) ? mergedValue : [mergedValue];\n    var _valueList = _slicedToArray(valueList, 1),\n      _valueList$ = _valueList[0],\n      val0 = _valueList$ === void 0 ? mergedMin : _valueList$;\n    var returnValues = mergedValue === null ? [] : [val0];\n\n    // Format as range\n    if (rangeEnabled) {\n      returnValues = _toConsumableArray(valueList);\n\n      // When count provided or value is `undefined`, we fill values\n      if (count || mergedValue === undefined) {\n        var pointCount = count >= 0 ? count + 1 : 2;\n        returnValues = returnValues.slice(0, pointCount);\n\n        // Fill with count\n        while (returnValues.length < pointCount) {\n          var _returnValues;\n          returnValues.push((_returnValues = returnValues[returnValues.length - 1]) !== null && _returnValues !== void 0 ? _returnValues : mergedMin);\n        }\n      }\n      returnValues.sort(function (a, b) {\n        return a - b;\n      });\n    }\n\n    // Align in range\n    returnValues.forEach(function (val, index) {\n      returnValues[index] = formatValue(val);\n    });\n    return returnValues;\n  }, [mergedValue, rangeEnabled, mergedMin, count, formatValue]);\n\n  // =========================== onChange ===========================\n  var getTriggerValue = function getTriggerValue(triggerValues) {\n    return rangeEnabled ? triggerValues : triggerValues[0];\n  };\n  var triggerChange = useEvent(function (nextValues) {\n    // Order first\n    var cloneNextValues = _toConsumableArray(nextValues).sort(function (a, b) {\n      return a - b;\n    });\n\n    // Trigger event if needed\n    if (onChange && !isEqual(cloneNextValues, rawValues, true)) {\n      onChange(getTriggerValue(cloneNextValues));\n    }\n\n    // We set this later since it will re-render component immediately\n    setValue(cloneNextValues);\n  });\n  var finishChange = useEvent(function (draggingDelete) {\n    // Trigger from `useDrag` will tell if it's a delete action\n    if (draggingDelete) {\n      handlesRef.current.hideHelp();\n    }\n    var finishValue = getTriggerValue(rawValues);\n    onAfterChange === null || onAfterChange === void 0 || onAfterChange(finishValue);\n    warning(!onAfterChange, '[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead.');\n    onChangeComplete === null || onChangeComplete === void 0 || onChangeComplete(finishValue);\n  });\n  var onDelete = function onDelete(index) {\n    if (disabled || !rangeEditable || rawValues.length <= minCount) {\n      return;\n    }\n    var cloneNextValues = _toConsumableArray(rawValues);\n    cloneNextValues.splice(index, 1);\n    onBeforeChange === null || onBeforeChange === void 0 || onBeforeChange(getTriggerValue(cloneNextValues));\n    triggerChange(cloneNextValues);\n    var nextFocusIndex = Math.max(0, index - 1);\n    handlesRef.current.hideHelp();\n    handlesRef.current.focus(nextFocusIndex);\n  };\n  var _useDrag = useDrag(containerRef, direction, rawValues, mergedMin, mergedMax, formatValue, triggerChange, finishChange, offsetValues, rangeEditable, minCount),\n    _useDrag2 = _slicedToArray(_useDrag, 5),\n    draggingIndex = _useDrag2[0],\n    draggingValue = _useDrag2[1],\n    draggingDelete = _useDrag2[2],\n    cacheValues = _useDrag2[3],\n    onStartDrag = _useDrag2[4];\n\n  /**\n   * When `rangeEditable` will insert a new value in the values array.\n   * Else it will replace the value in the values array.\n   */\n  var changeToCloseValue = function changeToCloseValue(newValue, e) {\n    if (!disabled) {\n      // Create new values\n      var cloneNextValues = _toConsumableArray(rawValues);\n      var valueIndex = 0;\n      var valueBeforeIndex = 0; // Record the index which value < newValue\n      var valueDist = mergedMax - mergedMin;\n      rawValues.forEach(function (val, index) {\n        var dist = Math.abs(newValue - val);\n        if (dist <= valueDist) {\n          valueDist = dist;\n          valueIndex = index;\n        }\n        if (val < newValue) {\n          valueBeforeIndex = index;\n        }\n      });\n      var focusIndex = valueIndex;\n      if (rangeEditable && valueDist !== 0 && (!maxCount || rawValues.length < maxCount)) {\n        cloneNextValues.splice(valueBeforeIndex + 1, 0, newValue);\n        focusIndex = valueBeforeIndex + 1;\n      } else {\n        cloneNextValues[valueIndex] = newValue;\n      }\n\n      // Fill value to match default 2 (only when `rawValues` is empty)\n      if (rangeEnabled && !rawValues.length && count === undefined) {\n        cloneNextValues.push(newValue);\n      }\n      var nextValue = getTriggerValue(cloneNextValues);\n      onBeforeChange === null || onBeforeChange === void 0 || onBeforeChange(nextValue);\n      triggerChange(cloneNextValues);\n      if (e) {\n        var _document$activeEleme, _document$activeEleme2;\n        (_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 || (_document$activeEleme2 = _document$activeEleme.blur) === null || _document$activeEleme2 === void 0 || _document$activeEleme2.call(_document$activeEleme);\n        handlesRef.current.focus(focusIndex);\n        onStartDrag(e, focusIndex, cloneNextValues);\n      } else {\n        // https://github.com/ant-design/ant-design/issues/49997\n        onAfterChange === null || onAfterChange === void 0 || onAfterChange(nextValue);\n        warning(!onAfterChange, '[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead.');\n        onChangeComplete === null || onChangeComplete === void 0 || onChangeComplete(nextValue);\n      }\n    }\n  };\n\n  // ============================ Click =============================\n  var onSliderMouseDown = function onSliderMouseDown(e) {\n    e.preventDefault();\n    var _containerRef$current = containerRef.current.getBoundingClientRect(),\n      width = _containerRef$current.width,\n      height = _containerRef$current.height,\n      left = _containerRef$current.left,\n      top = _containerRef$current.top,\n      bottom = _containerRef$current.bottom,\n      right = _containerRef$current.right;\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var percent;\n    switch (direction) {\n      case 'btt':\n        percent = (bottom - clientY) / height;\n        break;\n      case 'ttb':\n        percent = (clientY - top) / height;\n        break;\n      case 'rtl':\n        percent = (right - clientX) / width;\n        break;\n      default:\n        percent = (clientX - left) / width;\n    }\n    var nextValue = mergedMin + percent * (mergedMax - mergedMin);\n    changeToCloseValue(formatValue(nextValue), e);\n  };\n\n  // =========================== Keyboard ===========================\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    keyboardValue = _React$useState2[0],\n    setKeyboardValue = _React$useState2[1];\n  var onHandleOffsetChange = function onHandleOffsetChange(offset, valueIndex) {\n    if (!disabled) {\n      var next = offsetValues(rawValues, offset, valueIndex);\n      onBeforeChange === null || onBeforeChange === void 0 || onBeforeChange(getTriggerValue(rawValues));\n      triggerChange(next.values);\n      setKeyboardValue(next.value);\n    }\n  };\n  React.useEffect(function () {\n    if (keyboardValue !== null) {\n      var valueIndex = rawValues.indexOf(keyboardValue);\n      if (valueIndex >= 0) {\n        handlesRef.current.focus(valueIndex);\n      }\n    }\n    setKeyboardValue(null);\n  }, [keyboardValue]);\n\n  // ============================= Drag =============================\n  var mergedDraggableTrack = React.useMemo(function () {\n    if (rangeDraggableTrack && mergedStep === null) {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, '`draggableTrack` is not supported when `step` is `null`.');\n      }\n      return false;\n    }\n    return rangeDraggableTrack;\n  }, [rangeDraggableTrack, mergedStep]);\n  var onStartMove = useEvent(function (e, valueIndex) {\n    onStartDrag(e, valueIndex);\n    onBeforeChange === null || onBeforeChange === void 0 || onBeforeChange(getTriggerValue(rawValues));\n  });\n\n  // Auto focus for updated handle\n  var dragging = draggingIndex !== -1;\n  React.useEffect(function () {\n    if (!dragging) {\n      var valueIndex = rawValues.lastIndexOf(draggingValue);\n      handlesRef.current.focus(valueIndex);\n    }\n  }, [dragging]);\n\n  // =========================== Included ===========================\n  var sortedCacheValues = React.useMemo(function () {\n    return _toConsumableArray(cacheValues).sort(function (a, b) {\n      return a - b;\n    });\n  }, [cacheValues]);\n\n  // Provide a range values with included [min, max]\n  // Used for Track, Mark & Dot\n  var _React$useMemo = React.useMemo(function () {\n      if (!rangeEnabled) {\n        return [mergedMin, sortedCacheValues[0]];\n      }\n      return [sortedCacheValues[0], sortedCacheValues[sortedCacheValues.length - 1]];\n    }, [sortedCacheValues, rangeEnabled, mergedMin]),\n    _React$useMemo2 = _slicedToArray(_React$useMemo, 2),\n    includedStart = _React$useMemo2[0],\n    includedEnd = _React$useMemo2[1];\n\n  // ============================= Refs =============================\n  React.useImperativeHandle(ref, function () {\n    return {\n      focus: function focus() {\n        handlesRef.current.focus(0);\n      },\n      blur: function blur() {\n        var _containerRef$current2;\n        var _document = document,\n          activeElement = _document.activeElement;\n        if ((_containerRef$current2 = containerRef.current) !== null && _containerRef$current2 !== void 0 && _containerRef$current2.contains(activeElement)) {\n          activeElement === null || activeElement === void 0 || activeElement.blur();\n        }\n      }\n    };\n  });\n\n  // ========================== Auto Focus ==========================\n  React.useEffect(function () {\n    if (autoFocus) {\n      handlesRef.current.focus(0);\n    }\n  }, []);\n\n  // =========================== Context ============================\n  var context = React.useMemo(function () {\n    return {\n      min: mergedMin,\n      max: mergedMax,\n      direction: direction,\n      disabled: disabled,\n      keyboard: keyboard,\n      step: mergedStep,\n      included: included,\n      includedStart: includedStart,\n      includedEnd: includedEnd,\n      range: rangeEnabled,\n      tabIndex: tabIndex,\n      ariaLabelForHandle: ariaLabelForHandle,\n      ariaLabelledByForHandle: ariaLabelledByForHandle,\n      ariaRequired: ariaRequired,\n      ariaValueTextFormatterForHandle: ariaValueTextFormatterForHandle,\n      styles: styles || {},\n      classNames: classNames || {}\n    };\n  }, [mergedMin, mergedMax, direction, disabled, keyboard, mergedStep, included, includedStart, includedEnd, rangeEnabled, tabIndex, ariaLabelForHandle, ariaLabelledByForHandle, ariaRequired, ariaValueTextFormatterForHandle, styles, classNames]);\n\n  // ============================ Render ============================\n  return /*#__PURE__*/React.createElement(SliderContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: cls(prefixCls, className, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-disabled\"), disabled), \"\".concat(prefixCls, \"-vertical\"), vertical), \"\".concat(prefixCls, \"-horizontal\"), !vertical), \"\".concat(prefixCls, \"-with-marks\"), markList.length)),\n    style: style,\n    onMouseDown: onSliderMouseDown,\n    id: id\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cls(\"\".concat(prefixCls, \"-rail\"), classNames === null || classNames === void 0 ? void 0 : classNames.rail),\n    style: _objectSpread(_objectSpread({}, railStyle), styles === null || styles === void 0 ? void 0 : styles.rail)\n  }), track !== false && /*#__PURE__*/React.createElement(Tracks, {\n    prefixCls: prefixCls,\n    style: trackStyle,\n    values: rawValues,\n    startPoint: startPoint,\n    onStartMove: mergedDraggableTrack ? onStartMove : undefined\n  }), /*#__PURE__*/React.createElement(Steps, {\n    prefixCls: prefixCls,\n    marks: markList,\n    dots: dots,\n    style: dotStyle,\n    activeStyle: activeDotStyle\n  }), /*#__PURE__*/React.createElement(Handles, {\n    ref: handlesRef,\n    prefixCls: prefixCls,\n    style: handleStyle,\n    values: cacheValues,\n    draggingIndex: draggingIndex,\n    draggingDelete: draggingDelete,\n    onStartMove: onStartMove,\n    onOffsetChange: onHandleOffsetChange,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    handleRender: handleRender,\n    activeHandleRender: activeHandleRender,\n    onChangeComplete: finishChange,\n    onDelete: rangeEditable ? onDelete : undefined\n  }), /*#__PURE__*/React.createElement(Marks, {\n    prefixCls: prefixCls,\n    marks: markList,\n    onClick: changeToCloseValue\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Slider.displayName = 'Slider';\n}\nexport default Slider;","import { createContext } from 'react';\n/** @private Internal context. Do not use in your production. */\nconst SliderInternalContext = /*#__PURE__*/createContext({});\nexport default SliderInternalContext;","\"use client\";\n\nimport * as React from 'react';\nimport { useRef } from 'react';\nimport raf from \"rc-util/es/raf\";\nimport { composeRef } from \"rc-util/es/ref\";\nimport Tooltip from '../tooltip';\nconst SliderTooltip = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    open,\n    draggingDelete,\n    value\n  } = props;\n  const innerRef = useRef(null);\n  const mergedOpen = open && !draggingDelete;\n  const rafRef = useRef(null);\n  function cancelKeepAlign() {\n    raf.cancel(rafRef.current);\n    rafRef.current = null;\n  }\n  function keepAlign() {\n    rafRef.current = raf(() => {\n      var _a;\n      (_a = innerRef.current) === null || _a === void 0 ? void 0 : _a.forceAlign();\n      rafRef.current = null;\n    });\n  }\n  React.useEffect(() => {\n    if (mergedOpen) {\n      keepAlign();\n    } else {\n      cancelKeepAlign();\n    }\n    return cancelKeepAlign;\n  }, [mergedOpen, props.title, value]);\n  return /*#__PURE__*/React.createElement(Tooltip, Object.assign({\n    ref: composeRef(innerRef, ref)\n  }, props, {\n    open: mergedOpen\n  }));\n});\nif (process.env.NODE_ENV !== 'production') {\n  SliderTooltip.displayName = 'SliderTooltip';\n}\nexport default SliderTooltip;","import { unit } from '@ant-design/cssinjs';\nimport { FastColor } from '@ant-design/fast-color';\nimport { resetComponent } from '../../style';\nimport { genStyleHooks, mergeToken } from '../../theme/internal';\n// =============================== Base ===============================\nconst genBaseStyle = token => {\n  const {\n    componentCls,\n    antCls,\n    controlSize,\n    dotSize,\n    marginFull,\n    marginPart,\n    colorFillContentHover,\n    handleColorDisabled,\n    calc,\n    handleSize,\n    handleSizeHover,\n    handleActiveColor,\n    handleActiveOutlineColor,\n    handleLineWidth,\n    handleLineWidthHover,\n    motionDurationMid\n  } = token;\n  return {\n    [componentCls]: Object.assign(Object.assign({}, resetComponent(token)), {\n      position: 'relative',\n      height: controlSize,\n      margin: `${unit(marginPart)} ${unit(marginFull)}`,\n      padding: 0,\n      cursor: 'pointer',\n      touchAction: 'none',\n      '&-vertical': {\n        margin: `${unit(marginFull)} ${unit(marginPart)}`\n      },\n      [`${componentCls}-rail`]: {\n        position: 'absolute',\n        backgroundColor: token.railBg,\n        borderRadius: token.borderRadiusXS,\n        transition: `background-color ${motionDurationMid}`\n      },\n      [`${componentCls}-track,${componentCls}-tracks`]: {\n        position: 'absolute',\n        transition: `background-color ${motionDurationMid}`\n      },\n      [`${componentCls}-track`]: {\n        backgroundColor: token.trackBg,\n        borderRadius: token.borderRadiusXS\n      },\n      [`${componentCls}-track-draggable`]: {\n        boxSizing: 'content-box',\n        backgroundClip: 'content-box',\n        border: 'solid rgba(0,0,0,0)'\n      },\n      '&:hover': {\n        [`${componentCls}-rail`]: {\n          backgroundColor: token.railHoverBg\n        },\n        [`${componentCls}-track`]: {\n          backgroundColor: token.trackHoverBg\n        },\n        [`${componentCls}-dot`]: {\n          borderColor: colorFillContentHover\n        },\n        [`${componentCls}-handle::after`]: {\n          boxShadow: `0 0 0 ${unit(handleLineWidth)} ${token.colorPrimaryBorderHover}`\n        },\n        [`${componentCls}-dot-active`]: {\n          borderColor: token.dotActiveBorderColor\n        }\n      },\n      [`${componentCls}-handle`]: {\n        position: 'absolute',\n        width: handleSize,\n        height: handleSize,\n        outline: 'none',\n        userSelect: 'none',\n        // Dragging status\n        '&-dragging-delete': {\n          opacity: 0\n        },\n        // æ‰©å¤§é€‰åŒº\n        '&::before': {\n          content: '\"\"',\n          position: 'absolute',\n          insetInlineStart: calc(handleLineWidth).mul(-1).equal(),\n          insetBlockStart: calc(handleLineWidth).mul(-1).equal(),\n          width: calc(handleSize).add(calc(handleLineWidth).mul(2)).equal(),\n          height: calc(handleSize).add(calc(handleLineWidth).mul(2)).equal(),\n          backgroundColor: 'transparent'\n        },\n        '&::after': {\n          content: '\"\"',\n          position: 'absolute',\n          insetBlockStart: 0,\n          insetInlineStart: 0,\n          width: handleSize,\n          height: handleSize,\n          backgroundColor: token.colorBgElevated,\n          boxShadow: `0 0 0 ${unit(handleLineWidth)} ${token.handleColor}`,\n          outline: `0px solid transparent`,\n          borderRadius: '50%',\n          cursor: 'pointer',\n          transition: `\n            inset-inline-start ${motionDurationMid},\n            inset-block-start ${motionDurationMid},\n            width ${motionDurationMid},\n            height ${motionDurationMid},\n            box-shadow ${motionDurationMid},\n            outline ${motionDurationMid}\n          `\n        },\n        '&:hover, &:active, &:focus': {\n          '&::before': {\n            insetInlineStart: calc(handleSizeHover).sub(handleSize).div(2).add(handleLineWidthHover).mul(-1).equal(),\n            insetBlockStart: calc(handleSizeHover).sub(handleSize).div(2).add(handleLineWidthHover).mul(-1).equal(),\n            width: calc(handleSizeHover).add(calc(handleLineWidthHover).mul(2)).equal(),\n            height: calc(handleSizeHover).add(calc(handleLineWidthHover).mul(2)).equal()\n          },\n          '&::after': {\n            boxShadow: `0 0 0 ${unit(handleLineWidthHover)} ${handleActiveColor}`,\n            outline: `6px solid ${handleActiveOutlineColor}`,\n            width: handleSizeHover,\n            height: handleSizeHover,\n            insetInlineStart: token.calc(handleSize).sub(handleSizeHover).div(2).equal(),\n            insetBlockStart: token.calc(handleSize).sub(handleSizeHover).div(2).equal()\n          }\n        }\n      },\n      [`&-lock ${componentCls}-handle`]: {\n        '&::before, &::after': {\n          transition: 'none'\n        }\n      },\n      [`${componentCls}-mark`]: {\n        position: 'absolute',\n        fontSize: token.fontSize\n      },\n      [`${componentCls}-mark-text`]: {\n        position: 'absolute',\n        display: 'inline-block',\n        color: token.colorTextDescription,\n        textAlign: 'center',\n        wordBreak: 'keep-all',\n        cursor: 'pointer',\n        userSelect: 'none',\n        '&-active': {\n          color: token.colorText\n        }\n      },\n      [`${componentCls}-step`]: {\n        position: 'absolute',\n        background: 'transparent',\n        pointerEvents: 'none'\n      },\n      [`${componentCls}-dot`]: {\n        position: 'absolute',\n        width: dotSize,\n        height: dotSize,\n        backgroundColor: token.colorBgElevated,\n        border: `${unit(handleLineWidth)} solid ${token.dotBorderColor}`,\n        borderRadius: '50%',\n        cursor: 'pointer',\n        transition: `border-color ${token.motionDurationSlow}`,\n        pointerEvents: 'auto',\n        '&-active': {\n          borderColor: token.dotActiveBorderColor\n        }\n      },\n      [`&${componentCls}-disabled`]: {\n        cursor: 'not-allowed',\n        [`${componentCls}-rail`]: {\n          backgroundColor: `${token.railBg} !important`\n        },\n        [`${componentCls}-track`]: {\n          backgroundColor: `${token.trackBgDisabled} !important`\n        },\n        [`\n          ${componentCls}-dot\n        `]: {\n          backgroundColor: token.colorBgElevated,\n          borderColor: token.trackBgDisabled,\n          boxShadow: 'none',\n          cursor: 'not-allowed'\n        },\n        [`${componentCls}-handle::after`]: {\n          backgroundColor: token.colorBgElevated,\n          cursor: 'not-allowed',\n          width: handleSize,\n          height: handleSize,\n          boxShadow: `0 0 0 ${unit(handleLineWidth)} ${handleColorDisabled}`,\n          insetInlineStart: 0,\n          insetBlockStart: 0\n        },\n        [`\n          ${componentCls}-mark-text,\n          ${componentCls}-dot\n        `]: {\n          cursor: `not-allowed !important`\n        }\n      },\n      [`&-tooltip ${antCls}-tooltip-inner`]: {\n        minWidth: 'unset'\n      }\n    })\n  };\n};\n// ============================ Horizontal ============================\nconst genDirectionStyle = (token, horizontal) => {\n  const {\n    componentCls,\n    railSize,\n    handleSize,\n    dotSize,\n    marginFull,\n    calc\n  } = token;\n  const railPadding = horizontal ? 'paddingBlock' : 'paddingInline';\n  const full = horizontal ? 'width' : 'height';\n  const part = horizontal ? 'height' : 'width';\n  const handlePos = horizontal ? 'insetBlockStart' : 'insetInlineStart';\n  const markInset = horizontal ? 'top' : 'insetInlineStart';\n  const handlePosSize = calc(railSize).mul(3).sub(handleSize).div(2).equal();\n  const draggableBorderSize = calc(handleSize).sub(railSize).div(2).equal();\n  const draggableBorder = horizontal ? {\n    borderWidth: `${unit(draggableBorderSize)} 0`,\n    transform: `translateY(${unit(calc(draggableBorderSize).mul(-1).equal())})`\n  } : {\n    borderWidth: `0 ${unit(draggableBorderSize)}`,\n    transform: `translateX(${unit(token.calc(draggableBorderSize).mul(-1).equal())})`\n  };\n  return {\n    [railPadding]: railSize,\n    [part]: calc(railSize).mul(3).equal(),\n    [`${componentCls}-rail`]: {\n      [full]: '100%',\n      [part]: railSize\n    },\n    [`${componentCls}-track,${componentCls}-tracks`]: {\n      [part]: railSize\n    },\n    [`${componentCls}-track-draggable`]: Object.assign({}, draggableBorder),\n    [`${componentCls}-handle`]: {\n      [handlePos]: handlePosSize\n    },\n    [`${componentCls}-mark`]: {\n      // Reset all\n      insetInlineStart: 0,\n      top: 0,\n      // https://github.com/ant-design/ant-design/issues/43731\n      [markInset]: calc(railSize).mul(3).add(horizontal ? 0 : marginFull).equal(),\n      [full]: '100%'\n    },\n    [`${componentCls}-step`]: {\n      // Reset all\n      insetInlineStart: 0,\n      top: 0,\n      [markInset]: railSize,\n      [full]: '100%',\n      [part]: railSize\n    },\n    [`${componentCls}-dot`]: {\n      position: 'absolute',\n      [handlePos]: calc(railSize).sub(dotSize).div(2).equal()\n    }\n  };\n};\n// ============================ Horizontal ============================\nconst genHorizontalStyle = token => {\n  const {\n    componentCls,\n    marginPartWithMark\n  } = token;\n  return {\n    [`${componentCls}-horizontal`]: Object.assign(Object.assign({}, genDirectionStyle(token, true)), {\n      [`&${componentCls}-with-marks`]: {\n        marginBottom: marginPartWithMark\n      }\n    })\n  };\n};\n// ============================= Vertical =============================\nconst genVerticalStyle = token => {\n  const {\n    componentCls\n  } = token;\n  return {\n    [`${componentCls}-vertical`]: Object.assign(Object.assign({}, genDirectionStyle(token, false)), {\n      height: '100%'\n    })\n  };\n};\n// ============================== Export ==============================\nexport const prepareComponentToken = token => {\n  // Handle line width is always width-er 1px\n  const increaseHandleWidth = 1;\n  const controlSize = token.controlHeightLG / 4;\n  const controlSizeHover = token.controlHeightSM / 2;\n  const handleLineWidth = token.lineWidth + increaseHandleWidth;\n  const handleLineWidthHover = token.lineWidth + increaseHandleWidth * 1.5;\n  const handleActiveColor = token.colorPrimary;\n  const handleActiveOutlineColor = new FastColor(handleActiveColor).setA(0.2).toRgbString();\n  return {\n    controlSize,\n    railSize: 4,\n    handleSize: controlSize,\n    handleSizeHover: controlSizeHover,\n    dotSize: 8,\n    handleLineWidth,\n    handleLineWidthHover,\n    railBg: token.colorFillTertiary,\n    railHoverBg: token.colorFillSecondary,\n    trackBg: token.colorPrimaryBorder,\n    trackHoverBg: token.colorPrimaryBorderHover,\n    handleColor: token.colorPrimaryBorder,\n    handleActiveColor,\n    handleActiveOutlineColor,\n    handleColorDisabled: new FastColor(token.colorTextDisabled).onBackground(token.colorBgContainer).toHexString(),\n    dotBorderColor: token.colorBorderSecondary,\n    dotActiveBorderColor: token.colorPrimaryBorder,\n    trackBgDisabled: token.colorBgContainerDisabled\n  };\n};\nexport default genStyleHooks('Slider', token => {\n  const sliderToken = mergeToken(token, {\n    marginPart: token.calc(token.controlHeight).sub(token.controlSize).div(2).equal(),\n    marginFull: token.calc(token.controlSize).div(2).equal(),\n    marginPartWithMark: token.calc(token.controlHeightLG).sub(token.controlSize).equal()\n  });\n  return [genBaseStyle(sliderToken), genHorizontalStyle(sliderToken), genVerticalStyle(sliderToken)];\n}, prepareComponentToken);","import * as React from 'react';\nimport raf from \"rc-util/es/raf\";\nexport default function useRafLock() {\n  const [state, setState] = React.useState(false);\n  const rafRef = React.useRef(null);\n  const cleanup = () => {\n    raf.cancel(rafRef.current);\n  };\n  const setDelayState = nextState => {\n    cleanup();\n    if (nextState) {\n      setState(nextState);\n    } else {\n      rafRef.current = raf(() => {\n        setState(nextState);\n      });\n    }\n  };\n  React.useEffect(() => cleanup, []);\n  return [state, setDelayState];\n}","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React from 'react';\nimport classNames from 'classnames';\nimport RcSlider from 'rc-slider';\nimport raf from \"rc-util/es/raf\";\nimport { devUseWarning } from '../_util/warning';\nimport DisabledContext from '../config-provider/DisabledContext';\nimport SliderInternalContext from './Context';\nimport SliderTooltip from './SliderTooltip';\nimport useStyle from './style';\nimport useRafLock from './useRafLock';\nimport { useComponentConfig } from '../config-provider/context';\nfunction getTipFormatter(tipFormatter, legacyTipFormatter) {\n  if (tipFormatter || tipFormatter === null) {\n    return tipFormatter;\n  }\n  if (legacyTipFormatter || legacyTipFormatter === null) {\n    return legacyTipFormatter;\n  }\n  return val => typeof val === 'number' ? val.toString() : '';\n}\nconst Slider = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      prefixCls: customizePrefixCls,\n      range,\n      className,\n      rootClassName,\n      style,\n      disabled,\n      // Deprecated Props\n      tooltipPrefixCls: legacyTooltipPrefixCls,\n      tipFormatter: legacyTipFormatter,\n      tooltipVisible: legacyTooltipVisible,\n      getTooltipPopupContainer: legacyGetTooltipPopupContainer,\n      tooltipPlacement: legacyTooltipPlacement,\n      tooltip = {},\n      onChangeComplete,\n      classNames: sliderClassNames,\n      styles\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"range\", \"className\", \"rootClassName\", \"style\", \"disabled\", \"tooltipPrefixCls\", \"tipFormatter\", \"tooltipVisible\", \"getTooltipPopupContainer\", \"tooltipPlacement\", \"tooltip\", \"onChangeComplete\", \"classNames\", \"styles\"]);\n  const {\n    vertical\n  } = props;\n  const {\n    getPrefixCls,\n    direction: contextDirection,\n    className: contextClassName,\n    style: contextStyle,\n    classNames: contextClassNames,\n    styles: contextStyles,\n    getPopupContainer\n  } = useComponentConfig('slider');\n  const contextDisabled = React.useContext(DisabledContext);\n  const mergedDisabled = disabled !== null && disabled !== void 0 ? disabled : contextDisabled;\n  // ============================= Context ==============================\n  const {\n    handleRender: contextHandleRender,\n    direction: internalContextDirection\n  } = React.useContext(SliderInternalContext);\n  const mergedDirection = internalContextDirection || contextDirection;\n  const isRTL = mergedDirection === 'rtl';\n  // =============================== Open ===============================\n  const [hoverOpen, setHoverOpen] = useRafLock();\n  const [focusOpen, setFocusOpen] = useRafLock();\n  const tooltipProps = Object.assign({}, tooltip);\n  const {\n    open: tooltipOpen,\n    placement: tooltipPlacement,\n    getPopupContainer: getTooltipPopupContainer,\n    prefixCls: customizeTooltipPrefixCls,\n    formatter: tipFormatter\n  } = tooltipProps;\n  const lockOpen = tooltipOpen !== null && tooltipOpen !== void 0 ? tooltipOpen : legacyTooltipVisible;\n  const activeOpen = (hoverOpen || focusOpen) && lockOpen !== false;\n  const mergedTipFormatter = getTipFormatter(tipFormatter, legacyTipFormatter);\n  // ============================= Change ==============================\n  const [dragging, setDragging] = useRafLock();\n  const onInternalChangeComplete = nextValues => {\n    onChangeComplete === null || onChangeComplete === void 0 ? void 0 : onChangeComplete(nextValues);\n    setDragging(false);\n  };\n  // ============================ Placement ============================\n  const getTooltipPlacement = (placement, vert) => {\n    if (placement) {\n      return placement;\n    }\n    if (!vert) {\n      return 'top';\n    }\n    return isRTL ? 'left' : 'right';\n  };\n  // ============================== Style ===============================\n  const prefixCls = getPrefixCls('slider', customizePrefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls);\n  const rootClassNames = classNames(className, contextClassName, contextClassNames.root, sliderClassNames === null || sliderClassNames === void 0 ? void 0 : sliderClassNames.root, rootClassName, {\n    [`${prefixCls}-rtl`]: isRTL,\n    [`${prefixCls}-lock`]: dragging\n  }, hashId, cssVarCls);\n  // make reverse default on rtl direction\n  if (isRTL && !restProps.vertical) {\n    restProps.reverse = !restProps.reverse;\n  }\n  // ============================= Warning ==============================\n  // Warning for deprecated usage\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Slider');\n    [['tooltipPrefixCls', 'prefixCls'], ['getTooltipPopupContainer', 'getPopupContainer'], ['tipFormatter', 'formatter'], ['tooltipPlacement', 'placement'], ['tooltipVisible', 'open']].forEach(([deprecatedName, newName]) => {\n      warning.deprecated(!(deprecatedName in props), deprecatedName, `tooltip.${newName}`);\n    });\n  }\n  // ============================== Handle ==============================\n  React.useEffect(() => {\n    const onMouseUp = () => {\n      // Delay for 1 frame to make the click to enable hide tooltip\n      // even when the handle is focused\n      raf(() => {\n        setFocusOpen(false);\n      }, 1);\n    };\n    document.addEventListener('mouseup', onMouseUp);\n    return () => {\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, []);\n  const useActiveTooltipHandle = range && !lockOpen;\n  const handleRender = contextHandleRender || ((node, info) => {\n    const {\n      index\n    } = info;\n    const nodeProps = node.props;\n    function proxyEvent(eventName, event, triggerRestPropsEvent) {\n      var _a, _b, _c, _d;\n      if (triggerRestPropsEvent) {\n        (_b = (_a = restProps)[eventName]) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n      }\n      (_d = (_c = nodeProps)[eventName]) === null || _d === void 0 ? void 0 : _d.call(_c, event);\n    }\n    const passedProps = Object.assign(Object.assign({}, nodeProps), {\n      onMouseEnter: e => {\n        setHoverOpen(true);\n        proxyEvent('onMouseEnter', e);\n      },\n      onMouseLeave: e => {\n        setHoverOpen(false);\n        proxyEvent('onMouseLeave', e);\n      },\n      onMouseDown: e => {\n        setFocusOpen(true);\n        setDragging(true);\n        proxyEvent('onMouseDown', e);\n      },\n      onFocus: e => {\n        var _a;\n        setFocusOpen(true);\n        (_a = restProps.onFocus) === null || _a === void 0 ? void 0 : _a.call(restProps, e);\n        proxyEvent('onFocus', e, true);\n      },\n      onBlur: e => {\n        var _a;\n        setFocusOpen(false);\n        (_a = restProps.onBlur) === null || _a === void 0 ? void 0 : _a.call(restProps, e);\n        proxyEvent('onBlur', e, true);\n      }\n    });\n    const cloneNode = /*#__PURE__*/React.cloneElement(node, passedProps);\n    const open = (!!lockOpen || activeOpen) && mergedTipFormatter !== null;\n    // Wrap on handle with Tooltip when is single mode or multiple with all show tooltip\n    if (!useActiveTooltipHandle) {\n      return /*#__PURE__*/React.createElement(SliderTooltip, Object.assign({}, tooltipProps, {\n        prefixCls: getPrefixCls('tooltip', customizeTooltipPrefixCls !== null && customizeTooltipPrefixCls !== void 0 ? customizeTooltipPrefixCls : legacyTooltipPrefixCls),\n        title: mergedTipFormatter ? mergedTipFormatter(info.value) : '',\n        value: info.value,\n        open: open,\n        placement: getTooltipPlacement(tooltipPlacement !== null && tooltipPlacement !== void 0 ? tooltipPlacement : legacyTooltipPlacement, vertical),\n        key: index,\n        classNames: {\n          root: `${prefixCls}-tooltip`\n        },\n        getPopupContainer: getTooltipPopupContainer || legacyGetTooltipPopupContainer || getPopupContainer\n      }), cloneNode);\n    }\n    return cloneNode;\n  });\n  // ========================== Active Handle ===========================\n  const activeHandleRender = useActiveTooltipHandle ? (handle, info) => {\n    const cloneNode = /*#__PURE__*/React.cloneElement(handle, {\n      style: Object.assign(Object.assign({}, handle.props.style), {\n        visibility: 'hidden'\n      })\n    });\n    return /*#__PURE__*/React.createElement(SliderTooltip, Object.assign({}, tooltipProps, {\n      prefixCls: getPrefixCls('tooltip', customizeTooltipPrefixCls !== null && customizeTooltipPrefixCls !== void 0 ? customizeTooltipPrefixCls : legacyTooltipPrefixCls),\n      title: mergedTipFormatter ? mergedTipFormatter(info.value) : '',\n      open: mergedTipFormatter !== null && activeOpen,\n      placement: getTooltipPlacement(tooltipPlacement !== null && tooltipPlacement !== void 0 ? tooltipPlacement : legacyTooltipPlacement, vertical),\n      key: \"tooltip\",\n      classNames: {\n        root: `${prefixCls}-tooltip`\n      },\n      getPopupContainer: getTooltipPopupContainer || legacyGetTooltipPopupContainer || getPopupContainer,\n      draggingDelete: info.draggingDelete\n    }), cloneNode);\n  } : undefined;\n  // ============================== Render ==============================\n  const rootStyle = Object.assign(Object.assign(Object.assign(Object.assign({}, contextStyles.root), contextStyle), styles === null || styles === void 0 ? void 0 : styles.root), style);\n  const mergedTracks = Object.assign(Object.assign({}, contextStyles.tracks), styles === null || styles === void 0 ? void 0 : styles.tracks);\n  const mergedTracksClassNames = classNames(contextClassNames.tracks, sliderClassNames === null || sliderClassNames === void 0 ? void 0 : sliderClassNames.tracks);\n  return wrapCSSVar(\n  /*#__PURE__*/\n  // @ts-ignore\n  React.createElement(RcSlider, Object.assign({}, restProps, {\n    classNames: Object.assign({\n      handle: classNames(contextClassNames.handle, sliderClassNames === null || sliderClassNames === void 0 ? void 0 : sliderClassNames.handle),\n      rail: classNames(contextClassNames.rail, sliderClassNames === null || sliderClassNames === void 0 ? void 0 : sliderClassNames.rail),\n      track: classNames(contextClassNames.track, sliderClassNames === null || sliderClassNames === void 0 ? void 0 : sliderClassNames.track)\n    }, mergedTracksClassNames ? {\n      tracks: mergedTracksClassNames\n    } : {}),\n    styles: Object.assign({\n      handle: Object.assign(Object.assign({}, contextStyles.handle), styles === null || styles === void 0 ? void 0 : styles.handle),\n      rail: Object.assign(Object.assign({}, contextStyles.rail), styles === null || styles === void 0 ? void 0 : styles.rail),\n      track: Object.assign(Object.assign({}, contextStyles.track), styles === null || styles === void 0 ? void 0 : styles.track)\n    }, Object.keys(mergedTracks).length ? {\n      tracks: mergedTracks\n    } : {}),\n    step: restProps.step,\n    range: range,\n    className: rootClassNames,\n    style: rootStyle,\n    disabled: mergedDisabled,\n    ref: ref,\n    prefixCls: prefixCls,\n    handleRender: handleRender,\n    activeHandleRender: activeHandleRender,\n    onChangeComplete: onInternalChangeComplete\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Slider.displayName = 'Slider';\n}\nexport default Slider;","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { UnstableContext } from 'rc-slider';\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport Slider from '../../slider';\nimport SliderInternalContext from '../../slider/Context';\nimport { getGradientPercentColor } from '../util';\nexport const GradientColorSlider = props => {\n  const {\n      prefixCls,\n      colors,\n      type,\n      color,\n      range = false,\n      className,\n      activeIndex,\n      onActive,\n      onDragStart,\n      onDragChange,\n      onKeyDelete\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"colors\", \"type\", \"color\", \"range\", \"className\", \"activeIndex\", \"onActive\", \"onDragStart\", \"onDragChange\", \"onKeyDelete\"]);\n  const sliderProps = Object.assign(Object.assign({}, restProps), {\n    track: false\n  });\n  // ========================== Background ==========================\n  const linearCss = React.useMemo(() => {\n    const colorsStr = colors.map(c => `${c.color} ${c.percent}%`).join(', ');\n    return `linear-gradient(90deg, ${colorsStr})`;\n  }, [colors]);\n  const pointColor = React.useMemo(() => {\n    if (!color || !type) {\n      return null;\n    }\n    if (type === 'alpha') {\n      return color.toRgbString();\n    }\n    return `hsl(${color.toHsb().h}, 100%, 50%)`;\n  }, [color, type]);\n  // ======================= Context: Slider ========================\n  const onInternalDragStart = useEvent(onDragStart);\n  const onInternalDragChange = useEvent(onDragChange);\n  const unstableContext = React.useMemo(() => ({\n    onDragStart: onInternalDragStart,\n    onDragChange: onInternalDragChange\n  }), []);\n  // ======================= Context: Render ========================\n  const handleRender = useEvent((ori, info) => {\n    const {\n      onFocus,\n      style,\n      className: handleCls,\n      onKeyDown\n    } = ori.props;\n    // Point Color\n    const mergedStyle = Object.assign({}, style);\n    if (type === 'gradient') {\n      mergedStyle.background = getGradientPercentColor(colors, info.value);\n    }\n    return /*#__PURE__*/React.cloneElement(ori, {\n      onFocus: e => {\n        onActive === null || onActive === void 0 ? void 0 : onActive(info.index);\n        onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n      },\n      style: mergedStyle,\n      className: classNames(handleCls, {\n        [`${prefixCls}-slider-handle-active`]: activeIndex === info.index\n      }),\n      onKeyDown: e => {\n        if ((e.key === 'Delete' || e.key === 'Backspace') && onKeyDelete) {\n          onKeyDelete(info.index);\n        }\n        onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(e);\n      }\n    });\n  });\n  const sliderContext = React.useMemo(() => ({\n    direction: 'ltr',\n    handleRender\n  }), []);\n  // ============================ Render ============================\n  return /*#__PURE__*/React.createElement(SliderInternalContext.Provider, {\n    value: sliderContext\n  }, /*#__PURE__*/React.createElement(UnstableContext.Provider, {\n    value: unstableContext\n  }, /*#__PURE__*/React.createElement(Slider, Object.assign({}, sliderProps, {\n    className: classNames(className, `${prefixCls}-slider`),\n    tooltip: {\n      open: false\n    },\n    range: {\n      editable: range,\n      minCount: 2\n    },\n    styles: {\n      rail: {\n        background: linearCss\n      },\n      handle: pointColor ? {\n        background: pointColor\n      } : {}\n    },\n    classNames: {\n      rail: `${prefixCls}-slider-rail`,\n      handle: `${prefixCls}-slider-handle`\n    }\n  }))));\n};\nconst SingleColorSlider = props => {\n  const {\n    value,\n    onChange,\n    onChangeComplete\n  } = props;\n  const singleOnChange = v => onChange(v[0]);\n  const singleOnChangeComplete = v => onChangeComplete(v[0]);\n  return /*#__PURE__*/React.createElement(GradientColorSlider, Object.assign({}, props, {\n    value: [value],\n    onChange: singleOnChange,\n    onChangeComplete: singleOnChangeComplete\n  }));\n};\nexport default SingleColorSlider;","\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport { AggregationColor } from '../../color';\nimport { getGradientPercentColor } from '../../util';\nimport { GradientColorSlider } from '../ColorSlider';\nfunction sortColors(colors) {\n  return _toConsumableArray(colors).sort((a, b) => a.percent - b.percent);\n}\n/**\n * GradientColorBar will auto show when the mode is `gradient`.\n */\nconst GradientColorBar = props => {\n  const {\n    prefixCls,\n    mode,\n    onChange,\n    onChangeComplete,\n    onActive,\n    activeIndex,\n    onGradientDragging,\n    colors\n  } = props;\n  const isGradient = mode === 'gradient';\n  // ============================= Colors =============================\n  const colorList = React.useMemo(() => colors.map(info => ({\n    percent: info.percent,\n    color: info.color.toRgbString()\n  })), [colors]);\n  const values = React.useMemo(() => colorList.map(info => info.percent), [colorList]);\n  // ============================== Drag ==============================\n  const colorsRef = React.useRef(colorList);\n  // Record current colors\n  const onDragStart = ({\n    rawValues,\n    draggingIndex,\n    draggingValue\n  }) => {\n    if (rawValues.length > colorList.length) {\n      // Add new node\n      const newPointColor = getGradientPercentColor(colorList, draggingValue);\n      const nextColors = _toConsumableArray(colorList);\n      nextColors.splice(draggingIndex, 0, {\n        percent: draggingValue,\n        color: newPointColor\n      });\n      colorsRef.current = nextColors;\n    } else {\n      colorsRef.current = colorList;\n    }\n    onGradientDragging(true);\n    onChange(new AggregationColor(sortColors(colorsRef.current)), true);\n  };\n  // Adjust color when dragging\n  const onDragChange = ({\n    deleteIndex,\n    draggingIndex,\n    draggingValue\n  }) => {\n    let nextColors = _toConsumableArray(colorsRef.current);\n    if (deleteIndex !== -1) {\n      nextColors.splice(deleteIndex, 1);\n    } else {\n      nextColors[draggingIndex] = Object.assign(Object.assign({}, nextColors[draggingIndex]), {\n        percent: draggingValue\n      });\n      nextColors = sortColors(nextColors);\n    }\n    onChange(new AggregationColor(nextColors), true);\n  };\n  // ============================== Key ===============================\n  const onKeyDelete = index => {\n    const nextColors = _toConsumableArray(colorList);\n    nextColors.splice(index, 1);\n    const nextColor = new AggregationColor(nextColors);\n    onChange(nextColor);\n    onChangeComplete(nextColor);\n  };\n  // ============================= Change =============================\n  const onInternalChangeComplete = nextValues => {\n    onChangeComplete(new AggregationColor(colorList));\n    // Reset `activeIndex` if out of range\n    if (activeIndex >= nextValues.length) {\n      onActive(nextValues.length - 1);\n    }\n    onGradientDragging(false);\n  };\n  // ============================= Render =============================\n  if (!isGradient) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(GradientColorSlider, {\n    min: 0,\n    max: 100,\n    prefixCls: prefixCls,\n    className: `${prefixCls}-gradient-slider`,\n    colors: colorList,\n    color: null,\n    value: values,\n    range: true,\n    onChangeComplete: onInternalChangeComplete,\n    disabled: false,\n    type: \"gradient\",\n    // Active\n    activeIndex: activeIndex,\n    onActive: onActive,\n    // Drag\n    onDragStart: onDragStart,\n    onDragChange: onDragChange,\n    onKeyDelete: onKeyDelete\n  });\n};\nexport default /*#__PURE__*/React.memo(GradientColorBar);","\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { useContext } from 'react';\nimport RcColorPicker from '@rc-component/color-picker';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport Segmented from '../../../segmented';\nimport { AggregationColor } from '../../color';\nimport { PanelPickerContext } from '../../context';\nimport { genAlphaColor, generateColor } from '../../util';\nimport ColorClear from '../ColorClear';\nimport ColorInput from '../ColorInput';\nimport ColorSlider from '../ColorSlider';\nimport GradientColorBar from './GradientColorBar';\nconst components = {\n  slider: ColorSlider\n};\nconst PanelPicker = () => {\n  const panelPickerContext = useContext(PanelPickerContext);\n  const {\n      mode,\n      onModeChange,\n      modeOptions,\n      prefixCls,\n      allowClear,\n      value,\n      disabledAlpha,\n      onChange,\n      onClear,\n      onChangeComplete,\n      activeIndex,\n      gradientDragging\n    } = panelPickerContext,\n    injectProps = __rest(panelPickerContext, [\"mode\", \"onModeChange\", \"modeOptions\", \"prefixCls\", \"allowClear\", \"value\", \"disabledAlpha\", \"onChange\", \"onClear\", \"onChangeComplete\", \"activeIndex\", \"gradientDragging\"]);\n  // ============================ Colors ============================\n  const colors = React.useMemo(() => {\n    if (!value.cleared) {\n      return value.getColors();\n    }\n    return [{\n      percent: 0,\n      color: new AggregationColor('')\n    }, {\n      percent: 100,\n      color: new AggregationColor('')\n    }];\n  }, [value]);\n  // ========================= Single Color =========================\n  const isSingle = !value.isGradient();\n  // We cache the point color in case user drag the gradient point across another one\n  const [lockedColor, setLockedColor] = React.useState(value);\n  // Use layout effect here since `useEffect` will cause a blink when mouseDown\n  useLayoutEffect(() => {\n    var _a;\n    if (!isSingle) {\n      setLockedColor((_a = colors[activeIndex]) === null || _a === void 0 ? void 0 : _a.color);\n    }\n  }, [gradientDragging, activeIndex]);\n  const activeColor = React.useMemo(() => {\n    var _a;\n    if (isSingle) {\n      return value;\n    }\n    // Use cache when dragging. User can not operation panel when dragging.\n    if (gradientDragging) {\n      return lockedColor;\n    }\n    return (_a = colors[activeIndex]) === null || _a === void 0 ? void 0 : _a.color;\n  }, [value, activeIndex, isSingle, lockedColor, gradientDragging]);\n  // ========================= Picker Color =========================\n  const [pickerColor, setPickerColor] = React.useState(activeColor);\n  const [forceSync, setForceSync] = React.useState(0);\n  const mergedPickerColor = (pickerColor === null || pickerColor === void 0 ? void 0 : pickerColor.equals(activeColor)) ? activeColor : pickerColor;\n  useLayoutEffect(() => {\n    setPickerColor(activeColor);\n  }, [forceSync, activeColor === null || activeColor === void 0 ? void 0 : activeColor.toHexString()]);\n  // ============================ Change ============================\n  const fillColor = (nextColor, info) => {\n    let submitColor = generateColor(nextColor);\n    // Fill alpha color to 100% if origin is cleared color\n    if (value.cleared) {\n      const rgb = submitColor.toRgb();\n      // Auto fill color if origin is `0/0/0` to enhance user experience\n      if (!rgb.r && !rgb.g && !rgb.b && info) {\n        const {\n          type: infoType,\n          value: infoValue = 0\n        } = info;\n        submitColor = new AggregationColor({\n          h: infoType === 'hue' ? infoValue : 0,\n          s: 1,\n          b: 1,\n          a: infoType === 'alpha' ? infoValue / 100 : 1\n        });\n      } else {\n        submitColor = genAlphaColor(submitColor);\n      }\n    }\n    if (mode === 'single') {\n      return submitColor;\n    }\n    const nextColors = _toConsumableArray(colors);\n    nextColors[activeIndex] = Object.assign(Object.assign({}, nextColors[activeIndex]), {\n      color: submitColor\n    });\n    return new AggregationColor(nextColors);\n  };\n  const onPickerChange = (colorValue, fromPicker, info) => {\n    const nextColor = fillColor(colorValue, info);\n    setPickerColor(nextColor.isGradient() ? nextColor.getColors()[activeIndex].color : nextColor);\n    onChange(nextColor, fromPicker);\n  };\n  const onInternalChangeComplete = (nextColor, info) => {\n    // Trigger complete event\n    onChangeComplete(fillColor(nextColor, info));\n    // Back of origin color in case in controlled\n    // This will set after `onChangeComplete` to avoid `setState` trigger rerender\n    // which will make `fillColor` get wrong `color.cleared` state\n    setForceSync(ori => ori + 1);\n  };\n  const onInputChange = colorValue => {\n    onChange(fillColor(colorValue));\n  };\n  // ============================ Render ============================\n  // Operation bar\n  let operationNode = null;\n  const showMode = modeOptions.length > 1;\n  if (allowClear || showMode) {\n    operationNode = /*#__PURE__*/React.createElement(\"div\", {\n      className: `${prefixCls}-operation`\n    }, showMode && (/*#__PURE__*/React.createElement(Segmented, {\n      size: \"small\",\n      options: modeOptions,\n      value: mode,\n      onChange: onModeChange\n    })), /*#__PURE__*/React.createElement(ColorClear, Object.assign({\n      prefixCls: prefixCls,\n      value: value,\n      onChange: clearColor => {\n        onChange(clearColor);\n        onClear === null || onClear === void 0 ? void 0 : onClear();\n      }\n    }, injectProps)));\n  }\n  // Return\n  return /*#__PURE__*/React.createElement(React.Fragment, null, operationNode, /*#__PURE__*/React.createElement(GradientColorBar, Object.assign({}, panelPickerContext, {\n    colors: colors\n  })), /*#__PURE__*/React.createElement(RcColorPicker, {\n    prefixCls: prefixCls,\n    value: mergedPickerColor === null || mergedPickerColor === void 0 ? void 0 : mergedPickerColor.toHsb(),\n    disabledAlpha: disabledAlpha,\n    onChange: (colorValue, info) => {\n      onPickerChange(colorValue, true, info);\n    },\n    onChangeComplete: (colorValue, info) => {\n      onInternalChangeComplete(colorValue, info);\n    },\n    components: components\n  }), /*#__PURE__*/React.createElement(ColorInput, Object.assign({\n    value: activeColor,\n    onChange: onInputChange,\n    prefixCls: prefixCls,\n    disabledAlpha: disabledAlpha\n  }, injectProps)));\n};\nexport default PanelPicker;","\"use client\";\n\nimport React, { useContext } from 'react';\nimport { PanelPresetsContext } from '../context';\nimport ColorPresets from './ColorPresets';\nconst PanelPresets = () => {\n  const {\n    prefixCls,\n    value,\n    presets,\n    onChange\n  } = useContext(PanelPresetsContext);\n  return Array.isArray(presets) ? (/*#__PURE__*/React.createElement(ColorPresets, {\n    value: value,\n    presets: presets,\n    prefixCls: prefixCls,\n    onChange: onChange\n  })) : null;\n};\nexport default PanelPresets;","\"use client\";\n\nimport React from 'react';\nimport Divider from '../divider';\nimport PanelPicker from './components/PanelPicker';\nimport PanelPresets from './components/PanelPresets';\nimport { PanelPickerContext, PanelPresetsContext } from './context';\nconst ColorPickerPanel = props => {\n  const {\n    prefixCls,\n    presets,\n    panelRender,\n    value,\n    onChange,\n    onClear,\n    allowClear,\n    disabledAlpha,\n    mode,\n    onModeChange,\n    modeOptions,\n    onChangeComplete,\n    activeIndex,\n    onActive,\n    format,\n    onFormatChange,\n    gradientDragging,\n    onGradientDragging,\n    disabledFormat\n  } = props;\n  const colorPickerPanelPrefixCls = `${prefixCls}-inner`;\n  // ===================== Context ======================\n  const panelContext = React.useMemo(() => ({\n    prefixCls,\n    value,\n    onChange,\n    onClear,\n    allowClear,\n    disabledAlpha,\n    mode,\n    onModeChange,\n    modeOptions,\n    onChangeComplete,\n    activeIndex,\n    onActive,\n    format,\n    onFormatChange,\n    gradientDragging,\n    onGradientDragging,\n    disabledFormat\n  }), [prefixCls, value, onChange, onClear, allowClear, disabledAlpha, mode, onModeChange, modeOptions, onChangeComplete, activeIndex, onActive, format, onFormatChange, gradientDragging, onGradientDragging, disabledFormat]);\n  const presetContext = React.useMemo(() => ({\n    prefixCls,\n    value,\n    presets,\n    onChange\n  }), [prefixCls, value, presets, onChange]);\n  // ====================== Render ======================\n  const innerPanel = /*#__PURE__*/React.createElement(\"div\", {\n    className: `${colorPickerPanelPrefixCls}-content`\n  }, /*#__PURE__*/React.createElement(PanelPicker, null), Array.isArray(presets) && /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(PanelPresets, null));\n  return /*#__PURE__*/React.createElement(PanelPickerContext.Provider, {\n    value: panelContext\n  }, /*#__PURE__*/React.createElement(PanelPresetsContext.Provider, {\n    value: presetContext\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: colorPickerPanelPrefixCls\n  }, typeof panelRender === 'function' ? panelRender(innerPanel, {\n    components: {\n      Picker: PanelPicker,\n      Presets: PanelPresets\n    }\n  }) : innerPanel)));\n};\nif (process.env.NODE_ENV !== 'production') {\n  ColorPickerPanel.displayName = 'ColorPickerPanel';\n}\nexport default ColorPickerPanel;","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { forwardRef, useMemo } from 'react';\nimport { ColorBlock } from '@rc-component/color-picker';\nimport classNames from 'classnames';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport { useLocale } from '../../locale';\nimport { getColorAlpha } from '../util';\nimport ColorClear from './ColorClear';\nconst ColorTrigger = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n      color,\n      prefixCls,\n      open,\n      disabled,\n      format,\n      className,\n      showText,\n      activeIndex\n    } = props,\n    rest = __rest(props, [\"color\", \"prefixCls\", \"open\", \"disabled\", \"format\", \"className\", \"showText\", \"activeIndex\"]);\n  const colorTriggerPrefixCls = `${prefixCls}-trigger`;\n  const colorTextPrefixCls = `${colorTriggerPrefixCls}-text`;\n  const colorTextCellPrefixCls = `${colorTextPrefixCls}-cell`;\n  const [locale] = useLocale('ColorPicker');\n  // ============================== Text ==============================\n  const desc = React.useMemo(() => {\n    if (!showText) {\n      return '';\n    }\n    if (typeof showText === 'function') {\n      return showText(color);\n    }\n    if (color.cleared) {\n      return locale.transparent;\n    }\n    if (color.isGradient()) {\n      return color.getColors().map((c, index) => {\n        const inactive = activeIndex !== -1 && activeIndex !== index;\n        return /*#__PURE__*/React.createElement(\"span\", {\n          key: index,\n          className: classNames(colorTextCellPrefixCls, inactive && `${colorTextCellPrefixCls}-inactive`)\n        }, c.color.toRgbString(), \" \", c.percent, \"%\");\n      });\n    }\n    const hexString = color.toHexString().toUpperCase();\n    const alpha = getColorAlpha(color);\n    switch (format) {\n      case 'rgb':\n        return color.toRgbString();\n      case 'hsb':\n        return color.toHsbString();\n      // case 'hex':\n      default:\n        return alpha < 100 ? `${hexString.slice(0, 7)},${alpha}%` : hexString;\n    }\n  }, [color, format, showText, activeIndex]);\n  // ============================= Render =============================\n  const containerNode = useMemo(() => color.cleared ? (/*#__PURE__*/React.createElement(ColorClear, {\n    prefixCls: prefixCls\n  })) : (/*#__PURE__*/React.createElement(ColorBlock, {\n    prefixCls: prefixCls,\n    color: color.toCssString()\n  })), [color, prefixCls]);\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    ref: ref,\n    className: classNames(colorTriggerPrefixCls, className, {\n      [`${colorTriggerPrefixCls}-active`]: open,\n      [`${colorTriggerPrefixCls}-disabled`]: disabled\n    })\n  }, pickAttrs(rest)), containerNode, showText && /*#__PURE__*/React.createElement(\"div\", {\n    className: colorTextPrefixCls\n  }, desc));\n});\nexport default ColorTrigger;","import * as React from 'react';\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport { useLocale } from '../../locale';\nimport { generateColor } from '../util';\n/**\n * Combine the `color` and `mode` to make sure sync of state.\n */\nexport default function useModeColor(defaultValue, value, mode) {\n  const [locale] = useLocale('ColorPicker');\n  // ======================== Base ========================\n  // Color\n  const [mergedColor, setMergedColor] = useMergedState(defaultValue, {\n    value\n  });\n  // Mode\n  const [modeState, setModeState] = React.useState('single');\n  const [modeOptionList, modeSet] = React.useMemo(() => {\n    const list = (Array.isArray(mode) ? mode : [mode]).filter(m => m);\n    if (!list.length) {\n      list.push('single');\n    }\n    const modes = new Set(list);\n    const optionList = [];\n    const pushOption = (modeType, localeTxt) => {\n      if (modes.has(modeType)) {\n        optionList.push({\n          label: localeTxt,\n          value: modeType\n        });\n      }\n    };\n    pushOption('single', locale.singleColor);\n    pushOption('gradient', locale.gradientColor);\n    return [optionList, modes];\n  }, [mode]);\n  // ======================== Post ========================\n  // We need align `mode` with `color` state\n  // >>>>> Color\n  const [cacheColor, setCacheColor] = React.useState(null);\n  const setColor = useEvent(nextColor => {\n    setCacheColor(nextColor);\n    setMergedColor(nextColor);\n  });\n  const postColor = React.useMemo(() => {\n    const colorObj = generateColor(mergedColor || '');\n    // Use `cacheColor` in case the color is `cleared`\n    return colorObj.equals(cacheColor) ? cacheColor : colorObj;\n  }, [mergedColor, cacheColor]);\n  // >>>>> Mode\n  const postMode = React.useMemo(() => {\n    var _a;\n    if (modeSet.has(modeState)) {\n      return modeState;\n    }\n    return (_a = modeOptionList[0]) === null || _a === void 0 ? void 0 : _a.value;\n  }, [modeSet, modeState, modeOptionList]);\n  // ======================= Effect =======================\n  // Dynamic update mode when color change\n  React.useEffect(() => {\n    setModeState(postColor.isGradient() ? 'gradient' : 'single');\n  }, [postColor]);\n  // ======================= Return =======================\n  return [postColor, setColor, postMode, setModeState, modeOptionList];\n}","import { unit } from '@ant-design/cssinjs';\n/**\n * @private Internal usage only\n * see: https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/conic-gradient#checkerboard\n */\nexport const getTransBg = (size, colorFill) => ({\n  backgroundImage: `conic-gradient(${colorFill} 25%, transparent 25% 50%, ${colorFill} 50% 75%, transparent 75% 100%)`,\n  backgroundSize: `${size} ${size}`\n});\nconst genColorBlockStyle = (token, size) => {\n  const {\n    componentCls,\n    borderRadiusSM,\n    colorPickerInsetShadow,\n    lineWidth,\n    colorFillSecondary\n  } = token;\n  return {\n    [`${componentCls}-color-block`]: Object.assign(Object.assign({\n      position: 'relative',\n      borderRadius: borderRadiusSM,\n      width: size,\n      height: size,\n      boxShadow: colorPickerInsetShadow,\n      flex: 'none'\n    }, getTransBg('50%', token.colorFillSecondary)), {\n      [`${componentCls}-color-block-inner`]: {\n        width: '100%',\n        height: '100%',\n        boxShadow: `inset 0 0 0 ${unit(lineWidth)} ${colorFillSecondary}`,\n        borderRadius: 'inherit'\n      }\n    })\n  };\n};\nexport default genColorBlockStyle;","import { unit } from '@ant-design/cssinjs';\nconst genInputStyle = token => {\n  const {\n    componentCls,\n    antCls,\n    fontSizeSM,\n    lineHeightSM,\n    colorPickerAlphaInputWidth,\n    marginXXS,\n    paddingXXS,\n    controlHeightSM,\n    marginXS,\n    fontSizeIcon,\n    paddingXS,\n    colorTextPlaceholder,\n    colorPickerInputNumberHandleWidth,\n    lineWidth\n  } = token;\n  return {\n    [`${componentCls}-input-container`]: {\n      display: 'flex',\n      [`${componentCls}-steppers${antCls}-input-number`]: {\n        fontSize: fontSizeSM,\n        lineHeight: lineHeightSM,\n        [`${antCls}-input-number-input`]: {\n          paddingInlineStart: paddingXXS,\n          paddingInlineEnd: 0\n        },\n        [`${antCls}-input-number-handler-wrap`]: {\n          width: colorPickerInputNumberHandleWidth\n        }\n      },\n      [`${componentCls}-steppers${componentCls}-alpha-input`]: {\n        flex: `0 0 ${unit(colorPickerAlphaInputWidth)}`,\n        marginInlineStart: marginXXS\n      },\n      [`${componentCls}-format-select${antCls}-select`]: {\n        marginInlineEnd: marginXS,\n        width: 'auto',\n        '&-single': {\n          [`${antCls}-select-selector`]: {\n            padding: 0,\n            border: 0\n          },\n          [`${antCls}-select-arrow`]: {\n            insetInlineEnd: 0\n          },\n          [`${antCls}-select-selection-item`]: {\n            paddingInlineEnd: token.calc(fontSizeIcon).add(marginXXS).equal(),\n            fontSize: fontSizeSM,\n            lineHeight: unit(controlHeightSM)\n          },\n          [`${antCls}-select-item-option-content`]: {\n            fontSize: fontSizeSM,\n            lineHeight: lineHeightSM\n          },\n          [`${antCls}-select-dropdown`]: {\n            [`${antCls}-select-item`]: {\n              minHeight: 'auto'\n            }\n          }\n        }\n      },\n      [`${componentCls}-input`]: {\n        gap: marginXXS,\n        alignItems: 'center',\n        flex: 1,\n        width: 0,\n        [`${componentCls}-hsb-input,${componentCls}-rgb-input`]: {\n          display: 'flex',\n          gap: marginXXS,\n          alignItems: 'center'\n        },\n        [`${componentCls}-steppers`]: {\n          flex: 1\n        },\n        [`${componentCls}-hex-input${antCls}-input-affix-wrapper`]: {\n          flex: 1,\n          padding: `0 ${unit(paddingXS)}`,\n          [`${antCls}-input`]: {\n            fontSize: fontSizeSM,\n            textTransform: 'uppercase',\n            lineHeight: unit(token.calc(controlHeightSM).sub(token.calc(lineWidth).mul(2)).equal())\n          },\n          [`${antCls}-input-prefix`]: {\n            color: colorTextPlaceholder\n          }\n        }\n      }\n    }\n  };\n};\nexport default genInputStyle;","import { unit } from '@ant-design/cssinjs';\nconst genPickerStyle = token => {\n  const {\n    componentCls,\n    controlHeightLG,\n    borderRadiusSM,\n    colorPickerInsetShadow,\n    marginSM,\n    colorBgElevated,\n    colorFillSecondary,\n    lineWidthBold,\n    colorPickerHandlerSize\n  } = token;\n  return {\n    userSelect: 'none',\n    [`${componentCls}-select`]: {\n      [`${componentCls}-palette`]: {\n        minHeight: token.calc(controlHeightLG).mul(4).equal(),\n        overflow: 'hidden',\n        borderRadius: borderRadiusSM\n      },\n      [`${componentCls}-saturation`]: {\n        position: 'absolute',\n        borderRadius: 'inherit',\n        boxShadow: colorPickerInsetShadow,\n        inset: 0\n      },\n      marginBottom: marginSM\n    },\n    // ======================== Panel =========================\n    [`${componentCls}-handler`]: {\n      width: colorPickerHandlerSize,\n      height: colorPickerHandlerSize,\n      border: `${unit(lineWidthBold)} solid ${colorBgElevated}`,\n      position: 'relative',\n      borderRadius: '50%',\n      cursor: 'pointer',\n      boxShadow: `${colorPickerInsetShadow}, 0 0 0 1px ${colorFillSecondary}`\n    }\n  };\n};\nexport default genPickerStyle;","import { unit } from '@ant-design/cssinjs';\nconst genPresetsStyle = token => {\n  const {\n    componentCls,\n    antCls,\n    colorTextQuaternary,\n    paddingXXS,\n    colorPickerPresetColorSize,\n    fontSizeSM,\n    colorText,\n    lineHeightSM,\n    lineWidth,\n    borderRadius,\n    colorFill,\n    colorWhite,\n    marginXXS,\n    paddingXS,\n    fontHeightSM\n  } = token;\n  return {\n    [`${componentCls}-presets`]: {\n      [`${antCls}-collapse-item > ${antCls}-collapse-header`]: {\n        padding: 0,\n        [`${antCls}-collapse-expand-icon`]: {\n          height: fontHeightSM,\n          color: colorTextQuaternary,\n          paddingInlineEnd: paddingXXS\n        }\n      },\n      [`${antCls}-collapse`]: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: marginXXS\n      },\n      [`${antCls}-collapse-item > ${antCls}-collapse-content > ${antCls}-collapse-content-box`]: {\n        padding: `${unit(paddingXS)} 0`\n      },\n      '&-label': {\n        fontSize: fontSizeSM,\n        color: colorText,\n        lineHeight: lineHeightSM\n      },\n      '&-items': {\n        display: 'flex',\n        flexWrap: 'wrap',\n        gap: token.calc(marginXXS).mul(1.5).equal(),\n        [`${componentCls}-presets-color`]: {\n          position: 'relative',\n          cursor: 'pointer',\n          width: colorPickerPresetColorSize,\n          height: colorPickerPresetColorSize,\n          '&::before': {\n            content: '\"\"',\n            pointerEvents: 'none',\n            width: token.calc(colorPickerPresetColorSize).add(token.calc(lineWidth).mul(4)).equal(),\n            height: token.calc(colorPickerPresetColorSize).add(token.calc(lineWidth).mul(4)).equal(),\n            position: 'absolute',\n            top: token.calc(lineWidth).mul(-2).equal(),\n            insetInlineStart: token.calc(lineWidth).mul(-2).equal(),\n            borderRadius,\n            border: `${unit(lineWidth)} solid transparent`,\n            transition: `border-color ${token.motionDurationMid} ${token.motionEaseInBack}`\n          },\n          '&:hover::before': {\n            borderColor: colorFill\n          },\n          '&::after': {\n            boxSizing: 'border-box',\n            position: 'absolute',\n            top: '50%',\n            insetInlineStart: '21.5%',\n            display: 'table',\n            width: token.calc(colorPickerPresetColorSize).div(13).mul(5).equal(),\n            height: token.calc(colorPickerPresetColorSize).div(13).mul(8).equal(),\n            border: `${unit(token.lineWidthBold)} solid ${token.colorWhite}`,\n            borderTop: 0,\n            borderInlineStart: 0,\n            transform: 'rotate(45deg) scale(0) translate(-50%,-50%)',\n            opacity: 0,\n            content: '\"\"',\n            transition: `all ${token.motionDurationFast} ${token.motionEaseInBack}, opacity ${token.motionDurationFast}`\n          },\n          [`&${componentCls}-presets-color-checked`]: {\n            '&::after': {\n              opacity: 1,\n              borderColor: colorWhite,\n              transform: 'rotate(45deg) scale(1) translate(-50%,-50%)',\n              transition: `transform ${token.motionDurationMid} ${token.motionEaseOutBack} ${token.motionDurationFast}`\n            },\n            [`&${componentCls}-presets-color-bright`]: {\n              '&::after': {\n                borderColor: 'rgba(0, 0, 0, 0.45)'\n              }\n            }\n          }\n        }\n      },\n      '&-empty': {\n        fontSize: fontSizeSM,\n        color: colorTextQuaternary\n      }\n    }\n  };\n};\nexport default genPresetsStyle;","import { unit } from '@ant-design/cssinjs';\nimport { getTransBg } from './color-block';\nconst genSliderStyle = token => {\n  const {\n    componentCls,\n    colorPickerInsetShadow,\n    colorBgElevated,\n    colorFillSecondary,\n    lineWidthBold,\n    colorPickerHandlerSizeSM,\n    colorPickerSliderHeight,\n    marginSM,\n    marginXS\n  } = token;\n  const handleInnerSize = token.calc(colorPickerHandlerSizeSM).sub(token.calc(lineWidthBold).mul(2).equal()).equal();\n  const handleHoverSize = token.calc(colorPickerHandlerSizeSM).add(token.calc(lineWidthBold).mul(2).equal()).equal();\n  const activeHandleStyle = {\n    '&:after': {\n      transform: 'scale(1)',\n      boxShadow: `${colorPickerInsetShadow}, 0 0 0 1px ${token.colorPrimaryActive}`\n    }\n  };\n  return {\n    // ======================== Slider ========================\n    [`${componentCls}-slider`]: [getTransBg(unit(colorPickerSliderHeight), token.colorFillSecondary), {\n      margin: 0,\n      padding: 0,\n      height: colorPickerSliderHeight,\n      borderRadius: token.calc(colorPickerSliderHeight).div(2).equal(),\n      '&-rail': {\n        height: colorPickerSliderHeight,\n        borderRadius: token.calc(colorPickerSliderHeight).div(2).equal(),\n        boxShadow: colorPickerInsetShadow\n      },\n      [`& ${componentCls}-slider-handle`]: {\n        width: handleInnerSize,\n        height: handleInnerSize,\n        top: 0,\n        borderRadius: '100%',\n        '&:before': {\n          display: 'block',\n          position: 'absolute',\n          background: 'transparent',\n          left: {\n            _skip_check_: true,\n            value: '50%'\n          },\n          top: '50%',\n          transform: 'translate(-50%, -50%)',\n          width: handleHoverSize,\n          height: handleHoverSize,\n          borderRadius: '100%'\n        },\n        '&:after': {\n          width: colorPickerHandlerSizeSM,\n          height: colorPickerHandlerSizeSM,\n          border: `${unit(lineWidthBold)} solid ${colorBgElevated}`,\n          boxShadow: `${colorPickerInsetShadow}, 0 0 0 1px ${colorFillSecondary}`,\n          outline: 'none',\n          insetInlineStart: token.calc(lineWidthBold).mul(-1).equal(),\n          top: token.calc(lineWidthBold).mul(-1).equal(),\n          background: 'transparent',\n          transition: 'none'\n        },\n        '&:focus': activeHandleStyle\n      }\n    }],\n    // ======================== Layout ========================\n    [`${componentCls}-slider-container`]: {\n      display: 'flex',\n      gap: marginSM,\n      marginBottom: marginSM,\n      // Group\n      [`${componentCls}-slider-group`]: {\n        flex: 1,\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        display: 'flex',\n        '&-disabled-alpha': {\n          justifyContent: 'center'\n        }\n      }\n    },\n    [`${componentCls}-gradient-slider`]: {\n      marginBottom: marginXS,\n      [`& ${componentCls}-slider-handle`]: {\n        '&:after': {\n          transform: 'scale(0.8)'\n        },\n        '&-active, &:focus': activeHandleStyle\n      }\n    }\n  };\n};\nexport default genSliderStyle;","import { unit } from '@ant-design/cssinjs';\nimport { genCompactItemStyle } from '../../style/compact-item';\nimport { genStyleHooks, mergeToken } from '../../theme/internal';\nimport genColorBlockStyle from './color-block';\nimport genInputStyle from './input';\nimport genPickerStyle from './picker';\nimport genPresetsStyle from './presets';\nimport genSliderStyle from './slider';\nexport const genActiveStyle = (token, borderColor, outlineColor) => ({\n  borderInlineEndWidth: token.lineWidth,\n  borderColor,\n  boxShadow: `0 0 0 ${unit(token.controlOutlineWidth)} ${outlineColor}`,\n  outline: 0\n});\nconst genRtlStyle = token => {\n  const {\n    componentCls\n  } = token;\n  return {\n    '&-rtl': {\n      [`${componentCls}-presets-color`]: {\n        '&::after': {\n          direction: 'ltr'\n        }\n      },\n      [`${componentCls}-clear`]: {\n        '&::after': {\n          direction: 'ltr'\n        }\n      }\n    }\n  };\n};\nconst genClearStyle = (token, size, extraStyle) => {\n  const {\n    componentCls,\n    borderRadiusSM,\n    lineWidth,\n    colorSplit,\n    colorBorder,\n    red6\n  } = token;\n  return {\n    [`${componentCls}-clear`]: Object.assign(Object.assign({\n      width: size,\n      height: size,\n      borderRadius: borderRadiusSM,\n      border: `${unit(lineWidth)} solid ${colorSplit}`,\n      position: 'relative',\n      overflow: 'hidden',\n      cursor: 'inherit',\n      transition: `all ${token.motionDurationFast}`\n    }, extraStyle), {\n      '&::after': {\n        content: '\"\"',\n        position: 'absolute',\n        insetInlineEnd: token.calc(lineWidth).mul(-1).equal(),\n        top: token.calc(lineWidth).mul(-1).equal(),\n        display: 'block',\n        width: 40,\n        // maximum\n        height: 2,\n        // fixed\n        transformOrigin: `calc(100% - 1px) 1px`,\n        transform: 'rotate(-45deg)',\n        backgroundColor: red6\n      },\n      '&:hover': {\n        borderColor: colorBorder\n      }\n    })\n  };\n};\nconst genStatusStyle = token => {\n  const {\n    componentCls,\n    colorError,\n    colorWarning,\n    colorErrorHover,\n    colorWarningHover,\n    colorErrorOutline,\n    colorWarningOutline\n  } = token;\n  return {\n    [`&${componentCls}-status-error`]: {\n      borderColor: colorError,\n      '&:hover': {\n        borderColor: colorErrorHover\n      },\n      [`&${componentCls}-trigger-active`]: Object.assign({}, genActiveStyle(token, colorError, colorErrorOutline))\n    },\n    [`&${componentCls}-status-warning`]: {\n      borderColor: colorWarning,\n      '&:hover': {\n        borderColor: colorWarningHover\n      },\n      [`&${componentCls}-trigger-active`]: Object.assign({}, genActiveStyle(token, colorWarning, colorWarningOutline))\n    }\n  };\n};\nconst genSizeStyle = token => {\n  const {\n    componentCls,\n    controlHeightLG,\n    controlHeightSM,\n    controlHeight,\n    controlHeightXS,\n    borderRadius,\n    borderRadiusSM,\n    borderRadiusXS,\n    borderRadiusLG,\n    fontSizeLG\n  } = token;\n  return {\n    [`&${componentCls}-lg`]: {\n      minWidth: controlHeightLG,\n      minHeight: controlHeightLG,\n      borderRadius: borderRadiusLG,\n      [`${componentCls}-color-block, ${componentCls}-clear`]: {\n        width: controlHeight,\n        height: controlHeight,\n        borderRadius\n      },\n      [`${componentCls}-trigger-text`]: {\n        fontSize: fontSizeLG\n      }\n    },\n    [`&${componentCls}-sm`]: {\n      minWidth: controlHeightSM,\n      minHeight: controlHeightSM,\n      borderRadius: borderRadiusSM,\n      [`${componentCls}-color-block, ${componentCls}-clear`]: {\n        width: controlHeightXS,\n        height: controlHeightXS,\n        borderRadius: borderRadiusXS\n      },\n      [`${componentCls}-trigger-text`]: {\n        lineHeight: unit(controlHeightXS)\n      }\n    }\n  };\n};\nconst genColorPickerStyle = token => {\n  const {\n    antCls,\n    componentCls,\n    colorPickerWidth,\n    colorPrimary,\n    motionDurationMid,\n    colorBgElevated,\n    colorTextDisabled,\n    colorText,\n    colorBgContainerDisabled,\n    borderRadius,\n    marginXS,\n    marginSM,\n    controlHeight,\n    controlHeightSM,\n    colorBgTextActive,\n    colorPickerPresetColorSize,\n    colorPickerPreviewSize,\n    lineWidth,\n    colorBorder,\n    paddingXXS,\n    fontSize,\n    colorPrimaryHover,\n    controlOutline\n  } = token;\n  return [{\n    [componentCls]: Object.assign({\n      [`${componentCls}-inner`]: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({\n        '&-content': {\n          display: 'flex',\n          flexDirection: 'column',\n          width: colorPickerWidth,\n          [`& > ${antCls}-divider`]: {\n            margin: `${unit(marginSM)} 0 ${unit(marginXS)}`\n          }\n        },\n        [`${componentCls}-panel`]: Object.assign({}, genPickerStyle(token))\n      }, genSliderStyle(token)), genColorBlockStyle(token, colorPickerPreviewSize)), genInputStyle(token)), genPresetsStyle(token)), genClearStyle(token, colorPickerPresetColorSize, {\n        marginInlineStart: 'auto'\n      })), {\n        // Operation bar\n        [`${componentCls}-operation`]: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginBottom: marginXS\n        }\n      }),\n      '&-trigger': Object.assign(Object.assign(Object.assign(Object.assign({\n        minWidth: controlHeight,\n        minHeight: controlHeight,\n        borderRadius,\n        border: `${unit(lineWidth)} solid ${colorBorder}`,\n        cursor: 'pointer',\n        display: 'inline-flex',\n        alignItems: 'flex-start',\n        justifyContent: 'center',\n        transition: `all ${motionDurationMid}`,\n        background: colorBgElevated,\n        padding: token.calc(paddingXXS).sub(lineWidth).equal(),\n        [`${componentCls}-trigger-text`]: {\n          marginInlineStart: marginXS,\n          marginInlineEnd: token.calc(marginXS).sub(token.calc(paddingXXS).sub(lineWidth)).equal(),\n          fontSize,\n          color: colorText,\n          alignSelf: 'center',\n          '&-cell': {\n            '&:not(:last-child):after': {\n              content: '\", \"'\n            },\n            '&-inactive': {\n              color: colorTextDisabled\n            }\n          }\n        },\n        '&:hover': {\n          borderColor: colorPrimaryHover\n        },\n        [`&${componentCls}-trigger-active`]: Object.assign({}, genActiveStyle(token, colorPrimary, controlOutline)),\n        '&-disabled': {\n          color: colorTextDisabled,\n          background: colorBgContainerDisabled,\n          cursor: 'not-allowed',\n          '&:hover': {\n            borderColor: colorBgTextActive\n          },\n          [`${componentCls}-trigger-text`]: {\n            color: colorTextDisabled\n          }\n        }\n      }, genClearStyle(token, controlHeightSM)), genColorBlockStyle(token, controlHeightSM)), genStatusStyle(token)), genSizeStyle(token))\n    }, genRtlStyle(token))\n  }, genCompactItemStyle(token, {\n    focusElCls: `${componentCls}-trigger-active`\n  })];\n};\nexport default genStyleHooks('ColorPicker', token => {\n  const {\n    colorTextQuaternary,\n    marginSM\n  } = token;\n  const colorPickerSliderHeight = 8;\n  const colorPickerToken = mergeToken(token, {\n    colorPickerWidth: 234,\n    colorPickerHandlerSize: 16,\n    colorPickerHandlerSizeSM: 12,\n    colorPickerAlphaInputWidth: 44,\n    colorPickerInputNumberHandleWidth: 16,\n    colorPickerPresetColorSize: 24,\n    colorPickerInsetShadow: `inset 0 0 1px 0 ${colorTextQuaternary}`,\n    colorPickerSliderHeight,\n    colorPickerPreviewSize: token.calc(colorPickerSliderHeight).mul(2).add(marginSM).equal()\n  });\n  return [genColorPickerStyle(colorPickerToken)];\n});","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { useContext, useMemo } from 'react';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport ContextIsolator from '../_util/ContextIsolator';\nimport genPurePanel from '../_util/PurePanel';\nimport { getStatusClassNames } from '../_util/statusUtils';\nimport { devUseWarning } from '../_util/warning';\nimport { ConfigContext } from '../config-provider/context';\nimport DisabledContext from '../config-provider/DisabledContext';\nimport useCSSVarCls from '../config-provider/hooks/useCSSVarCls';\nimport useSize from '../config-provider/hooks/useSize';\nimport { FormItemInputContext } from '../form/context';\nimport Popover from '../popover';\nimport { useCompactItemContext } from '../space/Compact';\nimport { AggregationColor } from './color';\nimport ColorPickerPanel from './ColorPickerPanel';\nimport ColorTrigger from './components/ColorTrigger';\nimport useModeColor from './hooks/useModeColor';\nimport useStyle from './style';\nimport { genAlphaColor, generateColor, getColorAlpha } from './util';\nconst ColorPicker = props => {\n  const {\n      mode,\n      value,\n      defaultValue,\n      format,\n      defaultFormat,\n      allowClear = false,\n      presets,\n      children,\n      trigger = 'click',\n      open,\n      disabled,\n      placement = 'bottomLeft',\n      arrow = true,\n      panelRender,\n      showText,\n      style,\n      className,\n      size: customizeSize,\n      rootClassName,\n      prefixCls: customizePrefixCls,\n      styles,\n      disabledAlpha = false,\n      onFormatChange,\n      onChange,\n      onClear,\n      onOpenChange,\n      onChangeComplete,\n      getPopupContainer,\n      autoAdjustOverflow = true,\n      destroyTooltipOnHide,\n      destroyOnHidden,\n      disabledFormat\n    } = props,\n    rest = __rest(props, [\"mode\", \"value\", \"defaultValue\", \"format\", \"defaultFormat\", \"allowClear\", \"presets\", \"children\", \"trigger\", \"open\", \"disabled\", \"placement\", \"arrow\", \"panelRender\", \"showText\", \"style\", \"className\", \"size\", \"rootClassName\", \"prefixCls\", \"styles\", \"disabledAlpha\", \"onFormatChange\", \"onChange\", \"onClear\", \"onOpenChange\", \"onChangeComplete\", \"getPopupContainer\", \"autoAdjustOverflow\", \"destroyTooltipOnHide\", \"destroyOnHidden\", \"disabledFormat\"]);\n  const {\n    getPrefixCls,\n    direction,\n    colorPicker\n  } = useContext(ConfigContext);\n  const contextDisabled = useContext(DisabledContext);\n  const mergedDisabled = disabled !== null && disabled !== void 0 ? disabled : contextDisabled;\n  const [popupOpen, setPopupOpen] = useMergedState(false, {\n    value: open,\n    postState: openData => !mergedDisabled && openData,\n    onChange: onOpenChange\n  });\n  const [formatValue, setFormatValue] = useMergedState(format, {\n    value: format,\n    defaultValue: defaultFormat,\n    onChange: onFormatChange\n  });\n  const prefixCls = getPrefixCls('color-picker', customizePrefixCls);\n  // ================== Value & Mode =================\n  const [mergedColor, setColor, modeState, setModeState, modeOptions] = useModeColor(defaultValue, value, mode);\n  const isAlphaColor = useMemo(() => getColorAlpha(mergedColor) < 100, [mergedColor]);\n  // ==================== Change =====================\n  // To enhance user experience, we cache the gradient color when switch from gradient to single\n  // If user not modify single color, we will use the cached gradient color.\n  const [cachedGradientColor, setCachedGradientColor] = React.useState(null);\n  const onInternalChangeComplete = color => {\n    if (onChangeComplete) {\n      let changeColor = generateColor(color);\n      // ignore alpha color\n      if (disabledAlpha && isAlphaColor) {\n        changeColor = genAlphaColor(color);\n      }\n      onChangeComplete(changeColor);\n    }\n  };\n  const onInternalChange = (data, changeFromPickerDrag) => {\n    let color = generateColor(data);\n    // ignore alpha color\n    if (disabledAlpha && isAlphaColor) {\n      color = genAlphaColor(color);\n    }\n    setColor(color);\n    setCachedGradientColor(null);\n    // Trigger change event\n    if (onChange) {\n      onChange(color, color.toCssString());\n    }\n    // Only for drag-and-drop color picking\n    if (!changeFromPickerDrag) {\n      onInternalChangeComplete(color);\n    }\n  };\n  // =================== Gradient ====================\n  const [activeIndex, setActiveIndex] = React.useState(0);\n  const [gradientDragging, setGradientDragging] = React.useState(false);\n  // Mode change should also trigger color change\n  const onInternalModeChange = newMode => {\n    setModeState(newMode);\n    if (newMode === 'single' && mergedColor.isGradient()) {\n      setActiveIndex(0);\n      onInternalChange(new AggregationColor(mergedColor.getColors()[0].color));\n      // Should after `onInternalChange` since it will clear the cached color\n      setCachedGradientColor(mergedColor);\n    } else if (newMode === 'gradient' && !mergedColor.isGradient()) {\n      const baseColor = isAlphaColor ? genAlphaColor(mergedColor) : mergedColor;\n      onInternalChange(new AggregationColor(cachedGradientColor || [{\n        percent: 0,\n        color: baseColor\n      }, {\n        percent: 100,\n        color: baseColor\n      }]));\n    }\n  };\n  // ================== Form Status ==================\n  const {\n    status: contextStatus\n  } = React.useContext(FormItemInputContext);\n  // ==================== Compact ====================\n  const {\n    compactSize,\n    compactItemClassnames\n  } = useCompactItemContext(prefixCls, direction);\n  // ===================== Style =====================\n  const mergedSize = useSize(ctx => {\n    var _a;\n    return (_a = customizeSize !== null && customizeSize !== void 0 ? customizeSize : compactSize) !== null && _a !== void 0 ? _a : ctx;\n  });\n  const rootCls = useCSSVarCls(prefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls, rootCls);\n  const rtlCls = {\n    [`${prefixCls}-rtl`]: direction\n  };\n  const mergedRootCls = classNames(rootClassName, cssVarCls, rootCls, rtlCls);\n  const mergedCls = classNames(getStatusClassNames(prefixCls, contextStatus), {\n    [`${prefixCls}-sm`]: mergedSize === 'small',\n    [`${prefixCls}-lg`]: mergedSize === 'large'\n  }, compactItemClassnames, colorPicker === null || colorPicker === void 0 ? void 0 : colorPicker.className, mergedRootCls, className, hashId);\n  const mergedPopupCls = classNames(prefixCls, mergedRootCls);\n  // ===================== Warning ======================\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('ColorPicker');\n    process.env.NODE_ENV !== \"production\" ? warning(!(disabledAlpha && isAlphaColor), 'usage', '`disabledAlpha` will make the alpha to be 100% when use alpha color.') : void 0;\n  }\n  const popoverProps = {\n    open: popupOpen,\n    trigger,\n    placement,\n    arrow,\n    rootClassName,\n    getPopupContainer,\n    autoAdjustOverflow,\n    destroyOnHidden: destroyOnHidden !== null && destroyOnHidden !== void 0 ? destroyOnHidden : !!destroyTooltipOnHide\n  };\n  const mergedStyle = Object.assign(Object.assign({}, colorPicker === null || colorPicker === void 0 ? void 0 : colorPicker.style), style);\n  // ============================ zIndex ============================\n  return wrapCSSVar(/*#__PURE__*/React.createElement(Popover, Object.assign({\n    style: styles === null || styles === void 0 ? void 0 : styles.popup,\n    styles: {\n      body: styles === null || styles === void 0 ? void 0 : styles.popupOverlayInner\n    },\n    onOpenChange: visible => {\n      if (!visible || !mergedDisabled) {\n        setPopupOpen(visible);\n      }\n    },\n    content: /*#__PURE__*/React.createElement(ContextIsolator, {\n      form: true\n    }, /*#__PURE__*/React.createElement(ColorPickerPanel, {\n      mode: modeState,\n      onModeChange: onInternalModeChange,\n      modeOptions: modeOptions,\n      prefixCls: prefixCls,\n      value: mergedColor,\n      allowClear: allowClear,\n      disabled: mergedDisabled,\n      disabledAlpha: disabledAlpha,\n      presets: presets,\n      panelRender: panelRender,\n      format: formatValue,\n      onFormatChange: setFormatValue,\n      onChange: onInternalChange,\n      onChangeComplete: onInternalChangeComplete,\n      onClear: onClear,\n      activeIndex: activeIndex,\n      onActive: setActiveIndex,\n      gradientDragging: gradientDragging,\n      onGradientDragging: setGradientDragging,\n      disabledFormat: disabledFormat\n    })),\n    classNames: {\n      root: mergedPopupCls\n    }\n  }, popoverProps), children || (/*#__PURE__*/React.createElement(ColorTrigger, Object.assign({\n    activeIndex: popupOpen ? activeIndex : -1,\n    open: popupOpen,\n    className: mergedCls,\n    style: mergedStyle,\n    prefixCls: prefixCls,\n    disabled: mergedDisabled,\n    showText: showText,\n    format: formatValue\n  }, rest, {\n    color: mergedColor\n  })))));\n};\nif (process.env.NODE_ENV !== 'production') {\n  ColorPicker.displayName = 'ColorPicker';\n}\nconst PurePanel = genPurePanel(ColorPicker, undefined, props => Object.assign(Object.assign({}, props), {\n  placement: 'bottom',\n  autoAdjustOverflow: false\n}), 'color-picker', /* istanbul ignore next */\nprefixCls => prefixCls);\nColorPicker._InternalPanelDoNotUseOrYouWillBeFired = PurePanel;\nexport default ColorPicker;","// This icon file is generated automatically.\nvar ZoomInOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z\" } }] }, \"name\": \"zoom-in\", \"theme\": \"outlined\" };\nexport default ZoomInOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport ZoomInOutlinedSvg from \"@ant-design/icons-svg/es/asn/ZoomInOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar ZoomInOutlined = function ZoomInOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: ZoomInOutlinedSvg\n  }));\n};\n\n/**![zoom-in](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYzNyA0NDNINTE5VjMwOWMwLTQuNC0zLjYtOC04LThoLTYwYy00LjQgMC04IDMuNi04IDh2MTM0SDMyNWMtNC40IDAtOCAzLjYtOCA4djYwYzAgNC40IDMuNiA4IDggOGgxMTh2MTM0YzAgNC40IDMuNiA4IDggOGg2MGM0LjQgMCA4LTMuNiA4LThWNTE5aDExOGM0LjQgMCA4LTMuNiA4LTh2LTYwYzAtNC40LTMuNi04LTgtOHptMjg0IDQyNEw3NzUgNzIxYzEyMi4xLTE0OC45IDExMy42LTM2OS41LTI2LTUwOS0xNDgtMTQ4LjEtMzg4LjQtMTQ4LjEtNTM3IDAtMTQ4LjEgMTQ4LjYtMTQ4LjEgMzg5IDAgNTM3IDEzOS41IDEzOS42IDM2MC4xIDE0OC4xIDUwOSAyNmwxNDYgMTQ2YzMuMiAyLjggOC4zIDIuOCAxMSAwbDQzLTQzYzIuOC0yLjcgMi44LTcuOCAwLTExek02OTYgNjk2Yy0xMTguOCAxMTguNy0zMTEuMiAxMTguNy00MzAgMC0xMTguNy0xMTguOC0xMTguNy0zMTEuMiAwLTQzMCAxMTguOC0xMTguNyAzMTEuMi0xMTguNyA0MzAgMCAxMTguNyAxMTguOCAxMTguNyAzMTEuMiAwIDQzMHoiIC8+PC9zdmc+) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(ZoomInOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ZoomInOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar ZoomOutOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z\" } }] }, \"name\": \"zoom-out\", \"theme\": \"outlined\" };\nexport default ZoomOutOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport ZoomOutOutlinedSvg from \"@ant-design/icons-svg/es/asn/ZoomOutOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar ZoomOutOutlined = function ZoomOutOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: ZoomOutOutlinedSvg\n  }));\n};\n\n/**![zoom-out](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYzNyA0NDNIMzI1Yy00LjQgMC04IDMuNi04IDh2NjBjMCA0LjQgMy42IDggOCA4aDMxMmM0LjQgMCA4LTMuNiA4LTh2LTYwYzAtNC40LTMuNi04LTgtOHptMjg0IDQyNEw3NzUgNzIxYzEyMi4xLTE0OC45IDExMy42LTM2OS41LTI2LTUwOS0xNDgtMTQ4LjEtMzg4LjQtMTQ4LjEtNTM3IDAtMTQ4LjEgMTQ4LjYtMTQ4LjEgMzg5IDAgNTM3IDEzOS41IDEzOS42IDM2MC4xIDE0OC4xIDUwOSAyNmwxNDYgMTQ2YzMuMiAyLjggOC4zIDIuOCAxMSAwbDQzLTQzYzIuOC0yLjcgMi44LTcuOCAwLTExek02OTYgNjk2Yy0xMTguOCAxMTguNy0zMTEuMiAxMTguNy00MzAgMC0xMTguNy0xMTguOC0xMTguNy0zMTEuMiAwLTQzMCAxMTguOC0xMTguNyAzMTEuMi0xMTguNyA0MzAgMCAxMTguNyAxMTguOCAxMTguNyAzMTEuMiAwIDQzMHoiIC8+PC9zdmc+) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(ZoomOutOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ZoomOutOutlined';\n}\nexport default RefIcon;","import toArray from \"rc-util/es/Children/toArray\";\nimport Sider from '../Sider';\nexport default function useHasSider(siders, children, hasSider) {\n  if (typeof hasSider === 'boolean') {\n    return hasSider;\n  }\n  if (siders.length) {\n    return true;\n  }\n  const childNodes = toArray(children);\n  return childNodes.some(node => node.type === Sider);\n}","\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport { ConfigContext } from '../config-provider';\nimport { useComponentConfig } from '../config-provider/context';\nimport { LayoutContext } from './context';\nimport useHasSider from './hooks/useHasSider';\nimport useStyle from './style';\nfunction generator({\n  suffixCls,\n  tagName,\n  displayName\n}) {\n  return BasicComponent => {\n    const Adapter = /*#__PURE__*/React.forwardRef((props, ref) => (/*#__PURE__*/React.createElement(BasicComponent, Object.assign({\n      ref: ref,\n      suffixCls: suffixCls,\n      tagName: tagName\n    }, props))));\n    if (process.env.NODE_ENV !== 'production') {\n      Adapter.displayName = displayName;\n    }\n    return Adapter;\n  };\n}\nconst Basic = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      prefixCls: customizePrefixCls,\n      suffixCls,\n      className,\n      tagName: TagName\n    } = props,\n    others = __rest(props, [\"prefixCls\", \"suffixCls\", \"className\", \"tagName\"]);\n  const {\n    getPrefixCls\n  } = React.useContext(ConfigContext);\n  const prefixCls = getPrefixCls('layout', customizePrefixCls);\n  const [wrapSSR, hashId, cssVarCls] = useStyle(prefixCls);\n  const prefixWithSuffixCls = suffixCls ? `${prefixCls}-${suffixCls}` : prefixCls;\n  return wrapSSR(/*#__PURE__*/React.createElement(TagName, Object.assign({\n    className: classNames(customizePrefixCls || prefixWithSuffixCls, className, hashId, cssVarCls),\n    ref: ref\n  }, others)));\n});\nconst BasicLayout = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    direction\n  } = React.useContext(ConfigContext);\n  const [siders, setSiders] = React.useState([]);\n  const {\n      prefixCls: customizePrefixCls,\n      className,\n      rootClassName,\n      children,\n      hasSider,\n      tagName: Tag,\n      style\n    } = props,\n    others = __rest(props, [\"prefixCls\", \"className\", \"rootClassName\", \"children\", \"hasSider\", \"tagName\", \"style\"]);\n  const passedProps = omit(others, ['suffixCls']);\n  const {\n    getPrefixCls,\n    className: contextClassName,\n    style: contextStyle\n  } = useComponentConfig('layout');\n  const prefixCls = getPrefixCls('layout', customizePrefixCls);\n  const mergedHasSider = useHasSider(siders, children, hasSider);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls);\n  const classString = classNames(prefixCls, {\n    [`${prefixCls}-has-sider`]: mergedHasSider,\n    [`${prefixCls}-rtl`]: direction === 'rtl'\n  }, contextClassName, className, rootClassName, hashId, cssVarCls);\n  const contextValue = React.useMemo(() => ({\n    siderHook: {\n      addSider: id => {\n        setSiders(prev => [].concat(_toConsumableArray(prev), [id]));\n      },\n      removeSider: id => {\n        setSiders(prev => prev.filter(currentId => currentId !== id));\n      }\n    }\n  }), []);\n  return wrapCSSVar(/*#__PURE__*/React.createElement(LayoutContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(Tag, Object.assign({\n    ref: ref,\n    className: classString,\n    style: Object.assign(Object.assign({}, contextStyle), style)\n  }, passedProps), children)));\n});\nconst Layout = generator({\n  tagName: 'div',\n  displayName: 'Layout'\n})(BasicLayout);\nconst Header = generator({\n  suffixCls: 'header',\n  tagName: 'header',\n  displayName: 'Header'\n})(Basic);\nconst Footer = generator({\n  suffixCls: 'footer',\n  tagName: 'footer',\n  displayName: 'Footer'\n})(Basic);\nconst Content = generator({\n  suffixCls: 'content',\n  tagName: 'main',\n  displayName: 'Content'\n})(Basic);\nexport { Content, Footer, Header };\nexport default Layout;","\"use client\";\n\nimport InternalLayout, { Content, Footer, Header } from './layout';\nimport Sider, { SiderContext } from './Sider';\nconst Layout = InternalLayout;\nLayout.Header = Header;\nLayout.Footer = Footer;\nLayout.Content = Content;\nLayout.Sider = Sider;\nLayout._InternalSiderContext = SiderContext;\nexport default Layout;","import { useRef, useEffect } from 'react';\nexport var defaultProps = {\n  percent: 0,\n  prefixCls: 'rc-progress',\n  strokeColor: '#2db7f5',\n  strokeLinecap: 'round',\n  strokeWidth: 1,\n  trailColor: '#D9D9D9',\n  trailWidth: 1,\n  gapPosition: 'bottom'\n};\nexport var useTransitionDuration = function useTransitionDuration() {\n  var pathsRef = useRef([]);\n  var prevTimeStamp = useRef(null);\n  useEffect(function () {\n    var now = Date.now();\n    var updated = false;\n    pathsRef.current.forEach(function (path) {\n      if (!path) {\n        return;\n      }\n      updated = true;\n      var pathStyle = path.style;\n      pathStyle.transitionDuration = '.3s, .3s, .3s, .06s';\n      if (prevTimeStamp.current && now - prevTimeStamp.current < 100) {\n        pathStyle.transitionDuration = '0s, 0s';\n      }\n    });\n    if (updated) {\n      prevTimeStamp.current = Date.now();\n    }\n  });\n  return pathsRef.current;\n};","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nvar uuid = 0;\n\n/** Is client side and not jsdom */\nexport var isBrowserClient = process.env.NODE_ENV !== 'test' && canUseDom();\n\n/** Get unique id for accessibility usage */\nfunction getUUID() {\n  var retId;\n\n  // Test never reach\n  /* istanbul ignore if */\n  if (isBrowserClient) {\n    retId = uuid;\n    uuid += 1;\n  } else {\n    retId = 'TEST_OR_SSR';\n  }\n  return retId;\n}\nexport default (function (id) {\n  // Inner id for accessibility usage. Only work in client side\n  var _React$useState = React.useState(),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    innerId = _React$useState2[0],\n    setInnerId = _React$useState2[1];\n  React.useEffect(function () {\n    setInnerId(\"rc_progress_\".concat(getUUID()));\n  }, []);\n  return id || innerId;\n});","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport * as React from 'react';\nvar Block = function Block(_ref) {\n  var bg = _ref.bg,\n    children = _ref.children;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      height: '100%',\n      background: bg\n    }\n  }, children);\n};\nfunction getPtgColors(color, scale) {\n  return Object.keys(color).map(function (key) {\n    var parsedKey = parseFloat(key);\n    var ptgKey = \"\".concat(Math.floor(parsedKey * scale), \"%\");\n    return \"\".concat(color[key], \" \").concat(ptgKey);\n  });\n}\nvar PtgCircle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    color = props.color,\n    gradientId = props.gradientId,\n    radius = props.radius,\n    circleStyleForStack = props.style,\n    ptg = props.ptg,\n    strokeLinecap = props.strokeLinecap,\n    strokeWidth = props.strokeWidth,\n    size = props.size,\n    gapDegree = props.gapDegree;\n  var isGradient = color && _typeof(color) === 'object';\n  var stroke = isGradient ? \"#FFF\" : undefined;\n\n  // ========================== Circle ==========================\n  var halfSize = size / 2;\n  var circleNode = /*#__PURE__*/React.createElement(\"circle\", {\n    className: \"\".concat(prefixCls, \"-circle-path\"),\n    r: radius,\n    cx: halfSize,\n    cy: halfSize,\n    stroke: stroke,\n    strokeLinecap: strokeLinecap,\n    strokeWidth: strokeWidth,\n    opacity: ptg === 0 ? 0 : 1,\n    style: circleStyleForStack,\n    ref: ref\n  });\n\n  // ========================== Render ==========================\n  if (!isGradient) {\n    return circleNode;\n  }\n  var maskId = \"\".concat(gradientId, \"-conic\");\n  var fromDeg = gapDegree ? \"\".concat(180 + gapDegree / 2, \"deg\") : '0deg';\n  var conicColors = getPtgColors(color, (360 - gapDegree) / 360);\n  var linearColors = getPtgColors(color, 1);\n  var conicColorBg = \"conic-gradient(from \".concat(fromDeg, \", \").concat(conicColors.join(', '), \")\");\n  var linearColorBg = \"linear-gradient(to \".concat(gapDegree ? 'bottom' : 'top', \", \").concat(linearColors.join(', '), \")\");\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"mask\", {\n    id: maskId\n  }, circleNode), /*#__PURE__*/React.createElement(\"foreignObject\", {\n    x: 0,\n    y: 0,\n    width: size,\n    height: size,\n    mask: \"url(#\".concat(maskId, \")\")\n  }, /*#__PURE__*/React.createElement(Block, {\n    bg: linearColorBg\n  }, /*#__PURE__*/React.createElement(Block, {\n    bg: conicColorBg\n  }))));\n});\nif (process.env.NODE_ENV !== 'production') {\n  PtgCircle.displayName = 'PtgCircle';\n}\nexport default PtgCircle;","export var VIEW_BOX_SIZE = 100;\nexport var getCircleStyle = function getCircleStyle(perimeter, perimeterWithoutGap, offset, percent, rotateDeg, gapDegree, gapPosition, strokeColor, strokeLinecap, strokeWidth) {\n  var stepSpace = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : 0;\n  var offsetDeg = offset / 100 * 360 * ((360 - gapDegree) / 360);\n  var positionDeg = gapDegree === 0 ? 0 : {\n    bottom: 0,\n    top: 180,\n    left: 90,\n    right: -90\n  }[gapPosition];\n  var strokeDashoffset = (100 - percent) / 100 * perimeterWithoutGap;\n  // Fix percent accuracy when strokeLinecap is round\n  // https://github.com/ant-design/ant-design/issues/35009\n  if (strokeLinecap === 'round' && percent !== 100) {\n    strokeDashoffset += strokeWidth / 2;\n    // when percent is small enough (<= 1%), keep smallest value to avoid it's disappearance\n    if (strokeDashoffset >= perimeterWithoutGap) {\n      strokeDashoffset = perimeterWithoutGap - 0.01;\n    }\n  }\n  var halfSize = VIEW_BOX_SIZE / 2;\n  return {\n    stroke: typeof strokeColor === 'string' ? strokeColor : undefined,\n    strokeDasharray: \"\".concat(perimeterWithoutGap, \"px \").concat(perimeter),\n    strokeDashoffset: strokeDashoffset + stepSpace,\n    transform: \"rotate(\".concat(rotateDeg + offsetDeg + positionDeg, \"deg)\"),\n    transformOrigin: \"\".concat(halfSize, \"px \").concat(halfSize, \"px\"),\n    transition: 'stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s',\n    fillOpacity: 0\n  };\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"id\", \"prefixCls\", \"steps\", \"strokeWidth\", \"trailWidth\", \"gapDegree\", \"gapPosition\", \"trailColor\", \"strokeLinecap\", \"style\", \"className\", \"strokeColor\", \"percent\"];\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { defaultProps, useTransitionDuration } from \"../common\";\nimport useId from \"../hooks/useId\";\nimport PtgCircle from \"./PtgCircle\";\nimport { VIEW_BOX_SIZE, getCircleStyle } from \"./util\";\nfunction toArray(value) {\n  var mergedValue = value !== null && value !== void 0 ? value : [];\n  return Array.isArray(mergedValue) ? mergedValue : [mergedValue];\n}\nvar Circle = function Circle(props) {\n  var _defaultProps$props = _objectSpread(_objectSpread({}, defaultProps), props),\n    id = _defaultProps$props.id,\n    prefixCls = _defaultProps$props.prefixCls,\n    steps = _defaultProps$props.steps,\n    strokeWidth = _defaultProps$props.strokeWidth,\n    trailWidth = _defaultProps$props.trailWidth,\n    _defaultProps$props$g = _defaultProps$props.gapDegree,\n    gapDegree = _defaultProps$props$g === void 0 ? 0 : _defaultProps$props$g,\n    gapPosition = _defaultProps$props.gapPosition,\n    trailColor = _defaultProps$props.trailColor,\n    strokeLinecap = _defaultProps$props.strokeLinecap,\n    style = _defaultProps$props.style,\n    className = _defaultProps$props.className,\n    strokeColor = _defaultProps$props.strokeColor,\n    percent = _defaultProps$props.percent,\n    restProps = _objectWithoutProperties(_defaultProps$props, _excluded);\n  var halfSize = VIEW_BOX_SIZE / 2;\n  var mergedId = useId(id);\n  var gradientId = \"\".concat(mergedId, \"-gradient\");\n  var radius = halfSize - strokeWidth / 2;\n  var perimeter = Math.PI * 2 * radius;\n  var rotateDeg = gapDegree > 0 ? 90 + gapDegree / 2 : -90;\n  var perimeterWithoutGap = perimeter * ((360 - gapDegree) / 360);\n  var _ref = _typeof(steps) === 'object' ? steps : {\n      count: steps,\n      gap: 2\n    },\n    stepCount = _ref.count,\n    stepGap = _ref.gap;\n  var percentList = toArray(percent);\n  var strokeColorList = toArray(strokeColor);\n  var gradient = strokeColorList.find(function (color) {\n    return color && _typeof(color) === 'object';\n  });\n  var isConicGradient = gradient && _typeof(gradient) === 'object';\n  var mergedStrokeLinecap = isConicGradient ? 'butt' : strokeLinecap;\n  var circleStyle = getCircleStyle(perimeter, perimeterWithoutGap, 0, 100, rotateDeg, gapDegree, gapPosition, trailColor, mergedStrokeLinecap, strokeWidth);\n  var paths = useTransitionDuration();\n  var getStokeList = function getStokeList() {\n    var stackPtg = 0;\n    return percentList.map(function (ptg, index) {\n      var color = strokeColorList[index] || strokeColorList[strokeColorList.length - 1];\n      var circleStyleForStack = getCircleStyle(perimeter, perimeterWithoutGap, stackPtg, ptg, rotateDeg, gapDegree, gapPosition, color, mergedStrokeLinecap, strokeWidth);\n      stackPtg += ptg;\n      return /*#__PURE__*/React.createElement(PtgCircle, {\n        key: index,\n        color: color,\n        ptg: ptg,\n        radius: radius,\n        prefixCls: prefixCls,\n        gradientId: gradientId,\n        style: circleStyleForStack,\n        strokeLinecap: mergedStrokeLinecap,\n        strokeWidth: strokeWidth,\n        gapDegree: gapDegree,\n        ref: function ref(elem) {\n          // https://reactjs.org/docs/refs-and-the-dom.html#callback-refs\n          // React will call the ref callback with the DOM element when the component mounts,\n          // and call it with `null` when it unmounts.\n          // Refs are guaranteed to be up-to-date before componentDidMount or componentDidUpdate fires.\n\n          paths[index] = elem;\n        },\n        size: VIEW_BOX_SIZE\n      });\n    }).reverse();\n  };\n  var getStepStokeList = function getStepStokeList() {\n    // only show the first percent when pass steps\n    var current = Math.round(stepCount * (percentList[0] / 100));\n    var stepPtg = 100 / stepCount;\n    var stackPtg = 0;\n    return new Array(stepCount).fill(null).map(function (_, index) {\n      var color = index <= current - 1 ? strokeColorList[0] : trailColor;\n      var stroke = color && _typeof(color) === 'object' ? \"url(#\".concat(gradientId, \")\") : undefined;\n      var circleStyleForStack = getCircleStyle(perimeter, perimeterWithoutGap, stackPtg, stepPtg, rotateDeg, gapDegree, gapPosition, color, 'butt', strokeWidth, stepGap);\n      stackPtg += (perimeterWithoutGap - circleStyleForStack.strokeDashoffset + stepGap) * 100 / perimeterWithoutGap;\n      return /*#__PURE__*/React.createElement(\"circle\", {\n        key: index,\n        className: \"\".concat(prefixCls, \"-circle-path\"),\n        r: radius,\n        cx: halfSize,\n        cy: halfSize,\n        stroke: stroke,\n        strokeWidth: strokeWidth,\n        opacity: 1,\n        style: circleStyleForStack,\n        ref: function ref(elem) {\n          paths[index] = elem;\n        }\n      });\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: classNames(\"\".concat(prefixCls, \"-circle\"), className),\n    viewBox: \"0 0 \".concat(VIEW_BOX_SIZE, \" \").concat(VIEW_BOX_SIZE),\n    style: style,\n    id: id,\n    role: \"presentation\"\n  }, restProps), !stepCount && /*#__PURE__*/React.createElement(\"circle\", {\n    className: \"\".concat(prefixCls, \"-circle-trail\"),\n    r: radius,\n    cx: halfSize,\n    cy: halfSize,\n    stroke: trailColor,\n    strokeLinecap: mergedStrokeLinecap,\n    strokeWidth: trailWidth || strokeWidth,\n    style: circleStyle\n  }), stepCount ? getStepStokeList() : getStokeList());\n};\nif (process.env.NODE_ENV !== 'production') {\n  Circle.displayName = 'Circle';\n}\nexport default Circle;","import { presetPrimaryColors } from '@ant-design/colors';\nexport function validProgress(progress) {\n  if (!progress || progress < 0) {\n    return 0;\n  }\n  if (progress > 100) {\n    return 100;\n  }\n  return progress;\n}\nexport function getSuccessPercent({\n  success,\n  successPercent\n}) {\n  let percent = successPercent;\n  /** @deprecated Use `percent` instead */\n  if (success && 'progress' in success) {\n    percent = success.progress;\n  }\n  if (success && 'percent' in success) {\n    percent = success.percent;\n  }\n  return percent;\n}\nexport const getPercentage = ({\n  percent,\n  success,\n  successPercent\n}) => {\n  const realSuccessPercent = validProgress(getSuccessPercent({\n    success,\n    successPercent\n  }));\n  return [realSuccessPercent, validProgress(validProgress(percent) - realSuccessPercent)];\n};\nexport const getStrokeColor = ({\n  success = {},\n  strokeColor\n}) => {\n  const {\n    strokeColor: successColor\n  } = success;\n  return [successColor || presetPrimaryColors.green, strokeColor || null];\n};\nexport const getSize = (size, type, extra) => {\n  var _a, _b, _c, _d;\n  let width = -1;\n  let height = -1;\n  if (type === 'step') {\n    const steps = extra.steps;\n    const strokeWidth = extra.strokeWidth;\n    if (typeof size === 'string' || typeof size === 'undefined') {\n      width = size === 'small' ? 2 : 14;\n      height = strokeWidth !== null && strokeWidth !== void 0 ? strokeWidth : 8;\n    } else if (typeof size === 'number') {\n      [width, height] = [size, size];\n    } else {\n      [width = 14, height = 8] = Array.isArray(size) ? size : [size.width, size.height];\n    }\n    width *= steps;\n  } else if (type === 'line') {\n    const strokeWidth = extra === null || extra === void 0 ? void 0 : extra.strokeWidth;\n    if (typeof size === 'string' || typeof size === 'undefined') {\n      height = strokeWidth || (size === 'small' ? 6 : 8);\n    } else if (typeof size === 'number') {\n      [width, height] = [size, size];\n    } else {\n      [width = -1, height = 8] = Array.isArray(size) ? size : [size.width, size.height];\n    }\n  } else if (type === 'circle' || type === 'dashboard') {\n    if (typeof size === 'string' || typeof size === 'undefined') {\n      [width, height] = size === 'small' ? [60, 60] : [120, 120];\n    } else if (typeof size === 'number') {\n      [width, height] = [size, size];\n    } else if (Array.isArray(size)) {\n      width = (_b = (_a = size[0]) !== null && _a !== void 0 ? _a : size[1]) !== null && _b !== void 0 ? _b : 120;\n      height = (_d = (_c = size[0]) !== null && _c !== void 0 ? _c : size[1]) !== null && _d !== void 0 ? _d : 120;\n    }\n  }\n  return [width, height];\n};","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { Circle as RCCircle } from 'rc-progress';\nimport Tooltip from '../tooltip';\nimport { getPercentage, getSize, getStrokeColor } from './utils';\nconst CIRCLE_MIN_STROKE_WIDTH = 3;\nconst getMinPercent = width => CIRCLE_MIN_STROKE_WIDTH / width * 100;\nconst Circle = props => {\n  const {\n    prefixCls,\n    trailColor = null,\n    strokeLinecap = 'round',\n    gapPosition,\n    gapDegree,\n    width: originWidth = 120,\n    type,\n    children,\n    success,\n    size = originWidth,\n    steps\n  } = props;\n  const [width, height] = getSize(size, 'circle');\n  let {\n    strokeWidth\n  } = props;\n  if (strokeWidth === undefined) {\n    strokeWidth = Math.max(getMinPercent(width), 6);\n  }\n  const circleStyle = {\n    width,\n    height,\n    fontSize: width * 0.15 + 6\n  };\n  const realGapDegree = React.useMemo(() => {\n    // Support gapDeg = 0 when type = 'dashboard'\n    if (gapDegree || gapDegree === 0) {\n      return gapDegree;\n    }\n    if (type === 'dashboard') {\n      return 75;\n    }\n    return undefined;\n  }, [gapDegree, type]);\n  const percentArray = getPercentage(props);\n  const gapPos = gapPosition || type === 'dashboard' && 'bottom' || undefined;\n  // using className to style stroke color\n  const isGradient = Object.prototype.toString.call(props.strokeColor) === '[object Object]';\n  const strokeColor = getStrokeColor({\n    success,\n    strokeColor: props.strokeColor\n  });\n  const wrapperClassName = classNames(`${prefixCls}-inner`, {\n    [`${prefixCls}-circle-gradient`]: isGradient\n  });\n  const circleContent = /*#__PURE__*/React.createElement(RCCircle, {\n    steps: steps,\n    percent: steps ? percentArray[1] : percentArray,\n    strokeWidth: strokeWidth,\n    trailWidth: strokeWidth,\n    strokeColor: steps ? strokeColor[1] : strokeColor,\n    strokeLinecap: strokeLinecap,\n    trailColor: trailColor,\n    prefixCls: prefixCls,\n    gapDegree: realGapDegree,\n    gapPosition: gapPos\n  });\n  const smallCircle = width <= 20;\n  const node = /*#__PURE__*/React.createElement(\"div\", {\n    className: wrapperClassName,\n    style: circleStyle\n  }, circleContent, !smallCircle && children);\n  if (smallCircle) {\n    return /*#__PURE__*/React.createElement(Tooltip, {\n      title: children\n    }, node);\n  }\n  return node;\n};\nexport default Circle;","import { Keyframes, unit } from '@ant-design/cssinjs';\nimport { resetComponent } from '../../style';\nimport { genStyleHooks, mergeToken } from '../../theme/internal';\nexport const LineStrokeColorVar = '--progress-line-stroke-color';\nexport const Percent = '--progress-percent';\nconst genAntProgressActive = isRtl => {\n  const direction = isRtl ? '100%' : '-100%';\n  return new Keyframes(`antProgress${isRtl ? 'RTL' : 'LTR'}Active`, {\n    '0%': {\n      transform: `translateX(${direction}) scaleX(0)`,\n      opacity: 0.1\n    },\n    '20%': {\n      transform: `translateX(${direction}) scaleX(0)`,\n      opacity: 0.5\n    },\n    to: {\n      transform: 'translateX(0) scaleX(1)',\n      opacity: 0\n    }\n  });\n};\nconst genBaseStyle = token => {\n  const {\n    componentCls: progressCls,\n    iconCls: iconPrefixCls\n  } = token;\n  return {\n    [progressCls]: Object.assign(Object.assign({}, resetComponent(token)), {\n      display: 'inline-block',\n      '&-rtl': {\n        direction: 'rtl'\n      },\n      '&-line': {\n        position: 'relative',\n        width: '100%',\n        fontSize: token.fontSize\n      },\n      [`${progressCls}-outer`]: {\n        display: 'inline-flex',\n        alignItems: 'center',\n        width: '100%'\n      },\n      [`${progressCls}-inner`]: {\n        position: 'relative',\n        display: 'inline-block',\n        width: '100%',\n        flex: 1,\n        overflow: 'hidden',\n        verticalAlign: 'middle',\n        backgroundColor: token.remainingColor,\n        borderRadius: token.lineBorderRadius\n      },\n      [`${progressCls}-inner:not(${progressCls}-circle-gradient)`]: {\n        [`${progressCls}-circle-path`]: {\n          stroke: token.defaultColor\n        }\n      },\n      [`${progressCls}-success-bg, ${progressCls}-bg`]: {\n        position: 'relative',\n        background: token.defaultColor,\n        borderRadius: token.lineBorderRadius,\n        transition: `all ${token.motionDurationSlow} ${token.motionEaseInOutCirc}`\n      },\n      [`${progressCls}-layout-bottom`]: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        [`${progressCls}-text`]: {\n          width: 'max-content',\n          marginInlineStart: 0,\n          marginTop: token.marginXXS\n        }\n      },\n      [`${progressCls}-bg`]: {\n        overflow: 'hidden',\n        '&::after': {\n          content: '\"\"',\n          background: {\n            _multi_value_: true,\n            value: ['inherit', `var(${LineStrokeColorVar})`]\n          },\n          height: '100%',\n          width: `calc(1 / var(${Percent}) * 100%)`,\n          display: 'block'\n        },\n        [`&${progressCls}-bg-inner`]: {\n          minWidth: 'max-content',\n          '&::after': {\n            content: 'none'\n          },\n          [`${progressCls}-text-inner`]: {\n            color: token.colorWhite,\n            [`&${progressCls}-text-bright`]: {\n              color: 'rgba(0, 0, 0, 0.45)'\n            }\n          }\n        }\n      },\n      [`${progressCls}-success-bg`]: {\n        position: 'absolute',\n        insetBlockStart: 0,\n        insetInlineStart: 0,\n        backgroundColor: token.colorSuccess\n      },\n      [`${progressCls}-text`]: {\n        display: 'inline-block',\n        marginInlineStart: token.marginXS,\n        color: token.colorText,\n        lineHeight: 1,\n        width: '2em',\n        whiteSpace: 'nowrap',\n        textAlign: 'start',\n        verticalAlign: 'middle',\n        wordBreak: 'normal',\n        [iconPrefixCls]: {\n          fontSize: token.fontSize\n        },\n        [`&${progressCls}-text-outer`]: {\n          width: 'max-content'\n        },\n        [`&${progressCls}-text-outer${progressCls}-text-start`]: {\n          width: 'max-content',\n          marginInlineStart: 0,\n          marginInlineEnd: token.marginXS\n        }\n      },\n      [`${progressCls}-text-inner`]: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: '100%',\n        marginInlineStart: 0,\n        padding: `0 ${unit(token.paddingXXS)}`,\n        [`&${progressCls}-text-start`]: {\n          justifyContent: 'start'\n        },\n        [`&${progressCls}-text-end`]: {\n          justifyContent: 'end'\n        }\n      },\n      [`&${progressCls}-status-active`]: {\n        [`${progressCls}-bg::before`]: {\n          position: 'absolute',\n          inset: 0,\n          backgroundColor: token.colorBgContainer,\n          borderRadius: token.lineBorderRadius,\n          opacity: 0,\n          animationName: genAntProgressActive(),\n          animationDuration: token.progressActiveMotionDuration,\n          animationTimingFunction: token.motionEaseOutQuint,\n          animationIterationCount: 'infinite',\n          content: '\"\"'\n        }\n      },\n      [`&${progressCls}-rtl${progressCls}-status-active`]: {\n        [`${progressCls}-bg::before`]: {\n          animationName: genAntProgressActive(true)\n        }\n      },\n      [`&${progressCls}-status-exception`]: {\n        [`${progressCls}-bg`]: {\n          backgroundColor: token.colorError\n        },\n        [`${progressCls}-text`]: {\n          color: token.colorError\n        }\n      },\n      [`&${progressCls}-status-exception ${progressCls}-inner:not(${progressCls}-circle-gradient)`]: {\n        [`${progressCls}-circle-path`]: {\n          stroke: token.colorError\n        }\n      },\n      [`&${progressCls}-status-success`]: {\n        [`${progressCls}-bg`]: {\n          backgroundColor: token.colorSuccess\n        },\n        [`${progressCls}-text`]: {\n          color: token.colorSuccess\n        }\n      },\n      [`&${progressCls}-status-success ${progressCls}-inner:not(${progressCls}-circle-gradient)`]: {\n        [`${progressCls}-circle-path`]: {\n          stroke: token.colorSuccess\n        }\n      }\n    })\n  };\n};\nconst genCircleStyle = token => {\n  const {\n    componentCls: progressCls,\n    iconCls: iconPrefixCls\n  } = token;\n  return {\n    [progressCls]: {\n      [`${progressCls}-circle-trail`]: {\n        stroke: token.remainingColor\n      },\n      [`&${progressCls}-circle ${progressCls}-inner`]: {\n        position: 'relative',\n        lineHeight: 1,\n        backgroundColor: 'transparent'\n      },\n      [`&${progressCls}-circle ${progressCls}-text`]: {\n        position: 'absolute',\n        insetBlockStart: '50%',\n        insetInlineStart: 0,\n        width: '100%',\n        margin: 0,\n        padding: 0,\n        color: token.circleTextColor,\n        fontSize: token.circleTextFontSize,\n        lineHeight: 1,\n        whiteSpace: 'normal',\n        textAlign: 'center',\n        transform: 'translateY(-50%)',\n        [iconPrefixCls]: {\n          fontSize: token.circleIconFontSize\n        }\n      },\n      [`${progressCls}-circle&-status-exception`]: {\n        [`${progressCls}-text`]: {\n          color: token.colorError\n        }\n      },\n      [`${progressCls}-circle&-status-success`]: {\n        [`${progressCls}-text`]: {\n          color: token.colorSuccess\n        }\n      }\n    },\n    [`${progressCls}-inline-circle`]: {\n      lineHeight: 1,\n      [`${progressCls}-inner`]: {\n        verticalAlign: 'bottom'\n      }\n    }\n  };\n};\nconst genStepStyle = token => {\n  const {\n    componentCls: progressCls\n  } = token;\n  return {\n    [progressCls]: {\n      [`${progressCls}-steps`]: {\n        display: 'inline-block',\n        '&-outer': {\n          display: 'flex',\n          flexDirection: 'row',\n          alignItems: 'center'\n        },\n        '&-item': {\n          flexShrink: 0,\n          minWidth: token.progressStepMinWidth,\n          marginInlineEnd: token.progressStepMarginInlineEnd,\n          backgroundColor: token.remainingColor,\n          transition: `all ${token.motionDurationSlow}`,\n          '&-active': {\n            backgroundColor: token.defaultColor\n          }\n        }\n      }\n    }\n  };\n};\nconst genSmallLine = token => {\n  const {\n    componentCls: progressCls,\n    iconCls: iconPrefixCls\n  } = token;\n  return {\n    [progressCls]: {\n      [`${progressCls}-small&-line, ${progressCls}-small&-line ${progressCls}-text ${iconPrefixCls}`]: {\n        fontSize: token.fontSizeSM\n      }\n    }\n  };\n};\nexport const prepareComponentToken = token => ({\n  circleTextColor: token.colorText,\n  defaultColor: token.colorInfo,\n  remainingColor: token.colorFillSecondary,\n  lineBorderRadius: 100,\n  // magic for capsule shape, should be a very large number\n  circleTextFontSize: '1em',\n  circleIconFontSize: `${token.fontSize / token.fontSizeSM}em`\n});\nexport default genStyleHooks('Progress', token => {\n  const progressStepMarginInlineEnd = token.calc(token.marginXXS).div(2).equal();\n  const progressToken = mergeToken(token, {\n    progressStepMarginInlineEnd,\n    progressStepMinWidth: progressStepMarginInlineEnd,\n    progressActiveMotionDuration: '2.4s'\n  });\n  return [genBaseStyle(progressToken), genCircleStyle(progressToken), genStepStyle(progressToken), genSmallLine(progressToken)];\n}, prepareComponentToken);","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport { presetPrimaryColors } from '@ant-design/colors';\nimport classNames from 'classnames';\nimport { devUseWarning } from '../_util/warning';\nimport { LineStrokeColorVar, Percent } from './style';\nimport { getSize, getSuccessPercent, validProgress } from './utils';\n/**\n * @example\n *   {\n *     \"0%\": \"#afc163\",\n *     \"75%\": \"#009900\",\n *     \"50%\": \"green\", // ====> '#afc163 0%, #66FF00 25%, #00CC00 50%, #009900 75%, #ffffff 100%'\n *     \"25%\": \"#66FF00\",\n *     \"100%\": \"#ffffff\"\n *   }\n */\nexport const sortGradient = gradients => {\n  let tempArr = [];\n  Object.keys(gradients).forEach(key => {\n    const formattedKey = parseFloat(key.replace(/%/g, ''));\n    if (!Number.isNaN(formattedKey)) {\n      tempArr.push({\n        key: formattedKey,\n        value: gradients[key]\n      });\n    }\n  });\n  tempArr = tempArr.sort((a, b) => a.key - b.key);\n  return tempArr.map(({\n    key,\n    value\n  }) => `${value} ${key}%`).join(', ');\n};\n/**\n * Then this man came to realize the truth: Besides six pence, there is the moon. Besides bread and\n * butter, there is the bug. And... Besides women, there is the code.\n *\n * @example\n *   {\n *     \"0%\": \"#afc163\",\n *     \"25%\": \"#66FF00\",\n *     \"50%\": \"#00CC00\", // ====>  linear-gradient(to right, #afc163 0%, #66FF00 25%,\n *     \"75%\": \"#009900\", //        #00CC00 50%, #009900 75%, #ffffff 100%)\n *     \"100%\": \"#ffffff\"\n *   }\n */\nexport const handleGradient = (strokeColor, directionConfig) => {\n  const {\n      from = presetPrimaryColors.blue,\n      to = presetPrimaryColors.blue,\n      direction = directionConfig === 'rtl' ? 'to left' : 'to right'\n    } = strokeColor,\n    rest = __rest(strokeColor, [\"from\", \"to\", \"direction\"]);\n  if (Object.keys(rest).length !== 0) {\n    const sortedGradients = sortGradient(rest);\n    const background = `linear-gradient(${direction}, ${sortedGradients})`;\n    return {\n      background,\n      [LineStrokeColorVar]: background\n    };\n  }\n  const background = `linear-gradient(${direction}, ${from}, ${to})`;\n  return {\n    background,\n    [LineStrokeColorVar]: background\n  };\n};\nconst Line = props => {\n  const {\n    prefixCls,\n    direction: directionConfig,\n    percent,\n    size,\n    strokeWidth,\n    strokeColor,\n    strokeLinecap = 'round',\n    children,\n    trailColor = null,\n    percentPosition,\n    success\n  } = props;\n  const {\n    align: infoAlign,\n    type: infoPosition\n  } = percentPosition;\n  const backgroundProps = strokeColor && typeof strokeColor !== 'string' ? handleGradient(strokeColor, directionConfig) : {\n    [LineStrokeColorVar]: strokeColor,\n    background: strokeColor\n  };\n  const borderRadius = strokeLinecap === 'square' || strokeLinecap === 'butt' ? 0 : undefined;\n  const mergedSize = size !== null && size !== void 0 ? size : [-1, strokeWidth || (size === 'small' ? 6 : 8)];\n  const [width, height] = getSize(mergedSize, 'line', {\n    strokeWidth\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Progress');\n    warning.deprecated(!('strokeWidth' in props), 'strokeWidth', 'size');\n  }\n  const trailStyle = {\n    backgroundColor: trailColor || undefined,\n    borderRadius\n  };\n  const percentStyle = Object.assign(Object.assign({\n    width: `${validProgress(percent)}%`,\n    height,\n    borderRadius\n  }, backgroundProps), {\n    [Percent]: validProgress(percent) / 100\n  });\n  const successPercent = getSuccessPercent(props);\n  const successPercentStyle = {\n    width: `${validProgress(successPercent)}%`,\n    height,\n    borderRadius,\n    backgroundColor: success === null || success === void 0 ? void 0 : success.strokeColor\n  };\n  const outerStyle = {\n    width: width < 0 ? '100%' : width\n  };\n  const lineInner = /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-inner`,\n    style: trailStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(`${prefixCls}-bg`, `${prefixCls}-bg-${infoPosition}`),\n    style: percentStyle\n  }, infoPosition === 'inner' && children), successPercent !== undefined && (/*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-success-bg`,\n    style: successPercentStyle\n  })));\n  const isOuterStart = infoPosition === 'outer' && infoAlign === 'start';\n  const isOuterEnd = infoPosition === 'outer' && infoAlign === 'end';\n  return infoPosition === 'outer' && infoAlign === 'center' ? (/*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-layout-bottom`\n  }, lineInner, children)) : (/*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-outer`,\n    style: outerStyle\n  }, isOuterStart && children, lineInner, isOuterEnd && children));\n};\nexport default Line;","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { getSize } from './utils';\nconst Steps = props => {\n  const {\n    size,\n    steps,\n    rounding: customRounding = Math.round,\n    percent = 0,\n    strokeWidth = 8,\n    strokeColor,\n    trailColor = null,\n    prefixCls,\n    children\n  } = props;\n  const current = customRounding(steps * (percent / 100));\n  const stepWidth = size === 'small' ? 2 : 14;\n  const mergedSize = size !== null && size !== void 0 ? size : [stepWidth, strokeWidth];\n  const [width, height] = getSize(mergedSize, 'step', {\n    steps,\n    strokeWidth\n  });\n  const unitWidth = width / steps;\n  const styledSteps = Array.from({\n    length: steps\n  });\n  for (let i = 0; i < steps; i++) {\n    const color = Array.isArray(strokeColor) ? strokeColor[i] : strokeColor;\n    styledSteps[i] = /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      className: classNames(`${prefixCls}-steps-item`, {\n        [`${prefixCls}-steps-item-active`]: i <= current - 1\n      }),\n      style: {\n        backgroundColor: i <= current - 1 ? color : trailColor,\n        width: unitWidth,\n        height\n      }\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-steps-outer`\n  }, styledSteps, children);\n};\nexport default Steps;","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport { FastColor } from '@ant-design/fast-color';\nimport CheckCircleFilled from \"@ant-design/icons/es/icons/CheckCircleFilled\";\nimport CheckOutlined from \"@ant-design/icons/es/icons/CheckOutlined\";\nimport CloseCircleFilled from \"@ant-design/icons/es/icons/CloseCircleFilled\";\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport { devUseWarning } from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport Circle from './Circle';\nimport Line from './Line';\nimport Steps from './Steps';\nimport useStyle from './style';\nimport { getSize, getSuccessPercent, validProgress } from './utils';\nexport const ProgressTypes = ['line', 'circle', 'dashboard'];\nconst ProgressStatuses = ['normal', 'exception', 'active', 'success'];\nconst Progress = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      prefixCls: customizePrefixCls,\n      className,\n      rootClassName,\n      steps,\n      strokeColor,\n      percent = 0,\n      size = 'default',\n      showInfo = true,\n      type = 'line',\n      status,\n      format,\n      style,\n      percentPosition = {}\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"className\", \"rootClassName\", \"steps\", \"strokeColor\", \"percent\", \"size\", \"showInfo\", \"type\", \"status\", \"format\", \"style\", \"percentPosition\"]);\n  const {\n    align: infoAlign = 'end',\n    type: infoPosition = 'outer'\n  } = percentPosition;\n  const strokeColorNotArray = Array.isArray(strokeColor) ? strokeColor[0] : strokeColor;\n  const strokeColorNotGradient = typeof strokeColor === 'string' || Array.isArray(strokeColor) ? strokeColor : undefined;\n  const strokeColorIsBright = React.useMemo(() => {\n    if (strokeColorNotArray) {\n      const color = typeof strokeColorNotArray === 'string' ? strokeColorNotArray : Object.values(strokeColorNotArray)[0];\n      return new FastColor(color).isLight();\n    }\n    return false;\n  }, [strokeColor]);\n  const percentNumber = React.useMemo(() => {\n    var _a, _b;\n    const successPercent = getSuccessPercent(props);\n    return parseInt(successPercent !== undefined ? (_a = successPercent !== null && successPercent !== void 0 ? successPercent : 0) === null || _a === void 0 ? void 0 : _a.toString() : (_b = percent !== null && percent !== void 0 ? percent : 0) === null || _b === void 0 ? void 0 : _b.toString(), 10);\n  }, [percent, props.success, props.successPercent]);\n  const progressStatus = React.useMemo(() => {\n    if (!ProgressStatuses.includes(status) && percentNumber >= 100) {\n      return 'success';\n    }\n    return status || 'normal';\n  }, [status, percentNumber]);\n  const {\n    getPrefixCls,\n    direction,\n    progress: progressStyle\n  } = React.useContext(ConfigContext);\n  const prefixCls = getPrefixCls('progress', customizePrefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls);\n  const isLineType = type === 'line';\n  const isPureLineType = isLineType && !steps;\n  const progressInfo = React.useMemo(() => {\n    if (!showInfo) {\n      return null;\n    }\n    const successPercent = getSuccessPercent(props);\n    let text;\n    const textFormatter = format || (number => `${number}%`);\n    const isBrightInnerColor = isLineType && strokeColorIsBright && infoPosition === 'inner';\n    if (infoPosition === 'inner' || format || progressStatus !== 'exception' && progressStatus !== 'success') {\n      text = textFormatter(validProgress(percent), validProgress(successPercent));\n    } else if (progressStatus === 'exception') {\n      text = isLineType ? /*#__PURE__*/React.createElement(CloseCircleFilled, null) : /*#__PURE__*/React.createElement(CloseOutlined, null);\n    } else if (progressStatus === 'success') {\n      text = isLineType ? /*#__PURE__*/React.createElement(CheckCircleFilled, null) : /*#__PURE__*/React.createElement(CheckOutlined, null);\n    }\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames(`${prefixCls}-text`, {\n        [`${prefixCls}-text-bright`]: isBrightInnerColor,\n        [`${prefixCls}-text-${infoAlign}`]: isPureLineType,\n        [`${prefixCls}-text-${infoPosition}`]: isPureLineType\n      }),\n      title: typeof text === 'string' ? text : undefined\n    }, text);\n  }, [showInfo, percent, percentNumber, progressStatus, type, prefixCls, format]);\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Progress');\n    warning.deprecated(!('successPercent' in props), 'successPercent', 'success.percent');\n    warning.deprecated(!('width' in props), 'width', 'size');\n    if (type === 'circle' || type === 'dashboard') {\n      if (Array.isArray(size)) {\n        process.env.NODE_ENV !== \"production\" ? warning(false, 'usage', 'Type \"circle\" and \"dashboard\" do not accept array as `size`, please use number or preset size instead.') : void 0;\n      } else if (typeof size === 'object') {\n        process.env.NODE_ENV !== \"production\" ? warning(false, 'usage', 'Type \"circle\" and \"dashboard\" do not accept object as `size`, please use number or preset size instead.') : void 0;\n      }\n    }\n    if (props.success && 'progress' in props.success) {\n      warning.deprecated(false, 'success.progress', 'success.percent');\n    }\n  }\n  let progress;\n  // Render progress shape\n  if (type === 'line') {\n    progress = steps ? (/*#__PURE__*/React.createElement(Steps, Object.assign({}, props, {\n      strokeColor: strokeColorNotGradient,\n      prefixCls: prefixCls,\n      steps: typeof steps === 'object' ? steps.count : steps\n    }), progressInfo)) : (/*#__PURE__*/React.createElement(Line, Object.assign({}, props, {\n      strokeColor: strokeColorNotArray,\n      prefixCls: prefixCls,\n      direction: direction,\n      percentPosition: {\n        align: infoAlign,\n        type: infoPosition\n      }\n    }), progressInfo));\n  } else if (type === 'circle' || type === 'dashboard') {\n    progress = /*#__PURE__*/React.createElement(Circle, Object.assign({}, props, {\n      strokeColor: strokeColorNotArray,\n      prefixCls: prefixCls,\n      progressStatus: progressStatus\n    }), progressInfo);\n  }\n  const classString = classNames(prefixCls, `${prefixCls}-status-${progressStatus}`, {\n    [`${prefixCls}-${type === 'dashboard' && 'circle' || type}`]: type !== 'line',\n    [`${prefixCls}-inline-circle`]: type === 'circle' && getSize(size, 'circle')[0] <= 20,\n    [`${prefixCls}-line`]: isPureLineType,\n    [`${prefixCls}-line-align-${infoAlign}`]: isPureLineType,\n    [`${prefixCls}-line-position-${infoPosition}`]: isPureLineType,\n    [`${prefixCls}-steps`]: steps,\n    [`${prefixCls}-show-info`]: showInfo,\n    [`${prefixCls}-${size}`]: typeof size === 'string',\n    [`${prefixCls}-rtl`]: direction === 'rtl'\n  }, progressStyle === null || progressStyle === void 0 ? void 0 : progressStyle.className, className, rootClassName, hashId, cssVarCls);\n  return wrapCSSVar(/*#__PURE__*/React.createElement(\"div\", Object.assign({\n    ref: ref,\n    style: Object.assign(Object.assign({}, progressStyle === null || progressStyle === void 0 ? void 0 : progressStyle.style), style),\n    className: classString,\n    role: \"progressbar\",\n    \"aria-valuenow\": percentNumber,\n    \"aria-valuemin\": 0,\n    \"aria-valuemax\": 100\n  }, omit(restProps, ['trailColor', 'strokeWidth', 'width', 'gapDegree', 'gapPosition', 'strokeLinecap', 'success', 'successPercent'])), progress));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Progress.displayName = 'Progress';\n}\nexport default Progress;","// This icon file is generated automatically.\nvar ArrowDownOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z\" } }] }, \"name\": \"arrow-down\", \"theme\": \"outlined\" };\nexport default ArrowDownOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport ArrowDownOutlinedSvg from \"@ant-design/icons-svg/es/asn/ArrowDownOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar ArrowDownOutlined = function ArrowDownOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: ArrowDownOutlinedSvg\n  }));\n};\n\n/**![arrow-down](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg2MiA0NjUuM2gtODFjLTQuNiAwLTkgMi0xMi4xIDUuNUw1NTAgNzIzLjFWMTYwYzAtNC40LTMuNi04LTgtOGgtNjBjLTQuNCAwLTggMy42LTggOHY1NjMuMUwyNTUuMSA0NzAuOGMtMy0zLjUtNy40LTUuNS0xMi4xLTUuNWgtODFjLTYuOCAwLTEwLjUgOC4xLTYgMTMuMkw0ODcuOSA4NjFhMzEuOTYgMzEuOTYgMCAwMDQ4LjMgMEw4NjggNDc4LjVjNC41LTUuMi44LTEzLjItNi0xMy4yeiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(ArrowDownOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ArrowDownOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar ArrowUpOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z\" } }] }, \"name\": \"arrow-up\", \"theme\": \"outlined\" };\nexport default ArrowUpOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport ArrowUpOutlinedSvg from \"@ant-design/icons-svg/es/asn/ArrowUpOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar ArrowUpOutlined = function ArrowUpOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: ArrowUpOutlinedSvg\n  }));\n};\n\n/**![arrow-up](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg2OCA1NDUuNUw1MzYuMSAxNjNhMzEuOTYgMzEuOTYgMCAwMC00OC4zIDBMMTU2IDU0NS41YTcuOTcgNy45NyAwIDAwNiAxMy4yaDgxYzQuNiAwIDktMiAxMi4xLTUuNUw0NzQgMzAwLjlWODY0YzAgNC40IDMuNiA4IDggOGg2MGM0LjQgMCA4LTMuNiA4LThWMzAwLjlsMjE4LjkgMjUyLjNjMyAzLjUgNy40IDUuNSAxMi4xIDUuNWg4MWM2LjggMCAxMC41LTggNi0xMy4yeiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(ArrowUpOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ArrowUpOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar DragOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M909.3 506.3L781.7 405.6a7.23 7.23 0 00-11.7 5.7V476H548V254h64.8c6 0 9.4-7 5.7-11.7L517.7 114.7a7.14 7.14 0 00-11.3 0L405.6 242.3a7.23 7.23 0 005.7 11.7H476v222H254v-64.8c0-6-7-9.4-11.7-5.7L114.7 506.3a7.14 7.14 0 000 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h222v222h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H548V548h222v64.8c0 6 7 9.4 11.7 5.7l127.5-100.8a7.3 7.3 0 00.1-11.4z\" } }] }, \"name\": \"drag\", \"theme\": \"outlined\" };\nexport default DragOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport DragOutlinedSvg from \"@ant-design/icons-svg/es/asn/DragOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar DragOutlined = function DragOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: DragOutlinedSvg\n  }));\n};\n\n/**![drag](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTkwOS4zIDUwNi4zTDc4MS43IDQwNS42YTcuMjMgNy4yMyAwIDAwLTExLjcgNS43VjQ3Nkg1NDhWMjU0aDY0LjhjNiAwIDkuNC03IDUuNy0xMS43TDUxNy43IDExNC43YTcuMTQgNy4xNCAwIDAwLTExLjMgMEw0MDUuNiAyNDIuM2E3LjIzIDcuMjMgMCAwMDUuNyAxMS43SDQ3NnYyMjJIMjU0di02NC44YzAtNi03LTkuNC0xMS43LTUuN0wxMTQuNyA1MDYuM2E3LjE0IDcuMTQgMCAwMDAgMTEuM2wxMjcuNSAxMDAuOGM0LjcgMy43IDExLjcuNCAxMS43LTUuN1Y1NDhoMjIydjIyMmgtNjQuOGMtNiAwLTkuNCA3LTUuNyAxMS43bDEwMC44IDEyNy41YzIuOSAzLjcgOC41IDMuNyAxMS4zIDBsMTAwLjgtMTI3LjVjMy43LTQuNy40LTExLjctNS43LTExLjdINTQ4VjU0OGgyMjJ2NjQuOGMwIDYgNyA5LjQgMTEuNyA1LjdsMTI3LjUtMTAwLjhhNy4zIDcuMyAwIDAwLjEtMTEuNHoiIC8+PC9zdmc+) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(DragOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'DragOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar ExpandOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z\" } }] }, \"name\": \"expand\", \"theme\": \"outlined\" };\nexport default ExpandOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport ExpandOutlinedSvg from \"@ant-design/icons-svg/es/asn/ExpandOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar ExpandOutlined = function ExpandOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: ExpandOutlinedSvg\n  }));\n};\n\n/**![expand](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHN0eWxlIC8+PC9kZWZzPjxwYXRoIGQ9Ik0zNDIgODhIMTIwYy0xNy43IDAtMzIgMTQuMy0zMiAzMnYyMjRjMCA4LjggNy4yIDE2IDE2IDE2aDQ4YzguOCAwIDE2LTcuMiAxNi0xNlYxNjhoMTc0YzguOCAwIDE2LTcuMiAxNi0xNnYtNDhjMC04LjgtNy4yLTE2LTE2LTE2em01NzggNTc2aC00OGMtOC44IDAtMTYgNy4yLTE2IDE2djE3Nkg2ODJjLTguOCAwLTE2IDcuMi0xNiAxNnY0OGMwIDguOCA3LjIgMTYgMTYgMTZoMjIyYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjY4MGMwLTguOC03LjItMTYtMTYtMTZ6TTM0MiA4NTZIMTY4VjY4MGMwLTguOC03LjItMTYtMTYtMTZoLTQ4Yy04LjggMC0xNiA3LjItMTYgMTZ2MjI0YzAgMTcuNyAxNC4zIDMyIDMyIDMyaDIyMmM4LjggMCAxNi03LjIgMTYtMTZ2LTQ4YzAtOC44LTcuMi0xNi0xNi0xNnpNOTA0IDg4SDY4MmMtOC44IDAtMTYgNy4yLTE2IDE2djQ4YzAgOC44IDcuMiAxNiAxNiAxNmgxNzR2MTc2YzAgOC44IDcuMiAxNiAxNiAxNmg0OGM4LjggMCAxNi03LjIgMTYtMTZWMTIwYzAtMTcuNy0xNC4zLTMyLTMyLTMyeiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(ExpandOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ExpandOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar SaveOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z\" } }] }, \"name\": \"save\", \"theme\": \"outlined\" };\nexport default SaveOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport SaveOutlinedSvg from \"@ant-design/icons-svg/es/asn/SaveOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar SaveOutlined = function SaveOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: SaveOutlinedSvg\n  }));\n};\n\n/**![save](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg5My4zIDI5My4zTDczMC43IDEzMC43Yy03LjUtNy41LTE2LjctMTMtMjYuNy0xNlYxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjMzOC41YzAtMTctNi43LTMzLjItMTguNy00NS4yek0zODQgMTg0aDI1NnYxMDRIMzg0VjE4NHptNDU2IDY1NkgxODRWMTg0aDEzNnYxMzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoMzIwYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjIwNS44bDEzNiAxMzZWODQwek01MTIgNDQyYy03OS41IDAtMTQ0IDY0LjUtMTQ0IDE0NHM2NC41IDE0NCAxNDQgMTQ0IDE0NC02NC41IDE0NC0xNDQtNjQuNS0xNDQtMTQ0LTE0NHptMCAyMjRjLTQ0LjIgMC04MC0zNS44LTgwLTgwczM1LjgtODAgODAtODAgODAgMzUuOCA4MCA4MC0zNS44IDgwLTgwIDgweiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(SaveOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'SaveOutlined';\n}\nexport default RefIcon;","/**\n * Generic library merge utility\n * Merges an entity into a library object under the specified key\n */\n\nexport interface LibraryObject {\n  [key: string]: any;\n  lastUpdated?: string;\n}\n\n/**\n * Merge an entity into a library object\n * @param library - The existing library object\n * @param jsonKey - The key in the library (e.g., 'panels', 'songs', 'recipes')\n * @param entityName - The name/ID of the entity\n * @param entityData - The entity data to merge\n * @returns Updated library object\n */\nexport function mergeEntityIntoLibrary(\n  library: LibraryObject | null | undefined,\n  jsonKey: string,\n  entityName: string,\n  entityData: any\n): LibraryObject {\n  const lib = (library && typeof library === 'object') ? { ...library } : {};\n  \n  // Ensure the jsonKey exists as an object\n  lib[jsonKey] = lib[jsonKey] && typeof lib[jsonKey] === 'object' ? { ...lib[jsonKey] } : {};\n  \n  // Merge the entity\n  lib[jsonKey][entityName] = entityData;\n  \n  // Update timestamp\n  lib.lastUpdated = new Date().toISOString();\n  \n  return lib;\n}\n\nexport default mergeEntityIntoLibrary;\n","import React, { useState } from 'react';\nimport { Modal, Form, Input, Button, message } from 'antd';\nimport { SaveOutlined } from '@ant-design/icons';\nimport GoogleDriveServiceModern from '../../apps/songs/services/GoogleDriveServiceModern';\nimport { mergeEntityIntoLibrary } from '../../utils/mergeEntityIntoLibrary';\nimport type { SaveAsModalProps } from './types';\n\n/**\n * SaveAsModal - Reusable modal for saving entities to a library JSON file\n * \n * This modal prompts for a name, then saves the entity to the appropriate\n * key in the library JSON file on Google Drive.\n * \n * @example\n * <SaveAsModal\n *   visible={showSaveAs}\n *   jsonKey=\"panels\"\n *   displayLabel=\"Panel\"\n *   entityData={currentPanel}\n *   onSave={async (name, panel) => {\n *     console.log('Saving panel:', name, panel);\n *   }}\n *   onClose={() => setShowSaveAs(false)}\n * />\n */\nexport const SaveAsModal = <T extends Record<string, any> = any>({\n  visible,\n  jsonKey,\n  displayLabel,\n  entityData,\n  onSave,\n  onClose,\n  settingsKey\n}: SaveAsModalProps<T>) => {\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [service] = useState(() => GoogleDriveServiceModern);\n\n  const handleSave = async () => {\n    try {\n      setLoading(true);\n      const values = await form.validateFields();\n      const entityName = values.name.trim();\n\n      // Try to restore session if not already signed in\n      if (!service.isSignedIn && service.restoreSession) {\n        console.log('ðŸ“š SaveAsModal: Attempting to restore session...');\n        service.restoreSession();\n      }\n\n      const isAuthenticated = service.isSignedIn && service.accessToken;\n      console.log('ðŸ“š SaveAsModal: Auth check:', {\n        isSignedIn: service.isSignedIn,\n        hasToken: !!service.accessToken,\n        isAuthenticated\n      });\n\n      if (!isAuthenticated) {\n        message.error('Not signed in to Google Drive. Please sign in first.');\n        setLoading(false);\n        return;\n      }\n\n      // Get library file settings - use settingsKey if provided, otherwise use jsonKey\n      const keyForSettings = settingsKey || jsonKey;\n      const settings: any = service.getSettings();\n      const fileName = settings[`${keyForSettings}LibraryFile`] || `library.json`;\n      const folderPath = settings[`${keyForSettings}Folder`] || '/';\n      const fullPath = folderPath === '/' ? `/${fileName}` : `${folderPath}/${fileName}`;\n\n      console.log(`ðŸ“š SaveAsModal (${jsonKey}): Saving \"${entityName}\" to: ${fullPath}`, {\n        settingsKey: keyForSettings,\n        fileName,\n        folderPath\n      });\n\n      // Find or create the library file\n      let fileId: string | null = null;\n      const fileResult = await service.findFile(fileName, folderPath);\n\n      if (fileResult.found) {\n        fileId = fileResult.fileId;\n        console.log('ðŸ“š SaveAsModal: Library file found:', fileId);\n      } else {\n        console.log('ðŸ“š SaveAsModal: Library file not found, creating new file...');\n        const newFileResult = await service.createNewLibrary(fileName, folderPath);\n        fileId = newFileResult.fileId;\n        console.log('ðŸ“š SaveAsModal: New library file created:', fileId);\n      }\n\n      if (!fileId) {\n        throw new Error('Failed to find or create library file');\n      }\n\n      // Load current library data\n      let currentLibrary;\n      try {\n        currentLibrary = await service.loadLibraryById(fileId);\n        console.log('ðŸ“š SaveAsModal: Loaded current library:', currentLibrary);\n      } catch (err) {\n        console.warn('ðŸ“š SaveAsModal: Could not load library, starting fresh:', err);\n        currentLibrary = {};\n      }\n\n      // Merge entity into library\n      const updatedLibrary = mergeEntityIntoLibrary(\n        currentLibrary,\n        jsonKey,\n        entityName,\n        entityData\n      );\n\n      console.log('ðŸ“š SaveAsModal: Merged library:', {\n        [jsonKey]: Object.keys(updatedLibrary[jsonKey] || {})\n      });\n\n      // Save library back to file\n      await service.saveLibraryToFile(fileId, updatedLibrary);\n      \n      console.log(`ðŸ“š SaveAsModal: Successfully saved ${displayLabel}: \"${entityName}\"`);\n      message.success(`${displayLabel} \"${entityName}\" saved successfully`);\n\n      // Call parent's onSave callback\n      await onSave(entityName, entityData);\n\n      // Reset form and close\n      form.resetFields();\n      onClose();\n    } catch (error: any) {\n      console.error('ðŸ“š SaveAsModal: Error saving:', error);\n      message.error(error.message || `Failed to save ${displayLabel.toLowerCase()}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancel = () => {\n    form.resetFields();\n    onClose();\n  };\n\n  return (\n    <Modal\n      open={visible}\n      title={`Save ${displayLabel} As`}\n      onCancel={handleCancel}\n      footer={[\n        <Button key=\"cancel\" onClick={handleCancel} disabled={loading}>\n          Cancel\n        </Button>,\n        <Button\n          key=\"save\"\n          type=\"primary\"\n          icon={<SaveOutlined />}\n          loading={loading}\n          onClick={handleSave}\n        >\n          Save\n        </Button>\n      ]}\n      width={500}\n    >\n      <Form form={form} layout=\"vertical\" style={{ marginTop: 24 }}>\n        <Form.Item\n          label={`${displayLabel} Name`}\n          name=\"name\"\n          rules={[\n            { required: true, message: `Please enter a ${displayLabel.toLowerCase()} name` },\n            { min: 1, message: 'Name must be at least 1 character' },\n            { max: 100, message: 'Name must be less than 100 characters' }\n          ]}\n          tooltip={`Choose a unique name for this ${displayLabel.toLowerCase()}`}\n        >\n          <Input\n            placeholder={`Enter ${displayLabel.toLowerCase()} name`}\n            autoFocus\n            autoComplete=\"off\"\n            onPressEnter={() => handleSave()}\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default SaveAsModal;\n","/**\n * ColorworkPattern - Core model for representing colorwork patterns\n * Reuses the existing colorwork grid structure from knitting-designer\n */\nexport class ColorworkPattern {\n    grid: any[][];\n    colors: any;\n    metadata: any;\n\n    constructor(width = 0, height = 0, grid: any[][] | null = null, colors: any = {}, metadata: any = {}, fillColor = 'MC') {\n        if (grid) {\n            this.grid = grid; // 2D array of color IDs\n        } else {\n            // Initialize empty grid\n            this.grid = [];\n            for (let row = 0; row < height; row++) {\n                this.grid.push(new Array(width).fill(fillColor));\n            }\n        }\n        this.colors = colors; // Map of colorId -> { id, label, color }\n        this.metadata = metadata; // Pattern name, description, etc.\n    }\n\n    static fromJSON(json: any) {\n        return new ColorworkPattern(\n            0, 0,\n            json.grid || [],\n            json.colors || {},\n            json.metadata || {}\n        );\n    }\n\n    toJSON() {\n        return {\n            grid: this.grid,\n            colors: this.colors,\n            metadata: this.metadata\n        };\n    }\n\n    // Set a color definition\n    setColor(colorId: any, hexColor: any, label: any) {\n        this.colors[colorId] = {\n            id: colorId,\n            color: hexColor,\n            label: label || colorId\n        };\n    }\n\n    // Set a stitch color\n    setStitch(row: any, col: any, colorId: any) {\n        if (row >= 0 && row < this.grid.length && col >= 0 && col < this.grid[row].length) {\n            this.grid[row][col] = colorId;\n        }\n    }\n\n    getRowCount() {\n        return this.grid.length;\n    }\n\n    getStitchCount() {\n        return this.grid.length > 0 ? this.grid[0].length : 0;\n    }\n\n    getColorsUsed() {\n        const usedColorIds = new Set();\n        this.grid.forEach((row: any) => {\n            row.forEach((colorId: any) => {\n                if (colorId) usedColorIds.add(colorId);\n            });\n        });\n        return Array.from(usedColorIds).map((id: any) => this.colors[id]).filter(Boolean);\n    }\n\n    // Get the color instructions for a specific row\n    getRowInstructions(rowIndex: any) {\n        if (rowIndex < 0 || rowIndex >= this.grid.length) return [];\n        \n        const row = this.grid[rowIndex];\n        const instructions = [];\n        let currentColor = null;\n        let stitchCount = 0;\n\n        for (let i = 0; i < row.length; i++) {\n            const colorId = row[i];\n            if (colorId === currentColor) {\n                stitchCount++;\n            } else {\n                if (currentColor !== null) {\n                    instructions.push({\n                        colorId: currentColor,\n                        color: this.colors[currentColor],\n                        stitchCount: stitchCount\n                    });\n                }\n                currentColor = colorId;\n                stitchCount = 1;\n            }\n        }\n\n        // Add the last color run\n        if (currentColor !== null) {\n            instructions.push({\n                colorId: currentColor,\n                color: this.colors[currentColor],\n                stitchCount: stitchCount\n            });\n        }\n\n        return instructions;\n    }\n\n    // Resize pattern to fit specific dimensions\n    resizeToFit(targetStitches, targetRows, fillColor = 'MC') {\n        const currentStitches = this.getStitchCount();\n        const currentRows = this.getRowCount();\n\n        if (currentStitches === 0 || currentRows === 0) return;\n\n        const newGrid = [];\n        for (let row = 0; row < targetRows; row++) {\n            const newRow = [];\n            const sourceRow = Math.floor((row * currentRows) / targetRows);\n            \n                for (let col = 0; col < targetStitches; col++) {\n                const sourceCol = Math.floor((col * currentStitches) / targetStitches);\n                newRow.push(this.grid[sourceRow] ? this.grid[sourceRow][sourceCol] : fillColor);\n            }\n            newGrid.push(newRow);\n        }\n\n        this.grid = newGrid;\n    }\n\n    // Create a section of the pattern for a specific stitch range\n    extractSection(startStitch, endStitch, startRow = 0, endRow = null) {\n        endRow = endRow || this.getRowCount();\n        \n        const section = [];\n        for (let row = startRow; row < Math.min(endRow, this.getRowCount()); row++) {\n            const newRow = [];\n            for (let col = startStitch; col < Math.min(endStitch, this.getStitchCount()); col++) {\n                newRow.push(this.grid[row] ? this.grid[row][col] : 'MC');\n            }\n            section.push(newRow);\n        }\n\n        return new ColorworkPattern(0, 0, section, this.colors, {\n            ...this.metadata,\n            isSection: true,\n            originalStitchRange: [startStitch, endStitch],\n            originalRowRange: [startRow, endRow]\n        });\n    }\n}\n","class StitchPlan {\n    rows: any[];\n    colorworkMapping: any;\n\n    constructor() {\n        this.rows = [];\n        this.colorworkMapping = null; // New: Store colorwork data\n    }\n\n    addRow(row: any) {\n        this.rows.push(row);\n    }\n\n    // New: Add colorwork mapping from PanelColorworkComposer\n    setColorworkMapping(mappedRows: any, colorworkPattern: any) {\n        this.colorworkMapping = {\n            mappedRows,\n            colorworkPattern\n        };\n    }\n\n    generateKnittingInstructions() {\n        // Keep existing shaping instruction generation\n        return this.generateShapingInstructions();\n    }\n\n    // New: Generate colorwork instructions for each row\n    generateColorworkInstructions() {\n        if (!this.colorworkMapping) return [];\n        \n        return this.colorworkMapping.mappedRows.map((mappedRow, index: number) => ({\n            row: index + 1,\n            machineRow: this.rows[index]?.rowNumber || index + 1,\n            colorwork: this.generateRowColorworkSequence(mappedRow.colorwork),\n            stitchCount: mappedRow.totalStitches\n        }));\n    }\n\n    // New: Convert colorwork array to sequence format\n    generateRowColorworkSequence(colorworkRow: any) {\n        const sequence = [];\n        let currentColor = null;\n        let stitchCount = 0;\n\n        for (const colorId of colorworkRow) {\n            if (colorId === currentColor) {\n                stitchCount++;\n            } else {\n                if (currentColor !== null) {\n                    sequence.push({ colorId: currentColor, stitchCount });\n                }\n                currentColor = colorId;\n                stitchCount = 1;\n            }\n        }\n\n        if (currentColor !== null) {\n            sequence.push({ colorId: currentColor, stitchCount });\n        }\n\n        return sequence;\n    }\n\n    // New: Check if this stitch plan has colorwork data\n    hasColorwork() {\n        return this.colorworkMapping !== null;\n    }\n\n    // Keep existing shaping instruction generation\n    generateShapingInstructions() {\n        // case: no rows\n        if (this.rows.length === 0) {\n            return [];\n        }\n        const instructions = [];\n        // case: rectangular panel, no shaping\n        const lowerLeft = this.rows[0].leftStitchesInWork;\n        const lowerRight = this.rows[0].rightStitchesInWork;\n        const upperLeft = this.rows[this.rows.length - 1].leftStitchesInWork;\n        const upperRight = this.rows[this.rows.length - 1].rightStitchesInWork;\n        if (lowerLeft === upperLeft && lowerRight === upperRight) {\n            instructions.push(`Knit ${this.rows.length} rows (RC=${this.rows[this.rows.length - 1].rowNumber}, ${this.rows[this.rows.length - 1].leftStitchesInWork + this.rows[this.rows.length - 1].rightStitchesInWork} sts in work).`);\n        }\n        // case: trapezoidal panel\n        else {\n            const firstRow = this.rows[0];\n            let consecutiveRows = 1;\n            let prevRow = firstRow;\n            for (const row of this.rows) {\n                const leftDiff = row.leftStitchesInWork - prevRow.leftStitchesInWork;\n                const rightDiff = row.rightStitchesInWork - prevRow.rightStitchesInWork;\n                if (leftDiff === 0 && rightDiff === 0) {\n                    consecutiveRows++;\n                    continue;\n                } else {\n                    let instruction = '';\n                    if (leftDiff > 0) {\n                        instruction += `Increase ${leftDiff} stitch${leftDiff > 1 ? 'es' : ''} on the left. `;\n                    } else if (leftDiff < 0) {\n                        instruction += `Decrease ${-leftDiff} stitch${leftDiff < -1 ? 'es' : ''} on the left. `;\n                    }\n                    if (rightDiff > 0) {\n                        instruction += `Increase ${rightDiff} stitch${rightDiff > 1 ? 'es' : ''} on the right. `;\n                    } else if (rightDiff < 0) {\n                        instruction += `Decrease ${-rightDiff} stitch${rightDiff < -1 ? 'es' : ''} on the right. `;\n                    }\n                    prevRow = row;\n                    instruction = consecutiveRows > 1 ? `${instruction}Knit ${consecutiveRows} rows. ` : `${instruction}Knit 1 row. `;\n                    instruction += `(RC=${row.rowNumber}, ${row.leftStitchesInWork+row.rightStitchesInWork} sts in work)`;\n                    consecutiveRows = 1;\n                    instructions.push(instruction);\n                }\n            }\n        }\n        return instructions;\n    }\n}\n\nStitchPlan.Row = class {\n    constructor(rowNumber, leftStitchesInWork, rightStitchesInWork) {\n        this.rowNumber = rowNumber;\n        this.leftStitchesInWork = leftStitchesInWork;\n        this.rightStitchesInWork = rightStitchesInWork;\n        this.colorwork = null; // New: Store colorwork for this row\n    }\n\n    // New: Set colorwork data for this row\n    setColorwork(colorworkArray, colorworkPattern) {\n        this.colorwork = {\n            colors: colorworkArray,\n            pattern: colorworkPattern\n        };\n    }\n\n    // New: Get formatted colorwork instructions for this row\n    getColorworkInstructions() {\n        if (!this.colorwork) return null;\n        \n        const sequence = [];\n        let currentColor = null;\n        let stitchCount = 0;\n\n        for (const colorId of this.colorwork.colors) {\n            if (colorId === currentColor) {\n                stitchCount++;\n            } else {\n                if (currentColor !== null) {\n                    const colorInfo = this.colorwork.pattern.colors[currentColor];\n                    sequence.push({\n                        colorId: currentColor,\n                        colorLabel: colorInfo?.label || currentColor,\n                        colorHex: colorInfo?.color || '#000000',\n                        stitchCount\n                    });\n                }\n                currentColor = colorId;\n                stitchCount = 1;\n            }\n        }\n\n        if (currentColor !== null) {\n            const colorInfo = this.colorwork.pattern.colors[currentColor];\n            sequence.push({\n                colorId: currentColor,\n                colorLabel: colorInfo?.label || currentColor,\n                colorHex: colorInfo?.color || '#000000',\n                stitchCount\n            });\n        }\n\n        return sequence;\n    }\n};\n\nexport { StitchPlan };","class Gauge {\n    /**\n     * Represents the knitting gauge, which defines stitch and row density.\n     * @param {number} stitchesPerFourInches - The number of stitches in four inches.\n     * @param {number} rowsPerFourInches - The number of rows in four inches.\n     * @param {number} scalingFactor - Optional scaling factor for garment size (default: 1.0).\n     */\n    constructor(stitchesPerFourInches, rowsPerFourInches, scalingFactor = 1.0) {\n        this.stitchesPerFourInches = stitchesPerFourInches;\n        this.rowsPerFourInches = rowsPerFourInches;\n        this.scalingFactor = scalingFactor;\n    }\n\n    getStitchesPerInch() {\n        return this.stitchesPerFourInches / 4;\n    }\n\n    getRowsPerInch() {\n        return this.rowsPerFourInches / 4;\n    }\n\n    /**\n     * Get the effective stitches per inch accounting for scaling factor\n     */\n    getEffectiveStitchesPerInch() {\n        return this.getStitchesPerInch() / this.scalingFactor;\n    }\n\n    /**\n     * Get the effective rows per inch accounting for scaling factor\n     */\n    getEffectiveRowsPerInch() {\n        return this.getRowsPerInch() / this.scalingFactor;\n    }\n}\n\nconst defaultGauge = new Gauge(19, 30);\n\nexport { Gauge, defaultGauge };","import { StitchPlan } from './StitchPlan';\nimport { defaultGauge } from './Gauge';\n\nclass Trapezoid {\n    height: number;\n    baseA: number;\n    baseB: number;\n    baseBHorizontalOffset: number;\n    successors: Trapezoid[];\n    modificationScale: number;\n    finishingSteps: any[];\n    label: string | null;\n\n    /**\n     * Represents a trapezoidal section of the knitting panel.\n     * Responsible for increases and decreases in instructions.\n     */\n    constructor(height: number, baseA: number, baseB: number, baseBHorizontalOffset = 0, successors: Trapezoid[] = [], finishingSteps: any[] = [], sizeModifier = 1, label: string | null = null) {\n        this.height = height;\n        this.baseA = baseA;\n        this.baseB = baseB;\n        this.baseBHorizontalOffset = baseBHorizontalOffset;\n        this.successors = successors;\n        this.modificationScale = sizeModifier;\n        this.finishingSteps = finishingSteps; // Array of extra instructions for finishing\n        this.label = label; // Optional display label (e.g., \"A\", \"B\", \"C\")\n    }\n\n    setSizeModifier(sizeModifier) {\n        this.modificationScale = sizeModifier;\n    }\n\n    getHeight() {\n        return this.height * this.modificationScale;\n    }\n\n    getLowerBase() {\n        return this.baseA * this.modificationScale;\n    }\n\n    getUpperBase() {\n        return this.baseB * this.modificationScale;\n    }\n\n    getOffset() {\n        return this.baseBHorizontalOffset * this.modificationScale;\n    }\n\n    static fromObject(json) {\n        // Defensive checks: ensure json is an object with meaningful data\n        if (!json || typeof json !== 'object' || Array.isArray(json) && json.length === 0) {\n            return null;\n        }\n\n        // Build successors first, recursively. Ensure we filter out any nulls\n        // returned from recursive calls so the successors array contains only\n        // valid Trapezoid instances.\n        const successors = Array.isArray(json.successors)\n            ? json.successors.map((s: any) => Trapezoid.fromObject(s)).filter((s: any) => s != null)\n            : [];\n\n        // Parse numeric fields defensively so downstream logic doesn't receive undefined\n        const height = (typeof json.height === 'number') ? json.height : (Number(json.height) || 0);\n        const baseA = (typeof json.baseA === 'number') ? json.baseA : (Number(json.baseA) || 0);\n        const baseB = (typeof json.baseB === 'number') ? json.baseB : (Number(json.baseB) || 0);\n        const baseBHorizontalOffset = (typeof json.baseBHorizontalOffset === 'number') ? json.baseBHorizontalOffset : (Number(json.baseBHorizontalOffset) || 0);\n        const finishingSteps = Array.isArray(json.finishingSteps) ? json.finishingSteps : (json.finishingSteps ? [json.finishingSteps] : []);\n        const sizeModifier = (typeof json.sizeModifier === 'number') ? json.sizeModifier : (Number(json.sizeModifier) || 1);\n        const label = (typeof json.label === 'string') ? json.label : (json.label == null ? null : String(json.label));\n\n        const trap = new Trapezoid(\n            height,\n            baseA,\n            baseB,\n            baseBHorizontalOffset,\n            successors,\n            finishingSteps,\n            sizeModifier,\n            label\n        );\n\n        // Preserve existing id if present, otherwise generate a stable-ish fallback id.\n        // Use json.id if available, or try common alternative keys, then fall back to\n        // a deterministic-ish counter to avoid many duplicates during a single load.\n        try {\n            if (json.id) {\n                trap.id = json.id;\n            } else if (json._id) {\n                trap.id = json._id;\n            } else {\n                // Maintain a simple counter on the class to provide stable ids within\n                // the same runtime load. This is safer than using Date.now+random for\n                // reproducible behavior during a single import operation.\n                if (!Trapezoid._nextId) Trapezoid._nextId = 1;\n                trap.id = `trap-${Trapezoid._nextId++}`;\n            }\n        } catch (e: unknown) {\n            trap.id = json && (json.id || json._id) ? (json.id || json._id) : (`trap-${Date.now()}`);\n        }\n\n        // Ensure label is never undefined (use null when absent)\n        trap.label = label === undefined ? null : label;\n\n        // Preserve hem flag and short-row metadata if present\n        trap.isHem = !!json.isHem;\n        trap.shortRows = Array.isArray(json.shortRows) ? json.shortRows.map((s: any) => ({ ...s })) : [];\n\n        return trap;\n    }\n\n    toJSON() {\n        return {\n            height: this.height,\n            baseA: this.baseA,\n            baseB: this.baseB,\n            baseBHorizontalOffset: this.baseBHorizontalOffset,\n            successors: (this.successors || []).map((s: any) => (typeof s.toJSON === 'function' ? s.toJSON() : s)),\n            finishingSteps: this.finishingSteps || [],\n            sizeModifier: this.modificationScale || 1,\n            label: this.label || null,\n            isHem: !!this.isHem,\n            shortRows: Array.isArray(this.shortRows) ? this.shortRows.map((s: any) => ({ ...s })) : []\n        };\n    }\n\n    getUpperBaseWidthInStitches(gauge = defaultGauge) {\n        return Math.round(this.getUpperBase() * (gauge.getStitchesPerInch()));\n    }\n\n    getStitchPlan(gauge, sizeModifier, startRow = 1) {\n        const stitchesPerInch = gauge.getStitchesPerInch() * sizeModifier;\n        const rowsPerInch = gauge.getRowsPerInch() * sizeModifier;\n        const startStitches = Math.round(this.getLowerBase() * stitchesPerInch);\n        const startStitchesLeft = Math.floor(startStitches / 2);\n        const startStitchesRight = startStitches % 2 === 0 ? startStitchesLeft : startStitchesLeft + 1;\n        const totalRows = Math.round(this.getHeight() * rowsPerInch);\n\n        // calculate the number of stitches to be increased on the left and right edges of the trapezoid\n        const baseWidthDifference = this.getUpperBase() - this.getLowerBase();\n        const leftIncreaseWidth = baseWidthDifference / 2 - this.getOffset();\n        const rightIncreaseWidth = baseWidthDifference / 2 + this.getOffset();\n        const leftIncreaseStitches = Math.round(leftIncreaseWidth * stitchesPerInch);\n        const rightIncreaseStitches = Math.round(rightIncreaseWidth * stitchesPerInch);\n\n        // calculate how often to increase or decrease stitches\n        const increaseLeftFrequency = Math.abs(leftIncreaseStitches / totalRows);\n        const increaseRightFrequency = Math.abs(rightIncreaseStitches / totalRows);\n\n        let leftShapingCounter = 0, rightShapingCounter = 0;\n\n        const stitchPlan = new StitchPlan(gauge, sizeModifier);\n        let prevRow = new StitchPlan.Row(startRow - 1, startStitchesLeft, startStitchesRight);\n        for (let rowNumber = startRow; rowNumber < startRow + totalRows; rowNumber++) {\n            let leftShapingModifier = 0;\n            let rightShapingModifier = 0;\n            leftShapingCounter += increaseLeftFrequency;\n            rightShapingCounter += increaseRightFrequency;\n\n            // Handle multiple increases or decreases in a single row\n            while (leftShapingCounter >= 1) {\n                if (leftIncreaseStitches > 0) {\n                    // increase 1 stitch on the left edge\n                    leftShapingModifier += 1;\n                } else {\n                    // decrease 1 stitch on the left edge\n                    leftShapingModifier -= 1;\n                }\n                leftShapingCounter -= 1;\n            }\n\n            while (rightShapingCounter >= 1) {\n                if (rightIncreaseStitches > 0) {\n                    // increase 1 stitch on the right edge\n                    rightShapingModifier += 1;\n                } else {\n                    // decrease 1 stitch on the right edge\n                    rightShapingModifier -= 1;\n                }\n                rightShapingCounter -= 1;\n            }\n\n            const leftStitchesInWork = prevRow.leftStitchesInWork + leftShapingModifier;\n            const rightStitchesInWork = prevRow.rightStitchesInWork + rightShapingModifier;\n            const newRow = new StitchPlan.Row(rowNumber, leftStitchesInWork, rightStitchesInWork);\n            stitchPlan.addRow(newRow);\n            prevRow = newRow;\n        }\n\n        return stitchPlan;\n    }\n\n    generateKnittingInstructions(gauge, sizeModifier, startRow = 1, isRoot = false, visualMotif = null) {\n        const stitchPlan = this.getStitchPlan(gauge, sizeModifier, startRow);\n        const instructions = [];\n\n        if (isRoot && stitchPlan.rows.length > 0) {\n            instructions.push(`Cast on ${stitchPlan.rows[0].leftStitchesInWork + stitchPlan.rows[0].rightStitchesInWork} stitches.`);\n        }\n\n        instructions.push(...stitchPlan.generateKnittingInstructions(visualMotif));\n\n        instructions.push(...this.finishingSteps);\n\n        if (this.successors.length > 1) {\n            instructions.push(`Divide into ${this.successors.length} sections:`);\n            for (let i = 0; i < this.successors.length; i++) {\n                const successor = this.successors[i];\n                const successorBaseWidth = successor.getUpperBaseWidthInStitches(gauge, sizeModifier);\n                if (successor.getHeight() > 0) {\n                    instructions.push(`Section ${i + 1}: ${successorBaseWidth} stitches`);\n                    const successorInstructions = successor.generateKnittingInstructions(gauge, sizeModifier, stitchPlan.rows.length > 0 ? stitchPlan.rows[stitchPlan.rows.length - 1].rowNumber + 1 : startRow, false, visualMotif ? visualMotif.getChild(stitchPlan.rows.length) : null);\n                    instructions.push(...successorInstructions);\n                } else {\n                    instructions.push(`Section ${i + 1}: bind off ${successor.getUpperBaseWidthInStitches(gauge, sizeModifier)} stitches.`);\n                }\n            }\n        } else if (this.successors.length === 1) {\n            const successor = this.successors[0];\n            const successorBaseWidth = successor.getUpperBaseWidthInStitches(gauge, sizeModifier);\n            if (successor.getHeight() > 0) {\n                const successorInstructions = successor.generateKnittingInstructions(gauge, sizeModifier, stitchPlan.rows.length > 0 ? stitchPlan.rows[stitchPlan.rows.length - 1].rowNumber + 1 : startRow, false, visualMotif ? visualMotif.getChild(stitchPlan.rows.length) : null);\n                instructions.push(...successorInstructions);\n            } else {\n                instructions.push(`Bind off ${successorBaseWidth} stitches.`);\n            }\n        } else if (stitchPlan.rows.length > 0) {\n            instructions.push(`Bind off ${stitchPlan.rows[stitchPlan.rows.length - 1].leftStitchesInWork + stitchPlan.rows[stitchPlan.rows.length - 1].rightStitchesInWork} stitches.`);\n        }\n        return instructions;\n    }\n}\n\nexport { Trapezoid };","import { Trapezoid } from './Trapezoid';\nimport { defaultGauge } from './Gauge';\n\nclass Panel {\n    /**\n     * Responsible for gauge and sizing, and motifs\n     */\n    constructor(shape, gauge = defaultGauge, sizeModifier = 1.006, visualMotif = null) {\n        // Accept either a Trapezoid instance or a plain object (parsed JSON)\n        if (!(shape instanceof Trapezoid)) {\n            // if it's already a plain object, pass it to fromObject directly\n            shape = Trapezoid.fromObject(shape);\n        }\n        this.shape = shape;\n        this.gauge = gauge;\n        this.sizeModifier = sizeModifier;\n        this.visualMotif = visualMotif;\n        this.shape.setSizeModifier(sizeModifier);\n    }\n\n    generateKnittingInstructions() {\n        if (!this.shape) return [];\n        return this.shape.generateKnittingInstructions(this.gauge, this.sizeModifier, 1, true, this.visualMotif);\n    }\n\n    static fromObject(json) {\n        return new Panel(Trapezoid.fromObject(json.shapes), json.gauge, json.sizeModifier, json.visualMotif);\n    }\n\n    toJSON() {\n        return {\n            shapes: (this.shape && typeof this.shape.toJSON === 'function') ? this.shape.toJSON() : this.shape,\n            gauge: this.gauge,\n            sizeModifier: this.sizeModifier,\n            visualMotif: this.visualMotif\n        };\n    }\n}\n\nexport { Panel };","import { ColorworkPattern } from './ColorworkPattern';\nimport { Trapezoid } from './Trapezoid';\nimport { Panel } from './Panel';\nimport { Gauge } from './Gauge';\n\n/**\n * PanelColorworkComposer - Combines panel shapes with colorwork patterns\n * Maps colorwork to panel geometry and handles shaping edge cases\n */\nexport class PanelColorworkComposer {\n    constructor() {\n        // Configuration options\n        this.defaultStretchMode = 'repeat'; // 'repeat', 'stretch', 'center'\n        this.defaultAlignmentMode = 'center'; // 'center', 'left', 'right'\n    }\n\n    /**\n     * Combine a panel with a colorwork pattern\n     */\n    combinePatterns(panel, colorworkPattern, options = {}) {\n        const {\n            stretchMode = this.defaultStretchMode,\n            alignmentMode = this.defaultAlignmentMode\n        } = options;\n\n        // Generate the stitch plan for the panel\n        const stitchPlan = this.generatePanelStitchPlan(panel);\n        \n        // Map the colorwork to the panel shape\n        const mappedPattern = this.mapColorworkToShape(stitchPlan, colorworkPattern, {\n            stretchMode,\n            alignmentMode\n        });\n\n        // Augment the StitchPlan with colorwork data\n        stitchPlan.setColorworkMapping(mappedPattern, colorworkPattern);\n        \n        // Also add colorwork to individual rows\n        mappedPattern.forEach((mappedRow, index: number) => {\n            if (stitchPlan.rows[index]) {\n                stitchPlan.rows[index].setColorwork(mappedRow.colorwork, colorworkPattern);\n            }\n        });\n\n        return new CombinedPattern(panel, colorworkPattern, mappedPattern, stitchPlan);\n    }\n\n    /**\n     * Generate a stitch plan that represents the panel's shape row by row\n     */\n    generatePanelStitchPlan(panel) {\n        if (!panel.shape) return { rows: [] };\n        \n        const gauge = panel.gauge;\n        const sizeModifier = panel.sizeModifier;\n        \n        // Use the existing trapezoid stitch plan generation\n        return panel.shape.getStitchPlan(gauge, sizeModifier, 1);\n    }\n\n    /**\n     * Map colorwork pattern to panel shape\n     */\n    mapColorworkToShape(stitchPlan, colorworkPattern, options = {}) {\n        const { stretchMode, alignmentMode } = options;\n        const mappedRows = [];\n\n        if (!stitchPlan.rows || stitchPlan.rows.length === 0) {\n            return mappedRows;\n        }\n\n        const patternHeight = colorworkPattern.getRowCount();\n\n        for (let i = 0; i < stitchPlan.rows.length; i++) {\n            const stitchRow = stitchPlan.rows[i];\n            const totalStitches = stitchRow.leftStitchesInWork + stitchRow.rightStitchesInWork;\n            \n            // Determine which colorwork row to use\n            const colorworkRowIndex = this.mapRowIndex(i, stitchPlan.rows.length, patternHeight, stretchMode);\n            \n            // Generate the colorwork for this row\n            const mappedRow = this.mapRowStitches(\n                colorworkPattern,\n                colorworkRowIndex,\n                totalStitches,\n                stitchRow.leftStitchesInWork,\n                { stretchMode, alignmentMode }\n            );\n\n            mappedRows.push({\n                panelRow: i + 1,\n                machineRow: stitchRow.rowNumber,\n                leftStitches: stitchRow.leftStitchesInWork,\n                rightStitches: stitchRow.rightStitchesInWork,\n                totalStitches: totalStitches,\n                colorwork: mappedRow,\n                colorworkRowIndex: colorworkRowIndex\n            });\n        }\n\n        return mappedRows;\n    }\n\n    /**\n     * Map a row index from panel space to colorwork space\n     */\n    mapRowIndex(panelRowIndex, totalPanelRows, colorworkRows, stretchMode) {\n        if (colorworkRows === 0) return 0;\n\n        switch (stretchMode) {\n            case 'stretch':\n                // Stretch the colorwork to fit the panel height\n                return Math.floor((panelRowIndex * colorworkRows) / totalPanelRows);\n            \n            case 'repeat':\n                // Repeat the colorwork pattern\n                return panelRowIndex % colorworkRows;\n            \n            case 'center': {\n                // Center the colorwork in the panel\n                const startOffset = Math.floor((totalPanelRows - colorworkRows) / 2);\n                if (panelRowIndex < startOffset || panelRowIndex >= startOffset + colorworkRows) {\n                    return -1; // No colorwork for this row\n                }\n                return panelRowIndex - startOffset;\n            }\n            \n            default:\n                return panelRowIndex % colorworkRows;\n        }\n    }\n\n    /**\n     * Map stitches for a single row\n     */\n    mapRowStitches(colorworkPattern, colorworkRowIndex, totalStitches, leftStitches, options = {}) {\n        const { stretchMode } = options;\n        \n        if (colorworkRowIndex < 0 || colorworkRowIndex >= colorworkPattern.getRowCount()) {\n            // Return main color for rows without colorwork\n            return Array(totalStitches).fill('MC');\n        }\n\n        const patternRow = colorworkPattern.grid[colorworkRowIndex];\n        const patternWidth = patternRow.length;\n        const mappedStitches = [];\n\n        for (let stitchIndex = 0; stitchIndex < totalStitches; stitchIndex++) {\n            let patternStitchIndex;\n\n            switch (stretchMode) {\n                case 'stretch':\n                    // Stretch the pattern to fit the row width\n                    patternStitchIndex = Math.floor((stitchIndex * patternWidth) / totalStitches);\n                    break;\n                \n                case 'repeat':\n                    // Repeat the pattern across the row\n                    patternStitchIndex = stitchIndex % patternWidth;\n                    break;\n                \n                case 'center': {\n                    // Center the pattern in the row\n                    const startOffset = Math.floor((totalStitches - patternWidth) / 2);\n                    if (stitchIndex < startOffset || stitchIndex >= startOffset + patternWidth) {\n                        mappedStitches.push('MC'); // Main color outside pattern\n                        continue;\n                    }\n                    patternStitchIndex = stitchIndex - startOffset;\n                    break;\n                }\n                \n                default:\n                    patternStitchIndex = stitchIndex % patternWidth;\n            }\n\n            const colorId = patternRow[patternStitchIndex] || 'MC';\n            mappedStitches.push(colorId);\n        }\n\n        return mappedStitches;\n    }\n\n    /**\n     * Handle edge cases in colorwork mapping\n     */\n    handleShapingEdgeCases(mappedPattern) {\n        // For future enhancement: Handle cases where shaping affects colorwork alignment\n        // - Increases/decreases at pattern boundaries\n        // - Maintaining pattern continuity across shaping\n        // - Adjusting for short rows\n        \n        return mappedPattern;\n    }\n}\n\n/**\n * CombinedPattern - Represents a panel with applied colorwork\n */\nexport class CombinedPattern {\n    constructor(panel, colorworkPattern, mappedRows, stitchPlan) {\n        this.panel = panel;\n        this.colorworkPattern = colorworkPattern;\n        this.mappedRows = mappedRows;\n        this.stitchPlan = stitchPlan;\n        this.metadata = {\n            created: new Date().toISOString(),\n            panelType: 'shaped',\n            hasColorwork: true\n        };\n    }\n\n    /**\n     * Get the total number of rows\n     */\n    getRowCount() {\n        return this.mappedRows.length;\n    }\n\n    /**\n     * Get colorwork for a specific row\n     */\n    getRowColorwork(rowIndex) {\n        if (rowIndex < 0 || rowIndex >= this.mappedRows.length) return null;\n        return this.mappedRows[rowIndex];\n    }\n\n    /**\n     * Get all colors used in the combined pattern\n     */\n    getColorsUsed() {\n        return this.colorworkPattern.getColorsUsed();\n    }\n\n    /**\n     * Export the combined pattern as JSON\n     */\n    toJSON() {\n        return {\n            panel: {\n                shape: this.panel.shape,\n                gauge: this.panel.gauge,\n                sizeModifier: this.panel.sizeModifier\n            },\n            colorworkPattern: this.colorworkPattern.toJSON(),\n            mappedRows: this.mappedRows,\n            metadata: this.metadata\n        };\n    }\n\n    /**\n     * Create a CombinedPattern from JSON data\n     */\n    static fromJSON(json) {\n        const panel = new Panel(\n            Trapezoid.fromJSON(json.panel.shape),\n            new Gauge(json.panel.gauge.stitchesPerFourInches, json.panel.gauge.rowsPerFourInches),\n            json.panel.sizeModifier\n        );\n        \n        const colorworkPattern = ColorworkPattern.fromJSON(json.colorworkPattern);\n        \n        return new CombinedPattern(\n            panel,\n            colorworkPattern,\n            json.mappedRows,\n            json.stitchPlan\n        );\n    }\n}\n","/**\n * ColorworkVisualizer - Transforms colorwork patterns into visual charts and instructions\n */\nexport class ColorworkVisualizer {\n    constructor() {\n        this.cellSize = 20; // Default cell size in pixels\n        this.showGrid = true;\n        this.showRowNumbers = true;\n        this.showStitchNumbers = false;\n    }\n\n    /**\n     * Generate an SVG chart for the colorwork pattern\n     */\n    generateChart(pattern, options = {}) {\n        const {\n            cellSize = this.cellSize,\n            showGrid = this.showGrid,\n            showRowNumbers = this.showRowNumbers,\n            showStitchNumbers = this.showStitchNumbers,\n            width = null,\n            height = null\n        } = options;\n\n        const rows = pattern.getRowCount();\n        const stitches = pattern.getStitchCount();\n        \n        if (rows === 0 || stitches === 0) {\n            return this.createEmptyChart();\n        }\n\n        const chartWidth = width || (stitches * cellSize + (showStitchNumbers ? 30 : 10));\n        const chartHeight = height || (rows * cellSize + (showRowNumbers ? 30 : 10));\n\n        return {\n            svg: this.renderSVG(pattern, { cellSize, showGrid, showRowNumbers, showStitchNumbers }),\n            dimensions: { width: chartWidth, height: chartHeight },\n            cellSize,\n            pattern\n        };\n    }\n\n    /**\n     * Generate row-by-row color instructions\n     */\n    generateRowInstructions(pattern) {\n        const instructions = [];\n        \n        for (let rowIndex = 0; rowIndex < pattern.getRowCount(); rowIndex++) {\n            const rowInstructions = pattern.getRowInstructions(rowIndex);\n            instructions.push({\n                row: rowIndex + 1,\n                stitches: rowInstructions,\n                totalStitches: pattern.getStitchCount(),\n                description: this.formatRowInstructions(rowInstructions, rowIndex + 1)\n            });\n        }\n\n        return instructions;\n    }\n\n    /**\n     * Render SVG element for the colorwork pattern\n     */\n    renderSVG(pattern, options = {}) {\n        const {\n            cellSize = this.cellSize,\n            showGrid = this.showGrid,\n            showRowNumbers = this.showRowNumbers,\n            showStitchNumbers = this.showStitchNumbers\n        } = options;\n\n        const rows = pattern.getRowCount();\n        const stitches = pattern.getStitchCount();\n        const leftMargin = showRowNumbers ? 30 : 5;\n        const topMargin = showStitchNumbers ? 30 : 5;\n        const chartWidth = stitches * cellSize + leftMargin + 5;\n        const chartHeight = rows * cellSize + topMargin + 5;\n\n        // Create SVG elements array\n        const elements = [];\n\n        // Add background\n        elements.push(`<rect width=\"${chartWidth}\" height=\"${chartHeight}\" fill=\"white\" stroke=\"none\"/>`);\n\n        // Add grid and cells\n        for (let row = 0; row < rows; row++) {\n            for (let col = 0; col < stitches; col++) {\n                const x = leftMargin + col * cellSize;\n                const y = topMargin + row * cellSize;\n                const colorId = pattern.grid[row][col];\n                const color = pattern.colors[colorId];\n                const fillColor = color ? color.color : '#ffffff';\n\n                // Add cell\n                elements.push(`<rect x=\"${x}\" y=\"${y}\" width=\"${cellSize}\" height=\"${cellSize}\" fill=\"${fillColor}\" stroke=\"${showGrid ? '#cccccc' : 'none'}\" stroke-width=\"0.5\"/>`);\n            }\n        }\n\n        // Add row numbers\n        if (showRowNumbers) {\n            for (let row = 0; row < rows; row++) {\n                const y = topMargin + row * cellSize + cellSize / 2;\n                elements.push(`<text x=\"20\" y=\"${y + 4}\" text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"10\" fill=\"#666\">${rows - row}</text>`);\n            }\n        }\n\n        // Add stitch numbers\n        if (showStitchNumbers) {\n            for (let col = 0; col < stitches; col++) {\n                const x = leftMargin + col * cellSize + cellSize / 2;\n                elements.push(`<text x=\"${x}\" y=\"20\" text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"10\" fill=\"#666\">${col + 1}</text>`);\n            }\n        }\n\n        const svgContent = `<svg width=\"${chartWidth}\" height=\"${chartHeight}\" xmlns=\"http://www.w3.org/2000/svg\">\n            ${elements.join('\\n')}\n        </svg>`;\n\n        return svgContent;\n    }\n\n    /**\n     * Format row instructions into human-readable text\n     */\n    formatRowInstructions(rowInstructions, rowNumber) {\n        if (rowInstructions.length === 0) return `Row ${rowNumber}: No stitches`;\n        \n        const parts = rowInstructions.map((instruction: any) => {\n            const colorLabel = instruction.color ? instruction.color.label : instruction.colorId;\n            return `${instruction.stitchCount} ${colorLabel}`;\n        });\n\n        return `Row ${rowNumber}: ${parts.join(', ')}`;\n    }\n\n    /**\n     * Create an empty chart for when no pattern is available\n     */\n    createEmptyChart() {\n        return {\n            svg: '<svg width=\"100\" height=\"50\" xmlns=\"http://www.w3.org/2000/svg\"><text x=\"50\" y=\"25\" text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"12\" fill=\"#666\">No Pattern</text></svg>',\n            dimensions: { width: 100, height: 50 },\n            cellSize: this.cellSize,\n            pattern: null\n        };\n    }\n\n    /**\n     * Generate a legend for the colorwork pattern\n     */\n    generateLegend(pattern) {\n        const colorsUsed = pattern.getColorsUsed();\n        return colorsUsed.map((color: any) => ({\n            id: color.id,\n            label: color.label,\n            color: color.color,\n            description: `${color.label} (${color.color})`\n        }));\n    }\n}\n","import { ColorworkVisualizer } from './ColorworkVisualizer';\n\n/**\n * CombinedInstruction - Represents a single row instruction with both shaping and colorwork\n */\nexport class CombinedInstruction {\n    constructor(row, machineRow, shaping, colorwork, visualChart = null) {\n        this.row = row;\n        this.machineRow = machineRow;\n        this.shaping = shaping;\n        this.colorwork = colorwork;\n        this.visualChart = visualChart;\n    }\n\n    hasShaping() {\n        return this.shaping && (\n            this.shaping.description.includes('Increase') || \n            this.shaping.description.includes('Decrease')\n        );\n    }\n\n    hasColorwork() {\n        return this.colorwork && this.colorwork.colorSequence && this.colorwork.colorSequence.length > 0;\n    }\n\n    toString() {\n        let instruction = `Row ${this.row}`;\n        if (this.machineRow && this.machineRow !== this.row) {\n            instruction += ` (RC: ${this.machineRow})`;\n        }\n\n        if (this.hasShaping()) {\n            instruction += `: ${this.shaping.description}`;\n        }\n\n        if (this.hasColorwork()) {\n            instruction += ` Colorwork: ${this.colorwork.description}`;\n        }\n\n        return instruction;\n    }\n}\n\n/**\n * InstructionGenerator - Generates combined knitting instructions\n * Synchronizes shaping instructions with colorwork instructions\n */\nexport class InstructionGenerator {\n    constructor() {\n        this.colorworkVisualizer = new ColorworkVisualizer();\n    }\n\n    /**\n     * Generate instructions in the specified format\n     * @param {CombinedPattern} combinedPattern - The combined pattern\n     * @param {string} format - 'compact', 'detailed', or 'visual'\n     */\n    generateInstructions(combinedPattern, format = 'compact') {\n        const instructions = this.generateCombinedInstructions(combinedPattern);\n        \n        // Apply format-specific filtering/transformation\n        switch (format) {\n            case 'compact':\n                return this.formatCompactInstructions(instructions);\n            case 'detailed':\n                return instructions; // Full instructions\n            case 'visual':\n                return this.formatVisualInstructions(instructions);\n            default:\n                return instructions;\n        }\n    }\n\n    /**\n     * Format instructions for compact display\n     */\n    formatCompactInstructions(instructions) {\n        // Return only key instructions, skip redundant details\n        return instructions.filter((instruction: any) => \n            instruction.hasShaping() || \n            instruction.hasColorwork() || \n            instruction.row % 5 === 1 // Every 5th row for reference\n        ).slice(0, 10); // Limit to first 10 for preview\n    }\n\n    /**\n     * Format instructions for visual display\n     */\n    formatVisualInstructions(instructions) {\n        // Return instructions with visual charts\n        return instructions.filter((instruction: any) => \n            instruction.visualChart\n        ).slice(0, 5); // Limit for preview\n    }\n\n    /**\n     * Generate combined instructions for a panel with colorwork\n     */\n    generateCombinedInstructions(combinedPattern) {\n        const shapingInstructions = this.generateShapingInstructions(combinedPattern.panel);\n        const colorworkInstructions = this.generateColorworkInstructions(combinedPattern);\n        \n        return this.synchronizeInstructions(shapingInstructions, colorworkInstructions, combinedPattern);\n    }\n\n    /**\n     * Generate shaping instructions from the panel\n     */\n    generateShapingInstructions(panel) {\n        // Reuse existing panel instruction generation\n        return panel.generateKnittingInstructions();\n    }\n\n    /**\n     * Generate colorwork instructions from the combined pattern\n     */\n    generateColorworkInstructions(combinedPattern) {\n        const instructions = [];\n        \n        for (const mappedRow of combinedPattern.mappedRows) {\n            const colorworkInstructions = this.generateRowColorworkInstructions(mappedRow);\n            instructions.push({\n                row: mappedRow.panelRow,\n                machineRow: mappedRow.machineRow,\n                colorwork: colorworkInstructions,\n                stitchCount: mappedRow.totalStitches\n            });\n        }\n\n        return instructions;\n    }\n\n    /**\n     * Generate colorwork instructions for a single row\n     */\n    generateRowColorworkInstructions(mappedRow) {\n        const colorSequence = [];\n        let currentColor = null;\n        let stitchCount = 0;\n\n        for (const colorId of mappedRow.colorwork) {\n            if (colorId === currentColor) {\n                stitchCount++;\n            } else {\n                if (currentColor !== null) {\n                    colorSequence.push({\n                        colorId: currentColor,\n                        stitchCount: stitchCount\n                    });\n                }\n                currentColor = colorId;\n                stitchCount = 1;\n            }\n        }\n\n        // Add the last color run\n        if (currentColor !== null) {\n            colorSequence.push({\n                colorId: currentColor,\n                stitchCount: stitchCount\n            });\n        }\n\n        return colorSequence;\n    }\n\n    /**\n     * Synchronize shaping and colorwork instructions\n     */\n    synchronizeInstructions(shapingInstructions, colorworkInstructions, combinedPattern) {\n        const synchronized = [];\n        const colors = combinedPattern.colorworkPattern.colors;\n\n        // Create a row mapping from shaping instructions\n        const shapingByRow = this.parseShapingInstructions(shapingInstructions);\n        \n        for (const colorworkRow of colorworkInstructions) {\n            const shapingForRow = shapingByRow[colorworkRow.machineRow] || null;\n            \n            const instruction = new CombinedInstruction(\n                colorworkRow.row,\n                colorworkRow.machineRow,\n                shapingForRow,\n                {\n                    colorSequence: colorworkRow.colorwork,\n                    totalStitches: colorworkRow.stitchCount,\n                    description: this.formatColorworkDescription(colorworkRow.colorwork, colors)\n                },\n                this.generateRowVisualChart(combinedPattern, colorworkRow.row - 1)\n            );\n\n            synchronized.push(instruction);\n        }\n\n        // Add any remaining shaping instructions that don't have colorwork\n        this.addRemainingShapingInstructions(synchronized, shapingInstructions, shapingByRow);\n\n        return synchronized;\n    }\n\n    /**\n     * Parse shaping instructions to create a row-based lookup\n     */\n    parseShapingInstructions(shapingInstructions) {\n        const shapingByRow = {};\n        \n        // Simple parsing - this could be enhanced to parse more complex instruction formats\n        shapingInstructions.forEach((instruction, index: number) => {\n            if (typeof instruction === 'string') {\n                // Extract row numbers if mentioned in the instruction\n                const rowMatch = instruction.match(/(?:Row|RC[=:]?)\\s*(\\d+)/i);\n                if (rowMatch) {\n                    const rowNumber = parseInt(rowMatch[1]);\n                    shapingByRow[rowNumber] = {\n                        type: 'text',\n                        description: instruction,\n                        index: index\n                    };\n                } else {\n                    // Instructions without specific row numbers (cast on, bind off, etc.)\n                    shapingByRow[`general_${index}`] = {\n                        type: 'general',\n                        description: instruction,\n                        index: index\n                    };\n                }\n            }\n        });\n\n        return shapingByRow;\n    }\n\n    /**\n     * Format colorwork description for display\n     */\n    formatColorworkDescription(colorSequence, colors) {\n        if (colorSequence.length === 0) return 'No colorwork';\n        \n        const parts = colorSequence.map((segment: any) => {\n            const color = colors[segment.colorId];\n            const colorLabel = color ? color.label : segment.colorId;\n            return `${segment.stitchCount} ${colorLabel}`;\n        });\n\n        return parts.join(', ');\n    }\n\n    /**\n     * Generate a visual chart for a specific row\n     */\n    generateRowVisualChart(combinedPattern, rowIndex) {\n        if (rowIndex < 0 || rowIndex >= combinedPattern.mappedRows.length) {\n            return null;\n        }\n\n        const mappedRow = combinedPattern.mappedRows[rowIndex];\n        \n        // Create a single-row pattern for visualization\n        const singleRowPattern = {\n            grid: [mappedRow.colorwork],\n            colors: combinedPattern.colorworkPattern.colors,\n            getRowCount: () => 1,\n            getStitchCount: () => mappedRow.colorwork.length\n        };\n\n        return this.colorworkVisualizer.generateChart(singleRowPattern, {\n            cellSize: 15,\n            showRowNumbers: false,\n            showStitchNumbers: false,\n            showGrid: true\n        });\n    }\n\n    /**\n     * Add remaining shaping instructions that don't have corresponding colorwork\n     */\n    addRemainingShapingInstructions(synchronized, shapingInstructions) {\n        // Add cast on, bind off, and finishing instructions\n        shapingInstructions.forEach((instruction, index: number) => {\n            const isGeneral = typeof instruction === 'string' && \n                             (instruction.toLowerCase().includes('cast on') ||\n                              instruction.toLowerCase().includes('bind off') ||\n                              instruction.toLowerCase().includes('hang hem') ||\n                              !instruction.match(/(?:Row|RC[=:]?)\\s*(\\d+)/i));\n            \n            if (isGeneral) {\n                const combinedInstruction = new CombinedInstruction(\n                    null, // No specific row\n                    null, // No machine row\n                    {\n                        type: 'general',\n                        description: instruction,\n                        index: index\n                    },\n                    null, // No colorwork\n                    null  // No visual chart\n                );\n                \n                // Insert at appropriate position\n                if (instruction.toLowerCase().includes('cast on')) {\n                    synchronized.unshift(combinedInstruction);\n                } else {\n                    synchronized.push(combinedInstruction);\n                }\n            }\n        });\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bind = void 0;\nfunction bind(target, _a) {\n    var type = _a.type, listener = _a.listener, options = _a.options;\n    target.addEventListener(type, listener, options);\n    return function unbind() {\n        target.removeEventListener(type, listener, options);\n    };\n}\nexports.bind = bind;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bindAll = void 0;\nvar bind_1 = require(\"./bind\");\nfunction toOptions(value) {\n    if (typeof value === 'undefined') {\n        return undefined;\n    }\n    if (typeof value === 'boolean') {\n        return {\n            capture: value,\n        };\n    }\n    return value;\n}\nfunction getBinding(original, sharedOptions) {\n    if (sharedOptions == null) {\n        return original;\n    }\n    var binding = __assign(__assign({}, original), { options: __assign(__assign({}, toOptions(sharedOptions)), toOptions(original.options)) });\n    return binding;\n}\nfunction bindAll(target, bindings, sharedOptions) {\n    var unbinds = bindings.map(function (original) {\n        var binding = getBinding(original, sharedOptions);\n        return (0, bind_1.bind)(target, binding);\n    });\n    return function unbindAll() {\n        unbinds.forEach(function (unbind) { return unbind(); });\n    };\n}\nexports.bindAll = bindAll;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bindAll = exports.bind = void 0;\nvar bind_1 = require(\"./bind\");\nObject.defineProperty(exports, \"bind\", { enumerable: true, get: function () { return bind_1.bind; } });\nvar bind_all_1 = require(\"./bind-all\");\nObject.defineProperty(exports, \"bindAll\", { enumerable: true, get: function () { return bind_all_1.bindAll; } });\n","// pulling this into a separate file so adapter(s) that don't\n// need the honey pot can pay as little as possible for it.\nexport var honeyPotDataAttribute = 'data-pdnd-honey-pot';","import { honeyPotDataAttribute } from './honey-pot-data-attribute';\nexport function isHoneyPotElement(target) {\n  return target instanceof Element && target.hasAttribute(honeyPotDataAttribute);\n}","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { isHoneyPotElement } from './is-honey-pot-element';\nexport function getElementFromPointWithoutHoneypot(client) {\n  // eslint-disable-next-line no-restricted-syntax\n  var _document$elementsFro = document.elementsFromPoint(client.x, client.y),\n    _document$elementsFro2 = _slicedToArray(_document$elementsFro, 2),\n    top = _document$elementsFro2[0],\n    second = _document$elementsFro2[1];\n  if (!top) {\n    return null;\n  }\n  if (isHoneyPotElement(top)) {\n    return second !== null && second !== void 0 ? second : null;\n  }\n  return top;\n}","// Maximum possible z-index\n// https://stackoverflow.com/questions/491052/minimum-and-maximum-value-of-z-index\nexport var maxZIndex = 2147483647;","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { bind, bindAll } from 'bind-event-listener';\nimport { maxZIndex } from '../util/max-z-index';\nimport { honeyPotDataAttribute } from './honey-pot-data-attribute';\nvar honeyPotSize = 2;\nvar halfHoneyPotSize = honeyPotSize / 2;\n\n/**\n * `clientX` and `clientY` can be in sub pixels (eg `2.332`)\n * However, browser hitbox testing is commonly do to the closest pixel.\n *\n * â†’ https://issues.chromium.org/issues/40940531\n *\n * To be sure that the honey pot will be over the `client` position,\n * we `.floor()` `clientX` and`clientY` and then make it `2px` in size.\n **/\nfunction floorToClosestPixel(point) {\n  return {\n    x: Math.floor(point.x),\n    y: Math.floor(point.y)\n  };\n}\n\n/**\n * We want to make sure the honey pot sits around the users position.\n * This seemed to be the most resilient while testing.\n */\nfunction pullBackByHalfHoneyPotSize(point) {\n  return {\n    x: point.x - halfHoneyPotSize,\n    y: point.y - halfHoneyPotSize\n  };\n}\n\n/**\n * Prevent the honey pot from changing the window size.\n * This is super unlikely to occur, but just being safe.\n */\nfunction preventGoingBackwardsOffScreen(point) {\n  return {\n    x: Math.max(point.x, 0),\n    y: Math.max(point.y, 0)\n  };\n}\n\n/**\n * Prevent the honey pot from changing the window size.\n * This is super unlikely to occur, but just being safe.\n */\nfunction preventGoingForwardsOffScreen(point) {\n  return {\n    x: Math.min(point.x, window.innerWidth - honeyPotSize),\n    y: Math.min(point.y, window.innerHeight - honeyPotSize)\n  };\n}\n\n/**\n * Create a `2x2` `DOMRect` around the `client` position\n */\nfunction getHoneyPotRectFor(_ref) {\n  var client = _ref.client;\n  var point = preventGoingForwardsOffScreen(preventGoingBackwardsOffScreen(pullBackByHalfHoneyPotSize(floorToClosestPixel(client))));\n\n  // When debugging, it is helpful to\n  // make this element a bit bigger\n  return DOMRect.fromRect({\n    x: point.x,\n    y: point.y,\n    width: honeyPotSize,\n    height: honeyPotSize\n  });\n}\nfunction getRectStyles(_ref2) {\n  var clientRect = _ref2.clientRect;\n  return {\n    left: \"\".concat(clientRect.left, \"px\"),\n    top: \"\".concat(clientRect.top, \"px\"),\n    width: \"\".concat(clientRect.width, \"px\"),\n    height: \"\".concat(clientRect.height, \"px\")\n  };\n}\nfunction isWithin(_ref3) {\n  var client = _ref3.client,\n    clientRect = _ref3.clientRect;\n  return (\n    // is within horizontal bounds\n    client.x >= clientRect.x && client.x <= clientRect.x + clientRect.width &&\n    // is within vertical bounds\n    client.y >= clientRect.y && client.y <= clientRect.y + clientRect.height\n  );\n}\n/**\n * The honey pot fix is designed to get around a painful bug in all browsers.\n *\n * [Overview](https://www.youtube.com/watch?v=udE9qbFTeQg)\n *\n * **Background**\n *\n * When a drag starts, browsers incorrectly think that the users pointer is\n * still depressed where the drag started. Any element that goes under this position\n * will be entered into, causing `\"mouseenter\"` events and `\":hover\"` styles to be applied.\n *\n * _This is a violation of the spec_\n *\n * > \"From the moment that the user agent is to initiate the drag-and-drop operation,\n * > until the end \tof the drag-and-drop operation, device input events\n * > (e.g. mouse and keyboard events) must be suppressed.\"\n * >\n * > - https://html.spec.whatwg.org/multipage/dnd.html#drag-and-drop-processing-model\n *\n * _Some impacts_\n *\n * - `\":hover\"` styles being applied where they shouldn't (looks messy)\n * - components such as tooltips responding to `\"mouseenter\"` can show during a drag,\n *   and on an element the user isn't even over\n *\n * Bug: https://issues.chromium.org/issues/41129937\n *\n * **Honey pot fix**\n *\n * 1. Create an element where the browser thinks the depressed pointer is\n *    to absorb the incorrect pointer events\n * 2. Remove that element when it is no longer needed\n */\nfunction mountHoneyPot(_ref4) {\n  var initial = _ref4.initial;\n  var element = document.createElement('div');\n  element.setAttribute(honeyPotDataAttribute, 'true');\n\n  // can shift during the drag thanks to Firefox\n  var clientRect = getHoneyPotRectFor({\n    client: initial\n  });\n  Object.assign(element.style, _objectSpread(_objectSpread({\n    // Setting a background color explicitly to avoid any inherited styles.\n    // Looks like this could be `opacity: 0`, but worried that _might_\n    // cause the element to be ignored on some platforms.\n    // When debugging, set backgroundColor to something like \"red\".\n    backgroundColor: 'transparent',\n    position: 'fixed',\n    // Being explicit to avoid inheriting styles\n    padding: 0,\n    margin: 0,\n    boxSizing: 'border-box'\n  }, getRectStyles({\n    clientRect: clientRect\n  })), {}, {\n    // We want this element to absorb pointer events,\n    // it's kind of the whole point ðŸ˜‰\n    pointerEvents: 'auto',\n    // Want to make sure the honey pot is top of everything else.\n    // Don't need to worry about native drag previews, as they will\n    // have been rendered (and removed) before the honey pot is rendered\n    zIndex: maxZIndex\n  }));\n  document.body.appendChild(element);\n\n  /**\n   *  ðŸ¦Š In firefox we can get `\"pointermove\"` events after the drag\n   * has started, which is a spec violation.\n   * The final `\"pointermove\"` will reveal where the \"depressed\" position\n   * is for our honey pot fix.\n   */\n  var unbindPointerMove = bind(window, {\n    type: 'pointermove',\n    listener: function listener(event) {\n      var client = {\n        x: event.clientX,\n        y: event.clientY\n      };\n      clientRect = getHoneyPotRectFor({\n        client: client\n      });\n      Object.assign(element.style, getRectStyles({\n        clientRect: clientRect\n      }));\n    },\n    // using capture so we are less likely to be impacted by event stopping\n    options: {\n      capture: true\n    }\n  });\n  return function finish(_ref5) {\n    var current = _ref5.current;\n    // Don't need this any more\n    unbindPointerMove();\n\n    // If the user is hover the honey pot, we remove it\n    // so that the user can continue to interact with the page normally.\n    if (isWithin({\n      client: current,\n      clientRect: clientRect\n    })) {\n      element.remove();\n      return;\n    }\n    function cleanup() {\n      unbindPostDragEvents();\n      element.remove();\n    }\n    var unbindPostDragEvents = bindAll(window, [{\n      type: 'pointerdown',\n      listener: cleanup\n    }, {\n      type: 'pointermove',\n      listener: cleanup\n    }, {\n      type: 'focusin',\n      listener: cleanup\n    }, {\n      type: 'focusout',\n      listener: cleanup\n    },\n    // a 'pointerdown' should happen before 'dragstart', but just being super safe\n    {\n      type: 'dragstart',\n      listener: cleanup\n    },\n    // if the user has dragged something out of the window\n    // and then is dragging something back into the window\n    // the first events we will see are \"dragenter\" (and then \"dragover\").\n    // So if we see any of these we need to clear the post drag fix.\n    {\n      type: 'dragenter',\n      listener: cleanup\n    }, {\n      type: 'dragover',\n      listener: cleanup\n    }\n\n    // Not adding a \"wheel\" event listener, as \"wheel\" by itself does not\n    // resolve the bug.\n    ], {\n      // Using `capture` so less likely to be impacted by other code stopping events\n      capture: true\n    });\n  };\n}\nexport function makeHoneyPotFix() {\n  var latestPointerMove = null;\n  function bindEvents() {\n    // For sanity, only collecting this value from when events are first bound.\n    // This prevents the case where a super old \"pointermove\" could be used\n    // from a prior interaction.\n    latestPointerMove = null;\n    return bind(window, {\n      type: 'pointermove',\n      listener: function listener(event) {\n        latestPointerMove = {\n          x: event.clientX,\n          y: event.clientY\n        };\n      },\n      // listening for pointer move in capture phase\n      // so we are less likely to be impacted by events being stopped.\n      options: {\n        capture: true\n      }\n    });\n  }\n  function getOnPostDispatch() {\n    var finish = null;\n    return function onPostEvent(_ref6) {\n      var eventName = _ref6.eventName,\n        payload = _ref6.payload;\n      // We are adding the honey pot `onDragStart` so we don't\n      // impact the creation of the native drag preview.\n      if (eventName === 'onDragStart') {\n        var input = payload.location.initial.input;\n\n        // Sometimes there will be no latest \"pointermove\" (eg iOS).\n        // In which case, we use the start position of the drag.\n        var initial = latestPointerMove !== null && latestPointerMove !== void 0 ? latestPointerMove : {\n          x: input.clientX,\n          y: input.clientY\n        };\n\n        // Don't need to defensively call `finish()` as `onDrop` from\n        // one interaction is guaranteed to be called before `onDragStart`\n        // of the next.\n        finish = mountHoneyPot({\n          initial: initial\n        });\n      }\n      if (eventName === 'onDrop') {\n        var _finish;\n        var _input = payload.location.current.input;\n        (_finish = finish) === null || _finish === void 0 || _finish({\n          current: {\n            x: _input.clientX,\n            y: _input.clientY\n          }\n        });\n        finish = null;\n        // this interaction is finished, we want to use\n        // the latest \"pointermove\" for each interaction\n        latestPointerMove = null;\n      }\n    };\n  }\n  return {\n    bindEvents: bindEvents,\n    getOnPostDispatch: getOnPostDispatch\n  };\n}","/** Provide a function that you only ever want to be called a single time */\nexport function once(fn) {\n  var cache = null;\n  return function wrapped() {\n    if (!cache) {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      var result = fn.apply(this, args);\n      cache = {\n        result: result\n      };\n    }\n    return cache.result;\n  };\n}","import { once } from '../public-utils/once';\n\n// using `cache` as our `isFirefox()` result will not change in a browser\n\n/**\n * Returns `true` if a `Firefox` browser\n * */\nexport var isFirefox = once(function isFirefox() {\n  if (process.env.NODE_ENV === 'test') {\n    return false;\n  }\n  return navigator.userAgent.includes('Firefox');\n});","import { once } from '../public-utils/once';\n\n// using `cache` as our `isSafari()` result will not change in a browser\n\n/**\n * Returns `true` if a `Safari` browser.\n * Returns `true` if the browser is running on iOS (they are all Safari).\n *\n * Use `isSafariOnIOS` if you want to check if something is Safari + iOS\n * */\nexport var isSafari = once(function isSafari() {\n  if (process.env.NODE_ENV === 'test') {\n    return false;\n  }\n  var _navigator = navigator,\n    userAgent = _navigator.userAgent;\n  return userAgent.includes('AppleWebKit') && !userAgent.includes('Chrome');\n});","import { bindAll } from 'bind-event-listener';\nimport { isSafari } from '../is-safari';\n\n/* For \"dragenter\" events, the browser should set `relatedTarget` to the previous element.\n * For external drag operations, our first \"dragenter\" event should have a `event.relatedTarget` of `null`.\n *\n *  Unfortunately in Safari `event.relatedTarget` is *always* set to `null`\n *  Safari bug: https://bugs.webkit.org/show_bug.cgi?id=242627\n *  To work around this we count \"dragenter\" and \"dragleave\" events */\n\n// Using symbols for event properties so we don't clash with\n// anything on the `event` object\nvar symbols = {\n  isLeavingWindow: Symbol('leaving'),\n  isEnteringWindow: Symbol('entering')\n};\nexport function isEnteringWindowInSafari(_ref) {\n  var dragEnter = _ref.dragEnter;\n  if (!isSafari()) {\n    return false;\n  }\n  return dragEnter.hasOwnProperty(symbols.isEnteringWindow);\n}\nexport function isLeavingWindowInSafari(_ref2) {\n  var dragLeave = _ref2.dragLeave;\n  if (!isSafari()) {\n    return false;\n  }\n  return dragLeave.hasOwnProperty(symbols.isLeavingWindow);\n}\n(function fixSafari() {\n  // Don't do anything when server side rendering\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  // rather than checking the userAgent for \"jsdom\" we can do this check\n  // so that the check will be removed completely in production code\n  if (process.env.NODE_ENV === 'test') {\n    return;\n  }\n  if (!isSafari()) {\n    return;\n  }\n  function getInitialState() {\n    return {\n      enterCount: 0,\n      isOverWindow: false\n    };\n  }\n  var state = getInitialState();\n  function resetState() {\n    state = getInitialState();\n  }\n\n  // These event listeners are bound _forever_ and _never_ removed\n  // We don't bother cleaning up these event listeners (for now)\n  // as this workaround is only for Safari\n\n  // This is how the event count works:\n  //\n  // lift (+1 enterCount)\n  // - dragstart(draggable) [enterCount: 0]\n  // - dragenter(draggable) [enterCount: 1]\n  // leaving draggable (+0 enterCount)\n  // - dragenter(document.body) [enterCount: 2]\n  // - dragleave(draggable) [enterCount: 1]\n  // leaving window (-1 enterCount)\n  // - dragleave(document.body) [enterCount: 0] {leaving the window}\n\n  // Things to note:\n  // - dragenter and dragleave bubble\n  // - the first dragenter when entering a window might not be on `window`\n  //   - it could be on an element that is pressed up against the window\n  //   - (so we cannot rely on `event.target` values)\n\n  bindAll(window, [{\n    type: 'dragstart',\n    listener: function listener() {\n      state.enterCount = 0;\n      // drag start occurs in the source window\n      state.isOverWindow = true;\n      // When a drag first starts it will also trigger a \"dragenter\" on the draggable element\n    }\n  }, {\n    type: 'drop',\n    listener: resetState\n  }, {\n    type: 'dragend',\n    listener: resetState\n  }, {\n    type: 'dragenter',\n    listener: function listener(event) {\n      if (!state.isOverWindow && state.enterCount === 0) {\n        // Patching the `event` object\n        // The `event` object is shared with all event listeners for the event\n        // @ts-expect-error: adding property to the event object\n        event[symbols.isEnteringWindow] = true;\n      }\n      state.isOverWindow = true;\n      state.enterCount++;\n    }\n  }, {\n    type: 'dragleave',\n    listener: function listener(event) {\n      state.enterCount--;\n      if (state.isOverWindow && state.enterCount === 0) {\n        // Patching the `event` object as it is shared with all event listeners\n        // The `event` object is shared with all event listeners for the event\n        // @ts-expect-error: adding property to the event object\n        event[symbols.isLeavingWindow] = true;\n        state.isOverWindow = false;\n      }\n    }\n  }],\n  // using `capture: true` so that adding event listeners\n  // in bubble phase will have the correct symbols\n  {\n    capture: true\n  });\n})();","/**\n * Does the `EventTarget` look like a `Node` based on \"duck typing\".\n *\n * Helpful when the `Node` might be outside of the current document\n * so we cannot to an `target instanceof Node` check.\n */\nfunction isNodeLike(target) {\n  return 'nodeName' in target;\n}\n\n/**\n * Is an `EventTarget` a `Node` from another `window`?\n */\nexport function isFromAnotherWindow(eventTarget) {\n  return isNodeLike(eventTarget) && eventTarget.ownerDocument !== document;\n}","import { isFirefox } from '../is-firefox';\nimport { isSafari } from '../is-safari';\nimport { isLeavingWindowInSafari } from './count-events-for-safari';\nimport { isFromAnotherWindow } from './is-from-another-window';\nexport function isLeavingWindow(_ref) {\n  var dragLeave = _ref.dragLeave;\n  var type = dragLeave.type,\n    relatedTarget = dragLeave.relatedTarget;\n  if (type !== 'dragleave') {\n    return false;\n  }\n  if (isSafari()) {\n    return isLeavingWindowInSafari({\n      dragLeave: dragLeave\n    });\n  }\n\n  // Standard check: if going to `null` we are leaving the `window`\n  if (relatedTarget == null) {\n    return true;\n  }\n\n  /**\n   * ðŸ¦Š Exception: `iframe` in Firefox (`125.0`)\n   *\n   * Case 1: parent `window` â†’ child `iframe`\n   * `dragLeave.relatedTarget` is element _inside_ the child `iframe`\n   * (foreign element)\n   *\n   * Case 2: child `iframe` â†’ parent `window`\n   * `dragLeave.relatedTarget` is the `iframe` in the parent `window`\n   * (foreign element)\n   */\n\n  if (isFirefox()) {\n    return isFromAnotherWindow(relatedTarget);\n  }\n\n  /**\n   * ðŸŒ Exception: `iframe` in Chrome (`124.0`)\n   *\n   * Case 1: parent `window` â†’ child `iframe`\n   * `dragLeave.relatedTarget` is the `iframe` in the parent `window`\n   *\n   * Case 2: child `iframe` â†’ parent `window`\n   * `dragLeave.relatedTarget` is `null` *(standard check)*\n   */\n\n  // Case 2\n  // Using `instanceof` check as the element will be in the same `window`\n  return relatedTarget instanceof HTMLIFrameElement;\n}","export function getBindingsForBrokenDrags(_ref) {\n  var onDragEnd = _ref.onDragEnd;\n  return [\n  // ## Detecting drag ending for removed draggables\n  //\n  // If a draggable element is removed during a drag and the user drops:\n  // 1. if over a valid drop target: we get a \"drop\" event to know the drag is finished\n  // 2. if not over a valid drop target (or cancelled): we get nothing\n  // The \"dragend\" event will not fire on the source draggable if it has been\n  // removed from the DOM.\n  // So we need to figure out if a drag operation has finished by looking at other events\n  // We can do this by looking at other events\n\n  // ### First detection: \"pointermove\" events\n\n  // 1. \"pointermove\" events cannot fire during a drag and drop operation\n  // according to the spec. So if we get a \"pointermove\" it means that\n  // the drag and drop operations has finished. So if we get a \"pointermove\"\n  // we know that the drag is over\n  // 2. ðŸ¦ŠðŸ˜¤ Drag and drop operations are _supposed_ to suppress\n  // other pointer events. However, firefox will allow a few\n  // pointer event to get through after a drag starts.\n  // The most I've seen is 3\n  {\n    type: 'pointermove',\n    listener: function () {\n      var callCount = 0;\n      return function listener() {\n        // Using 20 as it is far bigger than the most observed (3)\n        if (callCount < 20) {\n          callCount++;\n          return;\n        }\n        onDragEnd();\n      };\n    }()\n  },\n  // ### Second detection: \"pointerdown\" events\n\n  // If we receive this event then we know that a drag operation has finished\n  // and potentially another one is about to start.\n  // Note: `pointerdown` fires on all browsers / platforms before \"dragstart\"\n  {\n    type: 'pointerdown',\n    listener: onDragEnd\n  }];\n}","export function getInput(event) {\n  return {\n    altKey: event.altKey,\n    button: event.button,\n    buttons: event.buttons,\n    ctrlKey: event.ctrlKey,\n    metaKey: event.metaKey,\n    shiftKey: event.shiftKey,\n    clientX: event.clientX,\n    clientY: event.clientY,\n    pageX: event.pageX,\n    pageY: event.pageY\n  };\n}","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","import rafSchd from 'raf-schd';\nvar scheduleOnDrag = rafSchd(function (fn) {\n  return fn();\n});\nvar dragStart = function () {\n  var scheduled = null;\n  function schedule(fn) {\n    var frameId = requestAnimationFrame(function () {\n      scheduled = null;\n      fn();\n    });\n    scheduled = {\n      frameId: frameId,\n      fn: fn\n    };\n  }\n  function flush() {\n    if (scheduled) {\n      cancelAnimationFrame(scheduled.frameId);\n      scheduled.fn();\n      scheduled = null;\n    }\n  }\n  return {\n    schedule: schedule,\n    flush: flush\n  };\n}();\nexport function makeDispatch(_ref) {\n  var source = _ref.source,\n    initial = _ref.initial,\n    dispatchEvent = _ref.dispatchEvent;\n  var previous = {\n    dropTargets: []\n  };\n  function safeDispatch(args) {\n    dispatchEvent(args);\n    previous = {\n      dropTargets: args.payload.location.current.dropTargets\n    };\n  }\n  var dispatch = {\n    start: function start(_ref2) {\n      var nativeSetDragImage = _ref2.nativeSetDragImage;\n      // Ensuring that both `onGenerateDragPreview` and `onDragStart` get the same location.\n      // We do this so that `previous` is`[]` in `onDragStart` (which is logical)\n      var location = {\n        current: initial,\n        previous: previous,\n        initial: initial\n      };\n      // a `onGenerateDragPreview` does _not_ add another entry for `previous`\n      // onDragPreview\n      safeDispatch({\n        eventName: 'onGenerateDragPreview',\n        payload: {\n          source: source,\n          location: location,\n          nativeSetDragImage: nativeSetDragImage\n        }\n      });\n      dragStart.schedule(function () {\n        safeDispatch({\n          eventName: 'onDragStart',\n          payload: {\n            source: source,\n            location: location\n          }\n        });\n      });\n    },\n    dragUpdate: function dragUpdate(_ref3) {\n      var current = _ref3.current;\n      dragStart.flush();\n      scheduleOnDrag.cancel();\n      safeDispatch({\n        eventName: 'onDropTargetChange',\n        payload: {\n          source: source,\n          location: {\n            initial: initial,\n            previous: previous,\n            current: current\n          }\n        }\n      });\n    },\n    drag: function drag(_ref4) {\n      var current = _ref4.current;\n      scheduleOnDrag(function () {\n        dragStart.flush();\n        var location = {\n          initial: initial,\n          previous: previous,\n          current: current\n        };\n        safeDispatch({\n          eventName: 'onDrag',\n          payload: {\n            source: source,\n            location: location\n          }\n        });\n      });\n    },\n    drop: function drop(_ref5) {\n      var current = _ref5.current,\n        updatedSourcePayload = _ref5.updatedSourcePayload;\n      dragStart.flush();\n      scheduleOnDrag.cancel();\n      safeDispatch({\n        eventName: 'onDrop',\n        payload: {\n          source: updatedSourcePayload !== null && updatedSourcePayload !== void 0 ? updatedSourcePayload : source,\n          location: {\n            current: current,\n            previous: previous,\n            initial: initial\n          }\n        }\n      });\n    }\n  };\n  return dispatch;\n}","import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport { bindAll } from 'bind-event-listener';\nimport { getElementFromPointWithoutHoneypot } from '../honey-pot-fix/get-element-from-point-without-honey-pot';\nimport { isHoneyPotElement } from '../honey-pot-fix/is-honey-pot-element';\nimport { isLeavingWindow } from '../util/changing-window/is-leaving-window';\nimport { getBindingsForBrokenDrags } from '../util/detect-broken-drag';\nimport { getInput } from '../util/get-input';\nimport { makeDispatch } from './dispatch-consumer-event';\nvar globalState = {\n  isActive: false\n};\nfunction canStart() {\n  return !globalState.isActive;\n}\nfunction getNativeSetDragImage(event) {\n  if (event.dataTransfer) {\n    // need to use `.bind` as `setDragImage` is required\n    // to be run with `event.dataTransfer` as the \"this\" context\n    return event.dataTransfer.setDragImage.bind(event.dataTransfer);\n  }\n  return null;\n}\nfunction hasHierarchyChanged(_ref) {\n  var current = _ref.current,\n    next = _ref.next;\n  if (current.length !== next.length) {\n    return true;\n  }\n  // not checking stickiness, data or dropEffect,\n  // just whether the hierarchy has changed\n  for (var i = 0; i < current.length; i++) {\n    if (current[i].element !== next[i].element) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction start(_ref2) {\n  var event = _ref2.event,\n    dragType = _ref2.dragType,\n    getDropTargetsOver = _ref2.getDropTargetsOver,\n    dispatchEvent = _ref2.dispatchEvent;\n  if (!canStart()) {\n    return;\n  }\n  var initial = getStartLocation({\n    event: event,\n    dragType: dragType,\n    getDropTargetsOver: getDropTargetsOver\n  });\n  globalState.isActive = true;\n  var state = {\n    current: initial\n  };\n\n  // Setting initial drop effect for the drag\n  setDropEffectOnEvent({\n    event: event,\n    current: initial.dropTargets\n  });\n  var dispatch = makeDispatch({\n    source: dragType.payload,\n    dispatchEvent: dispatchEvent,\n    initial: initial\n  });\n  function updateState(next) {\n    // only looking at whether hierarchy has changed to determine whether something as 'changed'\n    var hasChanged = hasHierarchyChanged({\n      current: state.current.dropTargets,\n      next: next.dropTargets\n    });\n\n    // Always updating the state to include latest data, dropEffect and stickiness\n    // Only updating consumers if the hierarchy has changed in some way\n    // Consumers can get the latest data by using `onDrag`\n    state.current = next;\n    if (hasChanged) {\n      dispatch.dragUpdate({\n        current: state.current\n      });\n    }\n  }\n  function onUpdateEvent(event) {\n    var input = getInput(event);\n\n    // If we are over the honey pot, we need to get the element\n    // that the user would have been over if not for the honey pot\n    var target = isHoneyPotElement(event.target) ? getElementFromPointWithoutHoneypot({\n      x: input.clientX,\n      y: input.clientY\n    }) : event.target;\n    var nextDropTargets = getDropTargetsOver({\n      target: target,\n      input: input,\n      source: dragType.payload,\n      current: state.current.dropTargets\n    });\n    if (nextDropTargets.length) {\n      // ðŸ©¸ must call `event.preventDefault()` to allow a browser drop to occur\n      event.preventDefault();\n      setDropEffectOnEvent({\n        event: event,\n        current: nextDropTargets\n      });\n    }\n    updateState({\n      dropTargets: nextDropTargets,\n      input: input\n    });\n  }\n  function cancel() {\n    // The spec behaviour is that when a drag is cancelled, or when dropping on no drop targets,\n    // a \"dragleave\" event is fired on the active drop target before a \"dragend\" event.\n    // We are replicating that behaviour in `cancel` if there are any active drop targets to\n    // ensure consistent behaviour.\n    //\n    // Note: When cancelling, or dropping on no drop targets, a \"dragleave\" event\n    // will have already cleared the dropTargets to `[]` (as that particular \"dragleave\" has a `relatedTarget` of `null`)\n\n    if (state.current.dropTargets.length) {\n      updateState({\n        dropTargets: [],\n        input: state.current.input\n      });\n    }\n    dispatch.drop({\n      current: state.current,\n      updatedSourcePayload: null\n    });\n    finish();\n  }\n  function finish() {\n    globalState.isActive = false;\n    unbindEvents();\n  }\n  var unbindEvents = bindAll(window, [{\n    // ðŸ‘‹ Note: we are repurposing the `dragover` event as our `drag` event\n    // this is because firefox does not publish pointer coordinates during\n    // a `drag` event, but does for every other type of drag event\n    // `dragover` fires on all elements that are being dragged over\n    // Because we are binding to `window` - our `dragover` is effectively the same as a `drag`\n    // ðŸ¦ŠðŸ˜¤\n    type: 'dragover',\n    listener: function listener(event) {\n      // We need to regularly calculate the drop targets in order to allow:\n      //  - dynamic `canDrop()` checks\n      //  - rapid updating `getData()` calls to attach data in response to user input (eg for edge detection)\n      // Sadly we cannot schedule inspecting changes resulting from this event\n      // we need to be able to conditionally cancel the event with `event.preventDefault()`\n      // to enable the correct native drop experience.\n\n      // 1. check to see if anything has changed\n      onUpdateEvent(event);\n\n      // 2. let consumers know a move has occurred\n      // This will include the latest 'input' values\n      dispatch.drag({\n        current: state.current\n      });\n    }\n  }, {\n    type: 'dragenter',\n    listener: onUpdateEvent\n  }, {\n    type: 'dragleave',\n    listener: function listener(event) {\n      if (!isLeavingWindow({\n        dragLeave: event\n      })) {\n        return;\n      }\n\n      /**\n       * At this point we don't know if a drag is being cancelled,\n       * or if a drag is leaving the `window`.\n       *\n       * Both have:\n       *   1. \"dragleave\" (with `relatedTarget: null`)\n       *   2. \"dragend\" (a \"dragend\" can occur when outside the `window`)\n       *\n       * **Clearing drop targets**\n       *\n       * For either case we are clearing the the drop targets\n       *\n       * - cancelling: we clear drop targets in `\"dragend\"` anyway\n       * - leaving the `window`: we clear the drop targets (to clear stickiness)\n       *\n       * **Leaving the window and finishing the drag**\n       *\n       * _internal drags_\n       *\n       * - The drag continues when the user is outside the `window`\n       *   and can resume if the user drags back over the `window`,\n       *   or end when the user drops in an external `window`.\n       * - We will get a `\"dragend\"`, or we can listen for other\n       *   events to determine the drag is finished when the user re-enters the `window`).\n       *\n       * _external drags_\n       *\n       * - We conclude the drag operation.\n       * - We have no idea if the user will drag back over the `window`,\n       *   or if the drag ends elsewhere.\n       * - We will create a new drag if the user re-enters the `window`.\n       *\n       * **Not updating `input`**\n       *\n       * ðŸ› Bug[Chrome] the final `\"dragleave\"` has default input values (eg `clientX == 0`)\n       * Workaround: intentionally not updating `input` in \"dragleave\"\n       * rather than the users current input values\n       * - [Conversation](https://twitter.com/alexandereardon/status/1642697633864241152)\n       * - [Bug](https://bugs.chromium.org/p/chromium/issues/detail?id=1429937)\n       **/\n\n      updateState({\n        input: state.current.input,\n        dropTargets: []\n      });\n      if (dragType.startedFrom === 'external') {\n        cancel();\n      }\n    }\n  }, {\n    // A \"drop\" can only happen if the browser allowed the drop\n    type: 'drop',\n    listener: function listener(event) {\n      // Capture the final input.\n      // We are capturing the final `input` for the\n      // most accurate honey pot experience\n      state.current = {\n        dropTargets: state.current.dropTargets,\n        input: getInput(event)\n      };\n\n      /** If there are no drop targets, then we will get\n       * a \"drop\" event if:\n       * - `preventUnhandled()` is being used\n       * - there is an unmanaged drop target (eg another library)\n       * In these cases, it's up to the consumer\n       * to handle the drop if it's not over one of our drop targets\n       * - `preventUnhandled()` will cancel the \"drop\"\n       * - unmanaged drop targets can handle the \"drop\" how they want to\n       * We won't call `event.preventDefault()` in this call path */\n\n      if (!state.current.dropTargets.length) {\n        cancel();\n        return;\n      }\n      event.preventDefault();\n\n      // applying the latest drop effect to the event\n      setDropEffectOnEvent({\n        event: event,\n        current: state.current.dropTargets\n      });\n      dispatch.drop({\n        current: state.current,\n        // When dropping something native, we need to extract the latest\n        // `.items` from the \"drop\" event as it is now accessible\n        updatedSourcePayload: dragType.type === 'external' ? dragType.getDropPayload(event) : null\n      });\n      finish();\n    }\n  }, {\n    // \"dragend\" fires when on the drag source (eg a draggable element)\n    // when the drag is finished.\n    // \"dragend\" will fire after \"drop\" (if there was a successful drop)\n    // \"dragend\" does not fire if the draggable source has been removed during the drag\n    // or for external drag sources (eg files)\n\n    // This \"dragend\" listener will not fire if there was a successful drop\n    // as we will have already removed the event listener\n\n    type: 'dragend',\n    listener: function listener(event) {\n      // In firefox, the position of the \"dragend\" event can\n      // be a bit different to the last \"dragover\" event.\n      // Updating the input so we can get the best possible\n      // information for the honey pot.\n      state.current = {\n        dropTargets: state.current.dropTargets,\n        input: getInput(event)\n      };\n      cancel();\n    }\n  }].concat(_toConsumableArray(getBindingsForBrokenDrags({\n    onDragEnd: cancel\n  }))),\n  // Once we have started a managed drag operation it is important that we see / own all drag events\n  // We got one adoption bug pop up where some code was stopping (`event.stopPropagation()`)\n  // all \"drop\" events in the bubble phase on the `document.body`.\n  // This meant that we never saw the \"drop\" event.\n  {\n    capture: true\n  });\n  dispatch.start({\n    nativeSetDragImage: getNativeSetDragImage(event)\n  });\n}\nfunction setDropEffectOnEvent(_ref3) {\n  var _current$;\n  var event = _ref3.event,\n    current = _ref3.current;\n  // setting the `dropEffect` to be the innerMost drop targets dropEffect\n  var innerMost = (_current$ = current[0]) === null || _current$ === void 0 ? void 0 : _current$.dropEffect;\n  if (innerMost != null && event.dataTransfer) {\n    event.dataTransfer.dropEffect = innerMost;\n  }\n}\nfunction getStartLocation(_ref4) {\n  var event = _ref4.event,\n    dragType = _ref4.dragType,\n    getDropTargetsOver = _ref4.getDropTargetsOver;\n  var input = getInput(event);\n\n  // When dragging from outside of the browser,\n  // the drag is not being sourced from any local drop targets\n  if (dragType.startedFrom === 'external') {\n    return {\n      input: input,\n      dropTargets: []\n    };\n  }\n  var dropTargets = getDropTargetsOver({\n    input: input,\n    source: dragType.payload,\n    target: event.target,\n    current: []\n  });\n  return {\n    input: input,\n    dropTargets: dropTargets\n  };\n}\nexport var lifecycle = {\n  canStart: canStart,\n  start: start\n};","// Extending `Map` to allow us to link Key and Values together\n\nvar ledger = new Map();\nfunction registerUsage(_ref) {\n  var typeKey = _ref.typeKey,\n    mount = _ref.mount;\n  var entry = ledger.get(typeKey);\n  if (entry) {\n    entry.usageCount++;\n    return entry;\n  }\n  var initial = {\n    typeKey: typeKey,\n    unmount: mount(),\n    usageCount: 1\n  };\n  ledger.set(typeKey, initial);\n  return initial;\n}\nexport function register(args) {\n  var entry = registerUsage(args);\n  return function unregister() {\n    entry.usageCount--;\n    if (entry.usageCount > 0) {\n      return;\n    }\n    // Only a single usage left, remove it\n    entry.unmount();\n    ledger.delete(args.typeKey);\n  };\n}","/** Create a new combined function that will call all the provided functions */\nexport function combine() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n  return function cleanup() {\n    fns.forEach(function (fn) {\n      return fn();\n    });\n  };\n}","export function addAttribute(element, _ref) {\n  var attribute = _ref.attribute,\n    value = _ref.value;\n  element.setAttribute(attribute, value);\n  return function () {\n    return element.removeAttribute(attribute);\n  };\n}","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t.return || t.return(); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nimport { combine } from '../public-utils/combine';\nimport { once } from '../public-utils/once';\nimport { addAttribute } from '../util/add-attribute';\nfunction copyReverse(array) {\n  return array.slice(0).reverse();\n}\nexport function makeDropTarget(_ref) {\n  var typeKey = _ref.typeKey,\n    defaultDropEffect = _ref.defaultDropEffect;\n  var registry = new WeakMap();\n  var dropTargetDataAtt = \"data-drop-target-for-\".concat(typeKey);\n  var dropTargetSelector = \"[\".concat(dropTargetDataAtt, \"]\");\n  function addToRegistry(args) {\n    registry.set(args.element, args);\n    return function () {\n      return registry.delete(args.element);\n    };\n  }\n  function dropTargetForConsumers(args) {\n    // Guardrail: warn if the draggable element is already registered\n    if (process.env.NODE_ENV !== 'production') {\n      var existing = registry.get(args.element);\n      if (existing) {\n        // eslint-disable-next-line no-console\n        console.warn(\"You have already registered a [\".concat(typeKey, \"] dropTarget on the same element\"), {\n          existing: existing,\n          proposed: args\n        });\n      }\n      if (args.element instanceof HTMLIFrameElement) {\n        // eslint-disable-next-line no-console\n        console.warn(\"\\n            We recommend not registering <iframe> elements as drop targets\\n            as it can result in some strange browser event ordering.\\n          \" // Removing newlines and excessive whitespace\n        .replace(/\\s{2,}/g, ' ').trim());\n      }\n    }\n    var cleanup = combine(addAttribute(args.element, {\n      attribute: dropTargetDataAtt,\n      value: 'true'\n    }), addToRegistry(args));\n\n    // Wrapping in `once` to prevent unexpected side effects if consumers call\n    // the clean up function multiple times.\n    return once(cleanup);\n  }\n  function getActualDropTargets(_ref2) {\n    var _args$getData, _args$getData2, _args$getDropEffect, _args$getDropEffect2;\n    var source = _ref2.source,\n      target = _ref2.target,\n      input = _ref2.input,\n      _ref2$result = _ref2.result,\n      result = _ref2$result === void 0 ? [] : _ref2$result;\n    if (target == null) {\n      return result;\n    }\n    if (!(target instanceof Element)) {\n      // For \"text-selection\" drags, the original `target`\n      // is not an `Element`, so we need to start looking from\n      // the parent element\n      if (target instanceof Node) {\n        return getActualDropTargets({\n          source: source,\n          target: target.parentElement,\n          input: input,\n          result: result\n        });\n      }\n\n      // not sure what we are working with,\n      // so we can exit.\n      return result;\n    }\n    var closest = target.closest(dropTargetSelector);\n\n    // Cannot find anything else\n    if (closest == null) {\n      return result;\n    }\n    var args = registry.get(closest);\n\n    // error: something had a dropTargetSelector but we could not\n    // find a match. For now, failing silently\n    if (args == null) {\n      return result;\n    }\n    var feedback = {\n      input: input,\n      source: source,\n      element: args.element\n    };\n\n    // if dropping is not allowed, skip this drop target\n    // and continue looking up the DOM tree\n    if (args.canDrop && !args.canDrop(feedback)) {\n      return getActualDropTargets({\n        source: source,\n        target: args.element.parentElement,\n        input: input,\n        result: result\n      });\n    }\n\n    // calculate our new record\n    var data = (_args$getData = (_args$getData2 = args.getData) === null || _args$getData2 === void 0 ? void 0 : _args$getData2.call(args, feedback)) !== null && _args$getData !== void 0 ? _args$getData : {};\n    var dropEffect = (_args$getDropEffect = (_args$getDropEffect2 = args.getDropEffect) === null || _args$getDropEffect2 === void 0 ? void 0 : _args$getDropEffect2.call(args, feedback)) !== null && _args$getDropEffect !== void 0 ? _args$getDropEffect : defaultDropEffect;\n    var record = {\n      data: data,\n      element: args.element,\n      dropEffect: dropEffect,\n      // we are collecting _actual_ drop targets, so these are\n      // being applied _not_ due to stickiness\n      isActiveDueToStickiness: false\n    };\n    return getActualDropTargets({\n      source: source,\n      target: args.element.parentElement,\n      input: input,\n      // Using bubble ordering. Same ordering as `event.getPath()`\n      result: [].concat(_toConsumableArray(result), [record])\n    });\n  }\n  function notifyCurrent(_ref3) {\n    var eventName = _ref3.eventName,\n      payload = _ref3.payload;\n    var _iterator = _createForOfIteratorHelper(payload.location.current.dropTargets),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _entry$eventName;\n        var record = _step.value;\n        var entry = registry.get(record.element);\n        var args = _objectSpread(_objectSpread({}, payload), {}, {\n          self: record\n        });\n        entry === null || entry === void 0 || (_entry$eventName = entry[eventName]) === null || _entry$eventName === void 0 || _entry$eventName.call(entry,\n        // I cannot seem to get the types right here.\n        // TS doesn't seem to like that one event can need `nativeSetDragImage`\n        // @ts-expect-error\n        args);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  var actions = {\n    onGenerateDragPreview: notifyCurrent,\n    onDrag: notifyCurrent,\n    onDragStart: notifyCurrent,\n    onDrop: notifyCurrent,\n    onDropTargetChange: function onDropTargetChange(_ref4) {\n      var payload = _ref4.payload;\n      var isCurrent = new Set(payload.location.current.dropTargets.map(function (record) {\n        return record.element;\n      }));\n      var visited = new Set();\n      var _iterator2 = _createForOfIteratorHelper(payload.location.previous.dropTargets),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _entry$onDropTargetCh;\n          var record = _step2.value;\n          visited.add(record.element);\n          var entry = registry.get(record.element);\n          var isOver = isCurrent.has(record.element);\n          var args = _objectSpread(_objectSpread({}, payload), {}, {\n            self: record\n          });\n          entry === null || entry === void 0 || (_entry$onDropTargetCh = entry.onDropTargetChange) === null || _entry$onDropTargetCh === void 0 || _entry$onDropTargetCh.call(entry, args);\n\n          // if we cannot find the drop target in the current array, then it has been left\n          if (!isOver) {\n            var _entry$onDragLeave;\n            entry === null || entry === void 0 || (_entry$onDragLeave = entry.onDragLeave) === null || _entry$onDragLeave === void 0 || _entry$onDragLeave.call(entry, args);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      var _iterator3 = _createForOfIteratorHelper(payload.location.current.dropTargets),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _entry$onDropTargetCh2, _entry$onDragEnter;\n          var _record = _step3.value;\n          // already published an update to this drop target\n          if (visited.has(_record.element)) {\n            continue;\n          }\n          // at this point we have a new drop target that is being entered into\n          var _args = _objectSpread(_objectSpread({}, payload), {}, {\n            self: _record\n          });\n          var _entry = registry.get(_record.element);\n          _entry === null || _entry === void 0 || (_entry$onDropTargetCh2 = _entry.onDropTargetChange) === null || _entry$onDropTargetCh2 === void 0 || _entry$onDropTargetCh2.call(_entry, _args);\n          _entry === null || _entry === void 0 || (_entry$onDragEnter = _entry.onDragEnter) === null || _entry$onDragEnter === void 0 || _entry$onDragEnter.call(_entry, _args);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  };\n  function dispatchEvent(args) {\n    actions[args.eventName](args);\n  }\n  function getIsOver(_ref5) {\n    var source = _ref5.source,\n      target = _ref5.target,\n      input = _ref5.input,\n      current = _ref5.current;\n    var actual = getActualDropTargets({\n      source: source,\n      target: target,\n      input: input\n    });\n\n    // stickiness is only relevant when we have less\n    // drop targets than we did before\n    if (actual.length >= current.length) {\n      return actual;\n    }\n\n    // less 'actual' drop targets than before,\n    // we need to see if 'stickiness' applies\n\n    // An old drop target will continue to be dropped on if:\n    // 1. it has the same parent\n    // 2. nothing exists in it's previous index\n\n    var lastCaptureOrdered = copyReverse(current);\n    var actualCaptureOrdered = copyReverse(actual);\n    var resultCaptureOrdered = [];\n    for (var index = 0; index < lastCaptureOrdered.length; index++) {\n      var _argsForLast$getIsSti;\n      var last = lastCaptureOrdered[index];\n      var fresh = actualCaptureOrdered[index];\n\n      // if a record is in the new index -> use that\n      // it will have the latest data + dropEffect\n      if (fresh != null) {\n        resultCaptureOrdered.push(fresh);\n        continue;\n      }\n\n      // At this point we have no drop target in the old spot\n      // Check to see if we can use a previous sticky drop target\n\n      // The \"parent\" is the one inside of `resultCaptureOrdered`\n      // (the parent might be a drop target that was sticky)\n      var parent = resultCaptureOrdered[index - 1];\n      var lastParent = lastCaptureOrdered[index - 1];\n\n      // Stickiness is based on parent relationships, so if the parent relationship has change\n      // then we can stop our search\n      if ((parent === null || parent === void 0 ? void 0 : parent.element) !== (lastParent === null || lastParent === void 0 ? void 0 : lastParent.element)) {\n        break;\n      }\n\n      // We need to check whether the old drop target can still be dropped on\n\n      var argsForLast = registry.get(last.element);\n\n      // We cannot drop on a drop target that is no longer mounted\n      if (!argsForLast) {\n        break;\n      }\n      var feedback = {\n        input: input,\n        source: source,\n        element: argsForLast.element\n      };\n\n      // We cannot drop on a drop target that no longer allows being dropped on\n      if (argsForLast.canDrop && !argsForLast.canDrop(feedback)) {\n        break;\n      }\n\n      // We cannot drop on a drop target that is no longer sticky\n      if (!((_argsForLast$getIsSti = argsForLast.getIsSticky) !== null && _argsForLast$getIsSti !== void 0 && _argsForLast$getIsSti.call(argsForLast, feedback))) {\n        break;\n      }\n\n      // Note: intentionally not recollecting `getData()` or `getDropEffect()`\n      // Previous values for `data` and `dropEffect` will be borrowed\n      // This is to prevent things like the 'closest edge' changing when\n      // no longer over a drop target.\n      // We could change our mind on this behaviour in the future\n\n      resultCaptureOrdered.push(_objectSpread(_objectSpread({}, last), {}, {\n        // making it clear to consumers this drop target is active due to stickiness\n        isActiveDueToStickiness: true\n      }));\n    }\n\n    // return bubble ordered result\n    return copyReverse(resultCaptureOrdered);\n  }\n  return {\n    dropTargetForConsumers: dropTargetForConsumers,\n    getIsOver: getIsOver,\n    dispatchEvent: dispatchEvent\n  };\n}","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t.return || t.return(); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { once } from '../public-utils/once';\nexport function makeMonitor() {\n  var registry = new Set();\n  var dragging = null;\n  function tryAddToActive(monitor) {\n    if (!dragging) {\n      return;\n    }\n    // Monitor is allowed to monitor events if:\n    // 1. It has no `canMonitor` function (default is that a monitor can listen to everything)\n    // 2. `canMonitor` returns true\n    if (!monitor.canMonitor || monitor.canMonitor(dragging.canMonitorArgs)) {\n      dragging.active.add(monitor);\n    }\n  }\n  function monitorForConsumers(args) {\n    // We are giving each `args` a new reference so that you\n    // can create multiple monitors with the same `args`.\n    var entry = _objectSpread({}, args);\n    registry.add(entry);\n\n    // if there is an active drag we need to see if this new monitor is relevant\n    tryAddToActive(entry);\n    function cleanup() {\n      registry.delete(entry);\n\n      // We need to stop publishing events during a drag to this monitor!\n      if (dragging) {\n        dragging.active.delete(entry);\n      }\n    }\n\n    // Wrapping in `once` to prevent unexpected side effects if consumers call\n    // the clean up function multiple times.\n    return once(cleanup);\n  }\n  function dispatchEvent(_ref) {\n    var eventName = _ref.eventName,\n      payload = _ref.payload;\n    if (eventName === 'onGenerateDragPreview') {\n      dragging = {\n        canMonitorArgs: {\n          initial: payload.location.initial,\n          source: payload.source\n        },\n        active: new Set()\n      };\n      var _iterator = _createForOfIteratorHelper(registry),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var monitor = _step.value;\n          tryAddToActive(monitor);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n\n    // This should never happen.\n    if (!dragging) {\n      return;\n    }\n\n    // Creating an array from the set _before_ iterating\n    // This is so that monitors added during the current event will not be called.\n    // This behaviour matches native EventTargets where an event listener\n    // cannot add another event listener during an active event to the same\n    // event target in the same event (for us we have a single global event target)\n    var active = Array.from(dragging.active);\n    for (var _i = 0, _active = active; _i < _active.length; _i++) {\n      var _monitor = _active[_i];\n      // A monitor can be removed by another monitor during an event.\n      // We need to check that the monitor is still registered before calling it\n      if (dragging.active.has(_monitor)) {\n        var _monitor$eventName;\n        // @ts-expect-error: I cannot get this type working!\n        (_monitor$eventName = _monitor[eventName]) === null || _monitor$eventName === void 0 || _monitor$eventName.call(_monitor, payload);\n      }\n    }\n    if (eventName === 'onDrop') {\n      dragging.active.clear();\n      dragging = null;\n    }\n  }\n  return {\n    dispatchEvent: dispatchEvent,\n    monitorForConsumers: monitorForConsumers\n  };\n}","import { lifecycle } from '../ledger/lifecycle-manager';\nimport { register } from '../ledger/usage-ledger';\nimport { makeDropTarget } from './make-drop-target';\nimport { makeMonitor } from './make-monitor';\nexport function makeAdapter(_ref) {\n  var typeKey = _ref.typeKey,\n    mount = _ref.mount,\n    dispatchEventToSource = _ref.dispatchEventToSource,\n    onPostDispatch = _ref.onPostDispatch,\n    defaultDropEffect = _ref.defaultDropEffect;\n  var monitorAPI = makeMonitor();\n  var dropTargetAPI = makeDropTarget({\n    typeKey: typeKey,\n    defaultDropEffect: defaultDropEffect\n  });\n  function dispatchEvent(args) {\n    // 1. forward the event to source\n    dispatchEventToSource === null || dispatchEventToSource === void 0 || dispatchEventToSource(args);\n\n    // 2. forward the event to relevant dropTargets\n    dropTargetAPI.dispatchEvent(args);\n\n    // 3. forward event to monitors\n    monitorAPI.dispatchEvent(args);\n\n    // 4. post consumer dispatch (used for honey pot fix)\n    onPostDispatch === null || onPostDispatch === void 0 || onPostDispatch(args);\n  }\n  function start(_ref2) {\n    var event = _ref2.event,\n      dragType = _ref2.dragType;\n    lifecycle.start({\n      event: event,\n      dragType: dragType,\n      getDropTargetsOver: dropTargetAPI.getIsOver,\n      dispatchEvent: dispatchEvent\n    });\n  }\n  function registerUsage() {\n    function mountAdapter() {\n      var api = {\n        canStart: lifecycle.canStart,\n        start: start\n      };\n      return mount(api);\n    }\n    return register({\n      typeKey: typeKey,\n      mount: mountAdapter\n    });\n  }\n  return {\n    registerUsage: registerUsage,\n    dropTarget: dropTargetAPI.dropTargetForConsumers,\n    monitor: monitorAPI.monitorForConsumers\n  };\n}","import { once } from '../public-utils/once';\n\n// Using `once` as the value won't change in a browser\n\nexport var isAndroid = once(function isAndroid() {\n  return navigator.userAgent.toLocaleLowerCase().includes('android');\n});\nexport var androidFallbackText = 'pdnd:android-fallback';","// Why we put the media types in their own files:\n//\n// - we are not putting them all in one file as not all adapters need all types\n// - we are not putting them in the external helpers as some things just need the\n//   types and not the external functions code\nexport var textMediaType = 'text/plain';","// Why we put the media types in their own files:\n//\n// - we are not putting them all in one file as not all adapters need all types\n// - we are not putting them in the external helpers as some things just need the\n//   types and not the external functions code\nexport var URLMediaType = 'text/uri-list';","/**\n * This key has been pulled into a separate module\n * so that the external adapter does not need to import\n * the element adapter\n */\nexport var elementAdapterNativeDataKey = 'application/vnd.pdnd';","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { bind } from 'bind-event-listener';\nimport { getElementFromPointWithoutHoneypot } from '../honey-pot-fix/get-element-from-point-without-honey-pot';\nimport { makeHoneyPotFix } from '../honey-pot-fix/make-honey-pot-fix';\nimport { makeAdapter } from '../make-adapter/make-adapter';\nimport { combine } from '../public-utils/combine';\nimport { once } from '../public-utils/once';\nimport { addAttribute } from '../util/add-attribute';\nimport { androidFallbackText, isAndroid } from '../util/android';\nimport { getInput } from '../util/get-input';\nimport { textMediaType } from '../util/media-types/text-media-type';\nimport { URLMediaType } from '../util/media-types/url-media-type';\nimport { elementAdapterNativeDataKey } from './element-adapter-native-data-key';\nvar draggableRegistry = new WeakMap();\nfunction addToRegistry(args) {\n  draggableRegistry.set(args.element, args);\n  return function cleanup() {\n    draggableRegistry.delete(args.element);\n  };\n}\nvar honeyPotFix = makeHoneyPotFix();\nvar adapter = makeAdapter({\n  typeKey: 'element',\n  defaultDropEffect: 'move',\n  mount: function mount(api) {\n    /**  Binding event listeners the `document` rather than `window` so that\n     * this adapter always gets preference over the text adapter.\n     * `document` is the first `EventTarget` under `window`\n     * https://twitter.com/alexandereardon/status/1604658588311465985\n     */\n    return combine(honeyPotFix.bindEvents(), bind(document, {\n      type: 'dragstart',\n      listener: function listener(event) {\n        var _entry$dragHandle, _entry$getInitialData, _entry$getInitialData2, _entry$dragHandle2, _entry$getInitialData3, _entry$getInitialData4;\n        if (!api.canStart(event)) {\n          return;\n        }\n\n        // If the \"dragstart\" event is cancelled, then a drag won't start\n        // There will be no further drag operation events (eg no \"dragend\" event)\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        // Technically `dataTransfer` can be `null` according to the types\n        // But that behaviour does not seem to appear in the spec.\n        // If there is not `dataTransfer`, we can assume something is wrong and not\n        // start a drag\n        if (!event.dataTransfer) {\n          // Including this code on \"test\" and \"development\" environments:\n          // - Browser tests commonly run against \"development\" builds\n          // - Unit tests commonly run in \"test\"\n          if (process.env.NODE_ENV !== 'production') {\n            // eslint-disable-next-line no-console\n            console.warn(\"\\n              It appears as though you have are not testing DragEvents correctly.\\n\\n              - If you are unit testing, ensure you have polyfilled DragEvent.\\n              - If you are browser testing, ensure you are dispatching drag events correctly.\\n\\n              Please see our testing guides for more information:\\n              https://atlassian.design/components/pragmatic-drag-and-drop/core-package/testing\\n            \".replace(/ {2}/g, ''));\n          }\n          return;\n        }\n\n        // the closest parent that is a draggable element will be marked as\n        // the `event.target` for the event\n        var target = event.target;\n\n        // this source is only for elements\n        // Note: only HTMLElements can have the \"draggable\" attribute\n        if (!(target instanceof HTMLElement)) {\n          return null;\n        }\n\n        // see if the thing being dragged is owned by us\n        var entry = draggableRegistry.get(target);\n\n        // no matching element found\n        // â†’ dragging an element with `draggable=\"true\"` that is not controlled by us\n        if (!entry) {\n          return null;\n        }\n\n        /**\n         * A text selection drag _can_ have the `draggable` element be\n         * the `event.target` if the user is dragging the text selection\n         * from the `draggable`.\n         *\n         * To know if the `draggable` is being dragged, we look at whether any\n         * `\"text/plain\"` data is being dragged. If it is, then a text selection\n         * drag is occurring.\n         *\n         * This behaviour has been validated on:\n         *\n         * - Chrome@128 on Android@14\n         * - Chrome@128 on iOS@17.6.1\n         * - Chrome@128 on Windows@11\n         * - Chrome@128 on MacOS@14.6.1\n         * - Firefox@129 on Windows@11 (not possible for user to select text in a draggable)\n         * - Firefox@129 on MacOS@14.6.1 (not possible for user to select text in a draggable)\n         *\n         * Note: Could usually just use: `event.dataTransfer.types.includes(textMediaType)`\n         * but unfortunately ProseMirror is always setting `\"\"` as the dragged text\n         *\n         * Note: Unfortunately editor is (heavily) leaning on the current functionality today\n         * and unwinding it will be a decent amount of effort. So for now, a text selection\n         * where the `event.target` is a `draggable` element will still trigger the\n         * element adapter.\n         *\n         * // Future state:\n         * if(event.dataTransfer.getData(textMediaType)) {\n         * \treturn;\n         * }\n         *\n         */\n\n        var input = getInput(event);\n        var feedback = {\n          element: entry.element,\n          dragHandle: (_entry$dragHandle = entry.dragHandle) !== null && _entry$dragHandle !== void 0 ? _entry$dragHandle : null,\n          input: input\n        };\n\n        // Check: does the draggable want to allow dragging?\n        if (entry.canDrag && !entry.canDrag(feedback)) {\n          // cancel drag operation if we cannot drag\n          event.preventDefault();\n          return null;\n        }\n\n        // Check: is there a drag handle and is the user using it?\n        if (entry.dragHandle) {\n          // technically don't need this util, but just being\n          // consistent with how we look up what is under the users\n          // cursor.\n          var over = getElementFromPointWithoutHoneypot({\n            x: input.clientX,\n            y: input.clientY\n          });\n\n          // if we are not dragging from the drag handle (or something inside the drag handle)\n          // then we will cancel the active drag\n          if (!entry.dragHandle.contains(over)) {\n            event.preventDefault();\n            return null;\n          }\n        }\n\n        /**\n         *  **Goal**\n         *  Pass information to other applications\n         *\n         * **Approach**\n         *  Put data into the native data store\n         *\n         *  **What about the native adapter?**\n         *  When the element adapter puts native data into the native data store\n         *  the native adapter is not triggered in the current window,\n         *  but a native adapter in an external window _can_ be triggered\n         *\n         *  **Why bake this into core?**\n         *  This functionality could be pulled out and exposed inside of\n         *  `onGenerateDragPreview`. But decided to make it a part of the\n         *  base API as it felt like a common enough use case and ended\n         *  up being a similar amount of code to include this function as\n         *  it was to expose the hook for it\n         */\n        var nativeData = (_entry$getInitialData = (_entry$getInitialData2 = entry.getInitialDataForExternal) === null || _entry$getInitialData2 === void 0 ? void 0 : _entry$getInitialData2.call(entry, feedback)) !== null && _entry$getInitialData !== void 0 ? _entry$getInitialData : null;\n        if (nativeData) {\n          for (var _i = 0, _Object$entries = Object.entries(nativeData); _i < _Object$entries.length; _i++) {\n            var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n              key = _Object$entries$_i[0],\n              data = _Object$entries$_i[1];\n            event.dataTransfer.setData(key, data !== null && data !== void 0 ? data : '');\n          }\n        }\n\n        /**\n         *  ðŸ“± For Android devices, a drag operation will not start unless\n         * \"text/plain\" or \"text/uri-list\" data exists in the native data store\n         * https://twitter.com/alexandereardon/status/1732189803754713424\n         *\n         * Tested on:\n         * Device: Google Pixel 5\n         * Android version: 14 (November 5, 2023)\n         * Chrome version: 120.0\n         */\n        if (isAndroid() && !event.dataTransfer.types.includes(textMediaType) && !event.dataTransfer.types.includes(URLMediaType)) {\n          event.dataTransfer.setData(textMediaType, androidFallbackText);\n        }\n\n        /**\n         * 1. Must set any media type for `iOS15` to work\n         * 2. We are also doing adding data so that the native adapter\n         * can know that the element adapter has handled this drag\n         *\n         * We used to wrap this `setData()` in a `try/catch` for Firefox,\n         * but it looks like that was not needed.\n         *\n         * Tested using: https://codesandbox.io/s/checking-firefox-throw-behaviour-on-dragstart-qt8h4f\n         *\n         * - âœ… Firefox@70.0 (Oct 2019) on macOS Sonoma\n         * - âœ… Firefox@70.0 (Oct 2019) on macOS Big Sur\n         * - âœ… Firefox@70.0 (Oct 2019) on Windows 10\n         *\n         * // just checking a few more combinations to be super safe\n         *\n         * - âœ… Chrome@78 (Oct 2019) on macOS Big Sur\n         * - âœ… Chrome@78 (Oct 2019) on Windows 10\n         * - âœ… Safari@14.1 on macOS Big Sur\n         */\n        event.dataTransfer.setData(elementAdapterNativeDataKey, '');\n        var payload = {\n          element: entry.element,\n          dragHandle: (_entry$dragHandle2 = entry.dragHandle) !== null && _entry$dragHandle2 !== void 0 ? _entry$dragHandle2 : null,\n          data: (_entry$getInitialData3 = (_entry$getInitialData4 = entry.getInitialData) === null || _entry$getInitialData4 === void 0 ? void 0 : _entry$getInitialData4.call(entry, feedback)) !== null && _entry$getInitialData3 !== void 0 ? _entry$getInitialData3 : {}\n        };\n        var dragType = {\n          type: 'element',\n          payload: payload,\n          startedFrom: 'internal'\n        };\n        api.start({\n          event: event,\n          dragType: dragType\n        });\n      }\n    }));\n  },\n  dispatchEventToSource: function dispatchEventToSource(_ref) {\n    var _draggableRegistry$ge, _draggableRegistry$ge2;\n    var eventName = _ref.eventName,\n      payload = _ref.payload;\n    // During a drag operation, a draggable can be:\n    // - remounted with different functions\n    // - removed completely\n    // So we need to get the latest entry from the registry in order\n    // to call the latest event functions\n\n    (_draggableRegistry$ge = draggableRegistry.get(payload.source.element)) === null || _draggableRegistry$ge === void 0 || (_draggableRegistry$ge2 = _draggableRegistry$ge[eventName]) === null || _draggableRegistry$ge2 === void 0 || _draggableRegistry$ge2.call(_draggableRegistry$ge,\n    // I cannot seem to get the types right here.\n    // TS doesn't seem to like that one event can need `nativeSetDragImage`\n    // @ts-expect-error\n    payload);\n  },\n  onPostDispatch: honeyPotFix.getOnPostDispatch()\n});\nexport var dropTargetForElements = adapter.dropTarget;\nexport var monitorForElements = adapter.monitor;\nexport function draggable(args) {\n  // Guardrail: warn if the drag handle is not contained in draggable element\n  if (process.env.NODE_ENV !== 'production') {\n    if (args.dragHandle && !args.element.contains(args.dragHandle)) {\n      // eslint-disable-next-line no-console\n      console.warn('Drag handle element must be contained in draggable element', {\n        element: args.element,\n        dragHandle: args.dragHandle\n      });\n    }\n  }\n  // Guardrail: warn if the draggable element is already registered\n  if (process.env.NODE_ENV !== 'production') {\n    var existing = draggableRegistry.get(args.element);\n    if (existing) {\n      // eslint-disable-next-line no-console\n      console.warn('You have already registered a `draggable` on the same element', {\n        existing: existing,\n        proposed: args\n      });\n    }\n  }\n  var cleanup = combine(\n  // making the draggable register the adapter rather than drop targets\n  // this is because you *must* have a draggable element to start a drag\n  // but you _might_ not have any drop targets immediately\n  // (You might create drop targets async)\n  adapter.registerUsage(), addToRegistry(args), addAttribute(args.element, {\n    attribute: 'draggable',\n    value: 'true'\n  }));\n\n  // Wrapping in `once` to prevent unexpected side effects if consumers call\n  // the clean up function multiple times.\n  return once(cleanup);\n}\n\n/** Common event payload for all events */\n\n/** A map containing payloads for all events */\n\n/** Common event payload for all drop target events */\n\n/** A map containing payloads for all events on drop targets */\n\n/** Arguments given to all feedback functions (eg `canDrag()`) on for a `draggable()` */\n\n/** Arguments given to all feedback functions (eg `canDrop()`) on a `dropTargetForElements()` */\n\n/** Arguments given to all monitor feedback functions (eg `canMonitor()`) for a `monitorForElements` */","import React, { useRef, useEffect, useState, useCallback, useMemo } from 'react';\nimport { Card, Button, Select, Row, Col, Space, Typography, Divider, ColorPicker, InputNumber, Collapse, Slider } from 'antd';\nimport { ZoomInOutlined, ZoomOutOutlined, ExpandOutlined, DragOutlined, PlusOutlined, DeleteOutlined, CopyOutlined } from '@ant-design/icons';\nimport { ColorworkPattern } from '../models/ColorworkPattern';\nimport { Gauge } from '../models/Gauge';\nimport { draggable, dropTargetForElements } from '@atlaskit/pragmatic-drag-and-drop/element/adapter';\nimport { useSelector } from 'react-redux';\nimport { selectColorworkPatterns } from '../store/librarySlice';\nimport './ColorworkCanvasEditor.css';\n\nconst { Text } = Typography;\nconst { Option } = Select;\n\n// Draggable Layer Item Component - defined outside to prevent re-creation\nconst DraggableLayerItem = React.memo(({ layer, children, onLayerReorder, dragItemHoverStyle, dragItemNormalStyle }) => {\n    const layerRef = useRef(null);\n    const [isDraggedOver, setIsDraggedOver] = useState(false);\n\n    useEffect(() => {\n        const element = layerRef.current;\n        if (!element) return;\n\n        // Set up draggable\n        const draggableCleanup = draggable({\n            element,\n            getInitialData: () => ({ layerId: layer.id, type: 'layer' }),\n            onDragStart: () => {\n                element.style.opacity = '0.5';\n            },\n            onDrop: () => {\n                element.style.opacity = '1';\n            }\n        });\n\n        // Set up drop target\n        const dropTargetCleanup = dropTargetForElements({\n            element,\n            onDragEnter: () => setIsDraggedOver(true),\n            onDragLeave: () => setIsDraggedOver(false),\n            onDrop: ({ source }) => {\n                setIsDraggedOver(false);\n                const draggedLayerId = source.data.layerId;\n                if (draggedLayerId && draggedLayerId !== layer.id) {\n                    onLayerReorder(draggedLayerId, layer.id);\n                }\n            },\n            canDrop: ({ source }) => {\n                return source.data.type === 'layer' && source.data.layerId !== layer.id;\n            }\n        });\n\n        return () => {\n            draggableCleanup();\n            dropTargetCleanup();\n        };\n    }, [layer.id, onLayerReorder]);\n\n    return (\n        <div\n            ref={layerRef}\n            style={isDraggedOver ? dragItemHoverStyle : dragItemNormalStyle}\n        >\n            {children}\n        </div>\n    );\n});\n\n/**\n * ColorworkCanvasEditor - Full-page canvas-based editor with pan/zoom controls\n * Layout matches colorwork-designer with canvas front-and-center and side panel controls\n */\nconst ColorworkCanvasEditor = ({\n    shape,\n    patternLayers = [],\n    gauge = null,\n    onLayersChange = (..._args: any[]) => { },\n    onGaugeChange = (..._args: any[]) => { }\n}) => {\n    const canvasRef = useRef(null);\n    const [zoom, setZoom] = useState(1);\n    const [pan, setPan] = useState({ x: 0, y: 0 });\n    const [isDragging, setIsDragging] = useState(false);\n    const [lastMousePos, setLastMousePos] = useState({ x: 0, y: 0 });\n    const [canvasSize, setCanvasSize] = useState({ width: 800, height: 600 });\n    const hasInitialized = useRef(false);\n    \n    // Get colorwork patterns from the library\n    const libraryPatterns = useSelector(selectColorworkPatterns);\n    \n    // Debug: Log library patterns when they change\n    useEffect(() => {\n        console.log('ðŸ“š Library patterns loaded:', libraryPatterns);\n    }, [libraryPatterns]);\n\n    // Pattern creation functions (same as original) - now includes library patterns\n    const availablePatterns = useMemo(() => {\n        const basePatterns = {\n            'solid': { name: 'Solid Color', type: 'solid', defaultConfig: { colors: [{ color: '#ffffff' }] } },\n            'stripes': { name: 'Horizontal Stripes', type: 'stripes', defaultConfig: { colors: [{ color: '#ffffff', rows: 2 }, { color: '#000000', rows: 2 }], width: 4 } },\n            'vstripes': { name: 'Vertical Stripes', type: 'vstripes', defaultConfig: { colors: [{ color: '#ffffff', columns: 2 }, { color: '#000000', columns: 2 }], height: 4 } },\n            'checkerboard': { name: 'Checkerboard', type: 'checkerboard', defaultConfig: { cellSize: 2, colors: [{ color: '#ffffff' }, { color: '#000000' }] } },\n            'argyle': { name: 'Argyle', type: 'argyle', defaultConfig: { colors: [{ color: '#ffffff' }, { color: '#ff0000' }, { color: '#0000ff' }] } },\n            'row': { name: 'Row', type: 'row', defaultConfig: { elements: [] } },\n            'vstack': { name: 'Vertical Stack', type: 'vstack', defaultConfig: { elements: [] } }\n        };\n\n        // Add library patterns as 'custom' type\n        // libraryPatterns is an object with pattern IDs as keys\n        if (libraryPatterns && typeof libraryPatterns === 'object') {\n            Object.entries(libraryPatterns).forEach(([patternId, libPattern]: [string, any]) => {\n                const key = `custom-${patternId}`;\n                basePatterns[key] = {\n                    name: libPattern.name || patternId,\n                    type: 'custom',\n                    customPattern: libPattern.pattern, // The actual grid data\n                    customColors: libPattern.colors, // The color palette\n                    defaultConfig: {\n                        pattern: libPattern.pattern,\n                        colors: libPattern.colors || {}\n                    }\n                };\n            });\n        }\n\n        return basePatterns;\n    }, [libraryPatterns]);\n    \n    // Debug: Log available patterns when they change\n    useEffect(() => {\n        console.log('ðŸŽ¨ Available patterns:', Object.keys(availablePatterns), availablePatterns);\n    }, [availablePatterns]);\n\n    const [collapsedLayers, setCollapsedLayers] = useState(new Set()); // Track collapsed layers\n\n    // Canvas rendering functions (adapted from ColorworkPanelDiagram)\n    const renderUnifiedShapeToCanvas = (ctx: any, shape: any, scale: any, xOffset = 0, yOffset = 0, fillColor: any, patternLayers: any = [], gauge: any = null) => {\n        // Collect all trapezoid coordinates into one unified path\n        const allCoordinates = [];\n        collectTrapezoidCoordinates(shape, scale, xOffset, yOffset, allCoordinates);\n\n        if (allCoordinates.length === 0) return;\n\n        // Find the bounding box of the entire shape\n        let minX = Math.min(...allCoordinates.map((coord: any) => Math.min(coord.topLeft.x, coord.topRight.x, coord.bottomLeft.x, coord.bottomRight.x)));\n        let maxX = Math.max(...allCoordinates.map((coord: any) => Math.max(coord.topLeft.x, coord.topRight.x, coord.bottomLeft.x, coord.bottomRight.x)));\n        let minY = Math.min(...allCoordinates.map((coord: any) => Math.min(coord.topLeft.y, coord.topRight.y, coord.bottomLeft.y, coord.bottomRight.y)));\n        let maxY = Math.max(...allCoordinates.map((coord: any) => Math.max(coord.topLeft.y, coord.topRight.y, coord.bottomLeft.y, coord.bottomRight.y)));\n\n        // Create unified clipping path\n        ctx.save();\n        ctx.beginPath();\n\n        // Draw each trapezoid as part of the unified path\n        allCoordinates.forEach((coord, index: number) => {\n            if (index === 0) {\n                ctx.moveTo(coord.topLeft.x, coord.topLeft.y);\n            } else {\n                ctx.moveTo(coord.topLeft.x, coord.topLeft.y);\n            }\n            ctx.lineTo(coord.topRight.x, coord.topRight.y);\n            ctx.lineTo(coord.bottomRight.x, coord.bottomRight.y);\n            ctx.lineTo(coord.bottomLeft.x, coord.bottomLeft.y);\n            ctx.closePath();\n        });\n\n        ctx.clip();\n\n        // If pattern layers are provided, render them as background with centered origin\n        if (patternLayers && patternLayers.length > 0 && gauge) {\n            // Calculate full panel dimensions for pattern rendering\n            let fullPanelDimensions = { minX: Infinity, maxX: -Infinity, minY: Infinity, maxY: -Infinity };\n            calculateTrapezoidDimensions(shape, 1, 0, 0, fullPanelDimensions);\n\n            renderColorworkLayersToCanvasCentered(\n                ctx,\n                patternLayers,\n                shape,\n                minX, minY, maxX - minX, maxY - minY,\n                scale,\n                gauge,\n                fullPanelDimensions // Pass the full panel dimensions\n            );\n        } else {\n            // Default solid fill if no colorwork\n            ctx.fillStyle = fillColor;\n            ctx.globalAlpha = 0.3;\n            ctx.fillRect(minX, minY, maxX - minX, maxY - minY);\n            ctx.globalAlpha = 1.0;\n        }\n\n        ctx.restore();\n\n        // Draw unified outline\n        ctx.strokeStyle = '#a1a8af';\n        ctx.lineWidth = 3;\n        ctx.lineJoin = 'round';\n\n        allCoordinates.forEach((coord: any) => {\n            ctx.beginPath();\n            ctx.moveTo(coord.topLeft.x, coord.topLeft.y);\n            ctx.lineTo(coord.topRight.x, coord.topRight.y);\n            ctx.lineTo(coord.bottomRight.x, coord.bottomRight.y);\n            ctx.lineTo(coord.bottomLeft.x, coord.bottomLeft.y);\n            ctx.closePath();\n            ctx.stroke();\n        });\n    };\n\n    const collectTrapezoidCoordinates = (trap: any, scale: any, xOffset = 0, yOffset = 0, coordinates: any = []) => {\n        const trapWidth = Math.max(trap.baseA, trap.baseB) * scale;\n        const xTopLeft = xOffset + (trapWidth - trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n        const xTopRight = xOffset + (trapWidth + trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n        const xBottomLeft = xOffset + (trapWidth - trap.baseA * scale) / 2;\n        const xBottomRight = xOffset + (trapWidth + trap.baseA * scale) / 2;\n        const yTop = yOffset;\n        const yBottom = yOffset + trap.height * scale;\n\n        coordinates.push({\n            topLeft: { x: xTopLeft, y: yTop },\n            topRight: { x: xTopRight, y: yTop },\n            bottomLeft: { x: xBottomLeft, y: yBottom },\n            bottomRight: { x: xBottomRight, y: yBottom }\n        });\n\n        if (trap.successors && trap.successors.length > 0) {\n            const successorWidths = trap.successors.map((s: any) => Math.max(s.baseA, s.baseB) * scale);\n            const totalSuccessorWidth = successorWidths.reduce((sum, w) => sum + w, 0);\n            let childXOffset = xOffset + (trapWidth - totalSuccessorWidth) / 2;\n\n            for (let i = trap.successors.length - 1; i >= 0; i--) {\n                const successor = trap.successors[i];\n                const successorWidth = successorWidths[i];\n                collectTrapezoidCoordinates(\n                    successor,\n                    scale,\n                    childXOffset,\n                    yTop - successor.height * scale,\n                    coordinates\n                );\n                childXOffset += successorWidth;\n            }\n        }\n    };\n\n    const renderColorworkLayersToCanvasCentered = (ctx, patternLayers, shape, x, y, displayWidth, displayHeight, scale, gauge, fullPanelDimensions = null) => {\n        // Use the full panel dimensions instead of just the top-level shape\n        const baseWidthInches = fullPanelDimensions ? (fullPanelDimensions.maxX - fullPanelDimensions.minX) : Math.max(shape.baseA, shape.baseB);\n        const baseHeightInches = fullPanelDimensions ? (fullPanelDimensions.maxY - fullPanelDimensions.minY) : shape.height;\n\n        // Apply scaling factor to get actual panel size in inches\n        const scalingFactor = gauge.scalingFactor || 1;\n        const widthInches = baseWidthInches * scalingFactor;\n        const heightInches = baseHeightInches * scalingFactor;\n\n        // Calculate stitch and row counts based on gauge and scaled dimensions\n        const stitchesPerInch = gauge.stitchesPerFourInches / 4;\n        const rowsPerInch = gauge.rowsPerFourInches / 4;\n\n        const totalStitches = Math.round(widthInches * stitchesPerInch);\n        const totalRows = Math.round(heightInches * rowsPerInch);\n\n        // Calculate pixel size for each stitch/row\n        // We need to fit totalStitches into displayWidth pixels\n        // displayWidth is the actual screen space available\n        const stitchPixelWidth = displayWidth / totalStitches;\n        const rowPixelHeight = displayHeight / totalRows;\n\n        // Create a combined pattern grid for all layers with centered origin\n        // Pattern repeats stay at their original stitch size, but we have more/fewer total stitches\n        // due to the scaled panel dimensions, so pattern appears relatively larger/smaller\n        const combinedGrid = createCombinedGridCentered(totalStitches, totalRows, patternLayers, displayWidth, displayHeight);\n\n        // Render the combined grid to canvas\n        for (let row = 0; row < totalRows; row++) {\n            for (let stitch = 0; stitch < totalStitches; stitch++) {\n                const cellX = x + stitch * stitchPixelWidth;\n                const cellY = y + row * rowPixelHeight;\n                const color = combinedGrid[row] && combinedGrid[row][stitch];\n\n                if (color && color !== 'transparent') {\n                    ctx.fillStyle = color;\n                    ctx.fillRect(cellX, cellY, stitchPixelWidth, rowPixelHeight);\n                }\n            }\n        }\n    };\n\n    const createCombinedGridCentered = (totalStitches, totalRows, patternLayers, displayWidth, displayHeight) => {\n        // Initialize grid with transparent background\n        const grid = Array(totalRows).fill().map(() => Array(totalStitches).fill('transparent'));\n\n        // Process layers from bottom to top using reverse array order\n        // First item in array = top visual layer, so render it last\n        // Last item in array = bottom visual layer, so render it first\n        [...patternLayers].reverse().forEach((layer: any) => {\n            applyPatternLayerCentered(grid, totalStitches, totalRows, layer, displayWidth, displayHeight);\n        });\n\n        return grid;\n    };\n\n    const applyPatternLayerCentered = (grid, totalStitches, totalRows, layer) => {\n        let { pattern, settings } = layer;\n\n        // For stripe patterns with zero-row/zero-column colors, regenerate with actual target dimensions\n        if (layer.patternType === 'stripes' && layer.patternConfig && layer.patternConfig.colors) {\n            const hasZeroRows = layer.patternConfig.colors.some((c: any) => c.rows === 0);\n            if (hasZeroRows) {\n                pattern = generatePattern('stripes', layer.patternConfig, totalRows);\n            }\n        } else if (layer.patternType === 'vstripes' && layer.patternConfig && layer.patternConfig.colors) {\n            const hasZeroColumns = layer.patternConfig.colors.some((c: any) => c.columns === 0);\n            if (hasZeroColumns) {\n                pattern = generatePattern('vstripes', layer.patternConfig, totalStitches);\n            }\n        }\n\n        if (!pattern || !pattern.grid || pattern.grid.length === 0) {\n            return;\n        }\n\n        const patternRows = pattern.getRowCount();\n        const patternStitches = pattern.getStitchCount();\n\n        if (patternRows === 0 || patternStitches === 0) {\n            return;\n        }\n\n        const {\n            repeatMode = 'none',\n            repeatCountX = 0,\n            repeatCountY = 0,\n            offsetHorizontal = 0,\n            offsetVertical = 0\n        } = settings;\n\n        // Determine if we should repeat\n        const repeatHorizontal = repeatMode === 'x' || repeatMode === 'both';\n        const repeatVertical = repeatMode === 'y' || repeatMode === 'both';\n\n        // Calculate center offsets to start pattern from center\n        const centerOffsetX = Math.floor((totalStitches - patternStitches) / 2);\n        const centerOffsetY = Math.floor((totalRows - patternRows) / 2);\n\n        for (let row = 0; row < totalRows; row++) {\n            for (let stitch = 0; stitch < totalStitches; stitch++) {\n                // Apply center offset and user offset\n                const adjustedStitch = stitch - centerOffsetX - offsetHorizontal;\n                const adjustedRow = row - centerOffsetY - offsetVertical;\n\n                // Calculate which repeat we're in\n                let repeatIndexX = 0;\n                let repeatIndexY = 0;\n\n                if (repeatHorizontal && patternStitches > 0) {\n                    repeatIndexX = Math.floor(adjustedStitch / patternStitches);\n                }\n                if (repeatVertical && patternRows > 0) {\n                    repeatIndexY = Math.floor(adjustedRow / patternRows);\n                }\n\n                // Check if we're within the allowed repeat count (0 means infinite)\n                // For horizontal repeats: center the specified number of repeats\n                if (repeatHorizontal && repeatCountX > 0) {\n                    // Calculate the range of valid repeat indices for centering\n                    const halfRepeats = Math.floor(repeatCountX / 2);\n                    const minRepeatX = repeatCountX % 2 === 0 ? -halfRepeats : -halfRepeats;\n                    const maxRepeatX = repeatCountX % 2 === 0 ? halfRepeats - 1 : halfRepeats;\n\n                    if (repeatIndexX < minRepeatX || repeatIndexX > maxRepeatX) {\n                        continue;\n                    }\n                }\n                if (repeatVertical && repeatCountY > 0) {\n                    // Calculate the range of valid repeat indices for centering\n                    const halfRepeats = Math.floor(repeatCountY / 2);\n                    const minRepeatY = repeatCountY % 2 === 0 ? -halfRepeats : -halfRepeats;\n                    const maxRepeatY = repeatCountY % 2 === 0 ? halfRepeats - 1 : halfRepeats;\n\n                    if (repeatIndexY < minRepeatY || repeatIndexY > maxRepeatY) {\n                        continue;\n                    }\n                }\n\n                // Skip if outside pattern bounds and no repeat\n                if (!repeatHorizontal && (adjustedStitch < 0 || adjustedStitch >= patternStitches)) {\n                    continue;\n                }\n                if (!repeatVertical && (adjustedRow < 0 || adjustedRow >= patternRows)) {\n                    continue;\n                }\n\n                // Calculate pattern coordinates with wrapping if repeat is enabled\n                let patternStitch, patternRow;\n\n                if (repeatHorizontal) {\n                    patternStitch = ((adjustedStitch % patternStitches) + patternStitches) % patternStitches;\n                } else {\n                    patternStitch = adjustedStitch;\n                    if (patternStitch < 0 || patternStitch >= patternStitches) continue;\n                }\n\n                if (repeatVertical) {\n                    patternRow = ((adjustedRow % patternRows) + patternRows) % patternRows;\n                } else {\n                    patternRow = adjustedRow;\n                    if (patternRow < 0 || patternRow >= patternRows) continue;\n                }\n\n                // Get color from pattern\n                const colorId = pattern.grid[patternRow][patternStitch];\n                const colorInfo = pattern.colors[colorId];\n\n                if (colorInfo) {\n                    // Use per-layer color mapping if available, otherwise use pattern default\n                    const layerColor = layer.settings.colorMapping?.[colorId] || colorInfo.color;\n                    // Only apply color if it's not transparent (allows layers below to show through)\n                    if (layerColor && layerColor !== 'transparent') {\n                        grid[row][stitch] = layerColor;\n                    }\n                }\n            }\n        }\n    };\n\n    const drawRulers = (ctx, canvasWidth, canvasHeight, shape, zoom, pan, scaleFactor, dimensions, centerX, centerY, actualWidthInches, actualHeightInches) => {\n        const devicePixelRatio = window.devicePixelRatio || 1;\n        const rulerWidth = 30 * devicePixelRatio;\n        const rulerHeight = 30 * devicePixelRatio;\n\n        // Calculate the pixel size per inch after scaling\n        // This should match the actual zoom and scale for accurate ruler measurement\n        const pixelsPerInch = scaleFactor * zoom * devicePixelRatio;\n\n        // Save context\n        ctx.save();\n\n        // Reset transform to draw rulers in screen space\n        ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);\n\n        // Draw ruler backgrounds - extending to full width/height\n        ctx.fillStyle = '#f0f0f0';\n        ctx.fillRect(0, canvasHeight - rulerHeight / devicePixelRatio, canvasWidth, rulerHeight / devicePixelRatio); // Bottom ruler (full width)\n        ctx.fillRect(0, 0, rulerWidth / devicePixelRatio, canvasHeight); // Left ruler (full height)\n\n        // Draw ruler borders\n        ctx.strokeStyle = '#d0d0d0';\n        ctx.lineWidth = 1;\n        ctx.beginPath();\n        // Horizontal line separating bottom ruler from canvas\n        ctx.moveTo(0, canvasHeight - rulerHeight / devicePixelRatio);\n        ctx.lineTo(canvasWidth, canvasHeight - rulerHeight / devicePixelRatio);\n        // Vertical line separating left ruler from canvas\n        ctx.moveTo(rulerWidth / devicePixelRatio, 0);\n        ctx.lineTo(rulerWidth / devicePixelRatio, canvasHeight);\n        ctx.stroke();\n\n        // Show dimensions along the ruler edges instead of in corner\n        ctx.fillStyle = '#666';\n        ctx.font = `${10}px Arial`;\n\n        // Width measurement on top ruler\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n\n        // Draw horizontal ruler (bottom) - only spanning panel width\n        // Starting from 0 at bottom-left corner of panel\n        ctx.fillStyle = '#333';\n        ctx.font = `${10}px Arial`;\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n\n        // Calculate the shape bounds in screen coordinates to determine panel area\n        const shapeScreenWidth = (dimensions.maxX - dimensions.minX) * scaleFactor * zoom;\n        const shapeScreenHeight = (dimensions.maxY - dimensions.minY) * scaleFactor * zoom;\n        const shapeCenterX = centerX;\n        const shapeCenterY = centerY;\n        const shapeLeft = shapeCenterX - shapeScreenWidth / 2;\n        const shapeBottom = shapeCenterY + shapeScreenHeight / 2;\n\n        // Origin should be at bottom-left of the shape (0,0)\n        const originX = shapeLeft;\n        const originY = shapeBottom;\n\n        // Only draw ruler marks within the panel width (0 to actualWidthInches)\n        const maxInchX = Math.ceil(actualWidthInches);\n        const maxInchY = Math.ceil(actualHeightInches);\n\n        // Draw horizontal ruler marks from 0 to panel width\n        for (let inch = 0; inch <= maxInchX; inch++) {\n            const screenX = originX + (inch * pixelsPerInch / devicePixelRatio);\n\n            // More lenient bounds checking for tick marks\n            if (screenX >= rulerWidth / devicePixelRatio && screenX <= canvasWidth) {\n                // Draw tick mark at bottom\n                ctx.strokeStyle = '#666';\n                ctx.lineWidth = 1;\n                ctx.beginPath();\n                ctx.moveTo(screenX, canvasHeight - 8);\n                ctx.lineTo(screenX, canvasHeight);\n                ctx.stroke();\n\n                // Draw label at bottom\n                ctx.fillStyle = '#333';\n                ctx.fillText(inch.toString(), screenX, canvasHeight - 15);\n            }\n\n            // Draw half-inch marks at bottom\n            const halfInchX = screenX + (pixelsPerInch / devicePixelRatio / 2);\n            if (halfInchX >= rulerWidth / devicePixelRatio && halfInchX <= canvasWidth && inch < maxInchX) {\n                ctx.strokeStyle = '#999';\n                ctx.lineWidth = 1;\n                ctx.beginPath();\n                ctx.moveTo(halfInchX, canvasHeight - 4);\n                ctx.lineTo(halfInchX, canvasHeight);\n                ctx.stroke();\n            }\n\n            // Draw quarter-inch marks at bottom\n            if (inch < maxInchX) {\n                const quarterInchX1 = screenX + (pixelsPerInch / devicePixelRatio / 4);\n                const quarterInchX2 = screenX + (3 * pixelsPerInch / devicePixelRatio / 4);\n\n                if (quarterInchX1 >= rulerWidth / devicePixelRatio && quarterInchX1 <= canvasWidth) {\n                    ctx.strokeStyle = '#ccc';\n                    ctx.lineWidth = 1;\n                    ctx.beginPath();\n                    ctx.moveTo(quarterInchX1, canvasHeight - 2);\n                    ctx.lineTo(quarterInchX1, canvasHeight);\n                    ctx.stroke();\n                }\n\n                if (quarterInchX2 >= rulerWidth / devicePixelRatio && quarterInchX2 <= canvasWidth) {\n                    ctx.strokeStyle = '#ccc';\n                    ctx.lineWidth = 1;\n                    ctx.beginPath();\n                    ctx.moveTo(quarterInchX2, canvasHeight - 2);\n                    ctx.lineTo(quarterInchX2, canvasHeight);\n                    ctx.stroke();\n                }\n            }\n        }\n\n        // Show total width dimension after the last tick at bottom\n        const totalWidthX = originX + (actualWidthInches * pixelsPerInch / devicePixelRatio);\n        if (totalWidthX >= rulerWidth / devicePixelRatio && totalWidthX <= canvasWidth) {\n            ctx.fillStyle = '#555';\n            ctx.font = `italic ${10}px Arial`;\n            ctx.fillText(`${actualWidthInches.toFixed(1)}\"`, totalWidthX + 20, canvasHeight - 10);\n        }\n\n        // Draw vertical ruler (left) - only spanning panel height  \n        // With origin at bottom-left (Y increases upward from 0)\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n\n        // Draw vertical ruler marks from 0 to panel height\n        for (let inch = 0; inch <= maxInchY; inch++) {\n            const screenY = originY - (inch * pixelsPerInch / devicePixelRatio);\n\n            // More lenient bounds checking for tick marks\n            if (screenY >= rulerHeight / devicePixelRatio && screenY <= canvasHeight) {\n                // Draw tick mark\n                ctx.strokeStyle = '#666';\n                ctx.lineWidth = 1;\n                ctx.beginPath();\n                ctx.moveTo(rulerWidth / devicePixelRatio - 8, screenY);\n                ctx.lineTo(rulerWidth / devicePixelRatio, screenY);\n                ctx.stroke();\n\n                // Draw label (rotated for vertical text)\n                ctx.save();\n                ctx.translate(15, screenY);\n                ctx.rotate(-Math.PI / 2);\n                ctx.fillStyle = '#333';\n                ctx.fillText(inch.toString(), 0, 0);\n                ctx.restore();\n            }\n\n            // Draw half-inch marks\n            const halfInchY = screenY - (pixelsPerInch / devicePixelRatio / 2);\n            if (halfInchY >= rulerHeight / devicePixelRatio && halfInchY <= canvasHeight && inch < maxInchY) {\n                ctx.strokeStyle = '#999';\n                ctx.lineWidth = 1;\n                ctx.beginPath();\n                ctx.moveTo(rulerWidth / devicePixelRatio - 4, halfInchY);\n                ctx.lineTo(rulerWidth / devicePixelRatio, halfInchY);\n                ctx.stroke();\n            }\n\n            // Draw quarter-inch marks\n            if (inch < maxInchY) {\n                const quarterInchY1 = screenY - (pixelsPerInch / devicePixelRatio / 4);\n                const quarterInchY2 = screenY - (3 * pixelsPerInch / devicePixelRatio / 4);\n\n                if (quarterInchY1 >= rulerHeight / devicePixelRatio && quarterInchY1 <= canvasHeight) {\n                    ctx.strokeStyle = '#ccc';\n                    ctx.lineWidth = 1;\n                    ctx.beginPath();\n                    ctx.moveTo(rulerWidth / devicePixelRatio - 2, quarterInchY1);\n                    ctx.lineTo(rulerWidth / devicePixelRatio, quarterInchY1);\n                    ctx.stroke();\n                }\n\n                if (quarterInchY2 >= rulerHeight / devicePixelRatio && quarterInchY2 <= canvasHeight) {\n                    ctx.strokeStyle = '#ccc';\n                    ctx.lineWidth = 1;\n                    ctx.beginPath();\n                    ctx.moveTo(rulerWidth / devicePixelRatio - 2, quarterInchY2);\n                    ctx.lineTo(rulerWidth / devicePixelRatio, quarterInchY2);\n                    ctx.stroke();\n                }\n            }\n        }\n\n        // Show total height dimension after the last tick\n        const totalHeightY = originY - (actualHeightInches * pixelsPerInch / devicePixelRatio);\n        if (totalHeightY >= rulerHeight / devicePixelRatio && totalHeightY <= canvasHeight) {\n            ctx.save();\n            ctx.translate(10, totalHeightY - 20);\n            ctx.rotate(-Math.PI / 2);\n            ctx.fillStyle = '#555';\n            ctx.font = `italic ${10}px Arial`;\n            ctx.textAlign = 'center';\n            ctx.fillText(`${actualHeightInches.toFixed(1)}\"`, 0, 0);\n            ctx.restore();\n        }\n\n        // Restore context\n        ctx.restore();\n    };\n\n    const renderTrapezoidWithPattern = (ctx, trap, scale, xOffset = 0, yOffset = 0, fillColor, patternLayers = [], gauge = null) => {\n        const trapWidth = Math.max(trap.baseA, trap.baseB) * scale;\n        const xTopLeft = xOffset + (trapWidth - trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n        const xTopRight = xOffset + (trapWidth + trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n        const xBottomLeft = xOffset + (trapWidth - trap.baseA * scale) / 2;\n        const xBottomRight = xOffset + (trapWidth + trap.baseA * scale) / 2;\n        const yTop = yOffset;\n        const yBottom = yOffset + trap.height * scale;\n\n        // Create clipping path for this individual trapezoid\n        ctx.save();\n        ctx.beginPath();\n        ctx.moveTo(xTopLeft, yTop);\n        ctx.lineTo(xTopRight, yTop);\n        ctx.lineTo(xBottomRight, yBottom);\n        ctx.lineTo(xBottomLeft, yBottom);\n        ctx.closePath();\n        ctx.clip();\n\n        // If pattern layers are provided, render them for this trapezoid\n        if (patternLayers && patternLayers.length > 0 && gauge) {\n            // Create a temporary shape object for this trapezoid\n            const trapShape = {\n                baseA: trap.baseA,\n                baseB: trap.baseB,\n                height: trap.height,\n                baseBHorizontalOffset: trap.baseBHorizontalOffset || 0\n            };\n\n            renderColorworkLayersToCanvasCentered(\n                ctx,\n                patternLayers,\n                trapShape,\n                xBottomLeft, yTop, xBottomRight - xBottomLeft, yBottom - yTop,\n                scale,\n                gauge\n            );\n        } else {\n            // Fill with solid color if no pattern\n            ctx.fillStyle = fillColor;\n            ctx.fill();\n        }\n\n        // Draw border\n        ctx.restore();\n        ctx.strokeStyle = '#1890ff';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(xTopLeft, yTop);\n        ctx.lineTo(xTopRight, yTop);\n        ctx.lineTo(xBottomRight, yBottom);\n        ctx.lineTo(xBottomLeft, yBottom);\n        ctx.closePath();\n        ctx.stroke();\n    };\n\n    const renderHierarchyToCanvas = (ctx, trap, scale, xOffset = 0, yOffset = 0, dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 }, fillColor, patternLayers = [], gauge = null) => {\n        // Calculate dimensions first\n        calculateTrapezoidDimensions(trap, scale, xOffset, yOffset, dimensions);\n\n        // Render each trapezoid individually with its own pattern\n        renderTrapezoidWithPattern(ctx, trap, scale, xOffset, yOffset, fillColor, patternLayers, gauge);\n\n        // Render successors recursively\n        if (trap.successors && trap.successors.length > 0) {\n            const trapWidth = Math.max(trap.baseA, trap.baseB) * scale;\n            const successorWidths = trap.successors.map((s: any) => Math.max(s.baseA, s.baseB) * scale);\n            const totalSuccessorWidth = successorWidths.reduce((sum, w) => sum + w, 0);\n            let childXOffset = xOffset + (trapWidth - totalSuccessorWidth) / 2;\n            const yTop = yOffset;\n\n            for (let i = trap.successors.length - 1; i >= 0; i--) {\n                const successor = trap.successors[i];\n                const successorWidth = successorWidths[i];\n\n                renderHierarchyToCanvas(\n                    ctx,\n                    successor,\n                    scale,\n                    childXOffset,\n                    yTop - successor.height * scale,\n                    dimensions,\n                    fillColor,\n                    patternLayers,\n                    gauge\n                );\n\n                childXOffset += successorWidth;\n            }\n        }\n    };\n\n    const calculateTrapezoidDimensions = (trap, scale, xOffset = 0, yOffset = 0, dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 }) => {\n        const trapWidth = Math.max(trap.baseA, trap.baseB) * scale;\n\n        // Compute bounding box of the current trapezoid\n        const xTopLeft = xOffset + (trapWidth - trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n        const xTopRight = xOffset + (trapWidth + trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n        const xBottomLeft = xOffset + (trapWidth - trap.baseA * scale) / 2;\n        const xBottomRight = xOffset + (trapWidth + trap.baseA * scale) / 2;\n        const yTop = yOffset;\n        const yBottom = yOffset + trap.height * scale;\n\n        // Update dimensions\n        dimensions.minX = Math.min(dimensions.minX, xTopLeft, xTopRight, xBottomLeft, xBottomRight);\n        dimensions.maxX = Math.max(dimensions.maxX, xTopLeft, xTopRight, xBottomLeft, xBottomRight);\n        dimensions.minY = Math.min(dimensions.minY, yTop, yBottom);\n        dimensions.maxY = Math.max(dimensions.maxY, yTop, yBottom);\n\n        if (trap.successors && trap.successors.length > 0) {\n            // Compute total width of all successors\n            const successorWidths = trap.successors.map((s: any) => Math.max(s.baseA, s.baseB) * scale);\n            const totalSuccessorWidth = successorWidths.reduce((sum, w) => sum + w, 0);\n\n            // Compute initial offset to center the row\n            let childXOffset = xOffset + (trapWidth - totalSuccessorWidth) / 2;\n\n            // Reverse the order of successors before rendering\n            for (let i = trap.successors.length - 1; i >= 0; i--) {\n                const successor = trap.successors[i];\n                const successorWidth = successorWidths[i];\n\n                // Place each successor ABOVE the parent\n                calculateTrapezoidDimensions(\n                    successor,\n                    scale,\n                    childXOffset,\n                    yTop - successor.height * scale,\n                    dimensions\n                );\n\n                // Move x-offset for the next successor\n                childXOffset += successorWidth;\n            }\n        }\n    };\n\n    // Canvas event handlers\n    const handleMouseDown = (e: any) => {\n        // Only handle left mouse button for panning\n        if (e.button !== 0) return;\n\n        e.preventDefault();\n        setIsDragging(true);\n        setLastMousePos({ x: e.clientX, y: e.clientY });\n    };\n\n    const handleMouseMove = (e: any) => {\n        if (!isDragging) return;\n\n        e.preventDefault();\n        const deltaX = e.clientX - lastMousePos.x;\n        const deltaY = e.clientY - lastMousePos.y;\n\n        setPan(prev => ({\n            x: prev.x + deltaX,\n            y: prev.y + deltaY\n        }));\n\n        setLastMousePos({ x: e.clientX, y: e.clientY });\n    };\n\n    const handleMouseUp = (e: any) => {\n        e.preventDefault();\n        setIsDragging(false);\n    };\n\n    // Prevent context menu on right click\n    const handleContextMenu = (e: any) => {\n        e.preventDefault();\n    };\n\n    const resetView = () => {\n        setZoom(1);\n        setPan({ x: 0, y: 0 });\n    };\n\n    // Keyboard controls for zoom and pan\n    useEffect(() => {\n        const handleKeyDown = (e: any) => {\n            // Only handle when canvas area is focused/active\n            if (!canvasRef.current) return;\n\n            // Zoom controls with + and - keys\n            if (e.key === '=' || e.key === '+') {\n                e.preventDefault();\n                setZoom(prev => Math.min(prev * 1.2, 5));\n            } else if (e.key === '-') {\n                e.preventDefault();\n                setZoom(prev => Math.max(prev / 1.2, 0.1));\n            } else if (e.key === '0' && (e.ctrlKey || e.metaKey)) {\n                e.preventDefault();\n                resetView();\n            }\n\n            // Pan controls with arrow keys\n            const panStep = 20;\n            if (e.key === 'ArrowUp') {\n                e.preventDefault();\n                setPan(prev => ({ ...prev, y: prev.y + panStep }));\n            } else if (e.key === 'ArrowDown') {\n                e.preventDefault();\n                setPan(prev => ({ ...prev, y: prev.y - panStep }));\n            } else if (e.key === 'ArrowLeft') {\n                e.preventDefault();\n                setPan(prev => ({ ...prev, x: prev.x + panStep }));\n            } else if (e.key === 'ArrowRight') {\n                e.preventDefault();\n                setPan(prev => ({ ...prev, x: prev.x - panStep }));\n            }\n        };\n\n        document.addEventListener('keydown', handleKeyDown);\n        return () => document.removeEventListener('keydown', handleKeyDown);\n    }, []);\n\n    // Canvas rendering effect\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        if (!canvas || !shape) return;\n\n        const ctx = canvas.getContext('2d');\n        const devicePixelRatio = window.devicePixelRatio || 1;\n\n        // Ruler constants\n        const rulerOffsetX = 30;\n        const rulerOffsetY = 30;\n\n        // Set canvas size with device pixel ratio for crisp rendering\n        canvas.width = canvasSize.width * devicePixelRatio;\n        canvas.height = canvasSize.height * devicePixelRatio;\n        canvas.style.width = `${canvasSize.width}px`;\n        canvas.style.height = `${canvasSize.height}px`;\n\n        // Scale context for device pixel ratio\n        ctx.scale(devicePixelRatio, devicePixelRatio);\n\n        // Clear canvas\n        ctx.clearRect(0, 0, canvasSize.width, canvasSize.height);\n\n        // Apply zoom and pan transforms\n        ctx.save();\n\n        // Add offset for rulers (move content area to account for ruler space)\n        ctx.translate(\n            (canvasSize.width - rulerOffsetX) / 2 + pan.x + rulerOffsetX,\n            (canvasSize.height - rulerOffsetY) / 2 + pan.y + rulerOffsetY\n        );\n        ctx.scale(zoom, zoom);\n\n        let dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 };\n\n        // First pass: Compute bounding box (dummy render to calculate dimensions)\n        const tempCanvas = document.createElement('canvas');\n        const tempCtx = tempCanvas.getContext('2d');\n        renderHierarchyToCanvas(tempCtx, shape, 1, 0, 0, dimensions, '#1890ff');\n\n        const width = dimensions.maxX - dimensions.minX;\n        const height = dimensions.maxY - dimensions.minY;\n\n        // Calculate scale factor to fit in view (accounting for ruler space)\n        const availableWidth = (canvasSize.width - rulerOffsetX) * 0.8; // Leave some margin\n        const availableHeight = (canvasSize.height - rulerOffsetY) * 0.8;\n        const scaleFactor = Math.min(availableWidth / width, availableHeight / height);\n\n        // Center the shape\n        const translateX = -dimensions.minX * scaleFactor - width * scaleFactor / 2;\n        const translateY = -dimensions.minY * scaleFactor - height * scaleFactor / 2;\n\n        ctx.translate(translateX, translateY);\n\n        // Save the calculated dimensions for the rulers\n        const calculatedDimensions = { ...dimensions };\n\n        // Second pass: Render with the calculated scale using unified shape rendering\n        // This ensures continuous pattern flow across all trapezoids\n        renderUnifiedShapeToCanvas(\n            ctx,\n            shape,\n            scaleFactor,\n            0,\n            0,\n            '#1890ff',\n            patternLayers,\n            gauge\n        );\n\n        ctx.restore();\n\n        // Calculate actual dimensions in inches for the rulers\n        let actualDimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 };\n        calculateTrapezoidDimensions(shape, 1, 0, 0, actualDimensions); // Scale=1 for base dimensions\n        \n        // Apply gauge scaling factor to get true dimensions\n        const gaugeScalingFactor = gauge?.scalingFactor || 1;\n        const actualWidthInches = (actualDimensions.maxX - actualDimensions.minX) * gaugeScalingFactor;\n        const actualHeightInches = (actualDimensions.maxY - actualDimensions.minY) * gaugeScalingFactor;\n\n        // Draw rulers after restoring context (so they're drawn in screen space)\n        const adjustedCenterX = (canvasSize.width - rulerOffsetX) / 2 + pan.x + rulerOffsetX;\n        const adjustedCenterY = (canvasSize.height - rulerOffsetY) / 2 + pan.y + rulerOffsetY;\n        drawRulers(ctx, canvasSize.width, canvasSize.height, shape, zoom, { x: pan.x, y: pan.y }, scaleFactor, calculatedDimensions, adjustedCenterX, adjustedCenterY, actualWidthInches, actualHeightInches);\n\n    }, [shape, patternLayers, gauge, zoom, pan, canvasSize]);\n\n    // Handle canvas resize\n    useEffect(() => {\n        const updateCanvasSize = () => {\n            const container = document.querySelector('.canvas-container');\n            if (container) {\n                setCanvasSize({\n                    width: container.clientWidth - 20,\n                    height: container.clientHeight - 20\n                });\n            }\n        };\n\n        updateCanvasSize();\n        window.addEventListener('resize', updateCanvasSize);\n        return () => window.removeEventListener('resize', updateCanvasSize);\n    }, []);\n\n    // Initialize default background layer\n    useEffect(() => {\n        if (patternLayers.length === 0 && !hasInitialized.current) {\n            hasInitialized.current = true;\n            const defaultBackgroundLayer = {\n                id: Date.now(),\n                name: 'solid color bg',\n                pattern: generatePattern('solid', { colors: [{ color: '#cfcfcf' }] }),\n                patternType: 'solid',\n                patternConfig: { colors: [{ color: '#cfcfcf' }] },\n                priority: 1,\n                settings: {\n                    repeatMode: 'both', // repeat in both x and y\n                    repeatCountX: 0, // 0 means infinite\n                    repeatCountY: 0, // 0 means infinite\n                    offsetHorizontal: 0,\n                    offsetVertical: 0,\n                    colorMapping: {}\n                }\n            };\n            onLayersChange([defaultBackgroundLayer]);\n        }\n    }, [patternLayers.length, onLayersChange]);\n\n    // Pattern layer management\n    const handleLayerSettingChange = useCallback((layerId, setting, value: any) => {\n        onLayersChange(prevLayers =>\n            prevLayers.map((layer: any) => {\n                if (layer.id === layerId) {\n                    return {\n                        ...layer,\n                        settings: { ...layer.settings, [setting]: value }\n                    };\n                }\n                return layer;\n            })\n        );\n    }, [onLayersChange]);\n\n    const handleLayerColorChange = (layerId, colorId, newColor) => {\n        // Convert color to hex string if it's a color object\n        const colorValue = typeof newColor === 'string' ? newColor : newColor.toHexString();\n\n        const updatedLayers = patternLayers.map((layer: any) => {\n            if (layer.id === layerId) {\n                const newColorMapping = {\n                    ...layer.settings.colorMapping,\n                    [colorId]: colorValue\n                };\n                return {\n                    ...layer,\n                    settings: {\n                        ...layer.settings,\n                        colorMapping: newColorMapping\n                    }\n                };\n            }\n            return layer;\n        });\n        onLayersChange(updatedLayers);\n    };\n\n    const handleLayerReorder = useCallback((draggedLayerId, targetLayerId) => {\n        onLayersChange(prevLayers => {\n            const draggedIndex = prevLayers.findIndex((layer: any) => layer.id === draggedLayerId);\n            const targetIndex = prevLayers.findIndex((layer: any) => layer.id === targetLayerId);\n\n            if (draggedIndex === -1 || targetIndex === -1) return prevLayers;\n\n            const newLayers = [...prevLayers];\n            const [draggedLayer] = newLayers.splice(draggedIndex, 1);\n            newLayers.splice(targetIndex, 0, draggedLayer);\n\n            return newLayers;\n        });\n    }, [onLayersChange]);\n\n    // Simple handler for collapse changes\n    const handleCollapseChange = useCallback((layerId) => {\n        setCollapsedLayers(prev => {\n            const newCollapsed = new Set(prev);\n            if (newCollapsed.has(layerId)) {\n                newCollapsed.delete(layerId);\n            } else {\n                newCollapsed.add(layerId);\n            }\n            return newCollapsed;\n        });\n    }, []);\n\n    const addPatternLayer = useCallback(() => {\n        const defaultType = 'checkerboard';\n        const newLayer = {\n            id: Date.now(),\n            name: `Layer ${patternLayers.length + 1}`,\n            pattern: generatePattern(availablePatterns[defaultType].type, availablePatterns[defaultType].defaultConfig),\n            patternType: availablePatterns[defaultType].type,\n            patternConfig: availablePatterns[defaultType].defaultConfig,\n            priority: patternLayers.length + 1,\n            settings: {\n                repeatMode: 'none', // 'none', 'x', 'y', 'both'\n                repeatCountX: 0, // 0 means infinite\n                repeatCountY: 0, // 0 means infinite\n                offsetHorizontal: 0,\n                offsetVertical: 0,\n                colorMapping: {} // Per-layer color overrides\n            }\n        };\n        // Add new layer to the top of the stack\n        onLayersChange(prevLayers => [newLayer, ...prevLayers]);\n    }, [patternLayers.length, onLayersChange]);\n\n    // Memoized style objects to prevent re-renders\n    const textStyle12 = useMemo(() => ({ fontSize: '12px' }), []);\n    const textStyle11 = useMemo(() => ({ minWidth: 30, fontSize: '11px' }), []);\n    const fullWidthStyle = useMemo(() => ({ width: '100%' }), []);\n    const spaceStyle = useMemo(() => ({ width: '100%' }), []);\n\n    // Memoized style objects for draggable items\n    const dragItemBaseStyle = useMemo(() => ({\n        marginBottom: 8,\n        transition: 'all 0.2s ease'\n    }), []);\n\n    const dragItemHoverStyle = useMemo(() => ({\n        ...dragItemBaseStyle,\n        border: '2px dashed #1890ff',\n        borderRadius: '4px'\n    }), [dragItemBaseStyle]);\n\n    const dragItemNormalStyle = useMemo(() => ({\n        ...dragItemBaseStyle,\n        border: 'none',\n        borderRadius: '0'\n    }), [dragItemBaseStyle]);\n\n    // Memoized pattern key finder to prevent recalculation\n    const getPatternKeyForLayer = useCallback((layer) => {\n        // Return the stored pattern key if it exists, otherwise fall back to patternType\n        return layer.patternKey || layer.patternType || 'checkerboard';\n    }, []);\n\n    const removePatternLayer = useCallback((layerId) => {\n        onLayersChange(prevLayers => prevLayers.filter((layer: any) => layer.id !== layerId));\n    }, [onLayersChange]);\n\n    const copyPatternLayer = useCallback((layerId) => {\n        onLayersChange(prevLayers => {\n            const layerToCopy = prevLayers.find((layer: any) => layer.id === layerId);\n            if (!layerToCopy) return prevLayers;\n\n            const copiedLayer = {\n                ...layerToCopy,\n                id: Date.now(), // New unique ID\n                name: `${layerToCopy.name} Copy`,\n                priority: prevLayers.length + 1\n            };\n\n            // Add copied layer to the top of the stack (beginning of array)\n            return [copiedLayer, ...prevLayers];\n        });\n    }, [onLayersChange]);\n\n    const handlePatternChangeForLayer = useCallback((layerId, patternKey) => {\n        const patternType = availablePatterns[patternKey].type;\n        const config = {\n            ...availablePatterns[patternKey].defaultConfig,\n            patterns: availablePatterns // Pass availablePatterns for stack types\n        };\n        const pattern = generatePattern(patternType, config);\n        onLayersChange(prevLayers =>\n            prevLayers.map((layer: any) => {\n                if (layer.id === layerId) {\n                    return {\n                        ...layer,\n                        pattern,\n                        patternType,\n                        patternKey, // Store the full pattern key (e.g., \"custom-123\")\n                        patternConfig: config,\n                        settings: {\n                            ...layer.settings,\n                            colorMapping: {} // Reset color mapping when changing patterns\n                        }\n                    };\n                }\n                return layer;\n            })\n        );\n    }, [onLayersChange, availablePatterns]);\n\n    const handlePatternConfigChange = useCallback((layerId, newConfig) => {\n        onLayersChange(prevLayers =>\n            prevLayers.map((layer: any) => {\n                if (layer.id === layerId) {\n                    // Pass availablePatterns for stack types\n                    const configWithPatterns = {\n                        ...newConfig,\n                        patterns: availablePatterns\n                    };\n                    const newPattern = generatePattern(layer.patternType, configWithPatterns);\n                    return {\n                        ...layer,\n                        patternConfig: newConfig,\n                        pattern: newPattern\n                    };\n                }\n                return layer;\n            })\n        );\n    }, [onLayersChange, availablePatterns]);\n\n    return (\n        <div className=\"colorwork-canvas-editor\">\n            {/* Zoom controls integrated at top */}\n            <div className=\"canvas-header\" style={{\n                display: 'flex',\n                alignItems: 'center',\n                padding: '8px 16px',\n                borderBottom: '1px solid #f0f0f0',\n                background: '#fafafa'\n            }}>\n                <Space>\n                    <Text>Zoom: {Math.round(zoom * 100)}%</Text>\n                    <Button\n                        icon={<ZoomInOutlined />}\n                        onClick={() => setZoom(prev => Math.min(prev * 1.2, 5))}\n                        size=\"small\"\n                        title=\"Zoom in (+)\"\n                    >\n                    </Button>\n                    <Slider\n                        min={0.1}\n                        max={5}\n                        step={0.1}\n                        value={zoom}\n                        onChange={setZoom}\n                        style={{ width: 100 }}\n                        tooltip={{ formatter: (value: any) => `${Math.round(value * 100)}%` }}\n                    />\n                    <Button\n                        icon={<ZoomOutOutlined />}\n                        onClick={() => setZoom(prev => Math.max(prev / 1.2, 0.1))}\n                        size=\"small\"\n                        title=\"Zoom out (-)\"\n                    >\n                    </Button>\n                    <Button\n                        icon={<ExpandOutlined />}\n                        onClick={resetView}\n                        size=\"small\"\n                        title=\"Reset view (Ctrl+0)\"\n                    >\n                        Reset\n                    </Button>\n                    <Text style={{ fontSize: '11px', color: '#666', marginLeft: 8 }}>\n                        Drag to pan â€¢ +/- to zoom â€¢ Arrows to move\n                    </Text>\n                </Space>\n            </div>\n\n            <div className=\"canvas-main-layout\">\n                {/* Main canvas area */}\n                <div className=\"canvas-container\">\n                    <canvas\n                        ref={canvasRef}\n                        className=\"main-canvas\"\n                        onMouseDown={handleMouseDown}\n                        onMouseMove={handleMouseMove}\n                        onMouseUp={handleMouseUp}\n                        onMouseLeave={handleMouseUp}\n                        onContextMenu={handleContextMenu}\n                        style={{\n                            cursor: isDragging ? 'grabbing' : 'grab',\n                            userSelect: 'none',\n                            touchAction: 'none'\n                        }}\n                    />\n                </div>\n\n                {/* Side panel with controls */}\n                <div className=\"side-panel\">\n                    <Card title=\"Colorwork Layers\" size=\"small\">\n                        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"small\">\n                            <Button\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={addPatternLayer}\n                                style={{ width: '100%' }}\n                                size=\"small\"\n                            >\n                                + New Layer\n                            </Button>\n\n                            <div className=\"layers-list\">\n                                {patternLayers.map((layer, index: number) => (\n                                    <DraggableLayerItem\n                                        key={layer.id}\n                                        layer={layer}\n                                        index={index}\n                                        onLayerReorder={handleLayerReorder}\n                                        dragItemHoverStyle={dragItemHoverStyle}\n                                        dragItemNormalStyle={dragItemNormalStyle}\n                                    >\n                                        <Collapse\n                                            size=\"small\"\n                                            ghost\n                                            activeKey={collapsedLayers.has(layer.id) ? [] : [layer.id]}\n                                            onChange={() => handleCollapseChange(layer.id)}\n                                            items={[\n                                                {\n                                                    key: layer.id,\n                                                    label: (\n                                                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%' }}>\n                                                            <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                                                                <DragOutlined className=\"drag-handle\" style={{ cursor: 'grab' }} />\n                                                                {layer.name}\n                                                            </span>\n                                                            <div style={{ display: 'flex', gap: 4 }}>\n                                                                <Button\n                                                                    size=\"small\"\n                                                                    type=\"text\"\n                                                                    icon={<CopyOutlined />}\n                                                                    onClick={(e: any) => {\n                                                                        e.stopPropagation();\n                                                                        copyPatternLayer(layer.id);\n                                                                    }}\n                                                                    title=\"Make a copy\"\n                                                                />\n                                                                <Button\n                                                                    size=\"small\"\n                                                                    danger\n                                                                    type=\"text\"\n                                                                    icon={<DeleteOutlined />}\n                                                                    onClick={(e: any) => {\n                                                                        e.stopPropagation();\n                                                                        removePatternLayer(layer.id);\n                                                                    }}\n                                                                    disabled={patternLayers.length === 1}\n                                                                    title=\"Delete layer\"\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                    ),\n                                                    children: (\n                                                        <Space direction=\"vertical\" style={spaceStyle} size=\"small\">\n                                                            <div>\n                                                                <Text style={textStyle12}>Pattern:</Text>\n                                                                <Select\n                                                                    value={getPatternKeyForLayer(layer)}\n                                                                    onChange={(patternKey) => handlePatternChangeForLayer(layer.id, patternKey)}\n                                                                    style={fullWidthStyle}\n                                                                    size=\"small\"\n                                                                >\n                                                                    {Object.entries(availablePatterns).map(([key, pattern]) => (\n                                                                        <Option key={key} value={key}>{pattern.name}</Option>\n                                                                    ))}\n                                                                </Select>\n                                                            </div>\n\n                                                            {layer.patternType === 'stripes' && (\n                                                                <div>\n                                                                    <Text style={textStyle12}>Pattern Width (stitches):</Text>\n                                                                    <InputNumber\n                                                                        value={layer.patternConfig?.width || 4}\n                                                                        onChange={(value: any) => {\n                                                                            const newConfig = { ...layer.patternConfig, width: value || 4 };\n                                                                            handlePatternConfigChange(layer.id, newConfig);\n                                                                        }}\n                                                                        min={1}\n                                                                        max={20}\n                                                                        size=\"small\"\n                                                                        style={fullWidthStyle}\n                                                                    />\n                                                                </div>\n                                                            )}\n\n                                                            {layer.patternType === 'vstripes' && (\n                                                                <div>\n                                                                    <Text style={textStyle12}>Pattern Height (rows):</Text>\n                                                                    <InputNumber\n                                                                        value={layer.patternConfig?.height || 4}\n                                                                        onChange={(value: any) => {\n                                                                            const newConfig = { ...layer.patternConfig, height: value || 4 };\n                                                                            handlePatternConfigChange(layer.id, newConfig);\n                                                                        }}\n                                                                        min={1}\n                                                                        max={20}\n                                                                        size=\"small\"\n                                                                        style={fullWidthStyle}\n                                                                    />\n                                                                </div>\n                                                            )}\n\n                                                            {layer.patternType === 'checkerboard' && (\n                                                                <div>\n                                                                    <Text style={textStyle12}>Cell Size (n x n):</Text>\n                                                                    <InputNumber\n                                                                        value={layer.patternConfig?.cellSize || 2}\n                                                                        onChange={(value: any) => {\n                                                                            const newConfig = { ...layer.patternConfig, cellSize: value || 2 };\n                                                                            handlePatternConfigChange(layer.id, newConfig);\n                                                                        }}\n                                                                        min={1}\n                                                                        max={10}\n                                                                        size=\"small\"\n                                                                        style={fullWidthStyle}\n                                                                        formatter={(value: any) => `${value} x ${value}`}\n                                                                        parser={(value: any) => value.replace(' x ' + value.split(' x ')[1], '')}\n                                                                    />\n                                                                </div>\n                                                            )}\n\n                                                            {/* Removed Pattern Colors UI to avoid duplication with Color Assignment */}\n\n                                                            {layer.patternType === 'stripes' && (\n                                                                <div>\n                                                                    <Text style={textStyle12}>Stripe Configuration:</Text>\n                                                                    <Text style={{ fontSize: '11px', color: '#666', display: 'block', marginTop: 2 }}>\n                                                                        Enter 0 rows to fill remaining space with that color\n                                                                    </Text>\n                                                                    {(() => {\n                                                                        const zeroRowIndices = layer.patternConfig.colors\n                                                                            .map((c, i: number) => c.rows === 0 ? i : -1)\n                                                                            .filter((i: any) => i !== -1);\n                                                                        const invalidZeroRows = zeroRowIndices.filter((i: any) =>\n                                                                            i !== 0 && i !== layer.patternConfig.colors.length - 1\n                                                                        );\n\n                                                                        if (invalidZeroRows.length > 0) {\n                                                                            return (\n                                                                                <Text style={{ fontSize: '11px', color: '#ff6b35', display: 'block', marginTop: 2 }}>\n                                                                                    Warning: Only first or last colors should have 0 rows\n                                                                                </Text>\n                                                                            );\n                                                                        }\n\n                                                                        return null;\n                                                                    })()}\n                                                                    <Space direction=\"vertical\" size=\"small\" style={{ marginTop: 8 }}>\n                                                                        {layer.patternConfig.colors.map((colorConfig, index: number) => (\n                                                                            <div key={index} style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                                                                                <InputNumber\n                                                                                    value={colorConfig.rows}\n                                                                                    onChange={(value: any) => {\n                                                                                        const newColors = [...layer.patternConfig.colors];\n                                                                                        newColors[index].rows = value || 0;\n                                                                                        handlePatternConfigChange(layer.id, { ...layer.patternConfig, colors: newColors });\n                                                                                    }}\n                                                                                    min={0}\n                                                                                    size=\"small\"\n                                                                                    style={{ width: 60 }}\n                                                                                    placeholder=\"0\"\n                                                                                />\n                                                                                <Text>{colorConfig.rows === 0 ? 'rows (fill)' : 'rows'}</Text>\n                                                                                {layer.patternConfig.colors.length > 1 && (\n                                                                                    <Button size=\"small\" danger onClick={() => {\n                                                                                        const newColors = layer.patternConfig.colors.filter((_, i: number) => i !== index);\n                                                                                        handlePatternConfigChange(layer.id, { ...layer.patternConfig, colors: newColors });\n                                                                                    }}>Remove</Button>\n                                                                                )}\n                                                                            </div>\n                                                                        ))}\n                                                                        <Button size=\"small\" onClick={() => {\n                                                                            const newColors = [...layer.patternConfig.colors, { color: '#ff0000', rows: 2 }];\n                                                                            handlePatternConfigChange(layer.id, { ...layer.patternConfig, colors: newColors });\n                                                                        }}>Add Color</Button>\n                                                                    </Space>\n                                                                </div>\n                                                            )}\n\n                                                            {layer.patternType === 'vstripes' && (\n                                                                <div>\n                                                                    <Text style={textStyle12}>Vertical Stripe Configuration:</Text>\n                                                                    <Text style={{ fontSize: '11px', color: '#666', display: 'block', marginTop: 2 }}>\n                                                                        Enter 0 columns to fill remaining space with that color\n                                                                    </Text>\n                                                                    {(() => {\n                                                                        const zeroColumnIndices = layer.patternConfig.colors\n                                                                            .map((c, i: number) => c.columns === 0 ? i : -1)\n                                                                            .filter((i: any) => i !== -1);\n                                                                        const invalidZeroColumns = zeroColumnIndices.filter((i: any) =>\n                                                                            i !== 0 && i !== layer.patternConfig.colors.length - 1\n                                                                        );\n\n                                                                        if (invalidZeroColumns.length > 0) {\n                                                                            return (\n                                                                                <Text style={{ fontSize: '11px', color: '#ff6b35', display: 'block', marginTop: 2 }}>\n                                                                                    Warning: Only first or last colors should have 0 columns\n                                                                                </Text>\n                                                                            );\n                                                                        }\n\n                                                                        return null;\n                                                                    })()}\n                                                                    <Space direction=\"vertical\" size=\"small\" style={{ marginTop: 8 }}>\n                                                                        {layer.patternConfig.colors.map((colorConfig, index: number) => (\n                                                                            <div key={index} style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                                                                                <InputNumber\n                                                                                    value={colorConfig.columns}\n                                                                                    onChange={(value: any) => {\n                                                                                        const newColors = [...layer.patternConfig.colors];\n                                                                                        newColors[index].columns = value || 0;\n                                                                                        handlePatternConfigChange(layer.id, { ...layer.patternConfig, colors: newColors });\n                                                                                    }}\n                                                                                    min={0}\n                                                                                    size=\"small\"\n                                                                                    style={{ width: 60 }}\n                                                                                    placeholder=\"0\"\n                                                                                />\n                                                                                <Text>{colorConfig.columns === 0 ? 'cols (fill)' : 'cols'}</Text>\n                                                                                {layer.patternConfig.colors.length > 1 && (\n                                                                                    <Button size=\"small\" danger onClick={() => {\n                                                                                        const newColors = layer.patternConfig.colors.filter((_, i: number) => i !== index);\n                                                                                        handlePatternConfigChange(layer.id, { ...layer.patternConfig, colors: newColors });\n                                                                                    }}>Remove</Button>\n                                                                                )}\n                                                                            </div>\n                                                                        ))}\n                                                                        <Button size=\"small\" onClick={() => {\n                                                                            const newColors = [...layer.patternConfig.colors, { color: '#ff0000', columns: 2 }];\n                                                                            handlePatternConfigChange(layer.id, { ...layer.patternConfig, colors: newColors });\n                                                                        }}>Add Color</Button>\n                                                                    </Space>\n                                                                </div>\n                                                            )}\n\n                                                            {(layer.patternType === 'row' || layer.patternType === 'vstack') && (\n                                                                <div>\n                                                                    <Text style={textStyle12}>\n                                                                        {layer.patternType === 'row' ? 'Row:' : 'Vertical Stack:'}\n                                                                    </Text>\n                                                                    <Text style={{ fontSize: '11px', color: '#666', display: 'block', marginTop: 2, marginBottom: 8 }}>\n                                                                        {layer.patternType === 'row' \n                                                                            ? 'Stack elements left to right. Use stripes for bands or custom shapes (with repeat count).'\n                                                                            : 'Stack elements top to bottom. Use stripes for bands, custom shapes (with repeat count), or rows for horizontal composition.'}\n                                                                    </Text>\n\n                                                                    <Space direction=\"vertical\" size=\"small\" style={{ width: '100%' }}>\n                                                                        {(layer.patternConfig.elements || []).map((element: any, index: number) => (\n                                                                            <div key={index} style={{ border: '1px solid #d9d9d9', padding: 8, borderRadius: 4 }}>\n                                                                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 4 }}>\n                                                                                    <Text style={{ fontSize: '11px', fontWeight: 'bold' }}>\n                                                                                        {element.elementType === 'stripes' \n                                                                                            ? `Stripes ${index + 1}` \n                                                                                            : element.elementType === 'shape' && element.shapeKey\n                                                                                            ? availablePatterns[element.shapeKey]?.name || 'Shape'\n                                                                                            : element.elementType === 'sequence'\n                                                                                            ? `Sequence ${index + 1}`\n                                                                                            : `Element ${index + 1}`\n                                                                                        }\n                                                                                    </Text>\n                                                                                    <Space size=\"small\">\n                                                                                        <Button \n                                                                                            size=\"small\" \n                                                                                            disabled={index === 0}\n                                                                                            onClick={() => {\n                                                                                                const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                [newElements[index - 1], newElements[index]] = [newElements[index], newElements[index - 1]];\n                                                                                                handlePatternConfigChange(layer.id, { \n                                                                                                    ...layer.patternConfig, \n                                                                                                    elements: newElements \n                                                                                                });\n                                                                                            }}\n                                                                                        >\n                                                                                            â†‘\n                                                                                        </Button>\n                                                                                        <Button \n                                                                                            size=\"small\" \n                                                                                            disabled={index === (layer.patternConfig.elements || []).length - 1}\n                                                                                            onClick={() => {\n                                                                                                const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                [newElements[index], newElements[index + 1]] = [newElements[index + 1], newElements[index]];\n                                                                                                handlePatternConfigChange(layer.id, { \n                                                                                                    ...layer.patternConfig, \n                                                                                                    elements: newElements \n                                                                                                });\n                                                                                            }}\n                                                                                        >\n                                                                                            â†“\n                                                                                        </Button>\n                                                                                        <Button \n                                                                                            size=\"small\" \n                                                                                            danger \n                                                                                            onClick={() => {\n                                                                                                const newElements = (layer.patternConfig.elements || []).filter((_: any, i: number) => i !== index);\n                                                                                                handlePatternConfigChange(layer.id, { \n                                                                                                    ...layer.patternConfig, \n                                                                                                    elements: newElements \n                                                                                                });\n                                                                                            }}\n                                                                                        >\n                                                                                            Remove\n                                                                                        </Button>\n                                                                                    </Space>\n                                                                                </div>\n                                                                                \n                                                                                <Select\n                                                                                    value={element.elementType || 'stripes'}\n                                                                                    onChange={(value: any) => {\n                                                                                        const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                        if (value === 'stripes') {\n                                                                                            newElements[index] = {\n                                                                                                elementType: 'stripes',\n                                                                                                stripeConfig: layer.patternType === 'row' \n                                                                                                    ? { colors: [{ color: '#ffffff', columns: 2 }] }\n                                                                                                    : { colors: [{ color: '#ffffff', rows: 2 }] }\n                                                                                            };\n                                                                                        } else if (value === 'sequence') {\n                                                                                            newElements[index] = {\n                                                                                                elementType: 'sequence',\n                                                                                                shapes: [],\n                                                                                                repeatCount: 1,\n                                                                                                alignment: 'center'\n                                                                                            };\n                                                                                        } else if (value.startsWith('custom-')) {\n                                                                                            // Direct custom pattern selection\n                                                                                            newElements[index] = {\n                                                                                                elementType: 'shape',\n                                                                                                shapeKey: value,\n                                                                                                repeatCount: 1\n                                                                                            };\n                                                                                        }\n                                                                                        handlePatternConfigChange(layer.id, { \n                                                                                            ...layer.patternConfig, \n                                                                                            elements: newElements \n                                                                                        });\n                                                                                    }}\n                                                                                    size=\"small\"\n                                                                                    style={{ width: '100%', marginBottom: 8 }}\n                                                                                >\n                                                                                    <Option value=\"stripes\">Stripes</Option>\n                                                                                    {Object.entries(availablePatterns)\n                                                                                        .filter(([key]) => key.startsWith('custom-'))\n                                                                                        .map(([key, pattern]: [string, any]) => (\n                                                                                            <Option key={key} value={key}>{pattern.name}</Option>\n                                                                                        ))\n                                                                                    }\n                                                                                </Select>\n\n                                                                                {element.elementType === 'stripes' && element.stripeConfig && (\n                                                                                    <div style={{ marginTop: 8, paddingLeft: 8, borderLeft: '2px solid #e8e8e8' }}>\n                                                                                        <Text style={{ fontSize: '10px', display: 'block', marginBottom: 4 }}>Stripe width (sts):</Text>\n                                                                                        {element.stripeConfig.colors.map((stripe: any, sIndex: number) => (\n                                                                                            <div key={sIndex} style={{ display: 'flex', gap: 4, alignItems: 'center', marginBottom: 4 }}>\n                                                                                                <InputNumber\n                                                                                                    value={layer.patternType === 'row' ? stripe.columns : stripe.rows}\n                                                                                                    onChange={(value: any) => {\n                                                                                                        const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                        const newColors = [...element.stripeConfig.colors];\n                                                                                                        if (layer.patternType === 'row') {\n                                                                                                            newColors[sIndex] = { ...newColors[sIndex], columns: value || 1 };\n                                                                                                        } else {\n                                                                                                            newColors[sIndex] = { ...newColors[sIndex], rows: value || 1 };\n                                                                                                        }\n                                                                                                        newElements[index] = { ...element, stripeConfig: { colors: newColors } };\n                                                                                                        handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                    }}\n                                                                                                    min={1}\n                                                                                                    size=\"small\"\n                                                                                                    style={{ width: 50 }}\n                                                                                                />\n                                                                                            </div>\n                                                                                        ))}\n                                                                                    </div>\n                                                                                )}\n\n                                                                                {element.elementType === 'shape' && element.shapeKey && (\n                                                                                    <div style={{ marginTop: 8, paddingLeft: 8, borderLeft: '2px solid #e8e8e8' }}>\n                                                                                        <div style={{ display: 'flex', gap: 4, alignItems: 'center' }}>\n                                                                                            <Text style={{ fontSize: '10px' }}>Repeat:</Text>\n                                                                                            <InputNumber\n                                                                                                value={element.repeatCount || 1}\n                                                                                                onChange={(value: any) => {\n                                                                                                    const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                    newElements[index] = { ...element, repeatCount: value || 1 };\n                                                                                                    handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                }}\n                                                                                                min={1}\n                                                                                                size=\"small\"\n                                                                                                style={{ width: 60 }}\n                                                                                            />\n                                                                                        </div>\n                                                                                    </div>\n                                                                                )}\n\n                                                                                {(element.elementType === 'vstack' || element.elementType === 'row') && (\n                                                                                    <div style={{ marginTop: 8, paddingLeft: 8, borderLeft: '2px solid #e8e8e8' }}>\n                                                                                        <Text style={{ fontSize: '10px', display: 'block', marginBottom: 4 }}>\n                                                                                            {element.elementType === 'vstack' ? 'Vertical' : 'Row'} Stack:\n                                                                                        </Text>\n                                                                                        <div style={{ display: 'flex', gap: 4, alignItems: 'center', marginBottom: 6 }}>\n                                                                                            <Text style={{ fontSize: '10px' }}>Repeat:</Text>\n                                                                                            <InputNumber\n                                                                                                value={element.repeatCount || 1}\n                                                                                                onChange={(value: any) => {\n                                                                                                    const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                    newElements[index] = { ...element, repeatCount: value || 1 };\n                                                                                                    handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                }}\n                                                                                                min={1}\n                                                                                                size=\"small\"\n                                                                                                style={{ width: 60 }}\n                                                                                            />\n                                                                                        </div>\n                                                                                        \n                                                                                        {/* Stripes sub-elements */}\n                                                                                        {(element.elements || []).filter((el: any) => el.elementType === 'stripes').map((subElement: any, subIndex: number) => {\n                                                                                            const actualIndex = (element.elements || []).findIndex((el: any, idx: number) => \n                                                                                                el === subElement && idx >= subIndex\n                                                                                            );\n                                                                                            return (\n                                                                                                <div key={`stripe-${subIndex}`} style={{ marginBottom: 6 }}>\n                                                                                                    <div style={{ display: 'flex', gap: 4, alignItems: 'center', marginBottom: 4 }}>\n                                                                                                        <Text style={{ fontSize: '10px', color: '#666' }}>Stripes</Text>\n                                                                                                        <Button\n                                                                                                            size=\"small\"\n                                                                                                            danger\n                                                                                                            onClick={() => {\n                                                                                                                const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                                const newSubElements = (element.elements || []).filter((_: any, i: number) => i !== actualIndex);\n                                                                                                                newElements[index] = { ...element, elements: newSubElements };\n                                                                                                                handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                            }}\n                                                                                                        >\n                                                                                                            Ã—\n                                                                                                        </Button>\n                                                                                                    </div>\n                                                                                                    {subElement.stripeConfig && subElement.stripeConfig.colors.map((stripe: any, sIdx: number) => (\n                                                                                                        <div key={sIdx} style={{ display: 'flex', gap: 4, alignItems: 'center', marginBottom: 4, marginLeft: 8 }}>\n                                                                                                            <ColorPicker\n                                                                                                                value={stripe.color}\n                                                                                                                onChange={(value: any) => {\n                                                                                                                    const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                                    const newSubElements = [...(element.elements || [])];\n                                                                                                                    const newStripeConfig = { ...subElement.stripeConfig };\n                                                                                                                    newStripeConfig.colors = [...newStripeConfig.colors];\n                                                                                                                    newStripeConfig.colors[sIdx] = { ...stripe, color: value.toHexString() };\n                                                                                                                    newSubElements[actualIndex] = { ...subElement, stripeConfig: newStripeConfig };\n                                                                                                                    newElements[index] = { ...element, elements: newSubElements };\n                                                                                                                    handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                                }}\n                                                                                                                size=\"small\"\n                                                                                                            />\n                                                                                                            <InputNumber\n                                                                                                                value={element.elementType === 'vstack' ? stripe.rows : stripe.columns}\n                                                                                                                onChange={(value: any) => {\n                                                                                                                    const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                                    const newSubElements = [...(element.elements || [])];\n                                                                                                                    const newStripeConfig = { ...subElement.stripeConfig };\n                                                                                                                    newStripeConfig.colors = [...newStripeConfig.colors];\n                                                                                                                    if (element.elementType === 'vstack') {\n                                                                                                                        newStripeConfig.colors[sIdx] = { ...stripe, rows: value || 1 };\n                                                                                                                    } else {\n                                                                                                                        newStripeConfig.colors[sIdx] = { ...stripe, columns: value || 1 };\n                                                                                                                    }\n                                                                                                                    newSubElements[actualIndex] = { ...subElement, stripeConfig: newStripeConfig };\n                                                                                                                    newElements[index] = { ...element, elements: newSubElements };\n                                                                                                                    handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                                }}\n                                                                                                                min={1}\n                                                                                                                size=\"small\"\n                                                                                                                style={{ width: 50 }}\n                                                                                                            />\n                                                                                                            <Button\n                                                                                                                size=\"small\"\n                                                                                                                danger\n                                                                                                                onClick={() => {\n                                                                                                                    const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                                    const newSubElements = [...(element.elements || [])];\n                                                                                                                    const newStripeConfig = { ...subElement.stripeConfig };\n                                                                                                                    newStripeConfig.colors = newStripeConfig.colors.filter((_: any, i: number) => i !== sIdx);\n                                                                                                                    newSubElements[actualIndex] = { ...subElement, stripeConfig: newStripeConfig };\n                                                                                                                    newElements[index] = { ...element, elements: newSubElements };\n                                                                                                                    handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                                }}\n                                                                                                            >\n                                                                                                                Ã—\n                                                                                                            </Button>\n                                                                                                        </div>\n                                                                                                    ))}\n                                                                                                    <Button\n                                                                                                        size=\"small\"\n                                                                                                        onClick={() => {\n                                                                                                            const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                            const newSubElements = [...(element.elements || [])];\n                                                                                                            const newStripeConfig = { ...subElement.stripeConfig };\n                                                                                                            newStripeConfig.colors = [\n                                                                                                                ...newStripeConfig.colors,\n                                                                                                                element.elementType === 'vstack'\n                                                                                                                    ? { color: '#ffffff', rows: 2 }\n                                                                                                                    : { color: '#ffffff', columns: 2 }\n                                                                                                            ];\n                                                                                                            newSubElements[actualIndex] = { ...subElement, stripeConfig: newStripeConfig };\n                                                                                                            newElements[index] = { ...element, elements: newSubElements };\n                                                                                                            handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                        }}\n                                                                                                        style={{ marginLeft: 8 }}\n                                                                                                    >\n                                                                                                        + Stripe\n                                                                                                    </Button>\n                                                                                                </div>\n                                                                                            );\n                                                                                        })}\n                                                                                        \n                                                                                        {/* Shape sub-elements */}\n                                                                                        {(element.elements || []).filter((el: any) => el.elementType === 'shape').map((subElement: any, subIndex: number) => {\n                                                                                            const actualIndex = (element.elements || []).findIndex((el: any, idx: number) => \n                                                                                                el === subElement && idx >= subIndex\n                                                                                            );\n                                                                                            return (\n                                                                                                <div key={`shape-${subIndex}`} style={{ marginBottom: 6 }}>\n                                                                                                    <div style={{ display: 'flex', gap: 4, alignItems: 'center', marginBottom: 4 }}>\n                                                                                                        <Select\n                                                                                                            value={subElement.shapeKey || ''}\n                                                                                                            onChange={(value: any) => {\n                                                                                                                const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                                const newSubElements = [...(element.elements || [])];\n                                                                                                                newSubElements[actualIndex] = { ...subElement, shapeKey: value };\n                                                                                                                newElements[index] = { ...element, elements: newSubElements };\n                                                                                                                handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                            }}\n                                                                                                            size=\"small\"\n                                                                                                            style={{ flex: 1 }}\n                                                                                                        >\n                                                                                                            {Object.keys(availablePatterns).map(key => (\n                                                                                                                <Option key={key} value={key}>{availablePatterns[key].name}</Option>\n                                                                                                            ))}\n                                                                                                        </Select>\n                                                                                                        <Text style={{ fontSize: '9px' }}>x</Text>\n                                                                                                        <InputNumber\n                                                                                                            value={subElement.repeatCount || 1}\n                                                                                                            onChange={(value: any) => {\n                                                                                                                const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                                const newSubElements = [...(element.elements || [])];\n                                                                                                                newSubElements[actualIndex] = { ...subElement, repeatCount: value || 1 };\n                                                                                                                newElements[index] = { ...element, elements: newSubElements };\n                                                                                                                handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                            }}\n                                                                                                            min={1}\n                                                                                                            size=\"small\"\n                                                                                                            style={{ width: 50 }}\n                                                                                                        />\n                                                                                                        <Button\n                                                                                                            size=\"small\"\n                                                                                                            danger\n                                                                                                            onClick={() => {\n                                                                                                                const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                                const newSubElements = (element.elements || []).filter((_: any, i: number) => i !== actualIndex);\n                                                                                                                newElements[index] = { ...element, elements: newSubElements };\n                                                                                                                handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                            }}\n                                                                                                        >\n                                                                                                            Ã—\n                                                                                                        </Button>\n                                                                                                    </div>\n                                                                                                </div>\n                                                                                            );\n                                                                                        })}\n                                                                                        \n                                                                                        <div style={{ display: 'flex', gap: 4 }}>\n                                                                                            <Button\n                                                                                                size=\"small\"\n                                                                                                onClick={() => {\n                                                                                                    const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                    const newSubElements = [\n                                                                                                        ...(element.elements || []),\n                                                                                                        {\n                                                                                                            elementType: 'stripes',\n                                                                                                            stripeConfig: element.elementType === 'vstack'\n                                                                                                                ? { colors: [{ color: '#ffffff', rows: 2 }] }\n                                                                                                                : { colors: [{ color: '#ffffff', columns: 2 }] }\n                                                                                                        }\n                                                                                                    ];\n                                                                                                    newElements[index] = { ...element, elements: newSubElements };\n                                                                                                    handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                }}\n                                                                                            >\n                                                                                                + Stripes\n                                                                                            </Button>\n                                                                                            <Button\n                                                                                                size=\"small\"\n                                                                                                onClick={() => {\n                                                                                                    const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                    const newSubElements = [\n                                                                                                        ...(element.elements || []),\n                                                                                                        {\n                                                                                                            elementType: 'shape',\n                                                                                                            shapeKey: Object.keys(availablePatterns)[0] || '',\n                                                                                                            repeatCount: 1\n                                                                                                        }\n                                                                                                    ];\n                                                                                                    newElements[index] = { ...element, elements: newSubElements };\n                                                                                                    handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                }}\n                                                                                            >\n                                                                                                + Shape\n                                                                                            </Button>\n                                                                                        </div>\n                                                                                    </div>\n                                                                                )}\n\n                                                                                {element.elementType === 'sequence' && (\n                                                                                    <div style={{ marginTop: 8, paddingLeft: 8, borderLeft: '2px solid #e8e8e8' }}>\n                                                                                        <Text style={{ fontSize: '10px', display: 'block', marginBottom: 4 }}>Shapes in sequence:</Text>\n                                                                                        <Text style={{ fontSize: '9px', color: '#999', display: 'block', marginBottom: 4 }}>\n                                                                                            (Add shapes to create a sequence)\n                                                                                        </Text>\n                                                                                        <div style={{ display: 'flex', gap: 4, alignItems: 'center', marginTop: 4 }}>\n                                                                                            <Text style={{ fontSize: '10px' }}>Repeat Sequence:</Text>\n                                                                                            <InputNumber\n                                                                                                value={element.repeatCount || 1}\n                                                                                                onChange={(value: any) => {\n                                                                                                    const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                    newElements[index] = { ...element, repeatCount: value || 1 };\n                                                                                                    handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                                }}\n                                                                                                min={0}\n                                                                                                size=\"small\"\n                                                                                                style={{ width: 60 }}\n                                                                                            />\n                                                                                        </div>\n                                                                                        <Select\n                                                                                            value={element.alignment || 'center'}\n                                                                                            onChange={(value: any) => {\n                                                                                                const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                newElements[index] = { ...element, alignment: value };\n                                                                                                handlePatternConfigChange(layer.id, { ...layer.patternConfig, elements: newElements });\n                                                                                            }}\n                                                                                            size=\"small\"\n                                                                                            style={{ width: '100%', marginTop: 4 }}\n                                                                                        >\n                                                                                            <Option value=\"start\">{layer.patternType === 'row' ? 'Left' : 'Top'}</Option>\n                                                                                            <Option value=\"center\">Center</Option>\n                                                                                            <Option value=\"end\">{layer.patternType === 'row' ? 'Right' : 'Bottom'}</Option>\n                                                                                        </Select>\n                                                                                    </div>\n                                                                                )}\n\n                                                                                {/* Element-specific color assignment */}\n                                                                                {(() => {\n                                                                                    // Generate a preview pattern to extract color information\n                                                                                    let elementColors = [];\n                                                                                    \n                                                                                    if (element.elementType === 'stripes' && element.stripeConfig) {\n                                                                                        elementColors = element.stripeConfig.colors.map((stripe: any, sIndex: number) => ({\n                                                                                            id: `stripe-${sIndex}`,\n                                                                                            label: element.stripeConfig.colors.length > 1 ? `Color ${sIndex + 1}` : 'Color',\n                                                                                            defaultColor: stripe.color\n                                                                                        }));\n                                                                                    } else if (element.elementType === 'shape' && element.shapeKey && availablePatterns[element.shapeKey]) {\n                                                                                        const patternInfo = availablePatterns[element.shapeKey];\n                                                                                        const customPattern = generatePattern(element.shapeKey, patternInfo.defaultConfig || {});\n                                                                                        \n                                                                                        // Only show colors that are actually used in the pattern grid\n                                                                                        const usedColors = customPattern.getColorsUsed?.() || [];\n                                                                                        const usedColorIds = new Set(usedColors.map((c: any) => c.id));\n                                                                                        \n                                                                                        elementColors = Object.entries(customPattern.colors)\n                                                                                            .filter(([colorId]) => usedColorIds.has(colorId) && colorId !== 'transparent')\n                                                                                            .map(([colorId, colorInfo]: [string, any]) => ({\n                                                                                                id: colorId,\n                                                                                                label: colorInfo.label,\n                                                                                                defaultColor: colorInfo.color\n                                                                                            }));\n                                                                                    }\n                                                                                    \n                                                                                    if (elementColors.length > 0) {\n                                                                                        return (\n                                                                                            <div style={{ marginTop: 12, paddingTop: 8, borderTop: '1px solid #e8e8e8' }}>\n                                                                                                <Text style={{ fontSize: '10px', fontWeight: 'bold', display: 'block', marginBottom: 6 }}>Colors:</Text>\n                                                                                                {elementColors.map((colorInfo: any) => (\n                                                                                                    <div key={colorInfo.id} style={{ \n                                                                                                        marginBottom: 4, \n                                                                                                        display: 'grid', \n                                                                                                        gridTemplateColumns: '1fr auto',\n                                                                                                        alignItems: 'center', \n                                                                                                        gap: 8 \n                                                                                                    }}>\n                                                                                                        <Text style={{ fontSize: '10px' }}>{colorInfo.label}</Text>\n                                                                                                        <ColorPicker\n                                                                                                            value={element.colorMapping?.[colorInfo.id] || colorInfo.defaultColor}\n                                                                                                            onChange={(newColor) => {\n                                                                                                                const newElements = [...(layer.patternConfig.elements || [])];\n                                                                                                                newElements[index] = { \n                                                                                                                    ...element, \n                                                                                                                    colorMapping: {\n                                                                                                                        ...(element.colorMapping || {}),\n                                                                                                                        [colorInfo.id]: newColor.toHexString()\n                                                                                                                    }\n                                                                                                                };\n                                                                                                                handlePatternConfigChange(layer.id, { \n                                                                                                                    ...layer.patternConfig, \n                                                                                                                    elements: newElements \n                                                                                                                });\n                                                                                                            }}\n                                                                                                            showText={false}\n                                                                                                            size=\"small\"\n                                                                                                        />\n                                                                                                    </div>\n                                                                                                ))}\n                                                                                            </div>\n                                                                                        );\n                                                                                    }\n                                                                                    return null;\n                                                                                })()}\n                                                                            </div>\n                                                                        ))}\n                                                                        <Button \n                                                                            size=\"small\" \n                                                                            onClick={() => {\n                                                                                const newElements = [\n                                                                                    ...(layer.patternConfig.elements || []), \n                                                                                    { \n                                                                                        elementType: 'stripes',\n                                                                                        stripeConfig: layer.patternType === 'row'\n                                                                                            ? { colors: [{ color: '#ffffff', columns: 2 }] }\n                                                                                            : { colors: [{ color: '#ffffff', rows: 2 }] }\n                                                                                    }\n                                                                                ];\n                                                                                handlePatternConfigChange(layer.id, { \n                                                                                    ...layer.patternConfig, \n                                                                                    elements: newElements \n                                                                                });\n                                                                            }}\n                                                                        >\n                                                                            Add Element\n                                                                        </Button>\n                                                                    </Space>\n                                                                </div>\n                                                            )}\n\n                                                            <div>\n                                                                <Text style={textStyle12}>Repeat:</Text>\n                                                                <Select\n                                                                    value={layer.settings.repeatMode || 'none'}\n                                                                    onChange={(value: any) => handleLayerSettingChange(layer.id, 'repeatMode', value)}\n                                                                    style={fullWidthStyle}\n                                                                    size=\"small\"\n                                                                >\n                                                                    <Option value=\"none\">Non-repeating</Option>\n                                                                    <Option value=\"x\">Repeat Horizontal</Option>\n                                                                    <Option value=\"y\">Repeat Vertical</Option>\n                                                                    <Option value=\"both\">Repeat Both Directions</Option>\n                                                                </Select>\n                                                            </div>\n\n                                                            {(layer.settings.repeatMode === 'x' || layer.settings.repeatMode === 'both') && (\n                                                                <div>\n                                                                    <Text style={textStyle12}>Horizontal Repeats (0=infinity):</Text>\n                                                                    <InputNumber\n                                                                        value={layer.settings.repeatCountX || 0}\n                                                                        onChange={(value: any) => handleLayerSettingChange(layer.id, 'repeatCountX', value || 0)}\n                                                                        min={0}\n                                                                        max={50}\n                                                                        size=\"small\"\n                                                                        style={fullWidthStyle}\n                                                                        formatter={(value: any) => value === 0 ? 'infinity' : value}\n                                                                        parser={(value: any) => value === 'infinity' ? 0 : parseInt(value) || 0}\n                                                                    />\n                                                                </div>\n                                                            )}\n\n                                                            {(layer.settings.repeatMode === 'y' || layer.settings.repeatMode === 'both') && (\n                                                                <div>\n                                                                    <Text style={textStyle12}>Vertical Repeats (0=infinity):</Text>\n                                                                    <InputNumber\n                                                                        value={layer.settings.repeatCountY || 0}\n                                                                        onChange={(value: any) => handleLayerSettingChange(layer.id, 'repeatCountY', value || 0)}\n                                                                        min={0}\n                                                                        max={50}\n                                                                        size=\"small\"\n                                                                        style={fullWidthStyle}\n                                                                        formatter={(value: any) => value === 0 ? 'infinity' : value}\n                                                                        parser={(value: any) => value === 'infinity' ? 0 : parseInt(value) || 0}\n                                                                    />\n                                                                </div>\n                                                            )}\n\n                                                            <Row gutter={4}>\n                                                                <Col span={12}>\n                                                                    <Text style={textStyle12}>Horizontal Offset:</Text>\n                                                                    <InputNumber\n                                                                        value={layer.settings.offsetHorizontal}\n                                                                        onChange={(value: any) => handleLayerSettingChange(layer.id, 'offsetHorizontal', value || 0)}\n                                                                        size=\"small\"\n                                                                        style={fullWidthStyle}\n                                                                    />\n                                                                </Col>\n                                                                <Col span={12}>\n                                                                    <Text style={textStyle12}>Vertical Offset:</Text>\n                                                                    <InputNumber\n                                                                        value={layer.settings.offsetVertical}\n                                                                        onChange={(value: any) => handleLayerSettingChange(layer.id, 'offsetVertical', value || 0)}\n                                                                        size=\"small\"\n                                                                        style={fullWidthStyle}\n                                                                    />\n                                                                </Col>\n                                                            </Row>\n\n                                                            <div>\n                                                                <Text style={textStyle12}>Color Assignment:</Text>\n                                                                <div style={{ marginTop: 4 }}>\n                                                                    {layer.pattern && layer.pattern.colors && (() => {\n                                                                        // Only show colors that are actually used in the pattern\n                                                                        const usedColors = layer.pattern.getColorsUsed?.() || [];\n                                                                        const usedColorIds = new Set(usedColors.map((c: any) => c.id));\n                                                                        \n                                                                        const filteredEntries = Object.entries(layer.pattern.colors)\n                                                                            .filter(([colorId]) => {\n                                                                                // If getColorsUsed returned results, filter by them\n                                                                                // Otherwise show all non-transparent colors\n                                                                                if (usedColors.length > 0) {\n                                                                                    return usedColorIds.has(colorId) && colorId !== 'transparent';\n                                                                                }\n                                                                                return colorId !== 'transparent';\n                                                                            });\n                                                                        \n                                                                        return filteredEntries.map(([colorId, colorInfo]) => (\n                                                                            <div key={colorId} style={{ \n                                                                                marginBottom: 4, \n                                                                                display: 'grid', \n                                                                                gridTemplateColumns: '1fr auto',\n                                                                                alignItems: 'center', \n                                                                                gap: 8 \n                                                                            }}>\n                                                                                <Text style={textStyle11}>{colorInfo.label}</Text>\n                                                                                <ColorPicker\n                                                                                    value={layer.settings.colorMapping?.[colorId] || colorInfo.color}\n                                                                                    onChange={(newColor) => handleLayerColorChange(layer.id, colorId, newColor)}\n                                                                                    showText={false}\n                                                                                    size=\"small\"\n                                                                                />\n                                                                            </div>\n                                                                        ));\n                                                                    })()}\n                                                                </div>\n                                                            </div>\n                                                        </Space>\n                                                    )\n                                                }\n                                            ]}\n                                        />\n                                    </DraggableLayerItem>\n                                ))}\n                            </div>\n                        </Space>\n                    </Card>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Helper pattern creation functions\nfunction createSolidPattern(colors = [{ color: '#ffffff' }]) {\n    const colorMap = {};\n    colors.forEach((colorConfig, index: number) => {\n        colorMap[index] = { id: index, label: `Color ${index + 1}`, color: colorConfig.color };\n    });\n\n    return new ColorworkPattern(\n        0,\n        0,\n        [\n            [0, 0, 0, 0],\n            [0, 0, 0, 0],\n            [0, 0, 0, 0],\n            [0, 0, 0, 0]\n        ],\n        colorMap,\n        { width: 4, height: 4 }\n    );\n}\n\nfunction createCheckerboardPattern(cellSize = 2, colors = [{ color: '#ffffff' }, { color: '#000000' }]) {\n    const patternSize = cellSize * 2; // Each full checkerboard cycle is 2x the cell size\n    const grid = [];\n\n    for (let row = 0; row < patternSize; row++) {\n        const gridRow = [];\n        for (let col = 0; col < patternSize; col++) {\n            // Determine which cell we're in\n            const cellRow = Math.floor(row / cellSize);\n            const cellCol = Math.floor(col / cellSize);\n            // Checkerboard pattern: alternating cells\n            const colorId = (cellRow + cellCol) % 2;\n            gridRow.push(colorId);\n        }\n        grid.push(gridRow);\n    }\n\n    const colorMap = {};\n    colors.forEach((colorConfig, index: number) => {\n        colorMap[index] = { id: index, label: `Color ${index + 1}`, color: colorConfig.color };\n    });\n\n    return new ColorworkPattern(\n        0,\n        0,\n        grid,\n        colorMap,\n        { width: patternSize, height: patternSize }\n    );\n}\n\nfunction createArgylePattern(colors = [{ color: '#ffffff' }, { color: '#ff0000' }, { color: '#0000ff' }]) {\n    const colorMap = {};\n    colors.forEach((colorConfig, index: number) => {\n        colorMap[index] = { id: index, label: `Color ${index + 1}`, color: colorConfig.color };\n    });\n\n    return new ColorworkPattern(\n        0,\n        0,\n        [\n            [0, 0, 1, 1, 1, 1, 0, 0],\n            [0, 1, 1, 2, 2, 1, 1, 0],\n            [1, 1, 2, 2, 2, 2, 1, 1],\n            [1, 2, 2, 0, 0, 2, 2, 1],\n            [1, 2, 2, 0, 0, 2, 2, 1],\n            [1, 1, 2, 2, 2, 2, 1, 1],\n            [0, 1, 1, 2, 2, 1, 1, 0],\n            [0, 0, 1, 1, 1, 1, 0, 0]\n        ],\n        colorMap,\n        { width: 8, height: 8 }\n    );\n}\n\nfunction generatePattern(type, config, targetDimension = null) {\n    console.log('ðŸŽ¯ generatePattern called:', { type, hasConfig: !!config, configKeys: config ? Object.keys(config) : [] });\n    \n    if (type === 'stripes') {\n        const { colors } = config;\n\n        // Calculate pattern height - if targetDimension is provided and we have 0-row colors,\n        // use targetDimension, otherwise use sum of explicit row counts\n        let patternHeight;\n        const zeroRowColors = colors.filter((c: any) => c.rows === 0);\n        const definedRowsTotal = colors.reduce((sum, c) => sum + (c.rows || 0), 0);\n\n        if (zeroRowColors.length > 0 && targetDimension) {\n            patternHeight = targetDimension;\n        } else if (zeroRowColors.length > 0 && !targetDimension) {\n            // Default height when we have zero-row colors but no target\n            patternHeight = Math.max(definedRowsTotal * 2, 20);\n        } else {\n            patternHeight = Math.max(definedRowsTotal, 1);\n        }\n\n        const width = config.width || 4;\n        const grid = [];\n        let currentRow = 0;\n        let colorIndex = 0;\n\n        // If first and last colors have 0 rows, split remaining space between them\n        if (colors.length >= 2 && colors[0].rows === 0 && colors[colors.length - 1].rows === 0) {\n            const remainingRows = patternHeight - definedRowsTotal;\n            const rowsPerEndColor = Math.floor(remainingRows / 2);\n            const extraRow = remainingRows % 2;\n\n            colors.forEach((colorConfig, index: number) => {\n                if (index === 0) {\n                    // First color gets half of remaining rows (plus extra if odd)\n                    const rowsToAdd = rowsPerEndColor + extraRow;\n                    for (let i = 0; i < rowsToAdd; i++) {\n                        grid.push(new Array(width).fill(index));\n                    }\n                } else if (index === colors.length - 1) {\n                    // Last color gets half of remaining rows\n                    const rowsToAdd = rowsPerEndColor;\n                    for (let i = 0; i < rowsToAdd; i++) {\n                        grid.push(new Array(width).fill(index));\n                    }\n                } else {\n                    // Middle colors use their defined row count\n                    for (let i = 0; i < colorConfig.rows; i++) {\n                        grid.push(new Array(width).fill(index));\n                    }\n                }\n            });\n        } else if (colors.every((c: any) => c.rows === 0)) {\n            // If all colors have 0 rows, split area evenly\n            const rowsPerColor = Math.floor(patternHeight / colors.length);\n            let extra = patternHeight - rowsPerColor * colors.length;\n            colors.forEach((colorConfig, index: number) => {\n                let thisRows = rowsPerColor + (index < extra ? 1 : 0);\n                for (let i = 0; i < thisRows; i++) {\n                    grid.push(new Array(width).fill(index));\n                }\n            });\n        } else {\n            // Calculate remaining rows for zero-row colors\n            const remainingRowsAfterDefined = Math.max(0, patternHeight - definedRowsTotal);\n            colors.forEach((colorConfig, index: number) => {\n                if (colorConfig.rows === 0) {\n                    // For zero-row colors, behavior depends on position\n                    if (index === 0) {\n                        // First color with 0 rows: fill from beginning until other colors start\n                        const rowsToAdd = remainingRowsAfterDefined;\n                        for (let i = 0; i < rowsToAdd && currentRow < patternHeight; i++) {\n                            grid.push(new Array(width).fill(colorIndex));\n                            currentRow++;\n                        }\n                    } else if (index === colors.length - 1) {\n                        // Last color with 0 rows: fill remaining rows at the end\n                        const rowsToAdd = patternHeight - currentRow;\n                        for (let i = 0; i < rowsToAdd; i++) {\n                            grid.push(new Array(width).fill(colorIndex));\n                            currentRow++;\n                        }\n                    } else {\n                        // Middle color with 0 rows: split remaining evenly (fallback behavior)\n                        const rowsToAdd = zeroRowColors.length > 1 ?\n                            Math.floor(remainingRowsAfterDefined / zeroRowColors.length) :\n                            remainingRowsAfterDefined;\n                        for (let i = 0; i < rowsToAdd && currentRow < patternHeight; i++) {\n                            grid.push(new Array(width).fill(colorIndex));\n                            currentRow++;\n                        }\n                    }\n                } else {\n                    // Add specified number of rows\n                    for (let i = 0; i < colorConfig.rows && currentRow < patternHeight; i++) {\n                        grid.push(new Array(width).fill(colorIndex));\n                        currentRow++;\n                    }\n                }\n                colorIndex++;\n            });\n        }\n\n        // If we didn't fill all rows, repeat the pattern\n        while (grid.length < patternHeight) {\n            const remainingRows = patternHeight - grid.length;\n            const patternToRepeat = grid.slice(0, Math.min(grid.length, remainingRows));\n            grid.push(...patternToRepeat);\n        }\n\n        const colorMap = {};\n        colors.forEach((colorConfig, index: number) => {\n            colorMap[index] = { id: index, label: `Color ${index + 1}`, color: colorConfig.color };\n        });\n        return new ColorworkPattern(0, 0, grid, colorMap, { width, height: patternHeight });\n    } else if (type === 'vstripes') {\n        const { colors } = config;\n\n        // Calculate pattern width - if targetDimension is provided and we have 0-column colors,\n        // use targetDimension, otherwise use sum of explicit column counts\n        let patternWidth;\n        const zeroColumnColors = colors.filter((c: any) => c.columns === 0);\n        const definedColumnsTotal = colors.reduce((sum, c) => sum + (c.columns || 0), 0);\n\n        if (zeroColumnColors.length > 0 && targetDimension) {\n            patternWidth = targetDimension;\n        } else if (zeroColumnColors.length > 0 && !targetDimension) {\n            // Default width when we have zero-column colors but no target\n            patternWidth = Math.max(definedColumnsTotal * 2, 20);\n        } else {\n            patternWidth = Math.max(definedColumnsTotal, 1);\n        }\n\n        const height = config.height || 4;\n        const grid = Array(height).fill().map(() => []);\n        let currentColumn = 0;\n        let colorIndex = 0;\n\n        // Calculate remaining columns for zero-column colors\n        const remainingColumnsAfterDefined = Math.max(0, patternWidth - definedColumnsTotal);\n\n        // If first and last colors have 0 columns, split remaining space between them\n        if (colors.length >= 2 && colors[0].columns === 0 && colors[colors.length - 1].columns === 0) {\n            const remainingColumns = patternWidth - definedColumnsTotal;\n            const colsPerEndColor = Math.floor(remainingColumns / 2);\n            const extraCol = remainingColumns % 2;\n\n            colors.forEach((colorConfig, index: number) => {\n                if (index === 0) {\n                    // First color gets half of remaining columns (plus extra if odd)\n                    const colsToAdd = colsPerEndColor + extraCol;\n                    for (let i = 0; i < colsToAdd; i++) {\n                        for (let row = 0; row < height; row++) {\n                            grid[row].push(index);\n                        }\n                    }\n                } else if (index === colors.length - 1) {\n                    // Last color gets half of remaining columns\n                    const colsToAdd = colsPerEndColor;\n                    for (let i = 0; i < colsToAdd; i++) {\n                        for (let row = 0; row < height; row++) {\n                            grid[row].push(index);\n                        }\n                    }\n                } else {\n                    // Middle colors use their defined column count\n                    for (let i = 0; i < colorConfig.columns; i++) {\n                        for (let row = 0; row < height; row++) {\n                            grid[row].push(index);\n                        }\n                    }\n                }\n            });\n        } else if (colors.every((c: any) => c.columns === 0)) {\n            // If all colors have 0 columns, split area evenly\n            const colsPerColor = Math.floor(patternWidth / colors.length);\n            let extra = patternWidth - colsPerColor * colors.length;\n            colors.forEach((colorConfig, index: number) => {\n                let thisCols = colsPerColor + (index < extra ? 1 : 0);\n                for (let i = 0; i < thisCols; i++) {\n                    for (let row = 0; row < height; row++) {\n                        grid[row].push(index);\n                    }\n                }\n            });\n        } else {\n            colors.forEach((colorConfig, index: number) => {\n                if (colorConfig.columns === 0) {\n                    // For zero-column colors, behavior depends on position\n                    if (index === 0) {\n                        // First color with 0 columns: fill from beginning until other colors start\n                        const columnsToAdd = remainingColumnsAfterDefined;\n                        for (let i = 0; i < columnsToAdd && currentColumn < patternWidth; i++) {\n                            for (let row = 0; row < height; row++) {\n                                grid[row].push(colorIndex);\n                            }\n                            currentColumn++;\n                        }\n                    } else if (index === colors.length - 1) {\n                        // Last color with 0 columns: fill remaining columns at the end\n                        const columnsToAdd = patternWidth - currentColumn;\n                        for (let i = 0; i < columnsToAdd; i++) {\n                            for (let row = 0; row < height; row++) {\n                                grid[row].push(colorIndex);\n                            }\n                            currentColumn++;\n                        }\n                    } else {\n                        // Middle color with 0 columns: split remaining evenly (fallback behavior)\n                        const columnsToAdd = zeroColumnColors.length > 1 ?\n                            Math.floor(remainingColumnsAfterDefined / zeroColumnColors.length) :\n                            remainingColumnsAfterDefined;\n                        for (let i = 0; i < columnsToAdd && currentColumn < patternWidth; i++) {\n                            for (let row = 0; row < height; row++) {\n                                grid[row].push(colorIndex);\n                            }\n                            currentColumn++;\n                        }\n                    }\n                } else {\n                    // Add specified number of columns\n                    for (let i = 0; i < colorConfig.columns && currentColumn < patternWidth; i++) {\n                        for (let row = 0; row < height; row++) {\n                            grid[row].push(colorIndex);\n                        }\n                        currentColumn++;\n                    }\n                }\n                colorIndex++;\n            });\n        }\n\n        // If we didn't fill all columns, repeat the pattern\n        while (grid[0].length < patternWidth) {\n            const remainingColumns = patternWidth - grid[0].length;\n            for (let row = 0; row < height; row++) {\n                const patternToRepeat = grid[row].slice(0, Math.min(grid[row].length, remainingColumns));\n                grid[row].push(...patternToRepeat);\n            }\n        }\n\n        const colorMap = {};\n        colors.forEach((colorConfig, index: number) => {\n            colorMap[index] = { id: index, label: `Color ${index + 1}`, color: colorConfig.color };\n        });\n        return new ColorworkPattern(0, 0, grid, colorMap, { width: patternWidth, height });\n    } else if (type === 'custom' || (typeof type === 'string' && type.startsWith('custom-'))) {\n        // Custom pattern from library - use the saved pattern data directly\n        if (config.pattern && Array.isArray(config.pattern)) {\n            // Convert colors from library format to ColorworkPattern format\n            const colorMap = {};\n            const libraryColors = config.colors || {};\n            \n            // Check if colors are already in the right format (with id, label, color)\n            // or if they're in the simple format (just hex colors)\n            Object.entries(libraryColors).forEach(([colorId, colorValue]: [string, any]) => {\n                // Special handling for \"CCX\" - treat as transparent\n                if (colorId === 'CCX') {\n                    colorMap[colorId] = { \n                        id: colorId, \n                        label: 'Transparent', \n                        color: 'transparent' \n                    };\n                } else if (typeof colorValue === 'string') {\n                    // Simple format: { \"MC\": \"#ffffff\" }\n                    colorMap[colorId] = { \n                        id: colorId, \n                        label: colorId, \n                        color: colorValue \n                    };\n                } else if (colorValue && typeof colorValue === 'object' && colorValue.color) {\n                    // Already in the right format: { \"MC\": { id: \"MC\", label: \"Main\", color: \"#fff\" } }\n                    colorMap[colorId] = colorValue;\n                } else {\n                    // Fallback\n                    colorMap[colorId] = { \n                        id: colorId, \n                        label: colorId, \n                        color: '#ffffff' \n                    };\n                }\n            });\n            \n            return new ColorworkPattern(0, 0, config.pattern, colorMap, {});\n        }\n        // Fallback to solid if pattern data is missing\n        return createSolidPattern([{ color: '#ffffff' }]);\n    } else if (type === 'solid') {\n        return createSolidPattern(config.colors || [{ color: '#ffffff' }]);\n    } else if (type === 'checkerboard') {\n        return createCheckerboardPattern(config.cellSize || 2, config.colors || [{ color: '#ffffff' }, { color: '#000000' }]);\n    } else if (type === 'argyle') {\n        return createArgylePattern(config.colors || [{ color: '#ffffff' }, { color: '#ff0000' }, { color: '#0000ff' }]);\n    } else if (type === 'row') {\n        return createRowPattern(config.elements || [], config.patterns || {});\n    } else if (type === 'vstack') {\n        return createVStackPattern(config.elements || [], config.patterns || {});\n    }\n    \n    // Fallback for unknown pattern types\n    return createSolidPattern([{ color: '#ffffff' }]);\n}\n\nfunction createRowPattern(elements = [], availablePatternsRef = {}) {\n    console.log('ðŸŽ¨ createRowPattern called:', elements);\n    \n    if (!elements || elements.length === 0) {\n        return createSolidPattern([{ color: '#ffffff' }]);\n    }\n\n    // Build unified color map with element-specific labels\n    const colorMap = {};\n    let colorIndex = 0;\n    const elementData = [];\n\n    elements.forEach((element, elemIndex) => {\n        if (element.elementType === 'stripes' && element.stripeConfig) {\n            // Generate stripe pattern\n            const stripeColors = element.stripeConfig.colors || [];\n            const stripeColorMapping = {};\n            \n            stripeColors.forEach((stripe, sIndex) => {\n                const colorId = `c${colorIndex}`;\n                const label = stripeColors.length > 1 \n                    ? `Stripes-${elemIndex + 1} C${sIndex + 1}`\n                    : `Stripes-${elemIndex + 1}`;\n                    \n                colorMap[colorId] = {\n                    id: colorId,\n                    label: label,\n                    color: stripe.color || '#ffffff'\n                };\n                stripeColorMapping[sIndex] = colorId;\n                colorIndex++;\n            });\n\n            elementData.push({\n                type: 'stripes',\n                width: stripeColors.reduce((sum: number, s: any) => sum + (s.columns || 1), 0),\n                colorMapping: stripeColorMapping,\n                stripeConfig: element.stripeConfig\n            });\n        } else if (element.elementType === 'shape' && element.shapeKey && availablePatternsRef[element.shapeKey]) {\n            // Get the custom pattern\n            const patternInfo = availablePatternsRef[element.shapeKey];\n            const patternName = patternInfo.name || 'Shape';\n            const customPattern = generatePattern(element.shapeKey, patternInfo.defaultConfig || {});\n            const repeatCount = element.repeatCount || 1;\n            \n            // Map custom pattern colors to unified color map\n            const shapeColorMapping = {};\n            Object.entries(customPattern.colors).forEach(([origColorId, colorInfo]: [string, any]) => {\n                const colorId = `c${colorIndex}`;\n                colorMap[colorId] = {\n                    id: colorId,\n                    label: `${patternName} ${colorInfo.label}`,\n                    color: colorInfo.color\n                };\n                shapeColorMapping[origColorId] = colorId;\n                colorIndex++;\n            });\n            \n            elementData.push({\n                type: 'shape',\n                pattern: customPattern,\n                repeatCount: repeatCount,\n                colorMapping: shapeColorMapping,\n                width: customPattern.getStitchCount() * repeatCount\n            });\n        }\n    });\n\n    // For horizontal stacking, each pattern should repeat independently to fill the total width\n    // Calculate the total width needed to accommodate all elements repeating\n    const height = Math.max(...elementData.map(elem => {\n        if (elem.type === 'shape' && elem.pattern) {\n            return elem.pattern.getRowCount();\n        }\n        return 10; // Default height for stripes\n    })) || 10;\n    \n    // For width, sum up the base widths (no repetition in the width calculation)\n    const totalWidth = elementData.reduce((sum, elem) => sum + (elem.width || 4), 0);\n    \n    const grid = [];\n    for (let row = 0; row < height; row++) {\n        const rowData = [];\n        \n        elementData.forEach((elem) => {\n            if (elem.type === 'stripes') {\n                // Stripes don't repeat - just add their columns once\n                elem.stripeConfig.colors.forEach((stripe: any, sIdx: number) => {\n                    const colorId = elem.colorMapping[sIdx];\n                    const columns = stripe.columns || 1;\n                    for (let c = 0; c < columns; c++) {\n                        rowData.push(colorId);\n                    }\n                });\n            } else if (elem.type === 'shape' && elem.pattern) {\n                // Repeat the shape to fill its allocated width\n                const patternHeight = elem.pattern.getRowCount();\n                const patternWidth = elem.pattern.getStitchCount();\n                const totalRepeatWidth = patternWidth * elem.repeatCount;\n                \n                for (let col = 0; col < totalRepeatWidth; col++) {\n                    const patternRow = row % patternHeight;\n                    const patternCol = col % patternWidth;\n                    const origColorId = elem.pattern.grid[patternRow][patternCol];\n                    const unifiedColorId = elem.colorMapping[origColorId];\n                    rowData.push(unifiedColorId);\n                }\n            }\n        });\n        \n        grid.push(rowData);\n    }\n\n    return new ColorworkPattern(0, 0, grid, colorMap, { width: totalWidth, height });\n}\n\nfunction createVStackPattern(elements = [], availablePatternsRef = {}) {\n    console.log('ðŸŽ¨ createVStackPattern called:', elements);\n    \n    if (!elements || elements.length === 0) {\n        return createSolidPattern([{ color: '#ffffff' }]);\n    }\n\n    // Build unified color map with element-specific labels\n    const colorMap = {};\n    let colorIndex = 0;\n    const elementData = [];\n\n    elements.forEach((element, elemIndex) => {\n        if (element.elementType === 'stripes' && element.stripeConfig) {\n            // Generate stripe pattern\n            const stripeColors = element.stripeConfig.colors || [];\n            const stripeColorMapping = {};\n            \n            stripeColors.forEach((stripe, sIndex) => {\n                const colorId = `c${colorIndex}`;\n                const label = stripeColors.length > 1 \n                    ? `Stripes-${elemIndex + 1} C${sIndex + 1}`\n                    : `Stripes-${elemIndex + 1}`;\n                \n                // Use element's color mapping if it exists, otherwise use default color\n                const effectiveColor = element.colorMapping && element.colorMapping[`stripe-${sIndex}`]\n                    ? element.colorMapping[`stripe-${sIndex}`]\n                    : stripe.color || '#ffffff';\n                    \n                colorMap[colorId] = {\n                    id: colorId,\n                    label: label,\n                    color: effectiveColor\n                };\n                stripeColorMapping[sIndex] = colorId;\n                colorIndex++;\n            });\n\n            elementData.push({\n                type: 'stripes',\n                height: stripeColors.reduce((sum: number, s: any) => sum + (s.rows || 1), 0),\n                colorMapping: stripeColorMapping,\n                stripeConfig: element.stripeConfig\n            });\n        } else if (element.elementType === 'row' && element.elements) {\n            // Recursively generate nested row pattern\n            const nestedPattern = createRowPattern(element.elements, availablePatternsRef);\n            const repeatCount = element.repeatCount || 1;\n            \n            // Map nested pattern colors to unified color map\n            const nestedColorMapping = {};\n            Object.entries(nestedPattern.colors).forEach(([origColorId, colorInfo]: [string, any]) => {\n                const colorId = `c${colorIndex}`;\n                colorMap[colorId] = {\n                    id: colorId,\n                    label: `Row-${elemIndex + 1} ${colorInfo.label}`,\n                    color: colorInfo.color\n                };\n                nestedColorMapping[origColorId] = colorId;\n                colorIndex++;\n            });\n            \n            elementData.push({\n                type: 'row',\n                pattern: nestedPattern,\n                repeatCount: repeatCount,\n                colorMapping: nestedColorMapping,\n                height: nestedPattern.getRowCount() * repeatCount\n            });\n        } else if (element.elementType === 'shape' && element.shapeKey && availablePatternsRef[element.shapeKey]) {\n            // Get the custom pattern - wrap in implicit row for independent repetition\n            const patternInfo = availablePatternsRef[element.shapeKey];\n            const patternName = patternInfo.name || 'Shape';\n            const customPattern = generatePattern(element.shapeKey, patternInfo.defaultConfig || {});\n            const repeatCount = element.repeatCount || 1;\n            \n            // Create an implicit row containing just this shape\n            const rowElements = [{ \n                elementType: 'shape', \n                shapeKey: element.shapeKey, \n                repeatCount: repeatCount \n            }];\n            const implicitRowPattern = createRowPattern(rowElements, availablePatternsRef);\n            \n            // Map row pattern colors to unified color map, using element's color mapping if available\n            const rowColorMapping = {};\n            Object.entries(implicitRowPattern.colors).forEach(([origColorId, colorInfo]: [string, any]) => {\n                const colorId = `c${colorIndex}`;\n                \n                // Use element's color mapping if it exists\n                const effectiveColor = element.colorMapping && element.colorMapping[origColorId]\n                    ? element.colorMapping[origColorId]\n                    : colorInfo.color;\n                \n                colorMap[colorId] = {\n                    id: colorId,\n                    label: colorInfo.label,\n                    color: effectiveColor\n                };\n                rowColorMapping[origColorId] = colorId;\n                colorIndex++;\n            });\n            \n            elementData.push({\n                type: 'implicit-row',\n                pattern: implicitRowPattern,\n                colorMapping: rowColorMapping,\n                height: implicitRowPattern.getRowCount()\n            });\n        }\n    });\n\n    // Create vertically stacked pattern\n    // Calculate LCM of all pattern widths so each pattern completes fully\n    const gcd = (a: number, b: number): number => b === 0 ? a : gcd(b, a % b);\n    const lcm = (a: number, b: number): number => (a * b) / gcd(a, b);\n    \n    const patternWidths = elementData.map(elem => {\n        if (elem.type === 'row' && elem.pattern) {\n            return elem.pattern.getStitchCount();\n        } else if (elem.type === 'implicit-row' && elem.pattern) {\n            return elem.pattern.getStitchCount();\n        }\n        return 1; // Stripes can be any width\n    });\n    \n    // Calculate LCM of all widths\n    let width = patternWidths.reduce((acc, w) => lcm(acc, w), 1);\n    \n    // Cap at reasonable maximum to avoid huge patterns\n    if (width > 500) {\n        // If LCM is too large, just use the max width\n        width = Math.max(...patternWidths);\n    }\n    \n    // Ensure minimum width\n    width = Math.max(width, 10);\n    \n    const totalHeight = elementData.reduce((sum, elem) => sum + (elem.height || 4), 0);\n    \n    const grid: string[][] = [];\n    \n    elementData.forEach((elem) => {\n        if (elem.type === 'stripes') {\n            elem.stripeConfig.colors.forEach((stripe: any, sIdx: number) => {\n                const colorId = elem.colorMapping[sIdx];\n                const rows = stripe.rows || 1;\n                for (let r = 0; r < rows; r++) {\n                    const rowData = Array(width).fill(colorId);\n                    grid.push(rowData);\n                }\n            });\n        } else if (elem.type === 'row' && elem.pattern) {\n            // Row repeats independently across full width\n            const patternWidth = elem.pattern.getStitchCount();\n            \n            for (let rep = 0; rep < elem.repeatCount; rep++) {\n                for (let row = 0; row < elem.pattern.getRowCount(); row++) {\n                    const rowData = [];\n                    \n                    // Repeat pattern horizontally to fill width\n                    for (let col = 0; col < width; col++) {\n                        const patternCol = col % patternWidth;\n                        const origColorId = elem.pattern.grid[row][patternCol];\n                        const unifiedColorId = elem.colorMapping[origColorId];\n                        rowData.push(unifiedColorId);\n                    }\n                    \n                    grid.push(rowData);\n                }\n            }\n        } else if (elem.type === 'implicit-row' && elem.pattern) {\n            // Implicit row (shape wrapped in row) repeats independently across full width\n            const patternWidth = elem.pattern.getStitchCount();\n            \n            for (let row = 0; row < elem.pattern.getRowCount(); row++) {\n                const rowData = [];\n                \n                // Repeat pattern horizontally to fill width\n                for (let col = 0; col < width; col++) {\n                    const patternCol = col % patternWidth;\n                    const origColorId = elem.pattern.grid[row][patternCol];\n                    const unifiedColorId = elem.colorMapping[origColorId];\n                    rowData.push(unifiedColorId);\n                }\n                \n                grid.push(rowData);\n            }\n        }\n    });\n\n    return new ColorworkPattern(0, 0, grid, colorMap, { width, height: totalHeight });\n}\n\nexport default ColorworkCanvasEditor;\n","import React from 'react';\nimport { Card, Row, Col, Typography, Tag, Space } from 'antd';\n\nconst { Text, Title } = Typography;\n\n/**\n * RowByRowInstructions - Component for displaying row-by-row knitting instructions\n * with both shaping and colorwork information\n */\nconst RowByRowInstructions = ({ stitchPlan, currentRow = 0 }) => {\n    if (!stitchPlan || !stitchPlan.rows || stitchPlan.rows.length === 0) {\n        return (\n            <div className=\"row-by-row-instructions\">\n                <Text type=\"secondary\">No instructions available</Text>\n            </div>\n        );\n    }\n\n    const instructions = stitchPlan.generateKnittingInstructions();\n\n    return (\n        <div className=\"row-by-row-instructions\">\n            {instructions.map((instruction, index: number) => {\n                const isCurrentRow = index === currentRow;\n                const isCompleted = index < currentRow;\n                const stitchPlanRow = stitchPlan.rows[index];\n                \n                return (\n                    <Card \n                        key={index}\n                        size=\"small\"\n                        style={{\n                            marginBottom: 8,\n                            backgroundColor: isCurrentRow ? '#e6f7ff' : isCompleted ? '#f6ffed' : 'white',\n                            border: isCurrentRow ? '2px solid #1890ff' : '1px solid #d9d9d9'\n                        }}\n                    >\n                        <Row>\n                            <Col span={24}>\n                                <Title level={5}>\n                                    Row {index + 1}\n                                    {stitchPlanRow && stitchPlanRow.rowNumber && stitchPlanRow.rowNumber !== index + 1 && \n                                        ` (RC: ${stitchPlanRow.rowNumber})`\n                                    }\n                                </Title>\n                            </Col>\n                        </Row>\n\n                        {/* Shaping Instructions */}\n                        {typeof instruction === 'string' && (\n                            <Row style={{ marginBottom: 8 }}>\n                                <Col span={24}>\n                                    <Text strong>Shaping: </Text>\n                                    <Text>{instruction}</Text>\n                                </Col>\n                            </Row>\n                        )}\n\n                        {/* Combined Instructions (if using enhanced system) */}\n                        {instruction.hasShaping && instruction.hasShaping() && (\n                            <Row style={{ marginBottom: 8 }}>\n                                <Col span={24}>\n                                    <Text strong>Shaping: </Text>\n                                    <Text>{instruction.shaping.description}</Text>\n                                </Col>\n                            </Row>\n                        )}\n\n                        {/* Colorwork Instructions */}\n                        {stitchPlanRow && stitchPlanRow.getColorworkInstructions && stitchPlanRow.getColorworkInstructions() && (\n                            <>\n                                <Row style={{ marginBottom: 8 }}>\n                                    <Col span={24}>\n                                        <Text strong>Colorwork: </Text>\n                                        <Space wrap>\n                                            {stitchPlanRow.getColorworkInstructions().map((segment, segIndex) => (\n                                                <Tag \n                                                    key={segIndex}\n                                                    style={{ \n                                                        backgroundColor: segment.colorHex,\n                                                        color: getContrastColor(segment.colorHex),\n                                                        fontWeight: 'bold',\n                                                        border: '1px solid #d9d9d9'\n                                                    }}\n                                                >\n                                                    {segment.stitchCount} {segment.colorLabel}\n                                                </Tag>\n                                            ))}\n                                        </Space>\n                                    </Col>\n                                </Row>\n\n                                {/* Visual Chart for Row */}\n                                <Row style={{ marginTop: 8 }}>\n                                    <Col span={24}>\n                                        <ColorworkRowChart \n                                            colorworkInstructions={stitchPlanRow.getColorworkInstructions()}\n                                            totalStitches={stitchPlanRow.leftStitchesInWork + stitchPlanRow.rightStitchesInWork}\n                                        />\n                                    </Col>\n                                </Row>\n                            </>\n                        )}\n\n                        {/* Enhanced colorwork instructions */}\n                        {instruction.hasColorwork && instruction.hasColorwork() && (\n                            <>\n                                <Row style={{ marginBottom: 8 }}>\n                                    <Col span={24}>\n                                        <Text strong>Colorwork: </Text>\n                                        <Text>{instruction.colorwork.description}</Text>\n                                    </Col>\n                                </Row>\n\n                                {/* Visual Color Sequence */}\n                                <Row>\n                                    <Col span={24}>\n                                        <Space wrap>\n                                            {instruction.colorwork.colorSequence.map((segment, segIndex) => (\n                                                <Tag \n                                                    key={segIndex}\n                                                    color={instruction.colorwork.pattern?.colors[segment.colorId]?.color}\n                                                    style={{ \n                                                        color: 'black',\n                                                        fontWeight: 'bold',\n                                                        border: '1px solid #d9d9d9'\n                                                    }}\n                                                >\n                                                    {segment.stitchCount} {segment.colorId}\n                                                </Tag>\n                                            ))}\n                                        </Space>\n                                    </Col>\n                                </Row>\n\n                                {/* Visual Chart for Row */}\n                                {instruction.visualChart && (\n                                    <Row style={{ marginTop: 8 }}>\n                                        <Col span={24}>\n                                            <div \n                                                dangerouslySetInnerHTML={{ \n                                                    __html: instruction.visualChart.svg \n                                                }}\n                                                style={{ \n                                                    maxWidth: '100%', \n                                                    overflow: 'auto',\n                                                    border: '1px solid #f0f0f0',\n                                                    borderRadius: '4px',\n                                                    padding: '4px'\n                                                }}\n                                            />\n                                        </Col>\n                                    </Row>\n                                )}\n                            </>\n                        )}\n\n                        {/* Stitch count information */}\n                        {stitchPlanRow && (\n                            <Row style={{ marginTop: 8 }}>\n                                <Col span={24}>\n                                    <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                                        {stitchPlanRow.leftStitchesInWork + stitchPlanRow.rightStitchesInWork} stitches \n                                        ({stitchPlanRow.leftStitchesInWork} left, {stitchPlanRow.rightStitchesInWork} right)\n                                    </Text>\n                                </Col>\n                            </Row>\n                        )}\n                    </Card>\n                );\n            })}\n        </div>\n    );\n};\n\n/**\n * ColorworkRowChart - Simple visual chart showing colorwork for a single row\n */\nconst ColorworkRowChart = ({ colorworkInstructions, totalStitches }) => {\n    if (!colorworkInstructions || colorworkInstructions.length === 0) {\n        return null;\n    }\n\n    const stitchWidth = Math.max(8, Math.min(20, 400 / totalStitches)); // Adaptive stitch width\n    const chartWidth = totalStitches * stitchWidth;\n    const chartHeight = 20;\n\n    let currentPosition = 0;\n    const rectangles = colorworkInstructions.map((segment, index: number) => {\n        const segmentWidth = segment.stitchCount * stitchWidth;\n        const rect = (\n            <rect\n                key={index}\n                x={currentPosition}\n                y={0}\n                width={segmentWidth}\n                height={chartHeight}\n                fill={segment.colorHex}\n                stroke=\"#000\"\n                strokeWidth=\"0.5\"\n            />\n        );\n        currentPosition += segmentWidth;\n        return rect;\n    });\n\n    return (\n        <div style={{ marginTop: 4 }}>\n            <Text strong style={{ fontSize: '11px' }}>Visual Pattern:</Text>\n            <div style={{ marginTop: 2 }}>\n                <svg \n                    width={chartWidth} \n                    height={chartHeight}\n                    style={{ border: '1px solid #ddd', borderRadius: '2px' }}\n                >\n                    {rectangles}\n                </svg>\n            </div>\n        </div>\n    );\n};\n\n/**\n * Calculate contrast color for text visibility\n */\nconst getContrastColor = (hexColor) => {\n    // Remove # if present\n    const hex = hexColor.replace('#', '');\n    \n    // Convert to RGB\n    const r = parseInt(hex.substr(0, 2), 16);\n    const g = parseInt(hex.substr(2, 2), 16);\n    const b = parseInt(hex.substr(4, 2), 16);\n    \n    // Calculate luminance\n    const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n    \n    return luminance > 0.5 ? '#000000' : '#ffffff';\n};\n\nexport default RowByRowInstructions;\n","import { PanelColorworkComposer } from './PanelColorworkComposer';\nimport { InstructionGenerator } from './InstructionGenerator';\n\n/**\n * ColorworkStitchPlanService - Service for creating colorwork-enhanced stitch plans\n * Handles the integration between panels, colorwork patterns, and instruction generation\n */\nexport class ColorworkStitchPlanService {\n    constructor() {\n        this.composer = new PanelColorworkComposer();\n        this.instructionGenerator = new InstructionGenerator();\n    }\n\n    /**\n     * Create an enhanced stitch plan with colorwork integration\n     */\n    createColorworkStitchPlan(panel, colorworkPattern, options = {}) {\n        // Use the composer to combine panel and colorwork\n        const combinedPattern = this.composer.combinePatterns(panel, colorworkPattern, options);\n        \n        // The stitchPlan in combinedPattern is already enhanced with colorwork data\n        return combinedPattern.stitchPlan;\n    }\n\n    /**\n     * Generate combined instructions for a panel with colorwork\n     */\n    generateCombinedInstructions(panel, colorworkPattern, options = {}) {\n        const combinedPattern = this.composer.combinePatterns(panel, colorworkPattern, options);\n        return this.instructionGenerator.generateCombinedInstructions(combinedPattern);\n    }\n\n    /**\n     * Create a basic stitch plan without colorwork (for backward compatibility)\n     */\n    createBasicStitchPlan(panel) {\n        if (!panel.shape) return { rows: [] };\n        \n        const gauge = panel.gauge;\n        const sizeModifier = panel.sizeModifier;\n        \n        return panel.shape.getStitchPlan(gauge, sizeModifier, 1);\n    }\n}\n\nexport default ColorworkStitchPlanService;\n","import React, { useState, useEffect } from 'react';\nimport { Card, Button, Row, Col, Space, Typography, Progress, Tag, Divider } from 'antd';\nimport { LeftOutlined, RightOutlined, CheckOutlined } from '@ant-design/icons';\nimport RowByRowInstructions from './RowByRowInstructions';\nimport { ColorworkStitchPlanService } from '../models/ColorworkStitchPlanService';\n\nconst { Title, Text } = Typography;\n\n/**\n * InteractiveKnittingView - Enhanced knitting interface with row tracking and colorwork guidance\n */\nconst InteractiveKnittingView = ({\n    combinedPattern,\n    instructions = [],\n    knittingProgress,\n    onRowComplete,\n    onBackToSettings\n}) => {\n    const [enhancedStitchPlan, setEnhancedStitchPlan] = useState(null);\n    const [currentRowInstructions, setCurrentRowInstructions] = useState(null);\n\n    useEffect(() => {\n        if (combinedPattern) {\n            // Create enhanced stitch plan with colorwork using the combined pattern's stitchPlan\n            // The stitchPlan should already be enhanced with colorwork data from PanelColorworkComposer\n            if (combinedPattern.stitchPlan && combinedPattern.stitchPlan.hasColorwork()) {\n                setEnhancedStitchPlan(combinedPattern.stitchPlan);\n            } else {\n                // Fallback: create enhanced stitch plan with colorwork\n                const service: any = new ColorworkStitchPlanService();\n                const panel = combinedPattern.panel;\n                const colorworkPattern = combinedPattern.colorworkPattern;\n                \n                try {\n                    const enhanced = service.createColorworkStitchPlan(panel, colorworkPattern);\n                    setEnhancedStitchPlan(enhanced);\n                } catch (error: unknown) {\n                    console.error('Error creating enhanced stitch plan:', error);\n                }\n            }\n        }\n    }, [combinedPattern]);\n\n    useEffect(() => {\n        if (enhancedStitchPlan && enhancedStitchPlan.rows[knittingProgress.currentRow]) {\n            const currentRow = enhancedStitchPlan.rows[knittingProgress.currentRow];\n            setCurrentRowInstructions(currentRow);\n        }\n    }, [enhancedStitchPlan, knittingProgress.currentRow]);\n\n    const handlePreviousRow = () => {\n        if (knittingProgress.currentRow > 0) {\n            // Move back to previous row (but don't mark it incomplete)\n            // This is just for navigation\n        }\n    };\n\n    const handleNextRow = () => {\n        if (knittingProgress.currentRow < instructions.length - 1) {\n            onRowComplete(knittingProgress.currentRow);\n        }\n    };\n\n    const progressPercent = Math.round((knittingProgress.completedRows.length / instructions.length) * 100);\n\n    return (\n        <div className=\"interactive-knitting-view\" style={{ padding: '24px', background: '#f5f5f5', minHeight: '100vh' }}>\n            {/* Header with navigation */}\n            <div className=\"knitting-header\" style={{ marginBottom: '24px' }}>\n                <Row justify=\"space-between\" align=\"middle\">\n                    <Col>\n                        <Button onClick={onBackToSettings} icon={<LeftOutlined />}>\n                            Back to Settings\n                        </Button>\n                    </Col>\n                    <Col>\n                        <Title level={2} style={{ margin: 0, textAlign: 'center' }}>\n                            Interactive Knitting\n                        </Title>\n                        <Text type=\"secondary\" style={{ display: 'block', textAlign: 'center' }}>\n                            Row {knittingProgress.currentRow + 1} of {instructions.length}\n                        </Text>\n                    </Col>\n                    <Col>\n                        <Progress \n                            type=\"circle\" \n                            percent={progressPercent} \n                            size={60}\n                            strokeColor=\"#52c41a\"\n                        />\n                    </Col>\n                </Row>\n            </div>\n\n            <Row gutter={[24, 24]}>\n                {/* Left Column: Current Row Focus */}\n                <Col xs={24} lg={8}>\n                    <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\n                        {/* Current Row Card */}\n                        <Card \n                            title={`Row ${knittingProgress.currentRow + 1}`}\n                            extra={\n                                <Tag color={knittingProgress.completedRows.includes(knittingProgress.currentRow) ? 'green' : 'blue'}>\n                                    {knittingProgress.completedRows.includes(knittingProgress.currentRow) ? 'Complete' : 'In Progress'}\n                                </Tag>\n                            }\n                        >\n                            {currentRowInstructions && (\n                                <Space direction=\"vertical\" style={{ width: '100%' }}>\n                                    {/* Shaping Instructions */}\n                                    <div>\n                                        <Text strong>Shaping:</Text>\n                                        <div style={{ marginTop: 8, padding: 12, background: '#f0f8ff', borderRadius: 6 }}>\n                                            <Text>\n                                                {currentRowInstructions.leftStitchesInWork + currentRowInstructions.rightStitchesInWork} stitches total\n                                                ({currentRowInstructions.leftStitchesInWork} left, {currentRowInstructions.rightStitchesInWork} right)\n                                            </Text>\n                                        </div>\n                                    </div>\n\n                                    {/* Colorwork Instructions */}\n                                    {currentRowInstructions.getColorworkInstructions && currentRowInstructions.getColorworkInstructions() && (\n                                        <div>\n                                            <Text strong>Colorwork:</Text>\n                                            <div style={{ marginTop: 8 }}>\n                                                <Space wrap>\n                                                    {currentRowInstructions.getColorworkInstructions().map((segment, index: number) => (\n                                                        <Tag \n                                                            key={index}\n                                                            style={{ \n                                                                backgroundColor: segment.colorHex,\n                                                                color: getContrastColor(segment.colorHex),\n                                                                fontWeight: 'bold',\n                                                                border: '1px solid #d9d9d9',\n                                                                fontSize: '14px',\n                                                                padding: '6px 12px'\n                                                            }}\n                                                        >\n                                                            {segment.stitchCount} {segment.colorLabel}\n                                                        </Tag>\n                                                    ))}\n                                                </Space>\n                                                \n                                                {/* Visual color bar */}\n                                                <div style={{ marginTop: 12 }}>\n                                                    <Text strong style={{ fontSize: '12px' }}>Pattern:</Text>\n                                                    <ColorworkRowBar \n                                                        colorworkInstructions={currentRowInstructions.getColorworkInstructions()}\n                                                        totalStitches={currentRowInstructions.leftStitchesInWork + currentRowInstructions.rightStitchesInWork}\n                                                    />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    )}\n\n                                    <Divider />\n\n                                    {/* Row Navigation */}\n                                    <Row gutter={[8, 8]}>\n                                        <Col span={8}>\n                                            <Button \n                                                icon={<LeftOutlined />}\n                                                onClick={handlePreviousRow}\n                                                disabled={knittingProgress.currentRow === 0}\n                                                block\n                                                size=\"small\"\n                                            >\n                                                Prev\n                                            </Button>\n                                        </Col>\n                                        <Col span={8}>\n                                            <Button \n                                                type=\"primary\"\n                                                icon={<CheckOutlined />}\n                                                onClick={handleNextRow}\n                                                disabled={knittingProgress.currentRow >= instructions.length - 1}\n                                                block\n                                            >\n                                                Done\n                                            </Button>\n                                        </Col>\n                                        <Col span={8}>\n                                            <Button \n                                                icon={<RightOutlined />}\n                                                onClick={handleNextRow}\n                                                disabled={knittingProgress.currentRow >= instructions.length - 1}\n                                                block\n                                                size=\"small\"\n                                            >\n                                                Next\n                                            </Button>\n                                        </Col>\n                                    </Row>\n                                </Space>\n                            )}\n                        </Card>\n\n                        {/* Progress Overview */}\n                        <Card title=\"Progress Overview\" size=\"small\">\n                            <Space direction=\"vertical\" style={{ width: '100%' }}>\n                                <div>\n                                    <Text>Completed Rows: {knittingProgress.completedRows.length}</Text>\n                                    <Progress \n                                        percent={progressPercent} \n                                        showInfo={false}\n                                        strokeColor=\"#52c41a\"\n                                    />\n                                </div>\n                                <div>\n                                    <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                                        Remaining: {instructions.length - knittingProgress.completedRows.length} rows\n                                    </Text>\n                                </div>\n                            </Space>\n                        </Card>\n                    </Space>\n                </Col>\n\n                {/* Right Column: Full Instructions & Panel View */}\n                <Col xs={24} lg={16}>\n                    <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\n                        {/* Panel with Row Highlighting */}\n                        <Card title=\"Panel with Current Row Highlighted\">\n                            <div style={{ \n                                background: 'white', \n                                padding: '20px', \n                                borderRadius: '8px',\n                                textAlign: 'center'\n                            }}>\n                                <PanelRowHighlight \n                                    combinedPattern={combinedPattern}\n                                    currentRow={knittingProgress.currentRow}\n                                    completedRows={knittingProgress.completedRows}\n                                />\n                            </div>\n                        </Card>\n\n                        {/* All Instructions with Row Tracking */}\n                        <Card title=\"All Instructions\">\n                            {enhancedStitchPlan && (\n                                <RowByRowInstructions \n                                    stitchPlan={enhancedStitchPlan}\n                                    currentRow={knittingProgress.currentRow}\n                                />\n                            )}\n                        </Card>\n                    </Space>\n                </Col>\n            </Row>\n        </div>\n    );\n};\n\n/**\n * ColorworkRowBar - Visual representation of a single row's colorwork pattern\n */\nconst ColorworkRowBar = ({ colorworkInstructions, totalStitches }) => {\n    if (!colorworkInstructions || colorworkInstructions.length === 0) {\n        return null;\n    }\n\n    const stitchWidth = Math.max(2, Math.min(8, 300 / totalStitches));\n    const barWidth = totalStitches * stitchWidth;\n    const barHeight = 20;\n\n    let currentPosition = 0;\n    const segments = colorworkInstructions.map((segment, index: number) => {\n        const segmentWidth = segment.stitchCount * stitchWidth;\n        const rect = (\n            <rect\n                key={index}\n                x={currentPosition}\n                y={0}\n                width={segmentWidth}\n                height={barHeight}\n                fill={segment.colorHex}\n                stroke=\"#666\"\n                strokeWidth=\"0.5\"\n            />\n        );\n        currentPosition += segmentWidth;\n        return rect;\n    });\n\n    return (\n        <div style={{ marginTop: 8 }}>\n            <svg \n                width={barWidth} \n                height={barHeight}\n                style={{ \n                    border: '1px solid #ddd', \n                    borderRadius: '4px',\n                    display: 'block'\n                }}\n            >\n                {segments}\n            </svg>\n        </div>\n    );\n};\n\n/**\n * PanelRowHighlight - Shows the panel shape with current row highlighted\n */\nconst PanelRowHighlight = ({ combinedPattern, currentRow, completedRows }) => {\n    if (!combinedPattern || !combinedPattern.stitchPlan) {\n        return <Text type=\"secondary\">Panel visualization unavailable</Text>;\n    }\n\n    const rows = combinedPattern.stitchPlan.rows;\n    const maxStitches = Math.max(...rows.map((row: any) => row.leftStitchesInWork + row.rightStitchesInWork));\n    \n    return (\n        <div style={{ maxWidth: '400px', margin: '0 auto' }}>\n            <Text strong style={{ fontSize: '12px' }}>Panel Shape (Row {currentRow + 1} highlighted)</Text>\n            <div style={{ marginTop: 8 }}>\n                {rows.map((row, index: number) => {\n                    const totalStitches = row.leftStitchesInWork + row.rightStitchesInWork;\n                    const widthPercent = (totalStitches / maxStitches) * 100;\n                    \n                    let backgroundColor = '#f0f0f0';\n                    if (completedRows.includes(index)) {\n                        backgroundColor = '#52c41a'; // Completed - green\n                    } else if (index === currentRow) {\n                        backgroundColor = '#1890ff'; // Current - blue\n                    }\n                    \n                    return (\n                        <div\n                            key={index}\n                            style={{\n                                width: `${widthPercent}%`,\n                                height: '6px',\n                                backgroundColor,\n                                margin: '1px auto',\n                                borderRadius: '3px',\n                                border: index === currentRow ? '2px solid #1890ff' : 'none'\n                            }}\n                            title={`Row ${index + 1}: ${totalStitches} stitches`}\n                        />\n                    );\n                })}\n            </div>\n            <div style={{ marginTop: 8, fontSize: '10px' }}>\n                <Space>\n                    <span style={{ color: '#52c41a' }}>â— Completed</span>\n                    <span style={{ color: '#1890ff' }}>â— Current</span>\n                    <span style={{ color: '#f0f0f0' }}>â— Remaining</span>\n                </Space>\n            </div>\n        </div>\n    );\n};\n\n/**\n * Calculate contrast color for text visibility\n */\nconst getContrastColor = (hexColor) => {\n    // Remove # if present\n    const hex = hexColor.replace('#', '');\n    \n    // Convert to RGB\n    const r = parseInt(hex.substr(0, 2), 16);\n    const g = parseInt(hex.substr(2, 2), 16);\n    const b = parseInt(hex.substr(4, 2), 16);\n    \n    // Calculate luminance\n    const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n    \n    return luminance > 0.5 ? '#000000' : '#ffffff';\n};\n\nexport default InteractiveKnittingView;\n","import React, { useRef, useEffect } from 'react';\nimport { theme } from 'antd';\n\n/**\n * ColorworkPanelDiagram - Canvas-based panel diagram with high performance rendering\n * Replaces SVG DOM elements with Canvas 2D context for complex colorwork visualization\n */\n\nconst renderUnifiedShapeToCanvas = (ctx, shape, scale, xOffset = 0, yOffset = 0, fillColor, patternLayers = [], gauge = null) => {\n    // Collect all trapezoid coordinates into one unified path\n    const allCoordinates = [];\n    collectTrapezoidCoordinates(shape, scale, xOffset, yOffset, allCoordinates);\n    \n    if (allCoordinates.length === 0) return;\n    \n    // Find the bounding box of the entire shape\n    let minX = Math.min(...allCoordinates.map((coord: any) => Math.min(coord.topLeft.x, coord.topRight.x, coord.bottomLeft.x, coord.bottomRight.x)));\n    let maxX = Math.max(...allCoordinates.map((coord: any) => Math.max(coord.topLeft.x, coord.topRight.x, coord.bottomLeft.x, coord.bottomRight.x)));\n    let minY = Math.min(...allCoordinates.map((coord: any) => Math.min(coord.topLeft.y, coord.topRight.y, coord.bottomLeft.y, coord.bottomRight.y)));\n    let maxY = Math.max(...allCoordinates.map((coord: any) => Math.max(coord.topLeft.y, coord.topRight.y, coord.bottomLeft.y, coord.bottomRight.y)));\n    \n    // Create unified clipping path\n    ctx.save();\n    ctx.beginPath();\n    \n    // Draw each trapezoid as part of the unified path\n    allCoordinates.forEach((coord, index: number) => {\n        if (index === 0) {\n            ctx.moveTo(coord.topLeft.x, coord.topLeft.y);\n        } else {\n            ctx.moveTo(coord.topLeft.x, coord.topLeft.y);\n        }\n        ctx.lineTo(coord.topRight.x, coord.topRight.y);\n        ctx.lineTo(coord.bottomRight.x, coord.bottomRight.y);\n        ctx.lineTo(coord.bottomLeft.x, coord.bottomLeft.y);\n        ctx.closePath();\n    });\n    \n    ctx.clip();\n\n    // If pattern layers are provided, render them as background with centered origin\n    if (patternLayers && patternLayers.length > 0 && gauge) {\n        renderColorworkLayersToCanvasCentered(\n            ctx,\n            patternLayers,\n            shape,\n            minX, minY, maxX - minX, maxY - minY,\n            scale,\n            gauge\n        );\n    } else {\n        // Default solid fill if no colorwork\n        ctx.fillStyle = fillColor;\n        ctx.globalAlpha = 0.3;\n        ctx.fillRect(minX, minY, maxX - minX, maxY - minY);\n        ctx.globalAlpha = 1.0;\n    }\n\n    ctx.restore();\n\n    // Draw unified outline\n    ctx.strokeStyle = '#a1a8af';\n    ctx.lineWidth = 3;\n    ctx.lineJoin = 'round';\n    \n    allCoordinates.forEach((coord: any) => {\n        ctx.beginPath();\n        ctx.moveTo(coord.topLeft.x, coord.topLeft.y);\n        ctx.lineTo(coord.topRight.x, coord.topRight.y);\n        ctx.lineTo(coord.bottomRight.x, coord.bottomRight.y);\n        ctx.lineTo(coord.bottomLeft.x, coord.bottomLeft.y);\n        ctx.closePath();\n        ctx.stroke();\n    });\n};\n\nconst collectTrapezoidCoordinates = (trap, scale, xOffset = 0, yOffset = 0, coordinates = []) => {\n    const trapWidth = Math.max(trap.baseA, trap.baseB) * scale;\n    const xTopLeft = xOffset + (trapWidth - trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n    const xTopRight = xOffset + (trapWidth + trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n    const xBottomLeft = xOffset + (trapWidth - trap.baseA * scale) / 2;\n    const xBottomRight = xOffset + (trapWidth + trap.baseA * scale) / 2;\n    const yTop = yOffset;\n    const yBottom = yOffset + trap.height * scale;\n\n    coordinates.push({\n        topLeft: { x: xTopLeft, y: yTop },\n        topRight: { x: xTopRight, y: yTop },\n        bottomLeft: { x: xBottomLeft, y: yBottom },\n        bottomRight: { x: xBottomRight, y: yBottom }\n    });\n\n    if (trap.successors && trap.successors.length > 0) {\n        const successorWidths = trap.successors.map((s: any) => Math.max(s.baseA, s.baseB) * scale);\n        const totalSuccessorWidth = successorWidths.reduce((sum, w) => sum + w, 0);\n        let childXOffset = xOffset + (trapWidth - totalSuccessorWidth) / 2;\n\n        for (let i = trap.successors.length - 1; i >= 0; i--) {\n            const successor = trap.successors[i];\n            const successorWidth = successorWidths[i];\n            collectTrapezoidCoordinates(\n                successor, \n                scale, \n                childXOffset, \n                yTop - successor.height * scale, \n                coordinates\n            );\n            childXOffset += successorWidth;\n        }\n    }\n};\n\nconst renderColorworkLayersToCanvasCentered = (ctx, patternLayers, shape, x, y, displayWidth, displayHeight, scale, gauge) => {\n    // Calculate actual dimensions in inches\n    const widthInches = Math.max(shape.baseA, shape.baseB);\n    const heightInches = shape.height;\n    \n    // Calculate stitch and row counts based on gauge\n    const stitchesPerInch = gauge.stitchesPerFourInches / 4;\n    const rowsPerInch = gauge.rowsPerFourInches / 4;\n    \n    const totalStitches = Math.round(widthInches * stitchesPerInch);\n    const totalRows = Math.round(heightInches * rowsPerInch);\n    \n    // Calculate pixel size for each stitch/row in the display\n    const stitchPixelWidth = displayWidth / totalStitches;\n    const rowPixelHeight = displayHeight / totalRows;\n    \n    // Create a combined pattern grid for all layers with centered origin\n    const combinedGrid = createCombinedGridCentered(totalStitches, totalRows, patternLayers);\n    \n    // Render the combined grid to canvas\n    for (let row = 0; row < totalRows; row++) {\n        for (let stitch = 0; stitch < totalStitches; stitch++) {\n            const cellX = x + stitch * stitchPixelWidth;\n            const cellY = y + row * rowPixelHeight;\n            const color = combinedGrid[row] && combinedGrid[row][stitch];\n            \n            if (color && color !== 'transparent') {\n                ctx.fillStyle = color;\n                ctx.fillRect(cellX, cellY, stitchPixelWidth, rowPixelHeight);\n            }\n        }\n    }\n};\n\nconst createCombinedGridCentered = (totalStitches, totalRows, patternLayers) => {\n    // Initialize grid with transparent background\n    const grid = Array(totalRows).fill().map(() => Array(totalStitches).fill('transparent'));\n    \n    // Process layers from bottom to top (lower priority to higher priority)\n    patternLayers.sort((a, b) => a.priority - b.priority).forEach((layer: any) => {\n        applyPatternLayerCentered(grid, totalStitches, totalRows, layer);\n    });\n    \n    return grid;\n};\n\nconst applyPatternLayerCentered = (grid, totalStitches, totalRows, layer) => {\n    const { pattern, settings } = layer;\n    \n    if (!pattern || !pattern.grid || pattern.grid.length === 0) {\n        return;\n    }\n    \n    const patternRows = pattern.getRowCount();\n    const patternStitches = pattern.getStitchCount();\n    \n    if (patternRows === 0 || patternStitches === 0) {\n        return;\n    }\n    \n    const {\n        repeatMode = 'both', // Default to 'both' for backward compatibility\n        repeatCountX = 0, // 0 means infinite\n        repeatCountY = 0, // 0 means infinite\n        repeatHorizontal = true, // Fallback for legacy settings\n        repeatVertical = true,   // Fallback for legacy settings\n        offsetHorizontal = 0,\n        offsetVertical = 0\n    } = settings;\n    \n    // Determine if we should repeat (support both new and legacy formats)\n    const shouldRepeatHorizontal = repeatMode ? \n        (repeatMode === 'x' || repeatMode === 'both') : \n        repeatHorizontal;\n    const shouldRepeatVertical = repeatMode ? \n        (repeatMode === 'y' || repeatMode === 'both') : \n        repeatVertical;\n    \n    // Calculate center offsets to start pattern from center\n    const centerOffsetX = Math.floor((totalStitches - patternStitches) / 2);\n    const centerOffsetY = Math.floor((totalRows - patternRows) / 2);\n    \n    for (let row = 0; row < totalRows; row++) {\n        for (let stitch = 0; stitch < totalStitches; stitch++) {\n            // Apply center offset and user offset\n            const adjustedStitch = stitch - centerOffsetX - offsetHorizontal;\n            const adjustedRow = row - centerOffsetY - offsetVertical;\n            \n            // Calculate which repeat we're in\n            let repeatIndexX = 0;\n            let repeatIndexY = 0;\n            \n            if (shouldRepeatHorizontal && patternStitches > 0) {\n                repeatIndexX = Math.floor(adjustedStitch / patternStitches);\n            }\n            if (shouldRepeatVertical && patternRows > 0) {\n                repeatIndexY = Math.floor(adjustedRow / patternRows);\n            }\n            \n            // Check if we're within the allowed repeat count (0 means infinite)\n            if (shouldRepeatHorizontal && repeatCountX && repeatCountX > 0 && Math.abs(repeatIndexX) >= repeatCountX) {\n                continue;\n            }\n            if (shouldRepeatVertical && repeatCountY && repeatCountY > 0 && Math.abs(repeatIndexY) >= repeatCountY) {\n                continue;\n            }\n            \n            // Skip if outside pattern bounds and no repeat\n            if (!shouldRepeatHorizontal && (adjustedStitch < 0 || adjustedStitch >= patternStitches)) {\n                continue;\n            }\n            if (!shouldRepeatVertical && (adjustedRow < 0 || adjustedRow >= patternRows)) {\n                continue;\n            }\n            \n            // Calculate pattern coordinates with wrapping if repeat is enabled\n            let patternStitch, patternRow;\n            \n            if (shouldRepeatHorizontal) {\n                patternStitch = ((adjustedStitch % patternStitches) + patternStitches) % patternStitches;\n            } else {\n                patternStitch = adjustedStitch;\n                if (patternStitch < 0 || patternStitch >= patternStitches) continue;\n            }\n            \n            if (shouldRepeatVertical) {\n                patternRow = ((adjustedRow % patternRows) + patternRows) % patternRows;\n            } else {\n                patternRow = adjustedRow;\n                if (patternRow < 0 || patternRow >= patternRows) continue;\n            }\n            \n            // Get color from pattern\n            const colorId = pattern.grid[patternRow][patternStitch];\n            const colorInfo = pattern.colors[colorId];\n            \n            if (colorInfo && colorInfo.color) {\n                grid[row][stitch] = colorInfo.color;\n            }\n        }\n    }\n};\n\nconst renderHierarchyToCanvas = (\n    ctx,\n    trap, \n    scale, \n    xOffset = 0, \n    yOffset = 0, \n    dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 }, \n    fillColor,\n    patternLayers = [],\n    gauge = null\n) => {\n    // Calculate dimensions first\n    calculateTrapezoidDimensions(trap, scale, xOffset, yOffset, dimensions);\n\n    // Render as unified shape with centered pattern\n    renderUnifiedShapeToCanvas(ctx, trap, scale, xOffset, yOffset, fillColor, patternLayers, gauge);\n};\n\nconst calculateTrapezoidDimensions = (trap, scale, xOffset = 0, yOffset = 0, dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 }) => {\n    const trapWidth = Math.max(trap.baseA, trap.baseB) * scale;\n\n    // Compute bounding box of the current trapezoid\n    const xTopLeft = xOffset + (trapWidth - trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n    const xTopRight = xOffset + (trapWidth + trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n    const xBottomLeft = xOffset + (trapWidth - trap.baseA * scale) / 2;\n    const xBottomRight = xOffset + (trapWidth + trap.baseA * scale) / 2;\n    const yTop = yOffset;\n    const yBottom = yOffset + trap.height * scale;\n\n    // Update dimensions\n    dimensions.minX = Math.min(dimensions.minX, xTopLeft, xTopRight, xBottomLeft, xBottomRight);\n    dimensions.maxX = Math.max(dimensions.maxX, xTopLeft, xTopRight, xBottomLeft, xBottomRight);\n    dimensions.minY = Math.min(dimensions.minY, yTop, yBottom);\n    dimensions.maxY = Math.max(dimensions.maxY, yTop, yBottom);\n\n    if (trap.successors && trap.successors.length > 0) {\n        // Compute total width of all successors\n        const successorWidths = trap.successors.map((s: any) => Math.max(s.baseA, s.baseB) * scale);\n        const totalSuccessorWidth = successorWidths.reduce((sum, w) => sum + w, 0);\n\n        // Compute initial offset to center the row\n        let childXOffset = xOffset + (trapWidth - totalSuccessorWidth) / 2;\n\n        // Reverse the order of successors before rendering\n        for (let i = trap.successors.length - 1; i >= 0; i--) {\n            const successor = trap.successors[i];\n            const successorWidth = successorWidths[i];\n\n            // Place each successor ABOVE the parent\n            calculateTrapezoidDimensions(\n                successor, \n                scale, \n                childXOffset, \n                yTop - successor.height * scale, \n                dimensions\n            );\n\n            // Move x-offset for the next successor\n            childXOffset += successorWidth;\n        }\n    }\n};\n\nconst ColorworkPanelDiagram = ({ \n    shape, \n    patternLayers = [], // Array of pattern layer objects\n    gauge = null,\n    label = '', \n    size = 200, \n    padding = 10,\n    showPatterns = true \n}) => {\n    const { token } = theme.useToken();\n    const fillColor = token.colorPrimary;\n    const canvasRef = useRef(null);\n\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        if (!canvas || !shape) return;\n\n        const ctx = canvas.getContext('2d');\n        const devicePixelRatio = window.devicePixelRatio || 1;\n        \n        // Set canvas size with device pixel ratio for crisp rendering\n        canvas.width = size * devicePixelRatio;\n        canvas.height = size * devicePixelRatio;\n        canvas.style.width = `${size}px`;\n        canvas.style.height = `${size}px`;\n        \n        // Scale context for device pixel ratio\n        ctx.scale(devicePixelRatio, devicePixelRatio);\n        \n        // Clear canvas\n        ctx.clearRect(0, 0, size, size);\n\n        let dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 };\n\n        // First pass: Compute bounding box (dummy render to calculate dimensions)\n        const tempCanvas = document.createElement('canvas');\n        const tempCtx = tempCanvas.getContext('2d');\n        renderHierarchyToCanvas(tempCtx, shape, 1, 0, 0, dimensions, fillColor);\n\n        const width = dimensions.maxX - dimensions.minX;\n        const height = dimensions.maxY - dimensions.minY;\n\n        // Calculate scale factor\n        const availableWidth = size - 2 * padding;\n        const availableHeight = size - 2 * padding;\n        const scaleFactor = Math.min(availableWidth / width, availableHeight / height);\n\n        // Calculate scaled dimensions and translation\n        const scaledWidth = width * scaleFactor;\n        const scaledHeight = height * scaleFactor;\n\n        // Adjust translation to account for negative minX and minY\n        const translateX = (size - scaledWidth) / 2 - dimensions.minX * scaleFactor + padding;\n        const translateY = (size - scaledHeight) / 2 - dimensions.minY * scaleFactor + padding;\n\n        // Second pass: Render with the calculated scale and translation\n        ctx.save();\n        ctx.translate(translateX, translateY);\n        \n        dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 };\n        renderHierarchyToCanvas(\n            ctx,\n            shape, \n            scaleFactor, \n            0, \n            0, \n            dimensions, \n            fillColor,\n            showPatterns ? patternLayers : [],\n            gauge\n        );\n        \n        ctx.restore();\n        \n    }, [shape, patternLayers, gauge, size, padding, showPatterns, fillColor]);\n\n    return (\n        <div style={{ width: size + padding * 2, height: size + padding * 3, float: 'left' }}>\n            <canvas\n                ref={canvasRef}\n                style={{\n                    border: '1px solid #d9d9d9',\n                    borderRadius: '6px',\n                    backgroundColor: '#fafafa'\n                }}\n            />\n            {label && <div style={{ textAlign: 'center', marginTop: 4, fontSize: '12px' }}>{label}</div>}\n        </div>\n    );\n};\n\nexport { ColorworkPanelDiagram };\n","import React, { useState, useEffect, forwardRef, useImperativeHandle, useMemo, useRef } from 'react';\nimport { Button, Space, Typography } from 'antd';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ColorworkPattern } from '../models/ColorworkPattern';\nimport { CombinedPattern, PanelColorworkComposer } from '../models/PanelColorworkComposer';\nimport { CombinedInstruction, InstructionGenerator } from '../models/InstructionGenerator';\nimport { Trapezoid } from '../models/Trapezoid';\nimport { Panel } from '../models/Panel';\nimport { Gauge } from '../models/Gauge';\nimport { updatePanelPatternLayers } from '../store/knittingDesignSlice';\nimport ColorworkCanvasEditor from './ColorworkCanvasEditor';\nimport InteractiveKnittingView from './InteractiveKnittingView';\nimport { ColorworkPanelDiagram } from './ColorworkPanelDiagram';\nimport './ColorworkPanelEditor.css';\n\nconst { Text } = Typography;\n\ntype StageType = 'settings' | 'knitting';\n\nexport interface ColorworkPanelEditorHandle {\n    startKnitting: () => void;\n}\n\ninterface PanelLike {\n    shape?: Trapezoid | unknown;\n    gauge?: Gauge;\n    sizeModifier?: number;\n}\n\ninterface ProjectLike {\n    id?: string;\n    panelShape?: unknown;\n}\n\ninterface ColorworkPanelEditorProps {\n    initialPanel?: PanelLike | null;\n    initialColorwork?: ColorworkPattern | null;\n    project?: ProjectLike | null;\n    previewKey?: string | null;\n    allSelectedPanelKeys?: string[];\n    stage?: StageType;\n    onStageChange?: (nextStage: StageType) => void;\n    getPanelLabel?: (panelKey: string) => string;\n    onRequestPreviewKeyChange?: (panelKey: string | null) => void;\n}\n\ninterface PanelConfig {\n    shape: Trapezoid | null;\n    gauge: Gauge;\n    sizeModifier: number;\n}\n\ninterface CombinationSettings {\n    stretchMode: 'repeat' | 'stretch' | 'center';\n    alignmentMode: 'center' | 'left' | 'right';\n    instructionFormat: string;\n}\n\ninterface KnittingProgress {\n    currentRow: number;\n    completedRows: number[];\n    currentSection: number;\n}\n\ntype PatternLayer = {\n    id: string | number;\n    name: string;\n    pattern: ColorworkPattern;\n    patternType: string;\n    patternConfig?: any;\n    priority?: number;\n    settings?: any;\n};\n\ninterface PanelSnapshot {\n    panelKey: string;\n    label: string;\n    layers: PatternLayer[];\n    gauge: { stitchesPerFourInches: number; rowsPerFourInches: number; scalingFactor?: number } | null;\n    shape: any;\n    timestamp: number;\n}\n\n/**\n * ColorworkPanelEditor - Main component for combining panels with colorwork\n * Now supports two-stage workflow: Settings/Preview -> Interactive Knitting\n */\nconst ColorworkPanelEditor = forwardRef<ColorworkPanelEditorHandle, ColorworkPanelEditorProps>((props, ref) => {\n    const {\n        initialPanel = null,\n        initialColorwork = null,\n        project = null,\n        previewKey = null,\n        allSelectedPanelKeys = [],\n        stage,\n        onStageChange,\n        getPanelLabel,\n        onRequestPreviewKeyChange\n    } = props;\n    const dispatch = useDispatch();\n\n    const [capturedPanels, setCapturedPanels] = useState<PanelSnapshot[]>([]);\n    const lastAppliedLayersRef = useRef<PatternLayer[] | null>(null);\n    const templateLayersRef = useRef<PatternLayer[] | null>(null);\n    const prevPreviewKeyRef = useRef<string | null>(previewKey ?? null);\n    \n    // Workflow state: allow controlled via prop, fallback to internal state\n    const [internalStage, setInternalStage] = useState<StageType>('settings');\n    const currentStage: StageType = stage ?? internalStage;\n    \n    // Progress tracking for interactive knitting\n    const [knittingProgress, setKnittingProgress] = useState<KnittingProgress>({\n        currentRow: 0,\n        completedRows: [],\n        currentSection: 0\n    });\n\n    // State for panel configuration\n    const [panelConfig, setPanelConfig] = useState<PanelConfig>(() => {\n        // Use project.panelShape directly since that's where the garment shape data is stored\n        const shape = convertToTrapezoid(project?.panelShape || initialPanel?.shape) || createDefaultShape();\n        \n        return {\n            shape: shape,\n            gauge: initialPanel?.gauge || new Gauge(19, 30),\n            sizeModifier: initialPanel?.sizeModifier || 1\n        };\n    });\n\n    // State for colorwork pattern (base layer); layers/editor may augment this\n    const colorworkPattern = useMemo<ColorworkPattern>(() => initialColorwork || createDefaultColorwork(), [initialColorwork]);\n\n    // Derive colors from global colorworkGrid Redux slice for consistency across apps\n    // Falls back to a single soft gray if slice is unavailable\n    const reduxColorsMap = useSelector((state: any) => state?.colorworkGrid?.colors);\n    const patternColors = useMemo(() => {\n        const colorsArray = reduxColorsMap ? Object.values(reduxColorsMap) : null;\n        if (colorsArray && colorsArray.length > 0) {\n            return colorsArray.map((c: any) => c.color);\n        }\n        return ['#cfcfcf'];\n    }, [reduxColorsMap]);\n\n    const currentPanelIndex = useMemo(() => {\n        if (!previewKey) return -1;\n        return allSelectedPanelKeys.findIndex((key) => key === previewKey);\n    }, [previewKey, allSelectedPanelKeys]);\n\n    const hasNextPanel = currentPanelIndex > -1 && currentPanelIndex < allSelectedPanelKeys.length - 1;\n    const nextPanelKey = hasNextPanel ? allSelectedPanelKeys[currentPanelIndex + 1] : null;\n\n    const currentPanelLabel = useMemo(() => {\n        if (!previewKey) return '';\n        if (getPanelLabel) {\n            return getPanelLabel(previewKey) || previewKey;\n        }\n        return previewKey;\n    }, [previewKey, getPanelLabel]);\n\n    const currentPanelPosition = currentPanelIndex >= 0 ? currentPanelIndex + 1 : 0;\n\n    const defaultGaugeSnapshot = useMemo(() => {\n        if (!panelConfig.gauge) return null;\n        const gaugeAny = panelConfig.gauge as any;\n        return {\n            stitchesPerFourInches: typeof gaugeAny?.stitchesPerFourInches === 'number'\n                ? gaugeAny.stitchesPerFourInches\n                : panelConfig.gauge.getStitchesPerInch() * 4,\n            rowsPerFourInches: typeof gaugeAny?.rowsPerFourInches === 'number'\n                ? gaugeAny.rowsPerFourInches\n                : panelConfig.gauge.getRowsPerInch() * 4,\n            scalingFactor: typeof gaugeAny?.scalingFactor === 'number' ? gaugeAny.scalingFactor : 1\n        };\n    }, [panelConfig.gauge]);\n\n    // Get pattern layers from Redux, keyed by previewKey (panel identifier)\n    const reduxPatternLayers = useSelector((state: any) => {\n        if (!previewKey) return null;\n        return state?.knittingDesign?.patternData?.panels?.patternLayers?.[previewKey];\n    }) as PatternLayer[] | null;\n\n    // Initialize pattern layers from Redux or use default\n    const getDefaultPatternLayers = (): PatternLayer[] => {\n        const defaultSolid = new ColorworkPattern(\n            0, 0,\n            [\n                [0, 0, 0, 0],\n                [0, 0, 0, 0],\n                [0, 0, 0, 0],\n                [0, 0, 0, 0]\n            ],\n            { 0: { id: 0, label: 'Color 1', color: '#cfcfcf' } },\n            { width: 4, height: 4 }\n        );\n        return [\n            {\n                id: 1,\n                name: 'Base Pattern',\n                pattern: defaultSolid,\n                patternType: 'solid',\n                patternConfig: { colors: [{ color: '#cfcfcf' }] },\n                priority: 1,\n                settings: {\n                    repeatMode: 'both',\n                    repeatCountX: 0, // 0 means infinite\n                    repeatCountY: 0, // 0 means infinite\n                    offsetHorizontal: 0,\n                    offsetVertical: 0,\n                    colorMapping: {}\n                }\n            }\n        ];\n    };\n\n    // Pattern layers state - use Redux if available, otherwise local state\n    const [patternLayers, setPatternLayersLocal] = useState<PatternLayer[]>(() => {\n        return reduxPatternLayers || getDefaultPatternLayers();\n    });\n    \n    // Update pattern layers function that syncs to Redux\n    const setPatternLayers = (nextLayers: PatternLayer[] | ((currentLayers: PatternLayer[]) => PatternLayer[])) => {\n        setPatternLayersLocal((currentLayers) => {\n            const resolvedLayers = typeof nextLayers === 'function' ? nextLayers(currentLayers) : nextLayers;\n\n            if (previewKey) {\n                dispatch(updatePanelPatternLayers({ panelKey: previewKey, layers: resolvedLayers }));\n            }\n\n            return resolvedLayers;\n        });\n    };\n    \n    // Sync from Redux when previewKey or reduxPatternLayers change\n    useEffect(() => {\n        if (!previewKey) {\n            prevPreviewKeyRef.current = null;\n            return;\n        }\n\n        if (reduxPatternLayers) {\n            setPatternLayersLocal(reduxPatternLayers);\n            lastAppliedLayersRef.current = clonePatternLayersForDispatch(reduxPatternLayers);\n            templateLayersRef.current = null;\n        } else if (previewKey !== prevPreviewKeyRef.current) {\n            const sourceLayers = templateLayersRef.current || lastAppliedLayersRef.current;\n            const fallbackLayers = sourceLayers && Array.isArray(sourceLayers)\n                ? clonePatternLayersForDispatch(sourceLayers)\n                : getDefaultPatternLayers();\n            setPatternLayers(fallbackLayers);\n            templateLayersRef.current = null;\n        }\n\n        prevPreviewKeyRef.current = previewKey;\n    }, [previewKey, reduxPatternLayers]);\n\n    useEffect(() => {\n        lastAppliedLayersRef.current = clonePatternLayersForDispatch(patternLayers);\n    }, [patternLayers]);\n\n    // State for combination settings (stable identity)\n    const combinationSettings = useMemo<CombinationSettings>(() => ({\n        stretchMode: 'repeat',\n        alignmentMode: 'center',\n        instructionFormat: 'compact'\n    }), []);\n\n    // State for the combined result\n    const [combinedPattern, setCombinedPattern] = useState<CombinedPattern | null>(null);\n    const [instructions, setInstructions] = useState<CombinedInstruction[]>([]);\n\n    // Composers and generators\n    const [composer] = useState(new PanelColorworkComposer());\n    const [instructionGenerator] = useState(new InstructionGenerator());\n\n    // Generate combined pattern when settings change (make this synchronous and fast)\n    useEffect(() => {\n        generateCombinedPattern();\n    }, [panelConfig, colorworkPattern, combinationSettings, patternColors]);\n\n    // When project or initialPanel changes, update panel configuration\n    useEffect(() => {\n        const shape = convertToTrapezoid(project?.panelShape || initialPanel?.shape) || createDefaultShape();\n        setPanelConfig(prev => ({\n            ...prev,\n            shape,\n            gauge: initialPanel?.gauge || prev.gauge,\n            sizeModifier: initialPanel?.sizeModifier || prev.sizeModifier\n        }));\n    }, [project?.id, initialPanel?.gauge, initialPanel?.shape, initialPanel?.sizeModifier]);\n\n    const generateCombinedPattern = () => {\n        if (!panelConfig.shape || !colorworkPattern) {\n            return;\n        }\n        try {\n            // Convert patternColors array to colors object format\n            const colorsObject: Record<number, { id: number; label: string; color: string }> = {};\n            patternColors.forEach((color, index: number) => {\n                colorsObject[index] = {\n                    id: index,\n                    label: `Color ${index + 1}`,\n                    color: color\n                };\n            });\n\n            // Update pattern colors\n            const updatedPattern = new ColorworkPattern(\n                0, 0,\n                colorworkPattern.grid,\n                colorsObject,\n                {\n                    width: colorworkPattern.metadata?.width || colorworkPattern.getStitchCount?.() || 8,\n                    height: colorworkPattern.metadata?.height || colorworkPattern.getRowCount?.() || 8\n                }\n            );\n\n            const panel = new Panel(panelConfig.shape, panelConfig.gauge, panelConfig.sizeModifier);\n            const combined = composer.combinePatterns(panel, updatedPattern, combinationSettings);\n            const generatedInstructions = instructionGenerator.generateInstructions(\n                combined,\n                combinationSettings.instructionFormat\n            ) as CombinedInstruction[];\n\n            setCombinedPattern(combined);\n            setInstructions(generatedInstructions);\n        } catch (error: unknown) {\n            console.error('Error generating combined pattern:', error);\n        }\n    };\n\n    const handlePanelConfigChange = <K extends keyof PanelConfig>(key: K, value: PanelConfig[K]) => {\n        setPanelConfig(prev => ({\n            ...prev,\n            [key]: value\n        }));\n    };\n\n    // Workflow transition functions\n    const setStage = (next: StageType) => {\n        if (onStageChange) onStageChange(next);\n        if (stage === undefined) setInternalStage(next);\n    };\n\n    const handleStartKnitting = () => {\n        setStage('knitting');\n        setKnittingProgress({\n            currentRow: 0,\n            completedRows: [],\n            currentSection: 0\n        });\n    };\n\n    // Expose methods to parent component\n    useImperativeHandle(ref, () => ({\n        startKnitting: handleStartKnitting\n    }));\n\n    const handleBackToSettings = () => {\n        setStage('settings');\n    };\n\n    const handleRowComplete = (rowIndex: number) => {\n        setKnittingProgress(prev => ({\n            ...prev,\n            currentRow: Math.min(rowIndex + 1, instructions.length - 1),\n            completedRows: [...prev.completedRows, rowIndex]\n        }));\n    };\n\n    const captureCurrentPanel = (layersOverride?: PatternLayer[]) => {\n        if (!previewKey) {\n            return;\n        }\n\n        const clonedLayers = clonePatternLayersForDispatch(layersOverride && Array.isArray(layersOverride) ? layersOverride : patternLayers);\n        const gaugeAny = panelConfig.gauge as any;\n        const gaugeSnapshot = panelConfig.gauge\n            ? {\n                stitchesPerFourInches: typeof gaugeAny?.stitchesPerFourInches === 'number'\n                    ? gaugeAny.stitchesPerFourInches\n                    : panelConfig.gauge.getStitchesPerInch() * 4,\n                rowsPerFourInches: typeof gaugeAny?.rowsPerFourInches === 'number'\n                    ? gaugeAny.rowsPerFourInches\n                    : panelConfig.gauge.getRowsPerInch() * 4,\n                scalingFactor: typeof gaugeAny?.scalingFactor === 'number' ? gaugeAny.scalingFactor : 1\n            }\n            : null;\n        const shapeSnapshot = panelConfig.shape && typeof (panelConfig.shape as any)?.toJSON === 'function'\n            ? (panelConfig.shape as any).toJSON()\n            : panelConfig.shape;\n        const label = currentPanelLabel || previewKey;\n\n        setCapturedPanels((prev) => {\n            const filtered = prev.filter((snapshot) => snapshot.panelKey !== previewKey);\n            const nextSnapshots = [\n                ...filtered,\n                {\n                    panelKey: previewKey,\n                    label,\n                    layers: clonedLayers,\n                    gauge: gaugeSnapshot,\n                    shape: shapeSnapshot,\n                    timestamp: Date.now()\n                }\n            ];\n\n            return nextSnapshots.sort((a, b) => {\n                const indexA = allSelectedPanelKeys.indexOf(a.panelKey);\n                const indexB = allSelectedPanelKeys.indexOf(b.panelKey);\n                const safeIndexA = indexA === -1 ? Number.MAX_SAFE_INTEGER : indexA;\n                const safeIndexB = indexB === -1 ? Number.MAX_SAFE_INTEGER : indexB;\n                if (safeIndexA === safeIndexB) {\n                    return a.timestamp - b.timestamp;\n                }\n                return safeIndexA - safeIndexB;\n            });\n        });\n    };\n\n    const handleNextPanel = () => {\n        if (!previewKey) {\n            return;\n        }\n\n        const template = clonePatternLayersForDispatch(patternLayers);\n        templateLayersRef.current = template;\n        captureCurrentPanel(template);\n\n        if (hasNextPanel && nextPanelKey) {\n            onRequestPreviewKeyChange?.(nextPanelKey);\n        } else {\n            templateLayersRef.current = null;\n        }\n    };\n\n    // Render functions for different stages\n    const renderSettingsView = () => (\n        <div className=\"colorwork-settings-view\">\n            {capturedPanels.length > 0 && (\n                <div style={{ marginBottom: 16 }}>\n                    <Text strong style={{ display: 'block', marginBottom: 8 }}>Captured panels</Text>\n                    <Space size={16} wrap>\n                        {capturedPanels.map((snapshot) => {\n                            const hydratedShape = snapshot.shape instanceof Trapezoid\n                                ? snapshot.shape\n                                : (snapshot.shape ? Trapezoid.fromObject(snapshot.shape) : null);\n                            const snapshotGauge = snapshot.gauge || defaultGaugeSnapshot;\n                            return hydratedShape ? (\n                                <ColorworkPanelDiagram\n                                    key={snapshot.panelKey}\n                                    shape={hydratedShape as any}\n                                    patternLayers={snapshot.layers as any}\n                                    gauge={snapshotGauge as any}\n                                    label={snapshot.label}\n                                    size={140}\n                                    padding={8}\n                                />\n                            ) : null;\n                        })}\n                    </Space>\n                </div>\n            )}\n\n            <div style={{\n                marginBottom: 16,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                flexWrap: 'wrap',\n                gap: 12\n            }}>\n                <Text strong>\n                    {currentPanelLabel\n                        ? `Editing ${currentPanelLabel}${allSelectedPanelKeys.length > 1 ? ` (${currentPanelPosition} of ${allSelectedPanelKeys.length})` : ''}`\n                        : 'Select a panel to edit'}\n                </Text>\n                <Space>\n                    {!hasNextPanel && previewKey && (\n                        <Text type=\"secondary\">All selected panels captured</Text>\n                    )}\n                    <Button\n                        type=\"primary\"\n                        onClick={handleNextPanel}\n                        disabled={!previewKey}\n                    >\n                        {hasNextPanel ? 'Save & Next Panel' : 'Save Panel'}\n                    </Button>\n                </Space>\n            </div>\n\n            <ColorworkCanvasEditor\n                shape={panelConfig.shape as any}\n                patternLayers={patternLayers as any}\n                gauge={panelConfig.gauge as any}\n                onLayersChange={(nextLayers: any) => setPatternLayers(nextLayers)}\n                onGaugeChange={(newGauge: Gauge) => handlePanelConfigChange('gauge', newGauge)}\n            />\n        </div>\n    );\n\n    const renderKnittingView = () => (\n        <InteractiveKnittingView\n            combinedPattern={combinedPattern as any}\n            instructions={instructions as any}\n            knittingProgress={knittingProgress}\n            onRowComplete={handleRowComplete}\n            onBackToSettings={handleBackToSettings}\n        />\n    );\n\n    return (\n        <div className=\"colorwork-panel-editor\">\n            {currentStage === 'settings' && renderSettingsView()}\n            {currentStage === 'knitting' && renderKnittingView()}\n        </div>\n    );\n});\n\n// Helper functions\nfunction convertToTrapezoid(shape: unknown): Trapezoid | null {\n    if (!shape) return null;\n    if (shape instanceof Trapezoid) return shape;\n\n    // Convert plain object to Trapezoid - preserving the complex structure\n    if (typeof shape === 'object') {\n        // Handle garment shapes from garments.js - convert to proper Trapezoid instances\n        // while preserving the successor structure\n        const convertShapeRecursively = (shapeData: any): Trapezoid | null => {\n            if (!shapeData) return null;\n            \n            const height = shapeData.height || 0;\n            const baseA = shapeData.baseA || 0;\n            const baseB = shapeData.baseB || 0;\n            const offset = shapeData.baseBHorizontalOffset || 0;\n            const finishingSteps = shapeData.finishingSteps || [];\n            \n            // Convert successors recursively\n            const successors: Trapezoid[] = [];\n            if (shapeData.successors && Array.isArray(shapeData.successors)) {\n                shapeData.successors.forEach((successor: any) => {\n                    const convertedSuccessor = convertShapeRecursively(successor);\n                    if (convertedSuccessor) {\n                        successors.push(convertedSuccessor);\n                    }\n                });\n            }\n            \n            return new Trapezoid(height, baseA, baseB, offset, successors, finishingSteps);\n        };\n        \n        return convertShapeRecursively(shape);\n    }\n    return null;\n}\n\nfunction createDefaultShape(): Trapezoid {\n    return new Trapezoid(40, 20, 30, 0);  // height=40, baseA=20, baseB=30, offset=0\n}\n\nfunction createDefaultColorwork(): ColorworkPattern {\n    return new ColorworkPattern(\n        0, 0,\n        [\n            [0, 1, 0, 1, 0, 1, 0, 1],\n            [1, 0, 1, 0, 1, 0, 1, 0],\n            [0, 1, 0, 1, 0, 1, 0, 1],\n            [1, 0, 1, 0, 1, 0, 1, 0],\n            [0, 1, 0, 1, 0, 1, 0, 1],\n            [1, 0, 1, 0, 1, 0, 1, 0],\n            [0, 1, 0, 1, 0, 1, 0, 1],\n            [1, 0, 1, 0, 1, 0, 1, 0]\n        ],\n        { 0: { id: 0, label: 'Color 1', color: '#ffffff' }, 1: { id: 1, label: 'Color 2', color: '#000000' } },\n        { width: 8, height: 8 }\n    );\n}\n\nfunction clonePatternLayersForDispatch(layers: PatternLayer[] | null | undefined): PatternLayer[] {\n    if (!Array.isArray(layers)) {\n        return [];\n    }\n\n    return layers.map((layer) => {\n        const pattern = layer?.pattern;\n        let clonedPattern = pattern;\n\n        if (pattern instanceof ColorworkPattern) {\n            clonedPattern = ColorworkPattern.fromJSON(pattern.toJSON());\n        } else if (pattern && typeof pattern === 'object' && 'grid' in pattern) {\n            clonedPattern = ColorworkPattern.fromJSON(pattern);\n        }\n\n        return {\n            ...layer,\n            pattern: clonedPattern,\n            patternConfig: clonePlainObject(layer?.patternConfig),\n            settings: clonePlainObject(layer?.settings)\n        };\n    });\n}\n\nfunction clonePlainObject<T>(value: T): T {\n    if (value === null || value === undefined) {\n        return value;\n    }\n    try {\n        return JSON.parse(JSON.stringify(value)) as T;\n    } catch (error) {\n        console.warn('Failed to clone value, returning original reference', error);\n        return value;\n    }\n}\n\nexport default ColorworkPanelEditor;\n","import { theme } from 'antd'; // Import theme from antd\n\n// Slightly darken an rgb hex color by a factor (0-1) where 0.5 is half brightness\nconst darkenHex = (hex, factor = 0.7) => {\n    if (!hex) return hex;\n    let h = hex.replace('#', '');\n    if (h.length === 3) h = h.split('').map((c: any) => c + c).join('');\n    const r = Math.max(0, Math.min(255, Math.floor(parseInt(h.slice(0,2),16) * factor)));\n    const g = Math.max(0, Math.min(255, Math.floor(parseInt(h.slice(2,4),16) * factor)));\n    const b = Math.max(0, Math.min(255, Math.floor(parseInt(h.slice(4,6),16) * factor)));\n    return `#${r.toString(16).padStart(2,'0')}${g.toString(16).padStart(2,'0')}${b.toString(16).padStart(2,'0')}`;\n};\n\n// --- Short-row helpers ---\n// Synthesize a trapezoid shape for a short-row section\n// section: { id, posX (0..1 center), posY (0..1 anchor between parent top/bottom), width (inches), height (inches), label }\nconst makeShortRowTrap = (parent, section = {}) => {\n    // Short row dimensions are specified in the same units (inches) as parent trapezoids.\n    // Short rows can specify a start/end base and a pivot base separately so the overlay\n    // can represent the mirrored pocket: `baseStart` (start/end base) and `basePivot` (turn/short-row base).\n    const width = typeof section.width === 'number' ? section.width : Math.max(1, (parent.baseA || 10) * 0.25);\n    const height = typeof section.height === 'number' ? section.height : Math.max(0.5, (parent.height || 10) * 0.15);\n\n    // Determine the two bases. If the short-row section explicitly provides bases, use them.\n    const shortBaseStart = Math.max(0, typeof section.baseStart === 'number' ? section.baseStart : width);\n    const shortBasePivot = Math.max(0, typeof section.basePivot === 'number' ? section.basePivot : width);\n\n    return {\n        id: section.id || `sr-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,\n        label: section.label || null,\n        // follow the trapezoid convention: baseA = bottom (start/end), baseB = top (pivot)\n        baseA: shortBaseStart,\n        baseB: shortBasePivot,\n        baseBHorizontalOffset: 0,\n        height: height,\n        successors: [],\n        isHem: false,\n        shortRows: []\n    };\n};\n\n// Compute offsets (xOffset, yOffset) where the synthesized shortTrap should be rendered\n// All units are in the same coordinate space used by renderHierarchy (i.e., scale applied externally)\nconst computeShortRowOffsets = (parent, shortTrap, section = {}, scale = 1, parentXOffset = 0, parentYOffset = 0) => {\n    const posX = Math.max(0, Math.min(1, typeof section.posX === 'number' ? section.posX : 0.5));\n    let posY = Math.max(0, Math.min(1, typeof section.posY === 'number' ? section.posY : 0));\n\n    // If the parent is a hem (folded in half), map posY so that the folded geometry\n    // treats 0 and 1 as the top of the folded hem and 0.5 as the bottom. This creates\n    // the mirror behavior: positions near the edges map to the top of the folded layer,\n    // while the center maps to the outer bottom.\n    if (parent.isHem) {\n        // posYMapped ranges 0..1 where 0 => top, 1 => bottom. We want posY=0 or 1 -> top (0), posY=0.5 -> bottom (1).\n        const distFromCenter = Math.abs(posY - 0.5);\n        const mapped = 1 - (distFromCenter * 2);\n        // clamp just in case\n        posY = Math.max(0, Math.min(1, mapped));\n    }\n\n    // Compute parent's top/bottom x coords for interpolation\n    const trapWidth = Math.max(parent.baseA, parent.baseB) * scale;\n    const xTopLeft = parentXOffset + (trapWidth - parent.baseB * scale) / 2 + (parent.baseBHorizontalOffset || 0) * scale;\n    const xTopRight = parentXOffset + (trapWidth + parent.baseB * scale) / 2 + (parent.baseBHorizontalOffset || 0) * scale;\n    const xBottomLeft = parentXOffset + (trapWidth - parent.baseA * scale) / 2;\n    const xBottomRight = parentXOffset + (trapWidth + parent.baseA * scale) / 2;\n\n    const lerp = (a, b, t) => a + (b - a) * t;\n\n    // interpolate left/right at anchor vertical position\n    const leftAt = lerp(xTopLeft, xBottomLeft, posY);\n    const rightAt = lerp(xTopRight, xBottomRight, posY);\n    const widthAt = rightAt - leftAt;\n\n    // choose center based on posX across the slice\n    const centerX = leftAt + widthAt * posX;\n\n    // Compute the width used in rendering (consistent with renderShortTrap): the overall\n    // container width is the max of top/bottom bases.\n    const shortContainerWidth = Math.max(shortTrap.baseA, shortTrap.baseB) * scale;\n\n    // The top midpoint (pivot) position relative to xOffset is at: xOffset + shortContainerWidth/2 + baseBHorizontalOffset\n    const baseBOffset = (shortTrap.baseBHorizontalOffset || 0) * scale;\n    const childXOffset = centerX - (shortContainerWidth / 2 + baseBOffset);\n\n    // vertical: anchor at the slice y coordinate\n    const parentEffectiveHeight = (parent.isHem ? parent.height * 0.5 : parent.height) * scale;\n    const parentTopY = parentYOffset;\n    const parentBottomY = parentYOffset + parentEffectiveHeight;\n    const anchorY = parentTopY + (parentBottomY - parentTopY) * posY;\n\n    // For the inverted short-row overlay we want it to \"hang out the back\" below the anchor.\n    // To shift the rendered trapezoid down by its own height (so it hangs beneath the anchor),\n    // set the y-offset such that the bottom of the inverted shape sits at the anchor.\n    // In renderShortTrap we render yBottom = yOffset and yTop = yOffset + trap.height*scale.\n    // Setting childYOffset = anchorY makes the bottom coincide with the anchor and the\n    // visible trapezoid extend below by its height.\n    const childYOffset = anchorY;\n\n    return { childXOffset, childYOffset, anchorX: centerX, anchorY };\n};\n\n// Render a short-row trapezoid overlay with reduced opacity\nconst renderShortTrap = (trap, scale, xOffset = 0, yOffset = 0, fillColor) => {\n    const width = Math.max(trap.baseA, trap.baseB) * scale;\n    const xTopLeft = xOffset + (width - trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n    const xTopRight = xOffset + (width + trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n    const xBottomLeft = xOffset + (width - trap.baseA * scale) / 2;\n    const xBottomRight = xOffset + (width + trap.baseA * scale) / 2;\n    // Render inverted: top is below bottom so swap yTop/yBottom to flip vertically\n    const yTop = yOffset + trap.height * scale; // visually the top is lower when inverted\n    const yBottom = yOffset;\n\n    const fillToUse = darkenHex(fillColor, 0.7);\n\n    return (\n        <g key={trap.id || `${xOffset}-${yOffset}`}> \n            <polygon\n                points={`${xTopLeft},${yTop} ${xTopRight},${yTop} ${xBottomRight},${yBottom} ${xBottomLeft},${yBottom}`}\n                fill={fillToUse}\n                fillOpacity={0.65}\n                stroke={'#666'}\n                strokeWidth={1}\n                strokeLinejoin=\"round\"\n                data-shortrow-id={trap.id}\n            />\n        </g>\n    );\n};\n\n\nconst renderTrapezoid = (trap, scale, xOffset = 0, yOffset = 0, fillColor, selectedId, onSelect) => {\n    const shape = trap;\n    const effectiveHeight = (shape.isHem ? (shape.height * 0.5) : shape.height) * scale;\n    const width = Math.max(shape.baseA, shape.baseB) * scale;\n    const xTopLeft = xOffset + (width - shape.baseB * scale) / 2 + (shape.baseBHorizontalOffset || 0) * scale;\n    const xTopRight = xOffset + (width + shape.baseB * scale) / 2 + (shape.baseBHorizontalOffset || 0) * scale;\n    const xBottomLeft = xOffset + (width - shape.baseA * scale) / 2;\n    const xBottomRight = xOffset + (width + shape.baseA * scale) / 2;\n    const yTop = yOffset;\n    const yBottom = yOffset + effectiveHeight;\n    const isSelected = selectedId && trap.id && trap.id === selectedId;\n    const centerX = (xTopLeft + xTopRight + xBottomLeft + xBottomRight) / 4;\n    const centerY = (yTop + yBottom) / 2;\n\n    // If this is a hem, darken the fill color to visually distinguish it\n    const fillToUse = shape.isHem ? darkenHex(fillColor, 0.6) : fillColor;\n\n    return (\n        <g key={trap.id || `${xOffset}-${yOffset}`}>\n            <polygon\n                points={`${xTopLeft},${yTop} ${xTopRight},${yTop} ${xBottomRight},${yBottom} ${xBottomLeft},${yBottom}`}\n                fill={fillToUse}\n                fillOpacity={isSelected ? 0.95 : 0.85}\n                stroke={isSelected ? '#1677ff' : '#a1a8af'}\n                strokeWidth={isSelected ? 4 : 3}\n                strokeLinejoin=\"round\"\n                style={{ cursor: onSelect ? 'pointer' : 'default' }}\n                onClick={onSelect ? () => onSelect(trap.id) : undefined}\n                data-trapezoid-id={trap.id}\n                role={onSelect ? 'button' : undefined}\n                tabIndex={onSelect ? 0 : undefined}\n            />\n            {trap.label ? (\n                <text\n                    x={centerX}\n                    y={centerY}\n                    textAnchor=\"middle\"\n                    dominantBaseline=\"central\"\n                    style={{ pointerEvents: 'none', fontWeight: 700, fontSize: '24px' }}\n                    fill=\"#ffffff\"\n                    stroke=\"#000000\"\n                    strokeWidth={2}\n                >\n                    {trap.label}\n                </text>\n            ) : null}\n        </g>\n    );\n};\n\nconst renderHierarchy = (trap, scale, xOffset = 0, yOffset = 0, dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 }, fillColor, selectedId, onSelect, selectedShortRowId = null) => {\n    const elements = [];\n    const trapWidth = Math.max(trap.baseA, trap.baseB) * scale;\n\n    // Compute bounding box of the current trapezoid\n    const xTopLeft = xOffset + (trapWidth - trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n    const xTopRight = xOffset + (trapWidth + trap.baseB * scale) / 2 + (trap.baseBHorizontalOffset || 0) * scale;\n    const xBottomLeft = xOffset + (trapWidth - trap.baseA * scale) / 2;\n    const xBottomRight = xOffset + (trapWidth + trap.baseA * scale) / 2;\n    const yTop = yOffset;\n    // Use effective height for bounding box if this trapezoid is a hem (half height)\n    const effectiveTrapHeight = (trap.isHem ? (trap.height * 0.5) : trap.height) * scale;\n    const yBottom = yOffset + effectiveTrapHeight;\n\n    // include short-row overlays when computing bounding box: compute their actual rendered\n    // offsets and include their extents (they are inverted and hang below the anchor)\n    dimensions.minX = Math.min(dimensions.minX, xTopLeft, xTopRight, xBottomLeft, xBottomRight);\n    dimensions.maxX = Math.max(dimensions.maxX, xTopLeft, xTopRight, xBottomLeft, xBottomRight);\n    dimensions.minY = Math.min(dimensions.minY, yTop, yBottom);\n    dimensions.maxY = Math.max(dimensions.maxY, yTop, yBottom);\n    if (trap.shortRows && trap.shortRows.length) {\n        for (let s of trap.shortRows) {\n            const preview = makeShortRowTrap(trap, s);\n            const { childXOffset, childYOffset } = computeShortRowOffsets(trap, preview, s, scale, xOffset, yOffset);\n            const previewLeft = childXOffset + (Math.max(preview.baseA, preview.baseB) * scale - preview.baseB * scale) / 2;\n            const previewRight = childXOffset + (Math.max(preview.baseA, preview.baseB) * scale + preview.baseB * scale) / 2;\n            const previewTop = childYOffset + preview.height * scale; // inverted top\n            const previewBottom = childYOffset; // inverted bottom\n            dimensions.minX = Math.min(dimensions.minX, previewLeft);\n            dimensions.maxX = Math.max(dimensions.maxX, previewRight);\n            dimensions.minY = Math.min(dimensions.minY, previewBottom);\n            dimensions.maxY = Math.max(dimensions.maxY, previewTop, dimensions.maxY);\n        }\n    }\n\n    // Render the current trapezoid\n    elements.push(renderTrapezoid(trap, scale, xOffset, yOffset, fillColor, selectedId, onSelect));\n\n    // Render short-row overlays on top of this trapezoid (visual layering)\n    if (trap.shortRows && trap.shortRows.length) {\n        for (let s of trap.shortRows) {\n            const shortTrap = makeShortRowTrap(trap, s);\n            // compute offsets in the same coordinate space; also get exact anchor coordinates\n            const { childXOffset, childYOffset, anchorX, anchorY } = computeShortRowOffsets(trap, shortTrap, s, scale, xOffset, yOffset);\n            elements.push(renderShortTrap(shortTrap, scale, childXOffset, childYOffset, fillColor));\n\n            // If this short-row is selected, add a small black marker at its anchor (positioning point)\n            if (s.id && s.id === selectedShortRowId) {\n                elements.push(\n                    <g key={`marker-${s.id}`}>\n                        <circle cx={anchorX} cy={anchorY} r={4} fill=\"#000\" />\n                    </g>\n                );\n            }\n        }\n    }\n\n    if (trap.successors && trap.successors.length > 0) {\n        // Compute total width of all successors\n        const successorWidths = trap.successors.map((s: any) => Math.max(s.baseA, s.baseB) * scale);\n        const totalSuccessorWidth = successorWidths.reduce((sum, w) => sum + w, 0);\n\n        // Compute initial offset to center the row\n        let childXOffset = xOffset + (trapWidth - totalSuccessorWidth) / 2;\n\n        // Render successors left-to-right in their array order\n        for (let i = 0; i < trap.successors.length; i++) {\n            const successor = trap.successors[i];\n            const successorWidth = successorWidths[i];\n\n            // Place each successor ABOVE the parent (but now in the correct order)\n            const childDimensions = { minX: dimensions.minX, maxX: dimensions.maxX, minY: dimensions.minY, maxY: dimensions.maxY };\n            // If the successor is a hem, its effective height is half\n            const successorEffectiveHeight = (successor.isHem ? (successor.height * 0.5) : successor.height) * scale;\n            elements.push(...renderHierarchy(successor, scale, childXOffset, yTop - successorEffectiveHeight, childDimensions, fillColor, selectedId, onSelect));\n\n            // Update dimensions\n            dimensions.minX = childDimensions.minX;\n            dimensions.maxX = childDimensions.maxX;\n            dimensions.minY = childDimensions.minY;\n            dimensions.maxY = childDimensions.maxY;\n\n            // Move x-offset for the next successor\n            childXOffset += successorWidth;\n        }\n    }\n\n    return elements;\n};\n\nconst PanelDiagram = ({ shape, label = '', size = 200, padding = 10, selectedId = null, onSelect = null, selectedShortRowId = null }) => {\n    const { token } = theme.useToken(); // Get the theme token\n    const fillColor = token.colorPrimary; // Get the primary color from the theme\n\n    let dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 };\n\n    // First pass: Compute bounding box *including negative coordinates*\n    renderHierarchy(shape, 1, 0, 0, dimensions, fillColor, null, null);\n\n    const width = dimensions.maxX - dimensions.minX;\n    const height = dimensions.maxY - dimensions.minY;\n\n    // Calculate scale factor\n    const availableWidth = size - 2 * padding;\n    const availableHeight = size - 2 * padding;\n    const scaleFactor = Math.min(availableWidth / width, availableHeight / height);\n\n    // Calculate scaled dimensions and translation\n    const scaledWidth = width * scaleFactor;\n    const scaledHeight = height * scaleFactor;\n\n    // Adjust translation to account for negative minX and minY ***\n    const translateX = (size - scaledWidth) / 2 - dimensions.minX * scaleFactor + padding;\n    const translateY = (size - scaledHeight) / 2 - dimensions.minY * scaleFactor + padding;\n\n    // Second pass: Render with the calculated scale.  This isn't strictly necessary, but is good practice.\n    dimensions = { minX: 0, maxX: 0, minY: 0, maxY: 0 };\n    const elements = renderHierarchy(shape, scaleFactor, 0, 0, dimensions, fillColor, selectedId, onSelect, selectedShortRowId);\n\n    return (\n        <div style={{ }}>\n            <svg\n                width={size}\n                height={size}\n                viewBox={`0 0 ${size} ${size + 4}`}\n                preserveAspectRatio=\"none\" // Or \"xMidYMid meet\" if you want to maintain aspect ratio\n            >\n                <g transform={`translate(${translateX}, ${translateY})`}>\n                    {elements}\n                </g>\n            </svg>\n            {label}\n        </div>\n    );\n};\n\nexport { PanelDiagram };","import React, { useMemo, useState, useCallback, useEffect } from 'react';\nimport { Card, Button, InputNumber, Space, Row, Col, Typography, List, Divider } from 'antd';\nimport { Switch } from 'antd';\nimport { ArrowUpOutlined, ArrowDownOutlined, PlusOutlined, DeleteOutlined, CopyOutlined, SettingOutlined, SaveOutlined, FolderOpenOutlined } from '@ant-design/icons';\nimport { PanelDiagram } from '@/components/PanelDiagram';\nimport { useDriveAuth } from './context/DriveAuthContext';\nimport { Panel } from '@/models/Panel';\nimport { message } from 'antd';\nimport { OpenModal, SaveAsModal } from '@/components/modals';\nimport { useDropdown } from '@/components/DropdownProvider';\n\n\nconst { Text } = Typography;\n\n// Simple id generator\nconst genId = () => `trap-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n\nconst defaultTrap = () => ({\n  id: genId(),\n  height: 40,\n  baseA: 20,\n  baseB: 30,\n  baseBHorizontalOffset: 0,\n  successors: [],\n  label: null, // Will be assigned when computing labels\n  isHem: false, // Whether this trapezoid is a hem (folded) - render at half height\n  shortRows: []\n});\n\nconst defaultChild = () => ({\n  id: genId(),\n  height: 12,\n  baseA: 16,\n  baseB: 12,\n  baseBHorizontalOffset: 0,\n  successors: [],\n  label: null, // Will be assigned when computing labels\n  isHem: false,\n  shortRows: []\n});\n\nconst defaultShortRow = () => ({\n  id: `sr-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,\n  label: null,\n  posX: 0.5,\n  posY: 0.5, // centered by default\n  // height in same units as trapezoid (inches). Width is implied by bases.\n  height: 2,\n  // Optional explicit bases: start/end base and pivot (turn) base. If omitted, width is used.\n  baseStart: 5, // start base is assumed to match end base always\n  basePivot: 1 // default to 0 means the short row comes to a point\n});\n\nfunction clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction findNodeAndParent(root, id, parent = null) {\n  if (!root) return { node: null, parent: null, indexInParent: -1 };\n  if (root.id === id) return { node: root, parent, indexInParent: -1 };\n  for (let i = 0; i < (root.successors || []).length; i++) {\n    const child = root.successors[i];\n    const res = findNodeAndParent(child, id, root);\n    if (res.node) return { ...res, indexInParent: parent === root ? i : res.indexInParent };\n  }\n  return { node: null, parent: null, indexInParent: -1 };\n}\n\nfunction enumerateTrapezoids(root) {\n  // Preorder traversal to build a stable label map A, B, C...\n  const labels = {};\n  let index = 0;\n  const stack = [root];\n  const toLetter = (n) => {\n    // Excel-like letters: A, B, ..., Z, AA, AB, ... if many nodes\n    let s = '';\n    n += 1; // 1-based\n    while (n > 0) {\n      const rem = (n - 1) % 26;\n      s = String.fromCharCode(65 + rem) + s;\n      n = Math.floor((n - 1) / 26);\n    }\n    return s;\n  };\n  while (stack.length) {\n    const n = stack.pop();\n    if (!n) continue;\n    labels[n.id] = toLetter(index++);\n    // push children in reverse so natural order is left-to-right when popping\n    if (n.successors && n.successors.length) {\n      for (let i = n.successors.length - 1; i >= 0; i--) stack.push(n.successors[i]);\n    }\n  }\n  return labels;\n}\n\nfunction assignLabelsToTrapezoids(root) {\n  // Assign labels directly to trapezoid objects\n  const labels = enumerateTrapezoids(root);\n  const cloneDeep = (node) => {\n    if (!node) return node;\n    const n = { ...node };\n    n.label = labels[node.id];\n    n.title = labels[node.id] ? `Trapezoid ${labels[node.id]}` : 'Trapezoid';\n    if (n.successors && n.successors.length) {\n      n.successors = n.successors.map(cloneDeep);\n    }\n    return n;\n  };\n  return cloneDeep(root);\n}\n\nfunction updateNode(root, id, updater) {\n  const next = clone(root);\n  const stack = [next];\n  while (stack.length) {\n    const n = stack.pop();\n    if (n.id === id) {\n      updater(n);\n      break;\n    }\n    (n.successors || []).forEach((c: any) => stack.push(c));\n  }\n  return next;\n}\n\nfunction removeNode(root, id) {\n  if (root.id === id) return root; // do not remove root\n  const next = clone(root);\n  const queue = [next];\n  while (queue.length) {\n    const n = queue.shift();\n    if (!n.successors) continue;\n    const idx = n.successors.findIndex((c: any) => c.id === id);\n    if (idx !== -1) {\n      n.successors.splice(idx, 1);\n      break;\n    }\n    n.successors.forEach((c: any) => queue.push(c));\n  }\n  return next;\n}\n\nfunction addChild(root, parentId) {\n  const next = clone(root);\n  const stack = [next];\n  while (stack.length) {\n    const n = stack.pop();\n    if (n.id === parentId) {\n      n.successors = n.successors || [];\n      n.successors.push(defaultChild());\n      break;\n    }\n    (n.successors || []).forEach((c: any) => stack.push(c));\n  }\n  return next;\n}\n\nfunction reorderChildren(root, parentId, from, to) {\n  const next = clone(root);\n  const stack = [next];\n  while (stack.length) {\n    const n = stack.pop();\n    if (n.id === parentId) {\n      if (!n.successors) break;\n      const arr = n.successors;\n      const [moved] = arr.splice(from, 1);\n      arr.splice(to, 0, moved);\n      break;\n    }\n    (n.successors || []).forEach((c: any) => stack.push(c));\n  }\n  return next;\n}\n\nexport default function PanelShapeCreator() {\n  const [root, setRoot] = useState(() => assignLabelsToTrapezoids(defaultTrap()));\n  const [selectedId, setSelectedId] = useState(root.id);\n  const [selectedShortRowId, setSelectedShortRowId] = useState(null);\n\n  // Modal visibility state\n  const [showOpen, setShowOpen] = useState(false);\n  const [showSaveAs, setShowSaveAs] = useState(false);\n\n  // Register dropdown menu items\n  const { setMenuItems } = useDropdown();\n\n  const selectedInfo = useMemo(() => findNodeAndParent(root, selectedId), [root, selectedId]);\n  const selected = selectedInfo.node || root;\n\n  // Generic field handler for numeric fields â€” preserve falsy 0 values\n  const handleField = useCallback((key, value: any) => {\n    setRoot(prev => updateNode(prev, selected.id, (n) => { n[key] = (value === undefined || value === null) ? 0 : value; }));\n  }, [selected?.id]);\n\n  // Toggle boolean fields like isHem\n  const handleToggle = useCallback((key, value: any) => {\n    setRoot(prev => updateNode(prev, selected.id, (n) => { n[key] = !!value; }));\n  }, [selected?.id]);\n\n  const handleAddChild = useCallback(() => setRoot(prev => assignLabelsToTrapezoids(addChild(prev, selected.id))), [selected?.id]);\n  const handleRemove = useCallback(() => setRoot(prev => assignLabelsToTrapezoids(removeNode(prev, selected.id))), [selected?.id]);\n  const handleDuplicate = useCallback(() => {\n    // duplicate selected as new sibling (or child of root if selected is root)\n    if (selected.id === root.id) {\n      setRoot(prev => ({ ...clone(prev), id: prev.id })); // no-op for root\n      return;\n    }\n    const { parent } = findNodeAndParent(root, selected.id);\n    if (!parent) return;\n    const copy = clone(selected);\n    copy.id = genId();\n    const next = clone(root);\n    const stack = [next];\n    while (stack.length) {\n      const n = stack.pop();\n      if (n.id === parent.id) {\n        const idx = n.successors.findIndex((c: any) => c.id === selected.id);\n        n.successors.splice(idx + 1, 0, copy);\n        break;\n      }\n      (n.successors || []).forEach((c: any) => stack.push(c));\n    }\n  setRoot(assignLabelsToTrapezoids(next));\n  }, [root, selected]);\n\n  const children = selected?.successors || [];\n  const shortRows = selected?.shortRows || [];\n\n\n  // Handler for opening a panel from library\n  const handleOpenPanel = useCallback((panelData: any) => {\n    try {\n      if (!panelData) {\n        message.error('No panel data provided');\n        return;\n      }\n\n      // Create Panel instance from the panel data\n      const p: any = Panel.fromObject(panelData);\n      setRoot(assignLabelsToTrapezoids(p.shape));\n      setSelectedId(p.shape.id);\n      message.success(`Loaded panel: ${panelData.name || 'Untitled'}`);\n    } catch (err: unknown) {\n      console.error('PanelShapeCreator: Error loading panel', err);\n      message.error('Failed to load panel: ' + String(err));\n    }\n  }, []);\n\n  // Handler for saving a panel (SaveAsModal handles the actual save)\n  const handleSavePanel = useCallback(async (name: string, panelData: any) => {\n    console.log(`Panel \"${name}\" saved successfully`);\n    // The SaveAsModal already saved to Google Drive\n    // This callback is just for any additional actions you need\n  }, []);\n\n  // Register dropdown menu items\n  useEffect(() => {\n    const items = [\n      {\n        key: 'panel-save-as',\n        label: 'Save As...',\n        icon: <SaveOutlined />,\n        onClick: () => setShowSaveAs(true)\n      },\n      {\n        key: 'panel-open',\n        label: 'Open...',\n        icon: <FolderOpenOutlined />,\n        onClick: () => setShowOpen(true)\n      }\n    ];\n    setMenuItems(items);\n    return () => setMenuItems([]);\n  }, [setMenuItems]);\n\n  // Short-row helpers: add/remove/duplicate/reorder/update\n  const addShortRow = useCallback(() => {\n    setRoot(prev => updateNode(prev, selected.id, (n) => { n.shortRows = n.shortRows || []; n.shortRows.push(defaultShortRow()); }));\n  }, [selected?.id]);\n\n  const removeShortRow = useCallback(() => {\n    if (!selectedShortRowId) return;\n    setRoot(prev => updateNode(prev, selected.id, (n) => { n.shortRows = (n.shortRows || []).filter((s: any) => s.id !== selectedShortRowId); }));\n    setSelectedShortRowId(null);\n  }, [selected?.id, selectedShortRowId]);\n\n  const duplicateShortRow = useCallback(() => {\n    if (!selectedShortRowId) return;\n    setRoot(prev => updateNode(prev, selected.id, (n) => {\n      n.shortRows = n.shortRows || [];\n      const idx = n.shortRows.findIndex((s: any) => s.id === selectedShortRowId);\n      if (idx === -1) return;\n      const copy = { ...n.shortRows[idx], id: `sr-${Date.now()}-${Math.random().toString(36).slice(2,6)}` };\n      n.shortRows.splice(idx + 1, 0, copy);\n    }));\n  }, [selected?.id, selectedShortRowId]);\n\n  // short rows are positioned individually; no reordering needed\n\n  const updateShortRowField = useCallback((id, key, value: any) => {\n    // clamp posX/posY\n    const v = (key === 'posX' || key === 'posY') ? Math.max(0, Math.min(1, value)) : value;\n    setRoot(prev => updateNode(prev, selected.id, (n) => {\n      if (!n.shortRows) return;\n      const idx = n.shortRows.findIndex((s: any) => s.id === id);\n      if (idx === -1) return;\n      n.shortRows[idx] = { ...n.shortRows[idx], [key]: v };\n    }));\n  }, [selected?.id]);\n\n  return (\n    <div style={{ display: 'flex', height: 'calc(100vh - 64px)' }}>\n      {/* Preview */}\n      <div style={{ flex: 1, minWidth: 360, padding: 16 }}>\n        <Card size=\"small\" title=\"Preview\">\n          <PanelDiagram \n            key={JSON.stringify(root)} // Force re-render when structure changes\n            shape={root} \n            size={560} \n            padding={20} \n            selectedId={selectedId}\n            selectedShortRowId={selectedShortRowId}\n            onSelect={(id) => id && setSelectedId(id)}\n          />\n        </Card>\n      </div>\n      <div style={{ width: 440, padding: 16 }}>\n        <Space direction=\"vertical\" style={{ width: '100%' }}>\n          <Space style={{ marginBottom: 8 }}>\n            <Button size=\"small\" onClick={() => setSelectedId(root.id)} disabled={selected.id === root.id}>Select Root</Button>\n            <Button size=\"small\" onClick={() => selectedInfo.parent && setSelectedId(selectedInfo.parent.id)} disabled={!selectedInfo.parent}>Select Parent</Button>\n          </Space>\n\n          <Card size=\"small\" title=\"Geometry\">\n            <Row gutter={8}>\n              <Col span={12}>\n                <Text>Height</Text>\n                <InputNumber value={selected.height} min={0} onChange={(v) => handleField('height', v)} style={{ width: '100%' }} />\n              </Col>\n              <Col span={12}>\n                <Text>Lower Base (A)</Text>\n                <InputNumber value={selected.baseA} min={0} onChange={(v) => handleField('baseA', v)} style={{ width: '100%' }} />\n              </Col>\n            </Row>\n            <Row gutter={8} style={{ marginTop: 8 }}>\n              <Col span={12}>\n                <Text>Upper Base (B)</Text>\n                <InputNumber value={selected.baseB} min={0} onChange={(v) => handleField('baseB', v)} style={{ width: '100%' }} />\n              </Col>\n              <Col span={12}>\n                <Text>Horizontal Offset</Text>\n                <InputNumber value={selected.baseBHorizontalOffset} onChange={(v) => handleField('baseBHorizontalOffset', v)} style={{ width: '100%' }} />\n              </Col>\n            </Row>\n\n            <Row style={{ marginTop: 12 }} gutter={8}>\n              <Col span={24}>\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 8 }}>\n                  <Text style={{ whiteSpace: 'nowrap', marginRight: 8 }}>Is Hem</Text>\n                  <Switch checked={!!selected.isHem} onChange={(v) => handleToggle('isHem', v)} />\n                </div>\n              </Col>\n            </Row>\n          </Card>\n\n          <Card size=\"small\" title=\"Children\">\n            <Space style={{ marginBottom: 8 }}>\n              <Button icon={<PlusOutlined />} onClick={handleAddChild}>Add Child</Button>\n              <Button icon={<CopyOutlined />} onClick={handleDuplicate}>Duplicate</Button>\n              <Button icon={<DeleteOutlined />} danger onClick={handleRemove} disabled={selected.id === root.id}>Remove</Button>\n            </Space>\n            <List\n              size=\"small\"\n              bordered\n              dataSource={children}\n              rowKey={(item) => `${item.id}-${item.label || 'none'}`} // Include label in key to force re-render\n              locale={{ emptyText: 'No children' }}\n              renderItem={(item, index: number) => (\n                <List.Item\n                  style={{ cursor: 'pointer', background: item.id === selectedId ? '#f0f7ff' : 'transparent' }}\n                  onClick={() => setSelectedId(item.id)}\n                  actions={[\n                    <Button key=\"up\" icon={<ArrowUpOutlined />} size=\"small\" disabled={index === 0}\n                      onClick={(e: any) => { e.stopPropagation(); setRoot(prev => reorderChildren(prev, selected.id, index, index - 1)); }} />,\n                    <Button key=\"down\" icon={<ArrowDownOutlined />} size=\"small\" disabled={index === children.length - 1}\n                      onClick={(e: any) => { e.stopPropagation(); setRoot(prev => reorderChildren(prev, selected.id, index, index + 1)); }} />\n                  ]}\n                >\n                  <Space>\n                    <Text strong>{item.label ? `Trapezoid ${item.label}` : 'Trapezoid'}</Text>\n                    <Text type=\"secondary\">h:{item.height} A:{item.baseA} B:{item.baseB} off:{item.baseBHorizontalOffset}</Text>\n                  </Space>\n                </List.Item>\n              )}\n            />\n          </Card>\n\n          <Card size=\"small\" title=\"Short Rows\">\n            <Space style={{ marginBottom: 8 }}>\n              <Button icon={<PlusOutlined />} onClick={addShortRow}>Add Short Row</Button>\n              <Button icon={<CopyOutlined />} onClick={duplicateShortRow} disabled={!selectedShortRowId}>Duplicate</Button>\n              <Button icon={<DeleteOutlined />} danger onClick={removeShortRow} disabled={!selectedShortRowId}>Remove</Button>\n            </Space>\n            <List\n              size=\"small\"\n              bordered\n              dataSource={shortRows}\n              rowKey={(item) => `${item.id}-${item.label || 'none'}`}\n              locale={{ emptyText: 'No short rows' }}\n              renderItem={(item, index: number) => (\n                <List.Item\n                  style={{ cursor: 'pointer', background: item.id === selectedShortRowId ? '#f0f7ff' : 'transparent' }}\n                  onClick={() => setSelectedShortRowId(item.id)}\n                >\n                  <Space direction=\"vertical\">\n                    <Text strong>{item.label ? item.label : `Short Row ${index + 1}`}</Text>\n                    <Text type=\"secondary\">x:{(item.posX||0).toFixed(2)} y:{(item.posY||0).toFixed(2)} h:{(item.height||0).toFixed(2)}\" A:{(item.baseStart||0).toFixed(2)} B:{(item.basePivot||0).toFixed(2)}</Text>\n                  </Space>\n                </List.Item>\n              )}\n            />\n\n            {selectedShortRowId ? (\n              (() => {\n                const sr = (shortRows || []).find((s: any) => s.id === selectedShortRowId);\n                if (!sr) return null;\n                return (\n                  <div style={{ marginTop: 12 }}>\n                    <Text strong style={{ display: 'block', marginBottom: 8 }}>{sr.label || `Short Row ${shortRows.indexOf(sr) + 1}`}</Text>\n                    <Row gutter={8}>\n                      <Col span={12}>\n                        <Text>Pos X</Text>\n                        <InputNumber min={0} max={1} step={0.01} value={sr.posX} onChange={(v) => updateShortRowField(sr.id, 'posX', v)} style={{ width: '100%' }} />\n                      </Col>\n                      <Col span={12}>\n                        <Text>Pos Y</Text>\n                        <InputNumber min={0} max={1} step={0.01} value={sr.posY} onChange={(v) => updateShortRowField(sr.id, 'posY', v)} style={{ width: '100%' }} />\n                      </Col>\n                    </Row>\n                    <Row gutter={8} style={{ marginTop: 8 }}>\n                      <Col span={12}>\n                        <Text>Height (in)</Text>\n                        <InputNumber min={0} step={0.1} value={sr.height} onChange={(v) => updateShortRowField(sr.id, 'height', v)} style={{ width: '100%' }} />\n                      </Col>\n                      <Col span={12}>\n                        <Text> </Text>\n                      </Col>\n                    </Row>\n                    <Row gutter={8} style={{ marginTop: 8 }}>\n                      <Col span={12}>\n                        <Text>Base Start (in)</Text>\n                        <InputNumber min={0} step={0.1} value={sr.baseStart} onChange={(v) => updateShortRowField(sr.id, 'baseStart', v)} style={{ width: '100%' }} />\n                      </Col>\n                      <Col span={12}>\n                        <Text>Base Pivot (in)</Text>\n                        <InputNumber min={0} step={0.1} value={sr.basePivot} onChange={(v) => updateShortRowField(sr.id, 'basePivot', v)} style={{ width: '100%' }} />\n                      </Col>\n                    </Row>\n                    {/* Label is intentionally omitted for short rows */}\n                  </div>\n                );\n              })()\n            ) : null}\n\n          </Card>\n\n          <Divider />\n          <Text type=\"secondary\">Tip: Select a child to edit its geometry, use arrows to reorder, or Add Child to grow the tree.</Text>\n        </Space>\n\n        {/* Library Modals */}\n        <OpenModal\n          visible={showOpen}\n          jsonKey=\"panels\"\n          displayLabel=\"Panel\"\n          onOpen={handleOpenPanel}\n          onClose={() => setShowOpen(false)}\n        />\n\n        <SaveAsModal\n          visible={showSaveAs}\n          jsonKey=\"panels\"\n          displayLabel=\"Panel\"\n          entityData={new Panel(root, undefined, 1).toJSON()}\n          onSave={handleSavePanel}\n          onClose={() => setShowSaveAs(false)}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":["getPosition","obj","scrollXOffset","scrollYOffset","useColorDrag","props","targetRef","containerRef","direction","onDragChange","onDragChangeComplete","calculate","color","disabledDrag","_useState","useState","_useState2","_slicedToArray","offsetValue","setOffsetValue","mouseMoveRef","useRef","mouseUpRef","useEffect","updateOffset","e","_getPosition","pageX","pageY","_containerRef$current","rectX","rectY","width","height","_targetRef$current$ge","targetWidth","targetHeight","centerOffsetX","centerOffsetY","offsetX","offsetY","calcOffset","onDragMove","onDragStop","onDragStart","Handler","_ref","_ref$size","size","prefixCls","React","classNames","_defineProperty","Palette","children","style","_objectSpread","Transform","forwardRef","ref","x","y","Picker","onChange","onChangeComplete","disabled","pickerRef","transformRef","colorRef","useEvent","calcColor","calculateColor","_useColorDrag","_useColorDrag2","offset","dragStartHandle","useColorState","defaultValue","value","_useMergedState","useMergedState","_useMergedState2","mergedValue","setValue","useMemo","generateColor","Gradient","colors","_ref$direction","type","gradientColors","idx","result","Color","Slider","sliderRef","getValue","c","handleColor","hsb","lightColor","gradientList","info","useComponent","components","React.useMemo","slider","HUE_COLORS","ColorPicker","_props$prefixCls","ColorPickerPrefixCls","className","panelRender","_props$disabledAlpha","disabledAlpha","_props$disabled","_useComponent","_useComponent2","_useColorState","defaultColor","_useColorState2","colorValue","setColorValue","alphaColor","handleChange","data","getHueColor","hue","getAlphaColor","alpha","onHueChange","onAlphaChange","onHueChangeComplete","onAlphaChangeComplete","mergeCls","sharedSliderProps","defaultPanel","_extends","ColorBlock","TabContext","createContext","useIndicator","options","activeTabOffset","horizontal","rtl","_options$indicator","indicator","_indicator$align","align","inkStyle","setInkStyle","inkBarRafRef","getLength","origin","cleanInkBarRaf","raf","newInkStyle","key","isEqual","newValue","oldValue","DEFAULT_SIZE","useOffsets","tabs","tabSizes","holderScrollWidth","_tabs$","map","lastOffset","rightOffset","i","_tabs","entity","tab","useSyncState","defaultState","stateRef","React.useRef","_React$useState","React.useState","_React$useState2","forceUpdate","setState","updater","MIN_SWIPE_DISTANCE","STOP_SWIPE_DISTANCE","REFRESH_INTERVAL","SPEED_OFF_MULTIPLE","useTouchMove","onOffset","touchPosition","setTouchPosition","_useState3","_useState4","lastTimestamp","setLastTimestamp","_useState5","_useState6","lastTimeDiff","setLastTimeDiff","_useState7","_useState8","setLastOffset","motionRef","onTouchStart","_e$touches$","screenX","screenY","onTouchMove","_e$touches$2","now","onTouchEnd","distanceX","distanceY","absX","absY","currentX","currentY","lastWheelDirectionRef","onWheel","deltaX","deltaY","mixed","touchEventsRef","React.useEffect","onProxyTouchStart","onProxyTouchMove","onProxyTouchEnd","onProxyWheel","useUpdate","callback","count","setCount","effectRef","callbackRef","useLayoutUpdateEffect","_callbackRef$current","useUpdateState","batchRef","state","flushUpdate","current","useVisibleRange","tabOffsets","visibleTabContentValue","transform","tabContentSizeValue","addNodeSizeValue","operationNodeSizeValue","tabPosition","charUnit","position","transformSize","len","endIndex","startIndex","_i","_offset","stringify","tgt","v","k","RC_TABS_DOUBLE_QUOTE","genDataNodeKey","getRemovable","closable","closeIcon","editable","AddButton","React.forwardRef","locale","React.createElement","event","ExtraContent","extra","content","assertExtra","_typeof","React.isValidElement","OperationNode","id","mobile","_props$more","moreProps","tabBarGutter","removeAriaLabel","onTabClick","getPopupContainer","popupClassName","open","setOpen","selectedKey","setSelectedKey","_moreProps$icon","moreIcon","popupId","dropdownPrefix","selectedItemId","dropdownAriaLabel","onRemoveTab","menu","Menu","domEvent","label","removable","MenuItem","selectOffset","enabledTabs","selectedIndex","onKeyDown","which","KeyCode","ele","moreStyle","overlayClassName","moreNode","Dropdown","OperationNode$1","React.memo","_","next","TabNode","active","focus","_props$tab","icon","renderWrapper","onClick","onFocus","onBlur","onMouseDown","onMouseUp","tabCount","currentPosition","tabPrefix","onInternalClick","labelNode","btnRef","node","getTabSize","containerRect","offsetWidth","offsetHeight","offsetTop","offsetLeft","_tab$getBoundingClien","left","top","getSize","refObj","_ref$offsetWidth","_ref$offsetHeight","_refObj$current$getBo","getUnitValue","tabPositionTopOrBottom","TabNavList","animated","activeKey","onTabScroll","_React$useContext","React.useContext","extraLeftRef","extraRightRef","tabsWrapperRef","tabListRef","operationsRef","innerAddButtonRef","_useSyncState","prev","_useSyncState2","transformLeft","setTransformLeft","_useSyncState3","_useSyncState4","transformTop","setTransformTop","containerExcludeExtraSize","setContainerExcludeExtraSize","tabContentSize","setTabContentSize","addSize","setAddSize","operationSize","setOperationSize","_useUpdateState","_useUpdateState2","setTabSizes","containerExcludeExtraSizeValue","addSizeValue","operationSizeValue","needScroll","operationsHiddenClassName","transformMin","transformMax","alignInRange","touchMovingRef","_useState9","_useState10","lockAnimation","setLockAnimation","doLockAnimation","clearTouchMoving","doMove","_useVisibleRange","_useVisibleRange2","visibleStart","visibleEnd","scrollToTab","tabOffset","newTransform","_newTransform","_useState11","_useState12","focusKey","setFocusKey","_useState13","_useState14","isMouse","setIsMouse","currentIndex","nextIndex","newKey","handleKeyDown","code","isRTL","firstEnabledTab","lastEnabledTab","removeIndex","removeTab","tabNodeStyle","tabNodes","updateTabSizes","_tabListRef$current","newSizes","listRect","_ref2","_tabListRef$current2","btnNode","_getTabSize","_getTabSize2","onListHolderResize","containerSize","extraLeftSize","extraRightSize","newAddSize","newOperationSize","tabContentFullSize","startHiddenTabs","endHiddenTabs","hiddenTabs","_toConsumableArray","_useIndicator","indicatorStyle","hasDropdown","wrapPrefix","pingLeft","pingRight","pingTop","pingBottom","ResizeObserver","useComposeRef","TabPane","tabKey","_excluded","_excluded2","TabNavListWrapper","renderTabBar","restProps","_objectWithoutProperties","tabNavBarProps","restTabProps","TabPanelList","destroyInactiveTabPane","tabPaneAnimated","tabPanePrefixCls","item","forceRender","paneStyle","paneClassName","itemDestroyInactiveTabPane","CSSMotion","motionStyle","motionClassName","useAnimateConfig","mergedAnimated","uuid","Tabs","items","defaultActiveKey","_props$tabPosition","tabBarStyle","tabBarExtraContent","more","setMobile","isMobile","mergedActiveKey","setMergedActiveKey","activeIndex","setActiveIndex","newActiveIndex","_tabs$newActiveIndex","_useMergedState3","_useMergedState4","mergedId","setMergedId","onInternalTabClick","isActiveChanged","sharedProps","motion","getTransitionName","__rest","s","t","p","filter","useLegacyItems","_a","mergedDestroyOnHidden","childrenItems","toArray","genMotionStyle","token","componentCls","motionDurationSlow","initSlideMotion","genCardStyle","tabsCardPadding","cardBg","cardGutter","colorBorderSecondary","itemSelectedColor","unit","genFocusOutline","genDropdownStyle","itemHoverColor","dropdownEdgeChildVerticalPadding","resetComponent","textEllipsis","genPositionStyle","margin","horizontalMargin","verticalItemPadding","verticalItemMargin","calc","genSizeStyle","cardPaddingSM","cardPaddingLG","cardHeightSM","cardHeightLG","horizontalItemPaddingSM","horizontalItemPaddingLG","genTabStyle","itemActiveColor","iconCls","tabsHorizontalItemMargin","horizontalItemPadding","itemColor","tabCls","genFocusStyle","genRtlStyle","tabsHorizontalItemMarginRTL","genTabsStyle","cardHeight","prepareComponentToken","controlHeight","controlHeightLG","mergedCardHeight","mergedCardHeightSM","mergedCardHeightLG","useStyle$5","genStyleHooks","tabsToken","mergeToken","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","rootClassName","customSize","onEdit","hideAdd","centered","addIcon","removeIcon","indicatorSize","destroyOnHidden","otherProps","customizePrefixCls","getPrefixCls","ConfigContext","rootCls","useCSSVarCls","wrapCSSVar","hashId","cssVarCls","useStyle","editType","CloseOutlined","PlusOutlined","rootPrefixCls","useSize","mergedItems","mergedStyle","mergedIndicator","RcTabs","EllipsisOutlined","Grid","hoverable","prefix","classString","genCardHeadStyle","antCls","headerHeight","headerPadding","tabsMarginBottom","clearFix","genCardGridStyle","cardPaddingBase","cardShadow","lineWidth","genCardActionsStyle","actionsLiMargin","cardActionsIconSize","actionsBg","genCardMetaStyle","genCardTypeInnerStyle","colorFillAlter","bodyPadding","genCardLoadingStyle","cardHeadPadding","boxShadowTertiary","extraColor","genCardSizeStyle","bodyPaddingSM","headerPaddingSM","headerHeightSM","headerFontSizeSM","useStyle$4","cardToken","ActionNode","actionClasses","actions","actionStyle","action","index","Card","headStyle","bodyStyle","title","loading","bordered","customVariant","customizeSize","cover","tabList","activeTabKey","defaultActiveTabKey","tabProps","customClassNames","customStyles","others","card","variant","useVariant","onTabChange","moduleClass","moduleName","moduleStyle","isContainGrid","containGrid","React.Children","element","loadingBlock","Skeleton","hasActiveTabKey","extraProps","head","mergedSize","tabSize","headClasses","titleClasses","extraClasses","mergedHeadStyle","coverClasses","coverDom","bodyClasses","mergedBodyStyle","body","actionDom","divProps","omit","Meta","avatar","description","avatarDom","titleDom","descriptionDom","MetaDetail","InternalCard","calcThumbStyle","targetElement","vertical","toPX","MotionThumb","getValueIndex","motionName","onMotionStart","onMotionEnd","_props$vertical","thumbRef","prevValue","setPrevValue","findValueElement","val","_React$useState3","_React$useState4","prevStyle","setPrevStyle","_React$useState5","_React$useState6","nextStyle","setNextStyle","useLayoutEffect","calcPrevStyle","calcNextStyle","thumbStart","_prevStyle$top","thumbActive","_nextStyle$top","onAppearStart","onAppearActive","onVisibleChanged","motionProps","composeRef","getValidTitle","option","_option$label","normalizeOptions","validTitle","InternalSegmentedOption","checked","name","onKeyUp","Segmented","_segmentedOptions$","_classNames2","_props$options","_props$className","_props$motionName","mergedRef","segmentedOptions","rawValue","setRawValue","thumbShow","setThumbShow","isKeyboard","setIsKeyboard","isFocused","setIsFocused","handleFocus","handleBlur","handleMouseDown","handleKeyUp","total","nextOption","n","segmentedOption","_classNames3","TypedSegmented","getItemDisabledStyle","cls","getItemSelectedStyle","segmentedTextEllipsisCss","genSegmentedStyle","labelHeight","labelHeightLG","labelHeightSM","colorTextLabel","colorText","colorFillSecondary","colorBgElevated","colorFill","lineWidthBold","colorBgLayout","useStyle$3","segmentedToken","isSegmentedLabeledOptionWithIcon","InternalSegmented","defaultName","useId","block","shape","contextClassName","contextStyle","useComponentConfig","extendedOptions","restOption","React.Fragment","RcSegmented","PanelPickerContext","PanelPresetsContext","ColorClear","handleClick","hsba","genColor","FORMAT_HEX","FORMAT_RGB","FORMAT_HSB","ColorSteppers","min","max","formatter","colorSteppersPrefixCls","internalValue","setInternalValue","stepValue","InputNumber","step","ColorAlphaInput","colorAlphaInputPrefixCls","alphaValue","handleAlphaChange","getColorAlpha","hexReg","isHexString","hex","ColorHexInput","colorHexInputPrefixCls","hexValue","setHexValue","toHexFormat","handleHexChange","originValue","Input","ColorHsbInput","colorHsbInputPrefixCls","hsbValue","handleHsbChange","getRoundNumber","ColorRgbInput","colorRgbInputPrefixCls","rgbValue","handleRgbChange","rgb","selectOptions","format","ColorInput","onFormatChange","disabledFormat","colorFormat","setColorFormat","colorInputPrefixCls","handleFormatChange","newFormat","steppersNode","inputProps","Select","getOffset","getDirectionStyle","positionStyle","getIndex","SliderContext","React.createContext","UnstableContext","Handle","valueIndex","onStartMove","onDelete","render","dragging","draggingDelete","onOffsetChange","onMouseEnter","keyboard","range","tabIndex","ariaLabelForHandle","ariaLabelledByForHandle","ariaRequired","ariaValueTextFormatterForHandle","styles","handlePrefixCls","onInternalStartMove","onInternalFocus","onInternalMouseEnter","_getIndex","handleNode","Handles","values","handleRender","activeHandleRender","draggingIndex","handlesRef","activeVisible","setActiveVisible","onActive","onHandleFocus","onHandleMouseEnter","React.useImperativeHandle","_handlesRef$current$i","flushSync","handleProps","Mark","_onClick","includedStart","includedEnd","included","textCls","Marks","marks","markPrefixCls","Dot","activeStyle","dotClassName","Steps","dots","stepDots","dotSet","mark","dotValue","Track","start","end","replaceCls","trackPrefixCls","offsetStart","offsetEnd","Tracks","startPoint","trackList","startValue","endValue","list","tracksNode","REMOVE_DIST","useDrag","rawValues","formatValue","triggerChange","finishChange","offsetValues","minCount","draggingValue","setDraggingValue","setDraggingIndex","setDraggingDelete","_React$useState7","_React$useState8","cacheValues","setCacheValues","_React$useState9","_React$useState10","originValues","setOriginValues","mouseMoveEventRef","mouseUpEventRef","touchEventTargetRef","flushValues","nextValues","nextValue","deleteMark","changeValues","updateCacheValue","offsetPercent","maxStartOffset","maxEndOffset","formatStartValue","cloneCacheValues","offsetDist","cloneValues","startValues","initialValues","startX","startY","onMouseMove","_getPosition2","moveX","moveY","offSetPercent","removeDist","returnValues","sourceValues","a","b","targetValues","counts","maxDiffCount","diffCount","useOffset","markList","allowCross","pushable","formatRangeValue","React.useCallback","formatStepValue","getDecimal","num","maxDecimal","fixedValue","formatNextValue","alignValues","closeValue","closeDist","alignValue","dist","mode","targetDistValue","potentialValues","sign","compareValue","valueDist","potentialValue","offsetChangedValue","needPush","pushNum","changed","_offsetChangedValue","_changed","_offsetChangedValue2","_i2","_changed2","_offsetChangedValue3","_i3","_changed3","_offsetChangedValue4","useRange","draggableTrack","maxCount","_props$keyboard","autoFocus","_props$min","_props$max","_props$step","onBeforeChange","onAfterChange","_props$allowCross","_props$pushable","reverse","_props$included","trackStyle","handleStyle","railStyle","dotStyle","activeDotStyle","track","_props$tabIndex","_useRange","_useRange2","rangeEnabled","rangeEditable","rangeDraggableTrack","mergedMin","mergedMax","mergedStep","mergedPush","markObj","_useOffset","_useOffset2","valueList","_valueList","_valueList$","val0","pointCount","_returnValues","getTriggerValue","triggerValues","cloneNextValues","finishValue","warning","nextFocusIndex","_useDrag","_useDrag2","onStartDrag","changeToCloseValue","valueBeforeIndex","focusIndex","_document$activeEleme","_document$activeEleme2","onSliderMouseDown","bottom","right","clientX","clientY","percent","keyboardValue","setKeyboardValue","onHandleOffsetChange","mergedDraggableTrack","sortedCacheValues","_React$useMemo","_React$useMemo2","_containerRef$current2","_document","activeElement","context","SliderInternalContext","SliderTooltip","innerRef","mergedOpen","rafRef","cancelKeepAlign","keepAlign","Tooltip","genBaseStyle","controlSize","dotSize","marginFull","marginPart","colorFillContentHover","handleColorDisabled","handleSize","handleSizeHover","handleActiveColor","handleActiveOutlineColor","handleLineWidth","handleLineWidthHover","motionDurationMid","genDirectionStyle","railSize","railPadding","full","part","handlePos","markInset","handlePosSize","draggableBorderSize","draggableBorder","genHorizontalStyle","marginPartWithMark","genVerticalStyle","controlSizeHover","FastColor","useStyle$2","sliderToken","useRafLock","cleanup","setDelayState","nextState","getTipFormatter","tipFormatter","legacyTipFormatter","legacyTooltipPrefixCls","legacyTooltipVisible","legacyGetTooltipPopupContainer","legacyTooltipPlacement","tooltip","sliderClassNames","contextDirection","contextClassNames","contextStyles","contextDisabled","DisabledContext","mergedDisabled","contextHandleRender","internalContextDirection","hoverOpen","setHoverOpen","focusOpen","setFocusOpen","tooltipProps","tooltipOpen","tooltipPlacement","getTooltipPopupContainer","customizeTooltipPrefixCls","lockOpen","activeOpen","mergedTipFormatter","setDragging","onInternalChangeComplete","getTooltipPlacement","placement","vert","rootClassNames","useActiveTooltipHandle","nodeProps","proxyEvent","eventName","triggerRestPropsEvent","passedProps","cloneNode","handle","rootStyle","mergedTracks","mergedTracksClassNames","RcSlider","GradientColorSlider","onKeyDelete","sliderProps","linearCss","pointColor","onInternalDragStart","onInternalDragChange","unstableContext","ori","handleCls","getGradientPercentColor","React.cloneElement","sliderContext","SingleColorSlider","singleOnChange","singleOnChangeComplete","sortColors","GradientColorBar","onGradientDragging","isGradient","colorList","colorsRef","newPointColor","nextColors","AggregationColor","deleteIndex","nextColor","GradientColorBar$1","ColorSlider","PanelPicker","panelPickerContext","useContext","onModeChange","modeOptions","allowClear","onClear","gradientDragging","injectProps","isSingle","lockedColor","setLockedColor","activeColor","pickerColor","setPickerColor","forceSync","setForceSync","mergedPickerColor","fillColor","submitColor","infoType","infoValue","genAlphaColor","onPickerChange","fromPicker","onInputChange","operationNode","showMode","clearColor","RcColorPicker","PanelPresets","presets","ColorPresets","ColorPickerPanel","colorPickerPanelPrefixCls","panelContext","presetContext","innerPanel","Divider","ColorTrigger","showText","rest","colorTriggerPrefixCls","colorTextPrefixCls","colorTextCellPrefixCls","useLocale","desc","inactive","hexString","containerNode","pickAttrs","useModeColor","mergedColor","setMergedColor","modeState","setModeState","modeOptionList","modeSet","m","modes","optionList","pushOption","modeType","localeTxt","cacheColor","setCacheColor","setColor","postColor","colorObj","postMode","getTransBg","genColorBlockStyle","borderRadiusSM","colorPickerInsetShadow","genInputStyle","fontSizeSM","lineHeightSM","colorPickerAlphaInputWidth","marginXXS","paddingXXS","controlHeightSM","marginXS","fontSizeIcon","paddingXS","colorTextPlaceholder","colorPickerInputNumberHandleWidth","genPickerStyle","marginSM","colorPickerHandlerSize","genPresetsStyle","colorTextQuaternary","colorPickerPresetColorSize","borderRadius","colorWhite","fontHeightSM","genSliderStyle","colorPickerHandlerSizeSM","colorPickerSliderHeight","handleInnerSize","handleHoverSize","activeHandleStyle","genActiveStyle","borderColor","outlineColor","genClearStyle","extraStyle","colorSplit","colorBorder","red6","genStatusStyle","colorError","colorWarning","colorErrorHover","colorWarningHover","colorErrorOutline","colorWarningOutline","controlHeightXS","borderRadiusXS","borderRadiusLG","fontSizeLG","genColorPickerStyle","colorPickerWidth","colorPrimary","colorTextDisabled","colorBgContainerDisabled","colorBgTextActive","colorPickerPreviewSize","fontSize","colorPrimaryHover","controlOutline","genCompactItemStyle","useStyle$1","colorPickerToken","defaultFormat","trigger","arrow","onOpenChange","autoAdjustOverflow","destroyTooltipOnHide","colorPicker","popupOpen","setPopupOpen","openData","setFormatValue","isAlphaColor","cachedGradientColor","setCachedGradientColor","changeColor","onInternalChange","changeFromPickerDrag","setGradientDragging","onInternalModeChange","newMode","baseColor","contextStatus","FormItemInputContext","compactSize","compactItemClassnames","useCompactItemContext","ctx","rtlCls","mergedRootCls","mergedCls","getStatusClassNames","mergedPopupCls","popoverProps","Popover","visible","ContextIsolator","PurePanel","genPurePanel","ZoomInOutlined","AntdIcon","ZoomInOutlinedSvg","RefIcon","ZoomOutOutlined","ZoomOutOutlinedSvg","useHasSider","siders","hasSider","Sider","generator","suffixCls","tagName","displayName","BasicComponent","Basic","TagName","wrapSSR","prefixWithSuffixCls","BasicLayout","setSiders","Tag","mergedHasSider","contextValue","currentId","LayoutContext","Layout","Header","Footer","Content","InternalLayout","SiderContext","defaultProps","useTransitionDuration","pathsRef","prevTimeStamp","updated","path","pathStyle","isBrowserClient","canUseDom","getUUID","retId","innerId","setInnerId","Block","bg","getPtgColors","scale","parsedKey","ptgKey","PtgCircle","gradientId","radius","circleStyleForStack","ptg","strokeLinecap","strokeWidth","gapDegree","stroke","halfSize","circleNode","maskId","fromDeg","conicColors","linearColors","conicColorBg","linearColorBg","VIEW_BOX_SIZE","getCircleStyle","perimeter","perimeterWithoutGap","rotateDeg","gapPosition","strokeColor","stepSpace","offsetDeg","positionDeg","strokeDashoffset","Circle","_defaultProps$props","steps","trailWidth","_defaultProps$props$g","trailColor","stepCount","stepGap","percentList","strokeColorList","gradient","isConicGradient","mergedStrokeLinecap","circleStyle","paths","getStokeList","stackPtg","elem","getStepStokeList","stepPtg","validProgress","progress","getSuccessPercent","success","successPercent","getPercentage","realSuccessPercent","getStrokeColor","successColor","presetPrimaryColors","CIRCLE_MIN_STROKE_WIDTH","getMinPercent","originWidth","realGapDegree","percentArray","gapPos","wrapperClassName","circleContent","RCCircle","smallCircle","LineStrokeColorVar","Percent","genAntProgressActive","isRtl","Keyframes","progressCls","iconPrefixCls","genCircleStyle","genStepStyle","genSmallLine","progressStepMarginInlineEnd","progressToken","sortGradient","gradients","tempArr","formattedKey","handleGradient","directionConfig","from","to","sortedGradients","background","Line","percentPosition","infoAlign","infoPosition","backgroundProps","trailStyle","percentStyle","successPercentStyle","outerStyle","lineInner","isOuterStart","isOuterEnd","customRounding","unitWidth","styledSteps","ProgressStatuses","Progress","showInfo","status","strokeColorNotArray","strokeColorNotGradient","strokeColorIsBright","percentNumber","progressStatus","progressStyle","isLineType","isPureLineType","progressInfo","text","textFormatter","number","isBrightInnerColor","CloseCircleFilled","CheckCircleFilled","CheckOutlined","ArrowDownOutlined","ArrowDownOutlinedSvg","ArrowUpOutlined","ArrowUpOutlinedSvg","DragOutlined","DragOutlinedSvg","ExpandOutlined","ExpandOutlinedSvg","SaveOutlined","SaveOutlinedSvg","mergeEntityIntoLibrary","library","jsonKey","entityName","entityData","lib","SaveAsModal","displayLabel","onSave","onClose","settingsKey","form","Form","setLoading","service","GoogleDriveServiceModern","handleSave","isAuthenticated","message","keyForSettings","settings","fileName","folderPath","fullPath","fileId","fileResult","currentLibrary","err","updatedLibrary","error","handleCancel","jsx","Modal","Button","ColorworkPattern","grid","metadata","row","json","colorId","hexColor","col","usedColorIds","rowIndex","instructions","currentColor","stitchCount","targetStitches","targetRows","currentStitches","currentRows","newGrid","newRow","sourceRow","sourceCol","startStitch","endStitch","startRow","endRow","section","StitchPlan","mappedRows","colorworkPattern","mappedRow","colorworkRow","sequence","lowerLeft","lowerRight","upperLeft","upperRight","firstRow","consecutiveRows","prevRow","leftDiff","rightDiff","instruction","rowNumber","leftStitchesInWork","rightStitchesInWork","colorworkArray","colorInfo","Gauge","stitchesPerFourInches","rowsPerFourInches","scalingFactor","defaultGauge","Trapezoid","baseA","baseB","baseBHorizontalOffset","successors","finishingSteps","sizeModifier","trap","gauge","stitchesPerInch","rowsPerInch","startStitches","startStitchesLeft","startStitchesRight","totalRows","baseWidthDifference","leftIncreaseWidth","rightIncreaseWidth","leftIncreaseStitches","rightIncreaseStitches","increaseLeftFrequency","increaseRightFrequency","leftShapingCounter","rightShapingCounter","stitchPlan","leftShapingModifier","rightShapingModifier","isRoot","visualMotif","successor","successorBaseWidth","successorInstructions","Panel","PanelColorworkComposer","panel","stretchMode","alignmentMode","mappedPattern","CombinedPattern","patternHeight","stitchRow","totalStitches","colorworkRowIndex","panelRowIndex","totalPanelRows","colorworkRows","startOffset","leftStitches","patternRow","patternWidth","mappedStitches","stitchIndex","patternStitchIndex","ColorworkVisualizer","pattern","cellSize","showGrid","showRowNumbers","showStitchNumbers","rows","stitches","chartWidth","chartHeight","rowInstructions","leftMargin","topMargin","elements","parts","colorLabel","CombinedInstruction","machineRow","shaping","colorwork","visualChart","InstructionGenerator","combinedPattern","shapingInstructions","colorworkInstructions","colorSequence","synchronized","shapingByRow","shapingForRow","rowMatch","segment","singleRowPattern","combinedInstruction","bind_1","bind","target","listener","__assign","this","bindAll_1","require$$0","toOptions","getBinding","original","sharedOptions","binding","bindAll","bindings","unbinds","unbind","exports","bind_all_1","require$$1","honeyPotDataAttribute","isHoneyPotElement","getElementFromPointWithoutHoneypot","client","_document$elementsFro","_document$elementsFro2","second","maxZIndex","ownKeys","r","o","honeyPotSize","halfHoneyPotSize","floorToClosestPixel","point","pullBackByHalfHoneyPotSize","preventGoingBackwardsOffScreen","preventGoingForwardsOffScreen","getHoneyPotRectFor","getRectStyles","clientRect","isWithin","_ref3","mountHoneyPot","_ref4","initial","unbindPointerMove","_ref5","unbindPostDragEvents","makeHoneyPotFix","latestPointerMove","bindEvents","getOnPostDispatch","finish","_ref6","payload","input","_finish","_input","once","fn","cache","_len","args","_key","isFirefox","isSafari","_navigator","userAgent","symbols","isLeavingWindowInSafari","dragLeave","getInitialState","resetState","isNodeLike","isFromAnotherWindow","eventTarget","isLeavingWindow","relatedTarget","getBindingsForBrokenDrags","onDragEnd","callCount","getInput","rafSchd","lastArgs","frameId","wrapperFn","scheduleOnDrag","dragStart","scheduled","schedule","flush","makeDispatch","source","dispatchEvent","previous","safeDispatch","dispatch","nativeSetDragImage","location","updatedSourcePayload","globalState","canStart","getNativeSetDragImage","hasHierarchyChanged","dragType","getDropTargetsOver","getStartLocation","setDropEffectOnEvent","updateState","hasChanged","onUpdateEvent","nextDropTargets","cancel","unbindEvents","_current$","innerMost","dropTargets","lifecycle","ledger","registerUsage","typeKey","mount","entry","register","combine","fns","addAttribute","attribute","_createForOfIteratorHelper","_unsupportedIterableToArray","_n","F","u","_arrayLikeToArray","copyReverse","array","makeDropTarget","defaultDropEffect","registry","dropTargetDataAtt","dropTargetSelector","addToRegistry","dropTargetForConsumers","getActualDropTargets","_args$getData","_args$getData2","_args$getDropEffect","_args$getDropEffect2","_ref2$result","closest","feedback","dropEffect","record","notifyCurrent","_iterator","_step","_entry$eventName","isCurrent","visited","_iterator2","_step2","_entry$onDropTargetCh","isOver","_entry$onDragLeave","_iterator3","_step3","_entry$onDropTargetCh2","_entry$onDragEnter","_record","_args","_entry","getIsOver","actual","lastCaptureOrdered","actualCaptureOrdered","resultCaptureOrdered","_argsForLast$getIsSti","last","fresh","parent","lastParent","argsForLast","makeMonitor","tryAddToActive","monitor","monitorForConsumers","_active","_monitor","_monitor$eventName","makeAdapter","dispatchEventToSource","onPostDispatch","monitorAPI","dropTargetAPI","mountAdapter","api","isAndroid","androidFallbackText","textMediaType","URLMediaType","elementAdapterNativeDataKey","draggableRegistry","honeyPotFix","adapter","_entry$dragHandle","_entry$getInitialData","_entry$getInitialData2","_entry$dragHandle2","_entry$getInitialData3","_entry$getInitialData4","over","nativeData","_Object$entries","_Object$entries$_i","_draggableRegistry$ge","_draggableRegistry$ge2","dropTargetForElements","draggable","Text","Typography","Option","DraggableLayerItem","layer","onLayerReorder","dragItemHoverStyle","dragItemNormalStyle","layerRef","isDraggedOver","setIsDraggedOver","draggableCleanup","dropTargetCleanup","draggedLayerId","ColorworkCanvasEditor","patternLayers","onLayersChange","onGaugeChange","canvasRef","zoom","setZoom","pan","setPan","isDragging","setIsDragging","lastMousePos","setLastMousePos","canvasSize","setCanvasSize","hasInitialized","libraryPatterns","useSelector","selectColorworkPatterns","availablePatterns","basePatterns","patternId","libPattern","collapsedLayers","setCollapsedLayers","renderUnifiedShapeToCanvas","xOffset","yOffset","allCoordinates","collectTrapezoidCoordinates","minX","coord","maxX","minY","maxY","fullPanelDimensions","calculateTrapezoidDimensions","renderColorworkLayersToCanvasCentered","coordinates","trapWidth","xTopLeft","xTopRight","xBottomLeft","xBottomRight","yTop","yBottom","successorWidths","totalSuccessorWidth","sum","w","childXOffset","successorWidth","displayWidth","displayHeight","baseWidthInches","baseHeightInches","widthInches","heightInches","stitchPixelWidth","rowPixelHeight","combinedGrid","createCombinedGridCentered","stitch","cellX","cellY","applyPatternLayerCentered","generatePattern","patternRows","patternStitches","repeatMode","repeatCountX","repeatCountY","offsetHorizontal","offsetVertical","repeatHorizontal","repeatVertical","adjustedStitch","adjustedRow","repeatIndexX","repeatIndexY","halfRepeats","minRepeatX","maxRepeatX","minRepeatY","maxRepeatY","patternStitch","layerColor","drawRulers","canvasWidth","canvasHeight","scaleFactor","dimensions","centerX","centerY","actualWidthInches","actualHeightInches","devicePixelRatio","rulerWidth","rulerHeight","pixelsPerInch","shapeScreenWidth","shapeScreenHeight","shapeCenterX","shapeCenterY","shapeLeft","shapeBottom","originX","originY","maxInchX","maxInchY","inch","halfInchX","quarterInchX1","quarterInchX2","totalWidthX","halfInchY","quarterInchY1","quarterInchY2","totalHeightY","renderTrapezoidWithPattern","trapShape","renderHierarchyToCanvas","handleMouseMove","handleMouseUp","handleContextMenu","resetView","panStep","canvas","rulerOffsetX","rulerOffsetY","tempCtx","availableWidth","availableHeight","translateX","translateY","calculatedDimensions","actualDimensions","gaugeScalingFactor","adjustedCenterX","adjustedCenterY","updateCanvasSize","container","defaultBackgroundLayer","handleLayerSettingChange","useCallback","layerId","setting","prevLayers","handleLayerColorChange","newColor","updatedLayers","newColorMapping","handleLayerReorder","targetLayerId","draggedIndex","targetIndex","newLayers","draggedLayer","handleCollapseChange","newCollapsed","addPatternLayer","defaultType","newLayer","textStyle12","textStyle11","fullWidthStyle","spaceStyle","dragItemBaseStyle","getPatternKeyForLayer","removePatternLayer","copyPatternLayer","layerToCopy","handlePatternChangeForLayer","patternKey","patternType","config","handlePatternConfigChange","newConfig","configWithPatterns","newPattern","jsxs","Space","Collapse","CopyOutlined","DeleteOutlined","colorConfig","newColors","newElements","stripe","sIndex","el","subElement","subIndex","actualIndex","newSubElements","sIdx","newStripeConfig","elementColors","patternInfo","customPattern","usedColors","Row","Col","createSolidPattern","colorMap","createCheckerboardPattern","patternSize","gridRow","cellRow","cellCol","createArgylePattern","targetDimension","zeroRowColors","definedRowsTotal","currentRow","colorIndex","remainingRows","rowsPerEndColor","extraRow","rowsToAdd","rowsPerColor","thisRows","remainingRowsAfterDefined","patternToRepeat","zeroColumnColors","definedColumnsTotal","currentColumn","remainingColumnsAfterDefined","remainingColumns","colsPerEndColor","extraCol","colsToAdd","colsPerColor","thisCols","columnsToAdd","libraryColors","createRowPattern","createVStackPattern","availablePatternsRef","elementData","elemIndex","stripeColors","stripeColorMapping","patternName","repeatCount","shapeColorMapping","origColorId","totalWidth","rowData","columns","totalRepeatWidth","patternCol","unifiedColorId","effectiveColor","nestedPattern","nestedColorMapping","rowElements","implicitRowPattern","rowColorMapping","gcd","lcm","patternWidths","acc","totalHeight","rep","Title","RowByRowInstructions","isCurrentRow","isCompleted","stitchPlanRow","Fragment","segIndex","getContrastColor","ColorworkRowChart","stitchWidth","rectangles","segmentWidth","rect","g","ColorworkStitchPlanService","InteractiveKnittingView","knittingProgress","onRowComplete","onBackToSettings","enhancedStitchPlan","setEnhancedStitchPlan","currentRowInstructions","setCurrentRowInstructions","enhanced","handlePreviousRow","handleNextRow","progressPercent","LeftOutlined","ColorworkRowBar","RightOutlined","PanelRowHighlight","barWidth","barHeight","segments","completedRows","maxStitches","widthPercent","backgroundColor","shouldRepeatHorizontal","shouldRepeatVertical","ColorworkPanelDiagram","padding","showPatterns","theme","scaledWidth","scaledHeight","ColorworkPanelEditor","initialPanel","initialColorwork","project","previewKey","allSelectedPanelKeys","stage","onStageChange","getPanelLabel","onRequestPreviewKeyChange","useDispatch","capturedPanels","setCapturedPanels","lastAppliedLayersRef","templateLayersRef","prevPreviewKeyRef","internalStage","setInternalStage","currentStage","setKnittingProgress","panelConfig","setPanelConfig","convertToTrapezoid","createDefaultShape","createDefaultColorwork","reduxColorsMap","patternColors","colorsArray","currentPanelIndex","hasNextPanel","nextPanelKey","currentPanelLabel","currentPanelPosition","defaultGaugeSnapshot","gaugeAny","reduxPatternLayers","getDefaultPatternLayers","setPatternLayersLocal","setPatternLayers","nextLayers","currentLayers","resolvedLayers","updatePanelPatternLayers","clonePatternLayersForDispatch","sourceLayers","fallbackLayers","combinationSettings","setCombinedPattern","setInstructions","composer","instructionGenerator","generateCombinedPattern","colorsObject","updatedPattern","combined","generatedInstructions","handlePanelConfigChange","setStage","handleStartKnitting","useImperativeHandle","handleBackToSettings","handleRowComplete","captureCurrentPanel","layersOverride","clonedLayers","gaugeSnapshot","shapeSnapshot","snapshot","indexA","indexB","safeIndexA","safeIndexB","handleNextPanel","template","renderSettingsView","hydratedShape","snapshotGauge","newGauge","renderKnittingView","convertShapeRecursively","shapeData","convertedSuccessor","layers","clonedPattern","clonePlainObject","darkenHex","factor","h","makeShortRowTrap","shortBaseStart","shortBasePivot","computeShortRowOffsets","shortTrap","parentXOffset","parentYOffset","posX","posY","mapped","lerp","leftAt","widthAt","shortContainerWidth","baseBOffset","parentEffectiveHeight","parentTopY","parentBottomY","anchorY","renderShortTrap","fillToUse","renderTrapezoid","selectedId","onSelect","effectiveHeight","isSelected","renderHierarchy","selectedShortRowId","effectiveTrapHeight","preview","childYOffset","previewLeft","previewRight","previewTop","previewBottom","anchorX","childDimensions","successorEffectiveHeight","PanelDiagram","genId","defaultTrap","defaultChild","defaultShortRow","clone","findNodeAndParent","root","child","res","enumerateTrapezoids","labels","stack","toLetter","rem","assignLabelsToTrapezoids","cloneDeep","updateNode","removeNode","queue","addChild","parentId","reorderChildren","arr","moved","PanelShapeCreator","setRoot","setSelectedId","setSelectedShortRowId","showOpen","setShowOpen","showSaveAs","setShowSaveAs","setMenuItems","useDropdown","selectedInfo","selected","handleField","handleToggle","handleAddChild","handleRemove","handleDuplicate","copy","shortRows","handleOpenPanel","panelData","handleSavePanel","FolderOpenOutlined","addShortRow","removeShortRow","duplicateShortRow","updateShortRowField","Switch","List","sr","OpenModal"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152]}