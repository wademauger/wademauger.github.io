import{b as c,bi as fe,R as q,c as se,bj as Re,bk as Ie,bl as ft,bm as Mo,bn as Eo,aD as yt,bo as Io,bp as Mn,bq as Ma,_ as Fe,br as Oo,bs as Ea,bt as Dt,bu as Ia,bv as dt,bw as Oa,bx as Ta,by as ka,bz as Le,bA as Ue,bB as Fn,bC as Aa,bD as Rt,e as To,bE as Da,bF as Ba,bG as ko,bH as Pr,g as Kt,m as Gt,u as W,r as Vt,bI as Bn,bJ as hr,bK as En,C as Pt,bL as Ao,aX as Do,bM as Nn,bN as Na,bO as zn,bP as za,aF as Hn,bQ as Ha,bR as In,bS as gr,bT as La,aC as pr,bU as lt,bV as mr,bW as Sn,bX as _a,bY as Xn,ah as Ot,aK as Wa,bZ as Fa,b_ as jr,b2 as Bo,b$ as er,c0 as No,c1 as zo,c2 as vt,c3 as Rn,c4 as Xa,aw as Ho,c5 as Ya,c6 as Ka,c7 as Ga,c8 as Va,c9 as qa,aE as Ua,ca as Ja,cb as Za,I as Bt,cc as Lo,cd as _o,ce as Qa,cf as ei,cg as ti,ch as tr,K as ni,ci as ri,cj as oi,aV as Wo,F as Yn,ai,j as g,M as ii,h as si,B as je,s as Ft,f as nr,ck as li,q as Ye,T as sn,cl as ci,aT as qe,aU as Ae,b4 as rr,cm as Mr,cn as ui,co as Fo,k as di,cp as fi,z as hi,p as wn,aS as gi,cq as pi}from"./index-C5ig_0BN.js";import{R as On}from"./PlusOutlined-DP2KcrPC.js";import{T as We,D as vr,a as or}from"./DeleteOutlined-SZKWO26C.js";import{T as Tn}from"./index-J1LSphV_.js";import{S as mi}from"./index-G2vkQwzc.js";function vi(e){var t="touches"in e?e.touches[0]:e,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-n,pageY:t.pageY-r}}function Xo(e){var t=e.targetRef,n=e.containerRef,r=e.direction,o=e.onDragChange,a=e.onDragChangeComplete,i=e.calculate,s=e.color,l=e.disabledDrag,u=c.useState({x:0,y:0}),f=fe(u,2),h=f[0],m=f[1],p=c.useRef(null),C=c.useRef(null);c.useEffect(function(){m(i())},[s]),c.useEffect(function(){return function(){document.removeEventListener("mousemove",p.current),document.removeEventListener("mouseup",C.current),document.removeEventListener("touchmove",p.current),document.removeEventListener("touchend",C.current),p.current=null,C.current=null}},[]);var v=function(j){var M=vi(j),E=M.pageX,B=M.pageY,k=n.current.getBoundingClientRect(),D=k.x,$=k.y,I=k.width,A=k.height,z=t.current.getBoundingClientRect(),N=z.width,V=z.height,K=N/2,U=V/2,ne=Math.max(0,Math.min(E-D,I))-K,H=Math.max(0,Math.min(B-$,A))-U,le={x:ne,y:r==="x"?h.y:H};if(N===0&&V===0||N!==V)return!1;o?.(le)},y=function(j){j.preventDefault(),v(j)},S=function(j){j.preventDefault(),document.removeEventListener("mousemove",p.current),document.removeEventListener("mouseup",C.current),document.removeEventListener("touchmove",p.current),document.removeEventListener("touchend",C.current),p.current=null,C.current=null,a?.()},b=function(j){document.removeEventListener("mousemove",p.current),document.removeEventListener("mouseup",C.current),!l&&(v(j),document.addEventListener("mousemove",y),document.addEventListener("mouseup",S),document.addEventListener("touchmove",y),document.addEventListener("touchend",S),p.current=y,C.current=S)};return[h,b]}var Yo=function(t){var n=t.size,r=n===void 0?"default":n,o=t.color,a=t.prefixCls;return q.createElement("div",{className:se("".concat(a,"-handler"),Re({},"".concat(a,"-handler-sm"),r==="small")),style:{backgroundColor:o}})},Ko=function(t){var n=t.children,r=t.style,o=t.prefixCls;return q.createElement("div",{className:"".concat(o,"-palette"),style:Ie({position:"relative"},r)},n)},Go=c.forwardRef(function(e,t){var n=e.children,r=e.x,o=e.y;return q.createElement("div",{ref:t,style:{position:"absolute",left:"".concat(r,"%"),top:"".concat(o,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},n)}),bi=function(t){var n=t.color,r=t.onChange,o=t.prefixCls,a=t.onChangeComplete,i=t.disabled,s=c.useRef(),l=c.useRef(),u=c.useRef(n),f=ft(function(v){var y=Mo({offset:v,targetRef:l,containerRef:s,color:n});u.current=y,r(y)}),h=Xo({color:n,containerRef:s,targetRef:l,calculate:function(){return Eo(n)},onDragChange:f,onDragChangeComplete:function(){return a?.(u.current)},disabledDrag:i}),m=fe(h,2),p=m[0],C=m[1];return q.createElement("div",{ref:s,className:"".concat(o,"-select"),onMouseDown:C,onTouchStart:C},q.createElement(Ko,{prefixCls:o},q.createElement(Go,{x:p.x,y:p.y,ref:l},q.createElement(Yo,{color:n.toRgbString(),prefixCls:o})),q.createElement("div",{className:"".concat(o,"-saturation"),style:{backgroundColor:"hsl(".concat(n.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},Ci=function(t,n){var r=yt(t,{value:n}),o=fe(r,2),a=o[0],i=o[1],s=c.useMemo(function(){return Io(a)},[a]);return[s,i]},yi=function(t){var n=t.colors,r=t.children,o=t.direction,a=o===void 0?"to right":o,i=t.type,s=t.prefixCls,l=c.useMemo(function(){return n.map(function(u,f){var h=Io(u);return i==="alpha"&&f===n.length-1&&(h=new Mn(h.setA(1))),h.toRgbString()}).join(",")},[n,i]);return q.createElement("div",{className:"".concat(s,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(a,", ").concat(l,")")}},r)},Si=function(t){var n=t.prefixCls,r=t.colors,o=t.disabled,a=t.onChange,i=t.onChangeComplete,s=t.color,l=t.type,u=c.useRef(),f=c.useRef(),h=c.useRef(s),m=function(M){return l==="hue"?M.getHue():M.a*100},p=ft(function(j){var M=Mo({offset:j,targetRef:f,containerRef:u,color:s,type:l});h.current=M,a(m(M))}),C=Xo({color:s,targetRef:f,containerRef:u,calculate:function(){return Eo(s,l)},onDragChange:p,onDragChangeComplete:function(){i(m(h.current))},direction:"x",disabledDrag:o}),v=fe(C,2),y=v[0],S=v[1],b=q.useMemo(function(){if(l==="hue"){var j=s.toHsb();j.s=1,j.b=1,j.a=1;var M=new Mn(j);return M}return s},[s,l]),x=q.useMemo(function(){return r.map(function(j){return"".concat(j.color," ").concat(j.percent,"%")})},[r]);return q.createElement("div",{ref:u,className:se("".concat(n,"-slider"),"".concat(n,"-slider-").concat(l)),onMouseDown:S,onTouchStart:S},q.createElement(Ko,{prefixCls:n},q.createElement(Go,{x:y.x,y:y.y,ref:f},q.createElement(Yo,{size:"small",color:b.toHexString(),prefixCls:n})),q.createElement(yi,{colors:x,type:l,prefixCls:n})))};function wi(e){return c.useMemo(function(){var t=e||{},n=t.slider;return[n||Si]},[e])}var xi=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],$i=c.forwardRef(function(e,t){var n=e.value,r=e.defaultValue,o=e.prefixCls,a=o===void 0?Ma:o,i=e.onChange,s=e.onChangeComplete,l=e.className,u=e.style,f=e.panelRender,h=e.disabledAlpha,m=h===void 0?!1:h,p=e.disabled,C=p===void 0?!1:p,v=e.components,y=wi(v),S=fe(y,1),b=S[0],x=Ci(r||Ea,n),j=fe(x,2),M=j[0],E=j[1],B=c.useMemo(function(){return M.setA(1).toRgbString()},[M]),k=function(H,le){n||E(H),i?.(H,le)},D=function(H){return new Mn(M.setHue(H))},$=function(H){return new Mn(M.setA(H/100))},I=function(H){k(D(H),{type:"hue",value:H})},A=function(H){k($(H),{type:"alpha",value:H})},z=function(H){s&&s(D(H))},N=function(H){s&&s($(H))},V=se("".concat(a,"-panel"),l,Re({},"".concat(a,"-panel-disabled"),C)),K={prefixCls:a,disabled:C,color:M},U=q.createElement(q.Fragment,null,q.createElement(bi,Fe({onChange:k},K,{onChangeComplete:s})),q.createElement("div",{className:"".concat(a,"-slider-container")},q.createElement("div",{className:se("".concat(a,"-slider-group"),Re({},"".concat(a,"-slider-group-disabled-alpha"),m))},q.createElement(b,Fe({},K,{type:"hue",colors:xi,min:0,max:359,value:M.getHue(),onChange:I,onChangeComplete:z})),!m&&q.createElement(b,Fe({},K,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:B}],min:0,max:100,value:M.a*100,onChange:A,onChangeComplete:N}))),q.createElement(Oo,{color:M.toRgbString(),prefixCls:a})));return q.createElement("div",{className:V,style:u,ref:t},typeof f=="function"?f(U):U)});const Ln=c.createContext(null);var Ri=function(t){var n=t.activeTabOffset,r=t.horizontal,o=t.rtl,a=t.indicator,i=a===void 0?{}:a,s=i.size,l=i.align,u=l===void 0?"center":l,f=c.useState(),h=fe(f,2),m=h[0],p=h[1],C=c.useRef(),v=q.useCallback(function(S){return typeof s=="function"?s(S):typeof s=="number"?s:S},[s]);function y(){Dt.cancel(C.current)}return c.useEffect(function(){var S={};if(n)if(r){S.width=v(n.width);var b=o?"right":"left";u==="start"&&(S[b]=n[b]),u==="center"&&(S[b]=n[b]+n.width/2,S.transform=o?"translateX(50%)":"translateX(-50%)"),u==="end"&&(S[b]=n[b]+n.width,S.transform="translateX(-100%)")}else S.height=v(n.height),u==="start"&&(S.top=n.top),u==="center"&&(S.top=n.top+n.height/2,S.transform="translateY(-50%)"),u==="end"&&(S.top=n.top+n.height,S.transform="translateY(-100%)");return y(),C.current=Dt(function(){var x=m&&S&&Object.keys(S).every(function(j){var M=S[j],E=m[j];return typeof M=="number"&&typeof E=="number"?Math.round(M)===Math.round(E):M===E});x||p(S)}),y},[JSON.stringify(n),r,o,u,v]),{style:m}},Er={width:0,height:0,left:0,top:0};function Pi(e,t,n){return c.useMemo(function(){for(var r,o=new Map,a=t.get((r=e[0])===null||r===void 0?void 0:r.key)||Er,i=a.left+a.width,s=0;s<e.length;s+=1){var l=e[s].key,u=t.get(l);if(!u){var f;u=t.get((f=e[s-1])===null||f===void 0?void 0:f.key)||Er}var h=o.get(l)||Ie({},u);h.right=i-h.left-h.width,o.set(l,h)}return o},[e.map(function(r){return r.key}).join("_"),t,n])}function Ir(e,t){var n=c.useRef(e),r=c.useState({}),o=fe(r,2),a=o[1];function i(s){var l=typeof s=="function"?s(n.current):s;l!==n.current&&t(l,n.current),n.current=l,a({})}return[n.current,i]}var ji=.1,Or=.01,Pn=20,Tr=Math.pow(.995,Pn);function Mi(e,t){var n=c.useState(),r=fe(n,2),o=r[0],a=r[1],i=c.useState(0),s=fe(i,2),l=s[0],u=s[1],f=c.useState(0),h=fe(f,2),m=h[0],p=h[1],C=c.useState(),v=fe(C,2),y=v[0],S=v[1],b=c.useRef();function x(D){var $=D.touches[0],I=$.screenX,A=$.screenY;a({x:I,y:A}),window.clearInterval(b.current)}function j(D){if(o){var $=D.touches[0],I=$.screenX,A=$.screenY;a({x:I,y:A});var z=I-o.x,N=A-o.y;t(z,N);var V=Date.now();u(V),p(V-l),S({x:z,y:N})}}function M(){if(o&&(a(null),S(null),y)){var D=y.x/m,$=y.y/m,I=Math.abs(D),A=Math.abs($);if(Math.max(I,A)<ji)return;var z=D,N=$;b.current=window.setInterval(function(){if(Math.abs(z)<Or&&Math.abs(N)<Or){window.clearInterval(b.current);return}z*=Tr,N*=Tr,t(z*Pn,N*Pn)},Pn)}}var E=c.useRef();function B(D){var $=D.deltaX,I=D.deltaY,A=0,z=Math.abs($),N=Math.abs(I);z===N?A=E.current==="x"?$:I:z>N?(A=$,E.current="x"):(A=I,E.current="y"),t(-A,-A)&&D.preventDefault()}var k=c.useRef(null);k.current={onTouchStart:x,onTouchMove:j,onTouchEnd:M,onWheel:B},c.useEffect(function(){function D(z){k.current.onTouchStart(z)}function $(z){k.current.onTouchMove(z)}function I(z){k.current.onTouchEnd(z)}function A(z){k.current.onWheel(z)}return document.addEventListener("touchmove",$,{passive:!1}),document.addEventListener("touchend",I,{passive:!0}),e.current.addEventListener("touchstart",D,{passive:!0}),e.current.addEventListener("wheel",A,{passive:!1}),function(){document.removeEventListener("touchmove",$),document.removeEventListener("touchend",I)}},[])}function Vo(e){var t=c.useState(0),n=fe(t,2),r=n[0],o=n[1],a=c.useRef(0),i=c.useRef();return i.current=e,Ia(function(){var s;(s=i.current)===null||s===void 0||s.call(i)},[r]),function(){a.current===r&&(a.current+=1,o(a.current))}}function Ei(e){var t=c.useRef([]),n=c.useState({}),r=fe(n,2),o=r[1],a=c.useRef(typeof e=="function"?e():e),i=Vo(function(){var l=a.current;t.current.forEach(function(u){l=u(l)}),t.current=[],a.current=l,o({})});function s(l){t.current.push(l),i()}return[a.current,s]}var kr={width:0,height:0,left:0,top:0,right:0};function Ii(e,t,n,r,o,a,i){var s=i.tabs,l=i.tabPosition,u=i.rtl,f,h,m;return["top","bottom"].includes(l)?(f="width",h=u?"right":"left",m=Math.abs(n)):(f="height",h="top",m=-n),c.useMemo(function(){if(!s.length)return[0,0];for(var p=s.length,C=p,v=0;v<p;v+=1){var y=e.get(s[v].key)||kr;if(Math.floor(y[h]+y[f])>Math.floor(m+t)){C=v-1;break}}for(var S=0,b=p-1;b>=0;b-=1){var x=e.get(s[b].key)||kr;if(x[h]<m){S=b+1;break}}return S>=C?[0,0]:[S,C]},[e,t,r,o,a,m,l,s.map(function(p){return p.key}).join("_"),u])}function Ar(e){var t;return e instanceof Map?(t={},e.forEach(function(n,r){t[r]=n})):t=e,JSON.stringify(t)}var Oi="TABS_DQ";function qo(e){return String(e).replace(/"/g,Oi)}function br(e,t,n,r){return!(!n||r||e===!1||e===void 0&&(t===!1||t===null))}var Uo=c.forwardRef(function(e,t){var n=e.prefixCls,r=e.editable,o=e.locale,a=e.style;return!r||r.showAdd===!1?null:c.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:a,"aria-label":o?.addAriaLabel||"Add tab",onClick:function(s){r.onEdit("add",{event:s})}},r.addIcon||"+")}),Dr=c.forwardRef(function(e,t){var n=e.position,r=e.prefixCls,o=e.extra;if(!o)return null;var a,i={};return dt(o)==="object"&&!c.isValidElement(o)?i=o:i.right=o,n==="right"&&(a=i.right),n==="left"&&(a=i.left),a?c.createElement("div",{className:"".concat(r,"-extra-content"),ref:t},a):null}),Ti=c.forwardRef(function(e,t){var n=e.prefixCls,r=e.id,o=e.tabs,a=e.locale,i=e.mobile,s=e.more,l=s===void 0?{}:s,u=e.style,f=e.className,h=e.editable,m=e.tabBarGutter,p=e.rtl,C=e.removeAriaLabel,v=e.onTabClick,y=e.getPopupContainer,S=e.popupClassName,b=c.useState(!1),x=fe(b,2),j=x[0],M=x[1],E=c.useState(null),B=fe(E,2),k=B[0],D=B[1],$=l.icon,I=$===void 0?"More":$,A="".concat(r,"-more-popup"),z="".concat(n,"-dropdown"),N=k!==null?"".concat(A,"-").concat(k):null,V=a?.dropdownAriaLabel;function K(oe,ee){oe.preventDefault(),oe.stopPropagation(),h.onEdit("remove",{key:ee,event:oe})}var U=c.createElement(Oa,{onClick:function(ee){var ce=ee.key,Z=ee.domEvent;v(ce,Z),M(!1)},prefixCls:"".concat(z,"-menu"),id:A,tabIndex:-1,role:"listbox","aria-activedescendant":N,selectedKeys:[k],"aria-label":V!==void 0?V:"expanded dropdown"},o.map(function(oe){var ee=oe.closable,ce=oe.disabled,Z=oe.closeIcon,te=oe.key,ue=oe.label,Se=br(ee,Z,h,ce);return c.createElement(Ta,{key:te,id:"".concat(A,"-").concat(te),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(te),disabled:ce},c.createElement("span",null,ue),Se&&c.createElement("button",{type:"button","aria-label":C||"remove",tabIndex:0,className:"".concat(z,"-menu-item-remove"),onClick:function(ge){ge.stopPropagation(),K(ge,te)}},Z||h.removeIcon||"×"))}));function ne(oe){for(var ee=o.filter(function(Se){return!Se.disabled}),ce=ee.findIndex(function(Se){return Se.key===k})||0,Z=ee.length,te=0;te<Z;te+=1){ce=(ce+oe+Z)%Z;var ue=ee[ce];if(!ue.disabled){D(ue.key);return}}}function H(oe){var ee=oe.which;if(!j){[Le.DOWN,Le.SPACE,Le.ENTER].includes(ee)&&(M(!0),oe.preventDefault());return}switch(ee){case Le.UP:ne(-1),oe.preventDefault();break;case Le.DOWN:ne(1),oe.preventDefault();break;case Le.ESC:M(!1);break;case Le.SPACE:case Le.ENTER:k!==null&&v(k,oe);break}}c.useEffect(function(){var oe=document.getElementById(N);oe&&oe.scrollIntoView&&oe.scrollIntoView(!1)},[k]),c.useEffect(function(){j||D(null)},[j]);var le=Re({},p?"marginRight":"marginLeft",m);o.length||(le.visibility="hidden",le.order=1);var be=se(Re({},"".concat(z,"-rtl"),p)),pe=i?null:c.createElement(ka,Fe({prefixCls:z,overlay:U,visible:o.length?j:!1,onVisibleChange:M,overlayClassName:se(be,S),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:y},l),c.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:le,"aria-haspopup":"listbox","aria-controls":A,id:"".concat(r,"-more"),"aria-expanded":j,onKeyDown:H},I));return c.createElement("div",{className:se("".concat(n,"-nav-operations"),f),style:u,ref:t},pe,c.createElement(Uo,{prefixCls:n,locale:a,editable:h}))});const ki=c.memo(Ti,function(e,t){return t.tabMoving});var Ai=function(t){var n=t.prefixCls,r=t.id,o=t.active,a=t.focus,i=t.tab,s=i.key,l=i.label,u=i.disabled,f=i.closeIcon,h=i.icon,m=t.closable,p=t.renderWrapper,C=t.removeAriaLabel,v=t.editable,y=t.onClick,S=t.onFocus,b=t.onBlur,x=t.onKeyDown,j=t.onMouseDown,M=t.onMouseUp,E=t.style,B=t.tabCount,k=t.currentPosition,D="".concat(n,"-tab"),$=br(m,f,v,u);function I(K){u||y(K)}function A(K){K.preventDefault(),K.stopPropagation(),v.onEdit("remove",{key:s,event:K})}var z=c.useMemo(function(){return h&&typeof l=="string"?c.createElement("span",null,l):l},[l,h]),N=c.useRef(null);c.useEffect(function(){a&&N.current&&N.current.focus()},[a]);var V=c.createElement("div",{key:s,"data-node-key":qo(s),className:se(D,Re(Re(Re(Re({},"".concat(D,"-with-remove"),$),"".concat(D,"-active"),o),"".concat(D,"-disabled"),u),"".concat(D,"-focus"),a)),style:E,onClick:I},c.createElement("div",{ref:N,role:"tab","aria-selected":o,id:r&&"".concat(r,"-tab-").concat(s),className:"".concat(D,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(s),"aria-disabled":u,tabIndex:u?null:o?0:-1,onClick:function(U){U.stopPropagation(),I(U)},onKeyDown:x,onMouseDown:j,onMouseUp:M,onFocus:S,onBlur:b},a&&c.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"Tab ".concat(k," of ").concat(B)),h&&c.createElement("span",{className:"".concat(D,"-icon")},h),l&&z),$&&c.createElement("button",{type:"button",role:"tab","aria-label":C||"remove",tabIndex:o?0:-1,className:"".concat(D,"-remove"),onClick:function(U){U.stopPropagation(),A(U)}},f||v.removeIcon||"×"));return p?p(V):V},Di=function(t,n){var r=t.offsetWidth,o=t.offsetHeight,a=t.offsetTop,i=t.offsetLeft,s=t.getBoundingClientRect(),l=s.width,u=s.height,f=s.left,h=s.top;return Math.abs(l-r)<1?[l,u,f-n.left,h-n.top]:[r,o,i,a]},_t=function(t){var n=t.current||{},r=n.offsetWidth,o=r===void 0?0:r,a=n.offsetHeight,i=a===void 0?0:a;if(t.current){var s=t.current.getBoundingClientRect(),l=s.width,u=s.height;if(Math.abs(l-o)<1)return[l,u]}return[o,i]},xn=function(t,n){return t[n?0:1]},Br=c.forwardRef(function(e,t){var n=e.className,r=e.style,o=e.id,a=e.animated,i=e.activeKey,s=e.rtl,l=e.extra,u=e.editable,f=e.locale,h=e.tabPosition,m=e.tabBarGutter,p=e.children,C=e.onTabClick,v=e.onTabScroll,y=e.indicator,S=c.useContext(Ln),b=S.prefixCls,x=S.tabs,j=c.useRef(null),M=c.useRef(null),E=c.useRef(null),B=c.useRef(null),k=c.useRef(null),D=c.useRef(null),$=c.useRef(null),I=h==="top"||h==="bottom",A=Ir(0,function(de,G){I&&v&&v({direction:de>G?"left":"right"})}),z=fe(A,2),N=z[0],V=z[1],K=Ir(0,function(de,G){!I&&v&&v({direction:de>G?"top":"bottom"})}),U=fe(K,2),ne=U[0],H=U[1],le=c.useState([0,0]),be=fe(le,2),pe=be[0],oe=be[1],ee=c.useState([0,0]),ce=fe(ee,2),Z=ce[0],te=ce[1],ue=c.useState([0,0]),Se=fe(ue,2),$e=Se[0],ge=Se[1],we=c.useState([0,0]),Pe=fe(we,2),ve=Pe[0],ae=Pe[1],d=Ei(new Map),T=fe(d,2),w=T[0],R=T[1],P=Pi(x,w,Z[0]),O=xn(pe,I),X=xn(Z,I),Y=xn($e,I),F=xn(ve,I),J=Math.floor(O)<Math.floor(X+Y),Q=J?O-F:O-Y,he="".concat(b,"-nav-operations-hidden"),L=0,_=0;I&&s?(L=0,_=Math.max(0,X-Q)):(L=Math.min(0,Q-X),_=0);function ie(de){return de<L?L:de>_?_:de}var re=c.useRef(null),Ce=c.useState(),xe=fe(Ce,2),Be=xe[0],Xe=xe[1];function Ne(){Xe(Date.now())}function Me(){re.current&&clearTimeout(re.current)}Mi(B,function(de,G){function me(ye,ke){ye(function(Ve){var tt=ie(Ve+ke);return tt})}return J?(I?me(V,de):me(H,G),Me(),Ne(),!0):!1}),c.useEffect(function(){return Me(),Be&&(re.current=setTimeout(function(){Xe(0)},100)),Me},[Be]);var Te=Ii(P,Q,I?N:ne,X,Y,F,Ie(Ie({},e),{},{tabs:x})),ze=fe(Te,2),Ke=ze[0],it=ze[1],De=ft(function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i,G=P.get(de)||{width:0,height:0,left:0,right:0,top:0};if(I){var me=N;s?G.right<N?me=G.right:G.right+G.width>N+Q&&(me=G.right+G.width-Q):G.left<-N?me=-G.left:G.left+G.width>-N+Q&&(me=-(G.left+G.width-Q)),H(0),V(ie(me))}else{var ye=ne;G.top<-ne?ye=-G.top:G.top+G.height>-ne+Q&&(ye=-(G.top+G.height-Q)),V(0),H(ie(ye))}}),He=c.useState(),_e=fe(He,2),Oe=_e[0],Qe=_e[1],ot=c.useState(!1),Je=fe(ot,2),cn=Je[0],un=Je[1],ct=x.filter(function(de){return!de.disabled}).map(function(de){return de.key}),ht=function(G){var me=ct.indexOf(Oe||i),ye=ct.length,ke=(me+G+ye)%ye,Ve=ct[ke];Qe(Ve)},dn=function(G){var me=G.code,ye=s&&I,ke=ct[0],Ve=ct[ct.length-1];switch(me){case"ArrowLeft":{I&&ht(ye?1:-1);break}case"ArrowRight":{I&&ht(ye?-1:1);break}case"ArrowUp":{G.preventDefault(),I||ht(-1);break}case"ArrowDown":{G.preventDefault(),I||ht(1);break}case"Home":{G.preventDefault(),Qe(ke);break}case"End":{G.preventDefault(),Qe(Ve);break}case"Enter":case"Space":{G.preventDefault(),C(Oe??i,G);break}case"Backspace":case"Delete":{var tt=ct.indexOf(Oe),Ge=x.find(function(rt){return rt.key===Oe}),at=br(Ge?.closable,Ge?.closeIcon,u,Ge?.disabled);at&&(G.preventDefault(),G.stopPropagation(),u.onEdit("remove",{key:Oe,event:G}),tt===ct.length-1?ht(-1):ht(1));break}}},jt={};I?jt[s?"marginRight":"marginLeft"]=m:jt.marginTop=m;var fn=x.map(function(de,G){var me=de.key;return c.createElement(Ai,{id:o,prefixCls:b,key:me,tab:de,style:G===0?void 0:jt,closable:de.closable,editable:u,active:me===i,focus:me===Oe,renderWrapper:p,removeAriaLabel:f?.removeAriaLabel,tabCount:ct.length,currentPosition:G+1,onClick:function(ke){C(me,ke)},onKeyDown:dn,onFocus:function(){cn||Qe(me),De(me),Ne(),B.current&&(s||(B.current.scrollLeft=0),B.current.scrollTop=0)},onBlur:function(){Qe(void 0)},onMouseDown:function(){un(!0)},onMouseUp:function(){un(!1)}})}),hn=function(){return R(function(){var G,me=new Map,ye=(G=k.current)===null||G===void 0?void 0:G.getBoundingClientRect();return x.forEach(function(ke){var Ve,tt=ke.key,Ge=(Ve=k.current)===null||Ve===void 0?void 0:Ve.querySelector('[data-node-key="'.concat(qo(tt),'"]'));if(Ge){var at=Di(Ge,ye),rt=fe(at,4),wt=rt[0],gt=rt[1],Lt=rt[2],yn=rt[3];me.set(tt,{width:wt,height:gt,left:Lt,top:yn})}}),me})};c.useEffect(function(){hn()},[x.map(function(de){return de.key}).join("_")]);var Mt=Vo(function(){var de=_t(j),G=_t(M),me=_t(E);oe([de[0]-G[0]-me[0],de[1]-G[1]-me[1]]);var ye=_t($);ge(ye);var ke=_t(D);ae(ke);var Ve=_t(k);te([Ve[0]-ye[0],Ve[1]-ye[1]]),hn()}),Ut=x.slice(0,Ke),gn=x.slice(it+1),pn=[].concat(Ue(Ut),Ue(gn)),mn=P.get(i),vn=Ri({activeTabOffset:mn,horizontal:I,indicator:y,rtl:s}),bn=vn.style;c.useEffect(function(){De()},[i,L,_,Ar(mn),Ar(P),I]),c.useEffect(function(){Mt()},[s]);var St=!!pn.length,Et="".concat(b,"-nav-wrap"),zt,Ht,Jt,Cn;return I?s?(Ht=N>0,zt=N!==_):(zt=N<0,Ht=N!==L):(Jt=ne<0,Cn=ne!==L),c.createElement(Fn,{onResize:Mt},c.createElement("div",{ref:Aa(t,j),role:"tablist","aria-orientation":I?"horizontal":"vertical",className:se("".concat(b,"-nav"),n),style:r,onKeyDown:function(){Ne()}},c.createElement(Dr,{ref:M,position:"left",extra:l,prefixCls:b}),c.createElement(Fn,{onResize:Mt},c.createElement("div",{className:se(Et,Re(Re(Re(Re({},"".concat(Et,"-ping-left"),zt),"".concat(Et,"-ping-right"),Ht),"".concat(Et,"-ping-top"),Jt),"".concat(Et,"-ping-bottom"),Cn)),ref:B},c.createElement(Fn,{onResize:Mt},c.createElement("div",{ref:k,className:"".concat(b,"-nav-list"),style:{transform:"translate(".concat(N,"px, ").concat(ne,"px)"),transition:Be?"none":void 0}},fn,c.createElement(Uo,{ref:$,prefixCls:b,locale:f,editable:u,style:Ie(Ie({},fn.length===0?void 0:jt),{},{visibility:St?"hidden":null})}),c.createElement("div",{className:se("".concat(b,"-ink-bar"),Re({},"".concat(b,"-ink-bar-animated"),a.inkBar)),style:bn}))))),c.createElement(ki,Fe({},e,{removeAriaLabel:f?.removeAriaLabel,ref:D,prefixCls:b,tabs:pn,className:!St&&he,tabMoving:!!Be})),c.createElement(Dr,{ref:E,position:"right",extra:l,prefixCls:b})))}),Jo=c.forwardRef(function(e,t){var n=e.prefixCls,r=e.className,o=e.style,a=e.id,i=e.active,s=e.tabKey,l=e.children;return c.createElement("div",{id:a&&"".concat(a,"-panel-").concat(s),role:"tabpanel",tabIndex:i?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(s),"aria-hidden":!i,style:o,className:se(n,i&&"".concat(n,"-active"),r),ref:t},l)}),Bi=["renderTabBar"],Ni=["label","key"],zi=function(t){var n=t.renderTabBar,r=Rt(t,Bi),o=c.useContext(Ln),a=o.tabs;if(n){var i=Ie(Ie({},r),{},{panes:a.map(function(s){var l=s.label,u=s.key,f=Rt(s,Ni);return c.createElement(Jo,Fe({tab:l,key:u,tabKey:u},f))})});return n(i,Br)}return c.createElement(Br,r)},Hi=["key","forceRender","style","className","destroyInactiveTabPane"],Li=function(t){var n=t.id,r=t.activeKey,o=t.animated,a=t.tabPosition,i=t.destroyInactiveTabPane,s=c.useContext(Ln),l=s.prefixCls,u=s.tabs,f=o.tabPane,h="".concat(l,"-tabpane");return c.createElement("div",{className:se("".concat(l,"-content-holder"))},c.createElement("div",{className:se("".concat(l,"-content"),"".concat(l,"-content-").concat(a),Re({},"".concat(l,"-content-animated"),f))},u.map(function(m){var p=m.key,C=m.forceRender,v=m.style,y=m.className,S=m.destroyInactiveTabPane,b=Rt(m,Hi),x=p===r;return c.createElement(To,Fe({key:p,visible:x,forceRender:C,removeOnLeave:!!(i||S),leavedClassName:"".concat(h,"-hidden")},o.tabPaneMotion),function(j,M){var E=j.style,B=j.className;return c.createElement(Jo,Fe({},b,{prefixCls:h,id:n,tabKey:p,animated:f,active:x,style:Ie(Ie({},v),E),className:se(y,B),ref:M}))})})))};function _i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},t;return e===!1?t={inkBar:!1,tabPane:!1}:e===!0?t={inkBar:!0,tabPane:!1}:t=Ie({inkBar:!0},dt(e)==="object"?e:{}),t.tabPaneMotion&&t.tabPane===void 0&&(t.tabPane=!0),!t.tabPaneMotion&&t.tabPane&&(t.tabPane=!1),t}var Wi=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],Nr=0,Fi=c.forwardRef(function(e,t){var n=e.id,r=e.prefixCls,o=r===void 0?"rc-tabs":r,a=e.className,i=e.items,s=e.direction,l=e.activeKey,u=e.defaultActiveKey,f=e.editable,h=e.animated,m=e.tabPosition,p=m===void 0?"top":m,C=e.tabBarGutter,v=e.tabBarStyle,y=e.tabBarExtraContent,S=e.locale,b=e.more,x=e.destroyInactiveTabPane,j=e.renderTabBar,M=e.onChange,E=e.onTabClick,B=e.onTabScroll,k=e.getPopupContainer,D=e.popupClassName,$=e.indicator,I=Rt(e,Wi),A=c.useMemo(function(){return(i||[]).filter(function(ve){return ve&&dt(ve)==="object"&&"key"in ve})},[i]),z=s==="rtl",N=_i(h),V=c.useState(!1),K=fe(V,2),U=K[0],ne=K[1];c.useEffect(function(){ne(Da())},[]);var H=yt(function(){var ve;return(ve=A[0])===null||ve===void 0?void 0:ve.key},{value:l,defaultValue:u}),le=fe(H,2),be=le[0],pe=le[1],oe=c.useState(function(){return A.findIndex(function(ve){return ve.key===be})}),ee=fe(oe,2),ce=ee[0],Z=ee[1];c.useEffect(function(){var ve=A.findIndex(function(d){return d.key===be});if(ve===-1){var ae;ve=Math.max(0,Math.min(ce,A.length-1)),pe((ae=A[ve])===null||ae===void 0?void 0:ae.key)}Z(ve)},[A.map(function(ve){return ve.key}).join("_"),be,ce]);var te=yt(null,{value:n}),ue=fe(te,2),Se=ue[0],$e=ue[1];c.useEffect(function(){n||($e("rc-tabs-".concat(Nr)),Nr+=1)},[]);function ge(ve,ae){E?.(ve,ae);var d=ve!==be;pe(ve),d&&M?.(ve)}var we={id:Se,activeKey:be,animated:N,tabPosition:p,rtl:z,mobile:U},Pe=Ie(Ie({},we),{},{editable:f,locale:S,more:b,tabBarGutter:C,onTabClick:ge,onTabScroll:B,extra:y,style:v,panes:null,getPopupContainer:k,popupClassName:D,indicator:$});return c.createElement(Ln.Provider,{value:{tabs:A,prefixCls:o}},c.createElement("div",Fe({ref:t,id:n,className:se(o,"".concat(o,"-").concat(p),Re(Re(Re({},"".concat(o,"-mobile"),U),"".concat(o,"-editable"),f),"".concat(o,"-rtl"),z),a)},I),c.createElement(zi,Fe({},Pe,{renderTabBar:j})),c.createElement(Li,Fe({destroyInactiveTabPane:x},we,{animated:N}))))});const Xi={motionAppear:!1,motionEnter:!0,motionLeave:!0};function Yi(e,t={inkBar:!0,tabPane:!1}){let n;return t===!1?n={inkBar:!1,tabPane:!1}:t===!0?n={inkBar:!0,tabPane:!0}:n=Object.assign({inkBar:!0},typeof t=="object"?t:{}),n.tabPane&&(n.tabPaneMotion=Object.assign(Object.assign({},Xi),{motionName:Ba(e,"switch")})),n}var Ki=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function Gi(e){return e.filter(t=>t)}function Vi(e,t){if(e)return e.map(r=>{var o;const a=(o=r.destroyOnHidden)!==null&&o!==void 0?o:r.destroyInactiveTabPane;return Object.assign(Object.assign({},r),{destroyInactiveTabPane:a})});const n=ko(t).map(r=>{if(c.isValidElement(r)){const{key:o,props:a}=r,i=a||{},{tab:s}=i,l=Ki(i,["tab"]);return Object.assign(Object.assign({key:String(o)},l),{label:s})}return null});return Gi(n)}const qi=e=>{const{componentCls:t,motionDurationSlow:n}=e;return[{[t]:{[`${t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${n}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${n}`}}}}},[Pr(e,"slide-up"),Pr(e,"slide-down")]]},Ui=e=>{const{componentCls:t,tabsCardPadding:n,cardBg:r,cardGutter:o,colorBorderSecondary:a,itemSelectedColor:i}=e;return{[`${t}-card`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{margin:0,padding:n,background:r,border:`${W(e.lineWidth)} ${e.lineType} ${a}`,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`${t}-tab-active`]:{color:i,background:e.colorBgContainer},[`${t}-tab-focus:has(${t}-tab-btn:focus-visible)`]:hr(e,-3),[`& ${t}-tab${t}-tab-focus ${t}-tab-btn:focus-visible`]:{outline:"none"},[`${t}-ink-bar`]:{visibility:"hidden"}},[`&${t}-top, &${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginLeft:{_skip_check_:!0,value:W(o)}}}},[`&${t}-top`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)} 0 0`},[`${t}-tab-active`]:{borderBottomColor:e.colorBgContainer}}},[`&${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`0 0 ${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)}`},[`${t}-tab-active`]:{borderTopColor:e.colorBgContainer}}},[`&${t}-left, &${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginTop:W(o)}}},[`&${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${W(e.borderRadiusLG)} 0 0 ${W(e.borderRadiusLG)}`}},[`${t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:e.colorBgContainer}}}},[`&${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)} 0`}},[`${t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:e.colorBgContainer}}}}}}},Ji=e=>{const{componentCls:t,itemHoverColor:n,dropdownEdgeChildVerticalPadding:r}=e;return{[`${t}-dropdown`]:Object.assign(Object.assign({},Vt(e)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:e.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${t}-dropdown-menu`]:{maxHeight:e.tabsDropdownHeight,margin:0,padding:`${W(r)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:e.colorBgContainer,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,"&-item":Object.assign(Object.assign({},Bn),{display:"flex",alignItems:"center",minWidth:e.tabsDropdownWidth,margin:0,padding:`${W(e.paddingXXS)} ${W(e.paddingSM)}`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:e.marginSM},color:e.colorIcon,fontSize:e.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:n}},"&:hover":{background:e.controlItemBgHover},"&-disabled":{"&, &:hover":{color:e.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},Zi=e=>{const{componentCls:t,margin:n,colorBorderSecondary:r,horizontalMargin:o,verticalItemPadding:a,verticalItemMargin:i,calc:s}=e;return{[`${t}-top, ${t}-bottom`]:{flexDirection:"column",[`> ${t}-nav, > div > ${t}-nav`]:{margin:o,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${W(e.lineWidth)} ${e.lineType} ${r}`,content:"''"},[`${t}-ink-bar`]:{height:e.lineWidthBold,"&-animated":{transition:`width ${e.motionDurationSlow}, left ${e.motionDurationSlow},
            right ${e.motionDurationSlow}`}},[`${t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:e.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowRight},[`&${t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${t}-top`]:{[`> ${t}-nav,
        > div > ${t}-nav`]:{"&::before":{bottom:0},[`${t}-ink-bar`]:{bottom:0}}},[`${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,marginTop:n,marginBottom:0,"&::before":{top:0},[`${t}-ink-bar`]:{top:0}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0}},[`${t}-left, ${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{flexDirection:"column",minWidth:s(e.controlHeight).mul(1.25).equal(),[`${t}-tab`]:{padding:a,textAlign:"center"},[`${t}-tab + ${t}-tab`]:{margin:i},[`${t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:e.controlHeight},"&::before":{top:0,boxShadow:e.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:e.boxShadowTabsOverflowBottom},[`&${t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${t}-ink-bar`]:{width:e.lineWidthBold,"&-animated":{transition:`height ${e.motionDurationSlow}, top ${e.motionDurationSlow}`}},[`${t}-nav-list, ${t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:W(s(e.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${W(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:e.paddingLG}}}},[`${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,[`${t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:s(e.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${W(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:e.paddingLG}}}}}},Qi=e=>{const{componentCls:t,cardPaddingSM:n,cardPaddingLG:r,cardHeightSM:o,cardHeightLG:a,horizontalItemPaddingSM:i,horizontalItemPaddingLG:s}=e;return{[t]:{"&-small":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:i,fontSize:e.titleFontSizeSM}}},"&-large":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:s,fontSize:e.titleFontSizeLG,lineHeight:e.lineHeightLG}}}},[`${t}-card`]:{[`&${t}-small`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:n},[`${t}-nav-add`]:{minWidth:o,minHeight:o}},[`&${t}-bottom`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`0 0 ${W(e.borderRadius)} ${W(e.borderRadius)}`}},[`&${t}-top`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`${W(e.borderRadius)} ${W(e.borderRadius)} 0 0`}},[`&${t}-right`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${W(e.borderRadius)} ${W(e.borderRadius)} 0`}}},[`&${t}-left`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${W(e.borderRadius)} 0 0 ${W(e.borderRadius)}`}}}},[`&${t}-large`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:r},[`${t}-nav-add`]:{minWidth:a,minHeight:a}}}}}},es=e=>{const{componentCls:t,itemActiveColor:n,itemHoverColor:r,iconCls:o,tabsHorizontalItemMargin:a,horizontalItemPadding:i,itemSelectedColor:s,itemColor:l}=e,u=`${t}-tab`;return{[u]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:i,fontSize:e.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:l,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:n}},"&-btn":{outline:"none",transition:`all ${e.motionDurationSlow}`,[`${u}-icon:not(:last-child)`]:{marginInlineEnd:e.marginSM}},"&-remove":Object.assign({flex:"none",marginRight:{_skip_check_:!0,value:e.calc(e.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:e.marginXS},color:e.colorIcon,fontSize:e.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextHeading}},En(e)),"&:hover":{color:r},[`&${u}-active ${u}-btn`]:{color:s,textShadow:e.tabsActiveTextShadow},[`&${u}-focus ${u}-btn:focus-visible`]:hr(e),[`&${u}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${u}-disabled ${u}-btn, &${u}-disabled ${t}-remove`]:{"&:focus, &:active":{color:e.colorTextDisabled}},[`& ${u}-remove ${o}`]:{margin:0},[`${o}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:e.marginSM}}},[`${u} + ${u}`]:{margin:{_skip_check_:!0,value:a}}}},ts=e=>{const{componentCls:t,tabsHorizontalItemMarginRTL:n,iconCls:r,cardGutter:o,calc:a}=e;return{[`${t}-rtl`]:{direction:"rtl",[`${t}-nav`]:{[`${t}-tab`]:{margin:{_skip_check_:!0,value:n},[`${t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[r]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:W(e.marginSM)}},[`${t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:W(e.marginXS)},marginLeft:{_skip_check_:!0,value:W(a(e.marginXXS).mul(-1).equal())},[r]:{margin:0}}}},[`&${t}-left`]:{[`> ${t}-nav`]:{order:1},[`> ${t}-content-holder`]:{order:0}},[`&${t}-right`]:{[`> ${t}-nav`]:{order:0},[`> ${t}-content-holder`]:{order:1}},[`&${t}-card${t}-top, &${t}-card${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginRight:{_skip_check_:!0,value:o},marginLeft:{_skip_check_:!0,value:0}}}}},[`${t}-dropdown-rtl`]:{direction:"rtl"},[`${t}-menu-item`]:{[`${t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},ns=e=>{const{componentCls:t,tabsCardPadding:n,cardHeight:r,cardGutter:o,itemHoverColor:a,itemActiveColor:i,colorBorderSecondary:s}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Vt(e)),{display:"flex",[`> ${t}-nav, > div > ${t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${e.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${e.motionDurationSlow}`},[`${t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${t}-nav-more`]:{position:"relative",padding:n,background:"transparent",border:0,color:e.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:e.calc(e.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${t}-nav-add`]:Object.assign({minWidth:r,minHeight:r,marginLeft:{_skip_check_:!0,value:o},background:"transparent",border:`${W(e.lineWidth)} ${e.lineType} ${s}`,borderRadius:`${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:e.colorText,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&:hover":{color:a},"&:active, &:focus:not(:focus-visible)":{color:i}},En(e,-3))},[`${t}-extra-content`]:{flex:"none"},[`${t}-ink-bar`]:{position:"absolute",background:e.inkBarColor,pointerEvents:"none"}}),es(e)),{[`${t}-content`]:{position:"relative",width:"100%"},[`${t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${t}-tabpane`]:Object.assign(Object.assign({},En(e)),{"&-hidden":{display:"none"}})}),[`${t}-centered`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-nav-wrap`]:{[`&:not([class*='${t}-nav-wrap-ping']) > ${t}-nav-list`]:{margin:"auto"}}}}}},rs=e=>{const{cardHeight:t,cardHeightSM:n,cardHeightLG:r,controlHeight:o,controlHeightLG:a}=e,i=t||a,s=n||o,l=r||a+8;return{zIndexPopup:e.zIndexPopupBase+50,cardBg:e.colorFillAlter,cardHeight:i,cardHeightSM:s,cardHeightLG:l,cardPadding:`${(i-e.fontHeight)/2-e.lineWidth}px ${e.padding}px`,cardPaddingSM:`${(s-e.fontHeight)/2-e.lineWidth}px ${e.paddingXS}px`,cardPaddingLG:`${(l-e.fontHeightLG)/2-e.lineWidth}px ${e.padding}px`,titleFontSize:e.fontSize,titleFontSizeLG:e.fontSizeLG,titleFontSizeSM:e.fontSize,inkBarColor:e.colorPrimary,horizontalMargin:`0 0 ${e.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${e.paddingSM}px 0`,horizontalItemPaddingSM:`${e.paddingXS}px 0`,horizontalItemPaddingLG:`${e.padding}px 0`,verticalItemPadding:`${e.paddingXS}px ${e.paddingLG}px`,verticalItemMargin:`${e.margin}px 0 0 0`,itemColor:e.colorText,itemSelectedColor:e.colorPrimary,itemHoverColor:e.colorPrimaryHover,itemActiveColor:e.colorPrimaryActive,cardGutter:e.marginXXS/2}},os=Kt("Tabs",e=>{const t=Gt(e,{tabsCardPadding:e.cardPadding,dropdownEdgeChildVerticalPadding:e.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${W(e.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${W(e.horizontalItemGutter)}`});return[Qi(t),ts(t),Zi(t),Ji(t),Ui(t),ns(t),qi(t)]},rs),as=()=>null;var is=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Zo=e=>{var t,n,r,o,a,i,s,l,u,f,h;const{type:m,className:p,rootClassName:C,size:v,onEdit:y,hideAdd:S,centered:b,addIcon:x,removeIcon:j,moreIcon:M,more:E,popupClassName:B,children:k,items:D,animated:$,style:I,indicatorSize:A,indicator:z,destroyInactiveTabPane:N,destroyOnHidden:V}=e,K=is(e,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","removeIcon","moreIcon","more","popupClassName","children","items","animated","style","indicatorSize","indicator","destroyInactiveTabPane","destroyOnHidden"]),{prefixCls:U}=K,{direction:ne,tabs:H,getPrefixCls:le,getPopupContainer:be}=c.useContext(Pt),pe=le("tabs",U),oe=Ao(pe),[ee,ce,Z]=os(pe,oe);let te;m==="editable-card"&&(te={onEdit:(ve,{key:ae,event:d})=>{y?.(ve==="add"?d:ae,ve)},removeIcon:(t=j??H?.removeIcon)!==null&&t!==void 0?t:c.createElement(Do,null),addIcon:(x??H?.addIcon)||c.createElement(On,null),showAdd:S!==!0});const ue=le(),Se=Nn(v),$e=Vi(D,k),ge=Yi(pe,$),we=Object.assign(Object.assign({},H?.style),I),Pe={align:(n=z?.align)!==null&&n!==void 0?n:(r=H?.indicator)===null||r===void 0?void 0:r.align,size:(s=(a=(o=z?.size)!==null&&o!==void 0?o:A)!==null&&a!==void 0?a:(i=H?.indicator)===null||i===void 0?void 0:i.size)!==null&&s!==void 0?s:H?.indicatorSize};return ee(c.createElement(Fi,Object.assign({direction:ne,getPopupContainer:be},K,{items:$e,className:se({[`${pe}-${Se}`]:Se,[`${pe}-card`]:["card","editable-card"].includes(m),[`${pe}-editable-card`]:m==="editable-card",[`${pe}-centered`]:b},H?.className,p,C,ce,Z,oe),popupClassName:se(B,ce,Z,oe),style:we,editable:te,more:Object.assign({icon:(h=(f=(u=(l=H?.more)===null||l===void 0?void 0:l.icon)!==null&&u!==void 0?u:H?.moreIcon)!==null&&f!==void 0?f:M)!==null&&h!==void 0?h:c.createElement(Na,null),transitionName:`${ue}-slide-up`},E),prefixCls:pe,animated:ge,indicator:Pe,destroyInactiveTabPane:V??N})))};Zo.TabPane=as;var ss=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Qo=e=>{var{prefixCls:t,className:n,hoverable:r=!0}=e,o=ss(e,["prefixCls","className","hoverable"]);const{getPrefixCls:a}=c.useContext(Pt),i=a("card",t),s=se(`${i}-grid`,n,{[`${i}-grid-hoverable`]:r});return c.createElement("div",Object.assign({},o,{className:s}))},ls=e=>{const{antCls:t,componentCls:n,headerHeight:r,headerPadding:o,tabsMarginBottom:a}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${W(o)}`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.headerFontSize,background:e.headerBg,borderBottom:`${W(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)} 0 0`},zn()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},Bn),{[`
          > ${n}-typography,
          > ${n}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${t}-tabs-top`]:{clear:"both",marginBottom:a,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${W(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`}}})},cs=e=>{const{cardPaddingBase:t,colorBorderSecondary:n,cardShadow:r,lineWidth:o}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`
      ${W(o)} 0 0 0 ${n},
      0 ${W(o)} 0 0 ${n},
      ${W(o)} ${W(o)} 0 0 ${n},
      ${W(o)} 0 0 0 ${n} inset,
      0 ${W(o)} 0 0 ${n} inset;
    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},us=e=>{const{componentCls:t,iconCls:n,actionsLiMargin:r,cardActionsIconSize:o,colorBorderSecondary:a,actionsBg:i}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:i,borderTop:`${W(e.lineWidth)} ${e.lineType} ${a}`,display:"flex",borderRadius:`0 0 ${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)}`},zn()),{"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.calc(e.cardActionsIconSize).mul(2).equal(),fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${n}`]:{display:"inline-block",width:"100%",color:e.colorIcon,lineHeight:W(e.fontHeight),transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${n}`]:{fontSize:o,lineHeight:W(e.calc(o).mul(e.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${W(e.lineWidth)} ${e.lineType} ${a}`}}})},ds=e=>Object.assign(Object.assign({margin:`${W(e.calc(e.marginXXS).mul(-1).equal())} 0`,display:"flex"},zn()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},Bn),"&-description":{color:e.colorTextDescription}}),fs=e=>{const{componentCls:t,colorFillAlter:n,headerPadding:r,bodyPadding:o}=e;return{[`${t}-head`]:{padding:`0 ${W(r)}`,background:n,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${W(e.padding)} ${W(o)}`}}},hs=e=>{const{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},gs=e=>{const{componentCls:t,cardShadow:n,cardHeadPadding:r,colorBorderSecondary:o,boxShadowTertiary:a,bodyPadding:i,extraColor:s}=e;return{[t]:Object.assign(Object.assign({},Vt(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:a},[`${t}-head`]:ls(e),[`${t}-extra`]:{marginInlineStart:"auto",color:s,fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:Object.assign({padding:i,borderRadius:`0 0 ${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)}`},zn()),[`${t}-grid`]:cs(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)} 0 0`}},[`${t}-actions`]:us(e),[`${t}-meta`]:ds(e)}),[`${t}-bordered`]:{border:`${W(e.lineWidth)} ${e.lineType} ${o}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:n}},[`${t}-contain-grid`]:{borderRadius:`${W(e.borderRadiusLG)} ${W(e.borderRadiusLG)} 0 0 `,[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:e.calc(e.lineWidth).mul(-1).equal(),marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),padding:0}},[`${t}-contain-tabs`]:{[`> div${t}-head`]:{minHeight:0,[`${t}-head-title, ${t}-extra`]:{paddingTop:r}}},[`${t}-type-inner`]:fs(e),[`${t}-loading`]:hs(e),[`${t}-rtl`]:{direction:"rtl"}}},ps=e=>{const{componentCls:t,bodyPaddingSM:n,headerPaddingSM:r,headerHeightSM:o,headerFontSizeSM:a}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:o,padding:`0 ${W(r)}`,fontSize:a,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:n}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},ms=e=>{var t,n;return{headerBg:"transparent",headerFontSize:e.fontSizeLG,headerFontSizeSM:e.fontSize,headerHeight:e.fontSizeLG*e.lineHeightLG+e.padding*2,headerHeightSM:e.fontSize*e.lineHeight+e.paddingXS*2,actionsBg:e.colorBgContainer,actionsLiMargin:`${e.paddingSM}px 0`,tabsMarginBottom:-e.padding-e.lineWidth,extraColor:e.colorText,bodyPaddingSM:12,headerPaddingSM:12,bodyPadding:(t=e.bodyPadding)!==null&&t!==void 0?t:e.paddingLG,headerPadding:(n=e.headerPadding)!==null&&n!==void 0?n:e.paddingLG}},vs=Kt("Card",e=>{const t=Gt(e,{cardShadow:e.boxShadowCard,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardActionsIconSize:e.fontSize});return[gs(t),ps(t)]},ms);var zr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const bs=e=>{const{actionClasses:t,actions:n=[],actionStyle:r}=e;return c.createElement("ul",{className:t,style:r},n.map((o,a)=>{const i=`action-${a}`;return c.createElement("li",{style:{width:`${100/n.length}%`},key:i},c.createElement("span",null,o))}))},Cs=c.forwardRef((e,t)=>{const{prefixCls:n,className:r,rootClassName:o,style:a,extra:i,headStyle:s={},bodyStyle:l={},title:u,loading:f,bordered:h,variant:m,size:p,type:C,cover:v,actions:y,tabList:S,children:b,activeTabKey:x,defaultActiveTabKey:j,tabBarExtraContent:M,hoverable:E,tabProps:B={},classNames:k,styles:D}=e,$=zr(e,["prefixCls","className","rootClassName","style","extra","headStyle","bodyStyle","title","loading","bordered","variant","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps","classNames","styles"]),{getPrefixCls:I,direction:A,card:z}=c.useContext(Pt),[N]=za("card",m,h),V=P=>{var O;(O=e.onTabChange)===null||O===void 0||O.call(e,P)},K=P=>{var O;return se((O=z?.classNames)===null||O===void 0?void 0:O[P],k?.[P])},U=P=>{var O;return Object.assign(Object.assign({},(O=z?.styles)===null||O===void 0?void 0:O[P]),D?.[P])},ne=c.useMemo(()=>{let P=!1;return c.Children.forEach(b,O=>{O?.type===Qo&&(P=!0)}),P},[b]),H=I("card",n),[le,be,pe]=vs(H),oe=c.createElement(Ha,{loading:!0,active:!0,paragraph:{rows:4},title:!1},b),ee=x!==void 0,ce=Object.assign(Object.assign({},B),{[ee?"activeKey":"defaultActiveKey"]:ee?x:j,tabBarExtraContent:M});let Z;const te=Nn(p),ue=!te||te==="default"?"large":te,Se=S?c.createElement(Zo,Object.assign({size:ue},ce,{className:`${H}-head-tabs`,onChange:V,items:S.map(P=>{var{tab:O}=P,X=zr(P,["tab"]);return Object.assign({label:O},X)})})):null;if(u||i||Se){const P=se(`${H}-head`,K("header")),O=se(`${H}-head-title`,K("title")),X=se(`${H}-extra`,K("extra")),Y=Object.assign(Object.assign({},s),U("header"));Z=c.createElement("div",{className:P,style:Y},c.createElement("div",{className:`${H}-head-wrapper`},u&&c.createElement("div",{className:O,style:U("title")},u),i&&c.createElement("div",{className:X,style:U("extra")},i)),Se)}const $e=se(`${H}-cover`,K("cover")),ge=v?c.createElement("div",{className:$e,style:U("cover")},v):null,we=se(`${H}-body`,K("body")),Pe=Object.assign(Object.assign({},l),U("body")),ve=c.createElement("div",{className:we,style:Pe},f?oe:b),ae=se(`${H}-actions`,K("actions")),d=y?.length?c.createElement(bs,{actionClasses:ae,actionStyle:U("actions"),actions:y}):null,T=Hn($,["onTabChange"]),w=se(H,z?.className,{[`${H}-loading`]:f,[`${H}-bordered`]:N!=="borderless",[`${H}-hoverable`]:E,[`${H}-contain-grid`]:ne,[`${H}-contain-tabs`]:S?.length,[`${H}-${te}`]:te,[`${H}-type-${C}`]:!!C,[`${H}-rtl`]:A==="rtl"},r,o,be,pe),R=Object.assign(Object.assign({},z?.style),a);return le(c.createElement("div",Object.assign({ref:t},T,{className:w,style:R}),Z,ge,ve,d))});var ys=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Ss=e=>{const{prefixCls:t,className:n,avatar:r,title:o,description:a}=e,i=ys(e,["prefixCls","className","avatar","title","description"]),{getPrefixCls:s}=c.useContext(Pt),l=s("card",t),u=se(`${l}-meta`,n),f=r?c.createElement("div",{className:`${l}-meta-avatar`},r):null,h=o?c.createElement("div",{className:`${l}-meta-title`},o):null,m=a?c.createElement("div",{className:`${l}-meta-description`},a):null,p=h||m?c.createElement("div",{className:`${l}-meta-detail`},h,m):null;return c.createElement("div",Object.assign({},i,{className:u}),f,p)},st=Cs;st.Grid=Qo;st.Meta=Ss;var Hr=function(t,n){if(!t)return null;var r={left:t.offsetLeft,right:t.parentElement.clientWidth-t.clientWidth-t.offsetLeft,width:t.clientWidth,top:t.offsetTop,bottom:t.parentElement.clientHeight-t.clientHeight-t.offsetTop,height:t.clientHeight};return n?{left:0,right:0,width:0,top:r.top,bottom:r.bottom,height:r.height}:{left:r.left,right:r.right,width:r.width,top:0,bottom:0,height:0}},pt=function(t){return t!==void 0?"".concat(t,"px"):void 0};function ws(e){var t=e.prefixCls,n=e.containerRef,r=e.value,o=e.getValueIndex,a=e.motionName,i=e.onMotionStart,s=e.onMotionEnd,l=e.direction,u=e.vertical,f=u===void 0?!1:u,h=c.useRef(null),m=c.useState(r),p=fe(m,2),C=p[0],v=p[1],y=function(V){var K,U=o(V),ne=(K=n.current)===null||K===void 0?void 0:K.querySelectorAll(".".concat(t,"-item"))[U];return ne?.offsetParent&&ne},S=c.useState(null),b=fe(S,2),x=b[0],j=b[1],M=c.useState(null),E=fe(M,2),B=E[0],k=E[1];In(function(){if(C!==r){var N=y(C),V=y(r),K=Hr(N,f),U=Hr(V,f);v(r),j(K),k(U),N&&V?i():s()}},[r]);var D=c.useMemo(function(){if(f){var N;return pt((N=x?.top)!==null&&N!==void 0?N:0)}return pt(l==="rtl"?-x?.right:x?.left)},[f,l,x]),$=c.useMemo(function(){if(f){var N;return pt((N=B?.top)!==null&&N!==void 0?N:0)}return pt(l==="rtl"?-B?.right:B?.left)},[f,l,B]),I=function(){return f?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},A=function(){return f?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},z=function(){j(null),k(null),s()};return!x||!B?null:c.createElement(To,{visible:!0,motionName:a,motionAppear:!0,onAppearStart:I,onAppearActive:A,onVisibleChanged:z},function(N,V){var K=N.className,U=N.style,ne=Ie(Ie({},U),{},{"--thumb-start-left":D,"--thumb-start-width":pt(x?.width),"--thumb-active-left":$,"--thumb-active-width":pt(B?.width),"--thumb-start-top":D,"--thumb-start-height":pt(x?.height),"--thumb-active-top":$,"--thumb-active-height":pt(B?.height)}),H={ref:gr(h,V),style:ne,className:se("".concat(t,"-thumb"),K)};return c.createElement("div",H)})}var xs=["prefixCls","direction","vertical","options","disabled","defaultValue","value","name","onChange","className","motionName"];function $s(e){if(typeof e.title<"u")return e.title;if(dt(e.label)!=="object"){var t;return(t=e.label)===null||t===void 0?void 0:t.toString()}}function Rs(e){return e.map(function(t){if(dt(t)==="object"&&t!==null){var n=$s(t);return Ie(Ie({},t),{},{title:n})}return{label:t?.toString(),title:t?.toString(),value:t}})}var Ps=function(t){var n=t.prefixCls,r=t.className,o=t.disabled,a=t.checked,i=t.label,s=t.title,l=t.value,u=t.name,f=t.onChange,h=t.onFocus,m=t.onBlur,p=t.onKeyDown,C=t.onKeyUp,v=t.onMouseDown,y=function(b){o||f(b,l)};return c.createElement("label",{className:se(r,Re({},"".concat(n,"-item-disabled"),o)),onMouseDown:v},c.createElement("input",{name:u,className:"".concat(n,"-item-input"),type:"radio",disabled:o,checked:a,onChange:y,onFocus:h,onBlur:m,onKeyDown:p,onKeyUp:C}),c.createElement("div",{className:"".concat(n,"-item-label"),title:s,"aria-selected":a},i))},js=c.forwardRef(function(e,t){var n,r,o=e.prefixCls,a=o===void 0?"rc-segmented":o,i=e.direction,s=e.vertical,l=e.options,u=l===void 0?[]:l,f=e.disabled,h=e.defaultValue,m=e.value,p=e.name,C=e.onChange,v=e.className,y=v===void 0?"":v,S=e.motionName,b=S===void 0?"thumb-motion":S,x=Rt(e,xs),j=c.useRef(null),M=c.useMemo(function(){return gr(j,t)},[j,t]),E=c.useMemo(function(){return Rs(u)},[u]),B=yt((n=E[0])===null||n===void 0?void 0:n.value,{value:m,defaultValue:h}),k=fe(B,2),D=k[0],$=k[1],I=c.useState(!1),A=fe(I,2),z=A[0],N=A[1],V=function(we,Pe){$(Pe),C?.(Pe)},K=Hn(x,["children"]),U=c.useState(!1),ne=fe(U,2),H=ne[0],le=ne[1],be=c.useState(!1),pe=fe(be,2),oe=pe[0],ee=pe[1],ce=function(){ee(!0)},Z=function(){ee(!1)},te=function(){le(!1)},ue=function(we){we.key==="Tab"&&le(!0)},Se=function(we){var Pe=E.findIndex(function(T){return T.value===D}),ve=E.length,ae=(Pe+we+ve)%ve,d=E[ae];d&&($(d.value),C?.(d.value))},$e=function(we){switch(we.key){case"ArrowLeft":case"ArrowUp":Se(-1);break;case"ArrowRight":case"ArrowDown":Se(1);break}};return c.createElement("div",Fe({role:"radiogroup","aria-label":"segmented control",tabIndex:f?void 0:0},K,{className:se(a,(r={},Re(r,"".concat(a,"-rtl"),i==="rtl"),Re(r,"".concat(a,"-disabled"),f),Re(r,"".concat(a,"-vertical"),s),r),y),ref:M}),c.createElement("div",{className:"".concat(a,"-group")},c.createElement(ws,{vertical:s,prefixCls:a,value:D,containerRef:j,motionName:"".concat(a,"-").concat(b),direction:i,getValueIndex:function(we){return E.findIndex(function(Pe){return Pe.value===we})},onMotionStart:function(){N(!0)},onMotionEnd:function(){N(!1)}}),E.map(function(ge){var we;return c.createElement(Ps,Fe({},ge,{name:p,key:ge.value,prefixCls:a,className:se(ge.className,"".concat(a,"-item"),(we={},Re(we,"".concat(a,"-item-selected"),ge.value===D&&!z),Re(we,"".concat(a,"-item-focused"),oe&&H&&ge.value===D),we)),checked:ge.value===D,onChange:V,onFocus:ce,onBlur:Z,onKeyDown:$e,onKeyUp:ue,onMouseDown:te,disabled:!!f||!!ge.disabled}))})))}),Ms=js;function Lr(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function _r(e){return{backgroundColor:e.itemSelectedBg,boxShadow:e.boxShadowTertiary}}const Es=Object.assign({overflow:"hidden"},Bn),Is=e=>{const{componentCls:t}=e,n=e.calc(e.controlHeight).sub(e.calc(e.trackPadding).mul(2)).equal(),r=e.calc(e.controlHeightLG).sub(e.calc(e.trackPadding).mul(2)).equal(),o=e.calc(e.controlHeightSM).sub(e.calc(e.trackPadding).mul(2)).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Vt(e)),{display:"inline-block",padding:e.trackPadding,color:e.itemColor,background:e.trackBg,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`}),En(e)),{[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",flexDirection:"row",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-vertical`]:{[`${t}-group`]:{flexDirection:"column"},[`${t}-thumb`]:{width:"100%",height:0,padding:`0 ${W(e.paddingXXS)}`}},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid} ${e.motionEaseInOut}`,borderRadius:e.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},_r(e)),{color:e.itemSelectedColor}),"&-focused":Object.assign({},hr(e)),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",opacity:0,transition:`opacity ${e.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.itemHoverColor,"&::after":{opacity:1,backgroundColor:e.itemHoverBg}},[`&:active:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.itemHoverColor,"&::after":{opacity:1,backgroundColor:e.itemActiveBg}},"&-label":Object.assign({minHeight:n,lineHeight:W(n),padding:`0 ${W(e.segmentedPaddingHorizontal)}`},Es),"&-icon + *":{marginInlineStart:e.calc(e.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:Object.assign(Object.assign({},_r(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${W(e.paddingXXS)} 0`,borderRadius:e.borderRadiusSM,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, height ${e.motionDurationSlow} ${e.motionEaseInOut}`,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:r,lineHeight:W(r),padding:`0 ${W(e.segmentedPaddingHorizontal)}`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:o,lineHeight:W(o),padding:`0 ${W(e.segmentedPaddingHorizontalSM)}`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),Lr(`&-disabled ${t}-item`,e)),Lr(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"},[`&${t}-shape-round`]:{borderRadius:9999,[`${t}-item, ${t}-thumb`]:{borderRadius:9999}}})}},Os=e=>{const{colorTextLabel:t,colorText:n,colorFillSecondary:r,colorBgElevated:o,colorFill:a,lineWidthBold:i,colorBgLayout:s}=e;return{trackPadding:i,trackBg:s,itemColor:t,itemHoverColor:n,itemHoverBg:r,itemSelectedBg:o,itemActiveBg:a,itemSelectedColor:n}},Ts=Kt("Segmented",e=>{const{lineWidth:t,calc:n}=e,r=Gt(e,{segmentedPaddingHorizontal:n(e.controlPaddingHorizontal).sub(t).equal(),segmentedPaddingHorizontalSM:n(e.controlPaddingHorizontalSM).sub(t).equal()});return[Is(r)]},Os);var Wr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function ks(e){return typeof e=="object"&&!!e?.icon}const As=c.forwardRef((e,t)=>{const n=La(),{prefixCls:r,className:o,rootClassName:a,block:i,options:s=[],size:l="middle",style:u,vertical:f,shape:h="default",name:m=n}=e,p=Wr(e,["prefixCls","className","rootClassName","block","options","size","style","vertical","shape","name"]),{getPrefixCls:C,direction:v,className:y,style:S}=pr("segmented"),b=C("segmented",r),[x,j,M]=Ts(b),E=Nn(l),B=c.useMemo(()=>s.map($=>{if(ks($)){const{icon:I,label:A}=$,z=Wr($,["icon","label"]);return Object.assign(Object.assign({},z),{label:c.createElement(c.Fragment,null,c.createElement("span",{className:`${b}-item-icon`},I),A&&c.createElement("span",null,A))})}return $}),[s,b]),k=se(o,a,y,{[`${b}-block`]:i,[`${b}-sm`]:E==="small",[`${b}-lg`]:E==="large",[`${b}-vertical`]:f,[`${b}-shape-${h}`]:h==="round"},j,M),D=Object.assign(Object.assign({},S),u);return x(c.createElement(Ms,Object.assign({},p,{name:m,className:k,style:D,options:B,ref:t,prefixCls:b,direction:v,vertical:f})))}),Ds=As,ea=q.createContext({}),ta=q.createContext({}),na=({prefixCls:e,value:t,onChange:n})=>{const r=()=>{if(n&&t&&!t.cleared){const o=t.toHsb();o.a=0;const a=lt(o);a.cleared=!0,n(a)}};return q.createElement("div",{className:`${e}-clear`,onClick:r})},ra="hex",oa="rgb",aa="hsb",kt=({prefixCls:e,min:t=0,max:n=100,value:r,onChange:o,className:a,formatter:i})=>{const s=`${e}-steppers`,[l,u]=c.useState(0),f=Number.isNaN(r)?l:r;return q.createElement(We,{className:se(s,a),min:t,max:n,value:f,formatter:i,size:"small",onChange:h=>{u(h||0),o?.(h)}})},Bs=({prefixCls:e,value:t,onChange:n})=>{const r=`${e}-alpha-input`,[o,a]=c.useState(()=>lt(t||"#000")),i=t||o,s=l=>{const u=i.toHsb();u.a=(l||0)/100;const f=lt(u);a(f),n?.(f)};return q.createElement(kt,{value:mr(i),prefixCls:e,formatter:l=>`${l}%`,className:r,onChange:s})},Ns=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,zs=e=>Ns.test(`#${e}`),Hs=({prefixCls:e,value:t,onChange:n})=>{const r=`${e}-hex-input`,[o,a]=c.useState(()=>t?Sn(t.toHexString()):void 0);c.useEffect(()=>{t&&a(Sn(t.toHexString()))},[t]);const i=s=>{const l=s.target.value;a(Sn(l)),zs(Sn(l,!0))&&n?.(lt(l))};return q.createElement(_a,{className:r,value:o,prefix:"#",onChange:i,size:"small"})},Ls=({prefixCls:e,value:t,onChange:n})=>{const r=`${e}-hsb-input`,[o,a]=c.useState(()=>lt(t||"#000")),i=t||o,s=(l,u)=>{const f=i.toHsb();f[u]=u==="h"?l:(l||0)/100;const h=lt(f);a(h),n?.(h)};return q.createElement("div",{className:r},q.createElement(kt,{max:360,min:0,value:Number(i.toHsb().h),prefixCls:e,className:r,formatter:l=>Xn(l||0).toString(),onChange:l=>s(Number(l),"h")}),q.createElement(kt,{max:100,min:0,value:Number(i.toHsb().s)*100,prefixCls:e,className:r,formatter:l=>`${Xn(l||0)}%`,onChange:l=>s(Number(l),"s")}),q.createElement(kt,{max:100,min:0,value:Number(i.toHsb().b)*100,prefixCls:e,className:r,formatter:l=>`${Xn(l||0)}%`,onChange:l=>s(Number(l),"b")}))},_s=({prefixCls:e,value:t,onChange:n})=>{const r=`${e}-rgb-input`,[o,a]=c.useState(()=>lt(t||"#000")),i=t||o,s=(l,u)=>{const f=i.toRgb();f[u]=l||0;const h=lt(f);a(h),n?.(h)};return q.createElement("div",{className:r},q.createElement(kt,{max:255,min:0,value:Number(i.toRgb().r),prefixCls:e,className:r,onChange:l=>s(Number(l),"r")}),q.createElement(kt,{max:255,min:0,value:Number(i.toRgb().g),prefixCls:e,className:r,onChange:l=>s(Number(l),"g")}),q.createElement(kt,{max:255,min:0,value:Number(i.toRgb().b),prefixCls:e,className:r,onChange:l=>s(Number(l),"b")}))},Ws=[ra,aa,oa].map(e=>({value:e,label:e.toUpperCase()})),Fs=e=>{const{prefixCls:t,format:n,value:r,disabledAlpha:o,onFormatChange:a,onChange:i,disabledFormat:s}=e,[l,u]=yt(ra,{value:n,onChange:a}),f=`${t}-input`,h=p=>{u(p)},m=c.useMemo(()=>{const p={value:r,prefixCls:t,onChange:i};switch(l){case aa:return q.createElement(Ls,Object.assign({},p));case oa:return q.createElement(_s,Object.assign({},p));default:return q.createElement(Hs,Object.assign({},p))}},[l,t,r,i]);return q.createElement("div",{className:`${f}-container`},!s&&q.createElement(Ot,{value:l,variant:"borderless",getPopupContainer:p=>p,popupMatchSelectWidth:68,placement:"bottomRight",onChange:h,className:`${t}-format-select`,size:"small",options:Ws}),q.createElement("div",{className:f},m),!o&&q.createElement(Bs,{prefixCls:t,value:r,onChange:i}))};function ar(e,t,n){return(e-t)/(n-t)}function Cr(e,t,n,r){var o=ar(t,n,r),a={};switch(e){case"rtl":a.right="".concat(o*100,"%"),a.transform="translateX(50%)";break;case"btt":a.bottom="".concat(o*100,"%"),a.transform="translateY(50%)";break;case"ttb":a.top="".concat(o*100,"%"),a.transform="translateY(-50%)";break;default:a.left="".concat(o*100,"%"),a.transform="translateX(-50%)";break}return a}function Tt(e,t){return Array.isArray(e)?e[t]:e}var Nt=c.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),ia=c.createContext({}),Xs=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],Fr=c.forwardRef(function(e,t){var n=e.prefixCls,r=e.value,o=e.valueIndex,a=e.onStartMove,i=e.onDelete,s=e.style,l=e.render,u=e.dragging,f=e.draggingDelete,h=e.onOffsetChange,m=e.onChangeComplete,p=e.onFocus,C=e.onMouseEnter,v=Rt(e,Xs),y=c.useContext(Nt),S=y.min,b=y.max,x=y.direction,j=y.disabled,M=y.keyboard,E=y.range,B=y.tabIndex,k=y.ariaLabelForHandle,D=y.ariaLabelledByForHandle,$=y.ariaRequired,I=y.ariaValueTextFormatterForHandle,A=y.styles,z=y.classNames,N="".concat(n,"-handle"),V=function(ce){j||a(ce,o)},K=function(ce){p?.(ce,o)},U=function(ce){C(ce,o)},ne=function(ce){if(!j&&M){var Z=null;switch(ce.which||ce.keyCode){case Le.LEFT:Z=x==="ltr"||x==="btt"?-1:1;break;case Le.RIGHT:Z=x==="ltr"||x==="btt"?1:-1;break;case Le.UP:Z=x!=="ttb"?1:-1;break;case Le.DOWN:Z=x!=="ttb"?-1:1;break;case Le.HOME:Z="min";break;case Le.END:Z="max";break;case Le.PAGE_UP:Z=2;break;case Le.PAGE_DOWN:Z=-2;break;case Le.BACKSPACE:case Le.DELETE:i(o);break}Z!==null&&(ce.preventDefault(),h(Z,o))}},H=function(ce){switch(ce.which||ce.keyCode){case Le.LEFT:case Le.RIGHT:case Le.UP:case Le.DOWN:case Le.HOME:case Le.END:case Le.PAGE_UP:case Le.PAGE_DOWN:m?.();break}},le=Cr(x,r,S,b),be={};if(o!==null){var pe;be={tabIndex:j?null:Tt(B,o),role:"slider","aria-valuemin":S,"aria-valuemax":b,"aria-valuenow":r,"aria-disabled":j,"aria-label":Tt(k,o),"aria-labelledby":Tt(D,o),"aria-required":Tt($,o),"aria-valuetext":(pe=Tt(I,o))===null||pe===void 0?void 0:pe(r),"aria-orientation":x==="ltr"||x==="rtl"?"horizontal":"vertical",onMouseDown:V,onTouchStart:V,onFocus:K,onMouseEnter:U,onKeyDown:ne,onKeyUp:H}}var oe=c.createElement("div",Fe({ref:t,className:se(N,Re(Re(Re({},"".concat(N,"-").concat(o+1),o!==null&&E),"".concat(N,"-dragging"),u),"".concat(N,"-dragging-delete"),f),z.handle),style:Ie(Ie(Ie({},le),s),A.handle)},be,v));return l&&(oe=l(oe,{index:o,prefixCls:n,value:r,dragging:u,draggingDelete:f})),oe}),Ys=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],Ks=c.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,o=e.onStartMove,a=e.onOffsetChange,i=e.values,s=e.handleRender,l=e.activeHandleRender,u=e.draggingIndex,f=e.draggingDelete,h=e.onFocus,m=Rt(e,Ys),p=c.useRef({}),C=c.useState(!1),v=fe(C,2),y=v[0],S=v[1],b=c.useState(-1),x=fe(b,2),j=x[0],M=x[1],E=function(I){M(I),S(!0)},B=function(I,A){E(A),h?.(I)},k=function(I,A){E(A)};c.useImperativeHandle(t,function(){return{focus:function(I){var A;(A=p.current[I])===null||A===void 0||A.focus()},hideHelp:function(){Wa.flushSync(function(){S(!1)})}}});var D=Ie({prefixCls:n,onStartMove:o,onOffsetChange:a,render:s,onFocus:B,onMouseEnter:k},m);return c.createElement(c.Fragment,null,i.map(function($,I){var A=u===I;return c.createElement(Fr,Fe({ref:function(N){N?p.current[I]=N:delete p.current[I]},dragging:A,draggingDelete:A&&f,style:Tt(r,I),key:I,value:$,valueIndex:I},D))}),l&&y&&c.createElement(Fr,Fe({key:"a11y"},D,{value:i[j],valueIndex:null,dragging:u!==-1,draggingDelete:f,render:l,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),Gs=function(t){var n=t.prefixCls,r=t.style,o=t.children,a=t.value,i=t.onClick,s=c.useContext(Nt),l=s.min,u=s.max,f=s.direction,h=s.includedStart,m=s.includedEnd,p=s.included,C="".concat(n,"-text"),v=Cr(f,a,l,u);return c.createElement("span",{className:se(C,Re({},"".concat(C,"-active"),p&&h<=a&&a<=m)),style:Ie(Ie({},v),r),onMouseDown:function(S){S.stopPropagation()},onClick:function(){i(a)}},o)},Vs=function(t){var n=t.prefixCls,r=t.marks,o=t.onClick,a="".concat(n,"-mark");return r.length?c.createElement("div",{className:a},r.map(function(i){var s=i.value,l=i.style,u=i.label;return c.createElement(Gs,{key:s,prefixCls:a,style:l,value:s,onClick:o},u)})):null},qs=function(t){var n=t.prefixCls,r=t.value,o=t.style,a=t.activeStyle,i=c.useContext(Nt),s=i.min,l=i.max,u=i.direction,f=i.included,h=i.includedStart,m=i.includedEnd,p="".concat(n,"-dot"),C=f&&h<=r&&r<=m,v=Ie(Ie({},Cr(u,r,s,l)),typeof o=="function"?o(r):o);return C&&(v=Ie(Ie({},v),typeof a=="function"?a(r):a)),c.createElement("span",{className:se(p,Re({},"".concat(p,"-active"),C)),style:v})},Us=function(t){var n=t.prefixCls,r=t.marks,o=t.dots,a=t.style,i=t.activeStyle,s=c.useContext(Nt),l=s.min,u=s.max,f=s.step,h=c.useMemo(function(){var m=new Set;if(r.forEach(function(C){m.add(C.value)}),o&&f!==null)for(var p=l;p<=u;)m.add(p),p+=f;return Array.from(m)},[l,u,f,o,r]);return c.createElement("div",{className:"".concat(n,"-step")},h.map(function(m){return c.createElement(qs,{prefixCls:n,key:m,value:m,style:a,activeStyle:i})}))},Xr=function(t){var n=t.prefixCls,r=t.style,o=t.start,a=t.end,i=t.index,s=t.onStartMove,l=t.replaceCls,u=c.useContext(Nt),f=u.direction,h=u.min,m=u.max,p=u.disabled,C=u.range,v=u.classNames,y="".concat(n,"-track"),S=ar(o,h,m),b=ar(a,h,m),x=function(B){!p&&s&&s(B,-1)},j={};switch(f){case"rtl":j.right="".concat(S*100,"%"),j.width="".concat(b*100-S*100,"%");break;case"btt":j.bottom="".concat(S*100,"%"),j.height="".concat(b*100-S*100,"%");break;case"ttb":j.top="".concat(S*100,"%"),j.height="".concat(b*100-S*100,"%");break;default:j.left="".concat(S*100,"%"),j.width="".concat(b*100-S*100,"%")}var M=l||se(y,Re(Re({},"".concat(y,"-").concat(i+1),i!==null&&C),"".concat(n,"-track-draggable"),s),v.track);return c.createElement("div",{className:M,style:Ie(Ie({},j),r),onMouseDown:x,onTouchStart:x})},Js=function(t){var n=t.prefixCls,r=t.style,o=t.values,a=t.startPoint,i=t.onStartMove,s=c.useContext(Nt),l=s.included,u=s.range,f=s.min,h=s.styles,m=s.classNames,p=c.useMemo(function(){if(!u){if(o.length===0)return[];var v=a??f,y=o[0];return[{start:Math.min(v,y),end:Math.max(v,y)}]}for(var S=[],b=0;b<o.length-1;b+=1)S.push({start:o[b],end:o[b+1]});return S},[o,u,a,f]);if(!l)return null;var C=p!=null&&p.length&&(m.tracks||h.tracks)?c.createElement(Xr,{index:null,prefixCls:n,start:p[0].start,end:p[p.length-1].end,replaceCls:se(m.tracks,"".concat(n,"-tracks")),style:h.tracks}):null;return c.createElement(c.Fragment,null,C,p.map(function(v,y){var S=v.start,b=v.end;return c.createElement(Xr,{index:y,prefixCls:n,style:Ie(Ie({},Tt(r,y)),h.track),start:S,end:b,key:y,onStartMove:i})}))},Zs=130;function Yr(e){var t="targetTouches"in e?e.targetTouches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function Qs(e,t,n,r,o,a,i,s,l,u,f){var h=c.useState(null),m=fe(h,2),p=m[0],C=m[1],v=c.useState(-1),y=fe(v,2),S=y[0],b=y[1],x=c.useState(!1),j=fe(x,2),M=j[0],E=j[1],B=c.useState(n),k=fe(B,2),D=k[0],$=k[1],I=c.useState(n),A=fe(I,2),z=A[0],N=A[1],V=c.useRef(null),K=c.useRef(null),U=c.useRef(null),ne=c.useContext(ia),H=ne.onDragStart,le=ne.onDragChange;In(function(){S===-1&&$(n)},[n,S]),c.useEffect(function(){return function(){document.removeEventListener("mousemove",V.current),document.removeEventListener("mouseup",K.current),U.current&&(U.current.removeEventListener("touchmove",V.current),U.current.removeEventListener("touchend",K.current))}},[]);var be=function(Z,te,ue){te!==void 0&&C(te),$(Z);var Se=Z;ue&&(Se=Z.filter(function($e,ge){return ge!==S})),i(Se),le&&le({rawValues:Z,deleteIndex:ue?S:-1,draggingIndex:S,draggingValue:te})},pe=ft(function(ce,Z,te){if(ce===-1){var ue=z[0],Se=z[z.length-1],$e=r-ue,ge=o-Se,we=Z*(o-r);we=Math.max(we,$e),we=Math.min(we,ge);var Pe=a(ue+we);we=Pe-ue;var ve=z.map(function(w){return w+we});be(ve)}else{var ae=(o-r)*Z,d=Ue(D);d[ce]=z[ce];var T=l(d,ae,ce,"dist");be(T.values,T.value,te)}}),oe=function(Z,te,ue){Z.stopPropagation();var Se=ue||n,$e=Se[te];b(te),C($e),N(Se),$(Se),E(!1);var ge=Yr(Z),we=ge.pageX,Pe=ge.pageY,ve=!1;H&&H({rawValues:Se,draggingIndex:te,draggingValue:$e});var ae=function(w){w.preventDefault();var R=Yr(w),P=R.pageX,O=R.pageY,X=P-we,Y=O-Pe,F=e.current.getBoundingClientRect(),J=F.width,Q=F.height,he,L;switch(t){case"btt":he=-Y/Q,L=X;break;case"ttb":he=Y/Q,L=X;break;case"rtl":he=-X/J,L=Y;break;default:he=X/J,L=Y}ve=u?Math.abs(L)>Zs&&f<D.length:!1,E(ve),pe(te,he,ve)},d=function T(w){w.preventDefault(),document.removeEventListener("mouseup",T),document.removeEventListener("mousemove",ae),U.current&&(U.current.removeEventListener("touchmove",V.current),U.current.removeEventListener("touchend",K.current)),V.current=null,K.current=null,U.current=null,s(ve),b(-1),E(!1)};document.addEventListener("mouseup",d),document.addEventListener("mousemove",ae),Z.currentTarget.addEventListener("touchend",d),Z.currentTarget.addEventListener("touchmove",ae),V.current=ae,K.current=d,U.current=Z.currentTarget},ee=c.useMemo(function(){var ce=Ue(n).sort(function($e,ge){return $e-ge}),Z=Ue(D).sort(function($e,ge){return $e-ge}),te={};Z.forEach(function($e){te[$e]=(te[$e]||0)+1}),ce.forEach(function($e){te[$e]=(te[$e]||0)-1});var ue=u?1:0,Se=Object.values(te).reduce(function($e,ge){return $e+Math.abs(ge)},0);return Se<=ue?D:n},[n,D,u]);return[S,p,M,ee,oe]}function el(e,t,n,r,o,a){var i=c.useCallback(function(p){return Math.max(e,Math.min(t,p))},[e,t]),s=c.useCallback(function(p){if(n!==null){var C=e+Math.round((i(p)-e)/n)*n,v=function(x){return(String(x).split(".")[1]||"").length},y=Math.max(v(n),v(t),v(e)),S=Number(C.toFixed(y));return e<=S&&S<=t?S:null}return null},[n,e,t,i]),l=c.useCallback(function(p){var C=i(p),v=r.map(function(b){return b.value});n!==null&&v.push(s(p)),v.push(e,t);var y=v[0],S=t-e;return v.forEach(function(b){var x=Math.abs(C-b);x<=S&&(y=b,S=x)}),y},[e,t,r,n,i,s]),u=function p(C,v,y){var S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof v=="number"){var b,x=C[y],j=x+v,M=[];r.forEach(function($){M.push($.value)}),M.push(e,t),M.push(s(x));var E=v>0?1:-1;S==="unit"?M.push(s(x+E*n)):M.push(s(j)),M=M.filter(function($){return $!==null}).filter(function($){return v<0?$<=x:$>=x}),S==="unit"&&(M=M.filter(function($){return $!==x}));var B=S==="unit"?x:j;b=M[0];var k=Math.abs(b-B);if(M.forEach(function($){var I=Math.abs($-B);I<k&&(b=$,k=I)}),b===void 0)return v<0?e:t;if(S==="dist")return b;if(Math.abs(v)>1){var D=Ue(C);return D[y]=b,p(D,v-E,y,S)}return b}else{if(v==="min")return e;if(v==="max")return t}},f=function(C,v,y){var S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",b=C[y],x=u(C,v,y,S);return{value:x,changed:x!==b}},h=function(C){return a===null&&C===0||typeof a=="number"&&C<a},m=function(C,v,y){var S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",b=C.map(l),x=b[y],j=u(b,v,y,S);if(b[y]=j,o===!1){var M=a||0;y>0&&b[y-1]!==x&&(b[y]=Math.max(b[y],b[y-1]+M)),y<b.length-1&&b[y+1]!==x&&(b[y]=Math.min(b[y],b[y+1]-M))}else if(typeof a=="number"||a===null){for(var E=y+1;E<b.length;E+=1)for(var B=!0;h(b[E]-b[E-1])&&B;){var k=f(b,1,E);b[E]=k.value,B=k.changed}for(var D=y;D>0;D-=1)for(var $=!0;h(b[D]-b[D-1])&&$;){var I=f(b,-1,D-1);b[D-1]=I.value,$=I.changed}for(var A=b.length-1;A>0;A-=1)for(var z=!0;h(b[A]-b[A-1])&&z;){var N=f(b,-1,A-1);b[A-1]=N.value,z=N.changed}for(var V=0;V<b.length-1;V+=1)for(var K=!0;h(b[V+1]-b[V])&&K;){var U=f(b,1,V+1);b[V+1]=U.value,K=U.changed}}return{value:b[y],values:b}};return[l,m]}function tl(e){return c.useMemo(function(){if(e===!0||!e)return[!!e,!1,!1,0];var t=e.editable,n=e.draggableTrack,r=e.minCount,o=e.maxCount;return[!0,t,!t&&n,r||0,o]},[e])}var nl=c.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-slider":n,o=e.className,a=e.style,i=e.classNames,s=e.styles,l=e.id,u=e.disabled,f=u===void 0?!1:u,h=e.keyboard,m=h===void 0?!0:h,p=e.autoFocus,C=e.onFocus,v=e.onBlur,y=e.min,S=y===void 0?0:y,b=e.max,x=b===void 0?100:b,j=e.step,M=j===void 0?1:j,E=e.value,B=e.defaultValue,k=e.range,D=e.count,$=e.onChange,I=e.onBeforeChange,A=e.onAfterChange,z=e.onChangeComplete,N=e.allowCross,V=N===void 0?!0:N,K=e.pushable,U=K===void 0?!1:K,ne=e.reverse,H=e.vertical,le=e.included,be=le===void 0?!0:le,pe=e.startPoint,oe=e.trackStyle,ee=e.handleStyle,ce=e.railStyle,Z=e.dotStyle,te=e.activeDotStyle,ue=e.marks,Se=e.dots,$e=e.handleRender,ge=e.activeHandleRender,we=e.track,Pe=e.tabIndex,ve=Pe===void 0?0:Pe,ae=e.ariaLabelForHandle,d=e.ariaLabelledByForHandle,T=e.ariaRequired,w=e.ariaValueTextFormatterForHandle,R=c.useRef(null),P=c.useRef(null),O=c.useMemo(function(){return H?ne?"ttb":"btt":ne?"rtl":"ltr"},[ne,H]),X=tl(k),Y=fe(X,5),F=Y[0],J=Y[1],Q=Y[2],he=Y[3],L=Y[4],_=c.useMemo(function(){return isFinite(S)?S:0},[S]),ie=c.useMemo(function(){return isFinite(x)?x:100},[x]),re=c.useMemo(function(){return M!==null&&M<=0?1:M},[M]),Ce=c.useMemo(function(){return typeof U=="boolean"?U?re:!1:U>=0?U:!1},[U,re]),xe=c.useMemo(function(){return Object.keys(ue||{}).map(function(de){var G=ue[de],me={value:Number(de)};return G&&dt(G)==="object"&&!c.isValidElement(G)&&("label"in G||"style"in G)?(me.style=G.style,me.label=G.label):me.label=G,me}).filter(function(de){var G=de.label;return G||typeof G=="number"}).sort(function(de,G){return de.value-G.value})},[ue]),Be=el(_,ie,re,xe,V,Ce),Xe=fe(Be,2),Ne=Xe[0],Me=Xe[1],Te=yt(B,{value:E}),ze=fe(Te,2),Ke=ze[0],it=ze[1],De=c.useMemo(function(){var de=Ke==null?[]:Array.isArray(Ke)?Ke:[Ke],G=fe(de,1),me=G[0],ye=me===void 0?_:me,ke=Ke===null?[]:[ye];if(F){if(ke=Ue(de),D||Ke===void 0){var Ve=D>=0?D+1:2;for(ke=ke.slice(0,Ve);ke.length<Ve;){var tt;ke.push((tt=ke[ke.length-1])!==null&&tt!==void 0?tt:_)}}ke.sort(function(Ge,at){return Ge-at})}return ke.forEach(function(Ge,at){ke[at]=Ne(Ge)}),ke},[Ke,F,_,D,Ne]),He=function(G){return F?G:G[0]},_e=ft(function(de){var G=Ue(de).sort(function(me,ye){return me-ye});$&&!Fa(G,De,!0)&&$(He(G)),it(G)}),Oe=ft(function(de){de&&R.current.hideHelp();var G=He(De);A?.(G),jr(!A,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),z?.(G)}),Qe=function(G){if(!(f||!J||De.length<=he)){var me=Ue(De);me.splice(G,1),I?.(He(me)),_e(me);var ye=Math.max(0,G-1);R.current.hideHelp(),R.current.focus(ye)}},ot=Qs(P,O,De,_,ie,Ne,_e,Oe,Me,J,he),Je=fe(ot,5),cn=Je[0],un=Je[1],ct=Je[2],ht=Je[3],dn=Je[4],jt=function(G,me){if(!f){var ye=Ue(De),ke=0,Ve=0,tt=ie-_;De.forEach(function(gt,Lt){var yn=Math.abs(G-gt);yn<=tt&&(tt=yn,ke=Lt),gt<G&&(Ve=Lt)});var Ge=ke;J&&tt!==0&&(!L||De.length<L)?(ye.splice(Ve+1,0,G),Ge=Ve+1):ye[ke]=G,F&&!De.length&&D===void 0&&ye.push(G);var at=He(ye);if(I?.(at),_e(ye),me){var rt,wt;(rt=document.activeElement)===null||rt===void 0||(wt=rt.blur)===null||wt===void 0||wt.call(rt),R.current.focus(Ge),dn(me,Ge,ye)}else A?.(at),jr(!A,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),z?.(at)}},fn=function(G){G.preventDefault();var me=P.current.getBoundingClientRect(),ye=me.width,ke=me.height,Ve=me.left,tt=me.top,Ge=me.bottom,at=me.right,rt=G.clientX,wt=G.clientY,gt;switch(O){case"btt":gt=(Ge-wt)/ke;break;case"ttb":gt=(wt-tt)/ke;break;case"rtl":gt=(at-rt)/ye;break;default:gt=(rt-Ve)/ye}var Lt=_+gt*(ie-_);jt(Ne(Lt),G)},hn=c.useState(null),Mt=fe(hn,2),Ut=Mt[0],gn=Mt[1],pn=function(G,me){if(!f){var ye=Me(De,G,me);I?.(He(De)),_e(ye.values),gn(ye.value)}};c.useEffect(function(){if(Ut!==null){var de=De.indexOf(Ut);de>=0&&R.current.focus(de)}gn(null)},[Ut]);var mn=c.useMemo(function(){return Q&&re===null?!1:Q},[Q,re]),vn=ft(function(de,G){dn(de,G),I?.(He(De))}),bn=cn!==-1;c.useEffect(function(){if(!bn){var de=De.lastIndexOf(un);R.current.focus(de)}},[bn]);var St=c.useMemo(function(){return Ue(ht).sort(function(de,G){return de-G})},[ht]),Et=c.useMemo(function(){return F?[St[0],St[St.length-1]]:[_,St[0]]},[St,F,_]),zt=fe(Et,2),Ht=zt[0],Jt=zt[1];c.useImperativeHandle(t,function(){return{focus:function(){R.current.focus(0)},blur:function(){var G,me=document,ye=me.activeElement;(G=P.current)!==null&&G!==void 0&&G.contains(ye)&&ye?.blur()}}}),c.useEffect(function(){p&&R.current.focus(0)},[]);var Cn=c.useMemo(function(){return{min:_,max:ie,direction:O,disabled:f,keyboard:m,step:re,included:be,includedStart:Ht,includedEnd:Jt,range:F,tabIndex:ve,ariaLabelForHandle:ae,ariaLabelledByForHandle:d,ariaRequired:T,ariaValueTextFormatterForHandle:w,styles:s||{},classNames:i||{}}},[_,ie,O,f,m,re,be,Ht,Jt,F,ve,ae,d,T,w,s,i]);return c.createElement(Nt.Provider,{value:Cn},c.createElement("div",{ref:P,className:se(r,o,Re(Re(Re(Re({},"".concat(r,"-disabled"),f),"".concat(r,"-vertical"),H),"".concat(r,"-horizontal"),!H),"".concat(r,"-with-marks"),xe.length)),style:a,onMouseDown:fn,id:l},c.createElement("div",{className:se("".concat(r,"-rail"),i?.rail),style:Ie(Ie({},ce),s?.rail)}),we!==!1&&c.createElement(Js,{prefixCls:r,style:oe,values:De,startPoint:pe,onStartMove:mn?vn:void 0}),c.createElement(Us,{prefixCls:r,marks:xe,dots:Se,style:Z,activeStyle:te}),c.createElement(Ks,{ref:R,prefixCls:r,style:ee,values:ht,draggingIndex:cn,draggingDelete:ct,onStartMove:vn,onOffsetChange:pn,onFocus:C,onBlur:v,handleRender:$e,activeHandleRender:ge,onChangeComplete:Oe,onDelete:J?Qe:void 0}),c.createElement(Vs,{prefixCls:r,marks:xe,onClick:jt})))});const sa=c.createContext({}),Kr=c.forwardRef((e,t)=>{const{open:n,draggingDelete:r,value:o}=e,a=c.useRef(null),i=n&&!r,s=c.useRef(null);function l(){Dt.cancel(s.current),s.current=null}function u(){s.current=Dt(()=>{var f;(f=a.current)===null||f===void 0||f.forceAlign(),s.current=null})}return c.useEffect(()=>(i?u():l(),l),[i,e.title,o]),c.createElement(Bo,Object.assign({ref:gr(a,t)},e,{open:i}))}),rl=e=>{const{componentCls:t,antCls:n,controlSize:r,dotSize:o,marginFull:a,marginPart:i,colorFillContentHover:s,handleColorDisabled:l,calc:u,handleSize:f,handleSizeHover:h,handleActiveColor:m,handleActiveOutlineColor:p,handleLineWidth:C,handleLineWidthHover:v,motionDurationMid:y}=e;return{[t]:Object.assign(Object.assign({},Vt(e)),{position:"relative",height:r,margin:`${W(i)} ${W(a)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${W(a)} ${W(i)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${y}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${y}`},[`${t}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:e.railHoverBg},[`${t}-track`]:{backgroundColor:e.trackHoverBg},[`${t}-dot`]:{borderColor:s},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${W(C)} ${e.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:f,height:f,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:u(C).mul(-1).equal(),insetBlockStart:u(C).mul(-1).equal(),width:u(f).add(u(C).mul(2)).equal(),height:u(f).add(u(C).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:f,height:f,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${W(C)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${y},
            inset-block-start ${y},
            width ${y},
            height ${y},
            box-shadow ${y},
            outline ${y}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:u(h).sub(f).div(2).add(v).mul(-1).equal(),insetBlockStart:u(h).sub(f).div(2).add(v).mul(-1).equal(),width:u(h).add(u(v).mul(2)).equal(),height:u(h).add(u(v).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${W(v)} ${m}`,outline:`6px solid ${p}`,width:h,height:h,insetInlineStart:e.calc(f).sub(h).div(2).equal(),insetBlockStart:e.calc(f).sub(h).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:o,height:o,backgroundColor:e.colorBgElevated,border:`${W(C)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${t}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${t}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:f,height:f,boxShadow:`0 0 0 ${W(C)} ${l}`,insetInlineStart:0,insetBlockStart:0},[`
          ${t}-mark-text,
          ${t}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${n}-tooltip-inner`]:{minWidth:"unset"}})}},la=(e,t)=>{const{componentCls:n,railSize:r,handleSize:o,dotSize:a,marginFull:i,calc:s}=e,l=t?"paddingBlock":"paddingInline",u=t?"width":"height",f=t?"height":"width",h=t?"insetBlockStart":"insetInlineStart",m=t?"top":"insetInlineStart",p=s(r).mul(3).sub(o).div(2).equal(),C=s(o).sub(r).div(2).equal(),v=t?{borderWidth:`${W(C)} 0`,transform:`translateY(${W(s(C).mul(-1).equal())})`}:{borderWidth:`0 ${W(C)}`,transform:`translateX(${W(e.calc(C).mul(-1).equal())})`};return{[l]:r,[f]:s(r).mul(3).equal(),[`${n}-rail`]:{[u]:"100%",[f]:r},[`${n}-track,${n}-tracks`]:{[f]:r},[`${n}-track-draggable`]:Object.assign({},v),[`${n}-handle`]:{[h]:p},[`${n}-mark`]:{insetInlineStart:0,top:0,[m]:s(r).mul(3).add(t?0:i).equal(),[u]:"100%"},[`${n}-step`]:{insetInlineStart:0,top:0,[m]:r,[u]:"100%",[f]:r},[`${n}-dot`]:{position:"absolute",[h]:s(r).sub(a).div(2).equal()}}},ol=e=>{const{componentCls:t,marginPartWithMark:n}=e;return{[`${t}-horizontal`]:Object.assign(Object.assign({},la(e,!0)),{[`&${t}-with-marks`]:{marginBottom:n}})}},al=e=>{const{componentCls:t}=e;return{[`${t}-vertical`]:Object.assign(Object.assign({},la(e,!1)),{height:"100%"})}},il=e=>{const n=e.controlHeightLG/4,r=e.controlHeightSM/2,o=e.lineWidth+1,a=e.lineWidth+1*1.5,i=e.colorPrimary,s=new er(i).setA(.2).toRgbString();return{controlSize:n,railSize:4,handleSize:n,handleSizeHover:r,dotSize:8,handleLineWidth:o,handleLineWidthHover:a,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:i,handleActiveOutlineColor:s,handleColorDisabled:new er(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},sl=Kt("Slider",e=>{const t=Gt(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[rl(t),ol(t),al(t)]},il);function Kn(){const[e,t]=c.useState(!1),n=c.useRef(null),r=()=>{Dt.cancel(n.current)},o=a=>{r(),a?t(a):n.current=Dt(()=>{t(a)})};return c.useEffect(()=>r,[]),[e,o]}var ll=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function cl(e,t){return e||e===null?e:t||t===null?t:n=>typeof n=="number"?n.toString():""}const ca=q.forwardRef((e,t)=>{const{prefixCls:n,range:r,className:o,rootClassName:a,style:i,disabled:s,tooltipPrefixCls:l,tipFormatter:u,tooltipVisible:f,getTooltipPopupContainer:h,tooltipPlacement:m,tooltip:p={},onChangeComplete:C,classNames:v,styles:y}=e,S=ll(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete","classNames","styles"]),{vertical:b}=e,{getPrefixCls:x,direction:j,className:M,style:E,classNames:B,styles:k,getPopupContainer:D}=pr("slider"),$=q.useContext(No),I=s??$,{handleRender:A,direction:z}=q.useContext(sa),V=(z||j)==="rtl",[K,U]=Kn(),[ne,H]=Kn(),le=Object.assign({},p),{open:be,placement:pe,getPopupContainer:oe,prefixCls:ee,formatter:ce}=le,Z=be??f,te=(K||ne)&&Z!==!1,ue=cl(ce,u),[Se,$e]=Kn(),ge=F=>{C?.(F),$e(!1)},we=(F,J)=>F||(J?V?"left":"right":"top"),Pe=x("slider",n),[ve,ae,d]=sl(Pe),T=se(o,M,B.root,v?.root,a,{[`${Pe}-rtl`]:V,[`${Pe}-lock`]:Se},ae,d);V&&!S.vertical&&(S.reverse=!S.reverse),q.useEffect(()=>{const F=()=>{Dt(()=>{H(!1)},1)};return document.addEventListener("mouseup",F),()=>{document.removeEventListener("mouseup",F)}},[]);const w=r&&!Z,R=A||((F,J)=>{const{index:Q}=J,he=F.props;function L(Ce,xe,Be){var Xe,Ne,Me,Te;Be&&((Ne=(Xe=S)[Ce])===null||Ne===void 0||Ne.call(Xe,xe)),(Te=(Me=he)[Ce])===null||Te===void 0||Te.call(Me,xe)}const _=Object.assign(Object.assign({},he),{onMouseEnter:Ce=>{U(!0),L("onMouseEnter",Ce)},onMouseLeave:Ce=>{U(!1),L("onMouseLeave",Ce)},onMouseDown:Ce=>{H(!0),$e(!0),L("onMouseDown",Ce)},onFocus:Ce=>{var xe;H(!0),(xe=S.onFocus)===null||xe===void 0||xe.call(S,Ce),L("onFocus",Ce,!0)},onBlur:Ce=>{var xe;H(!1),(xe=S.onBlur)===null||xe===void 0||xe.call(S,Ce),L("onBlur",Ce,!0)}}),ie=q.cloneElement(F,_),re=(!!Z||te)&&ue!==null;return w?ie:q.createElement(Kr,Object.assign({},le,{prefixCls:x("tooltip",ee??l),title:ue?ue(J.value):"",value:J.value,open:re,placement:we(pe??m,b),key:Q,classNames:{root:`${Pe}-tooltip`},getPopupContainer:oe||h||D}),ie)}),P=w?(F,J)=>{const Q=q.cloneElement(F,{style:Object.assign(Object.assign({},F.props.style),{visibility:"hidden"})});return q.createElement(Kr,Object.assign({},le,{prefixCls:x("tooltip",ee??l),title:ue?ue(J.value):"",open:ue!==null&&te,placement:we(pe??m,b),key:"tooltip",classNames:{root:`${Pe}-tooltip`},getPopupContainer:oe||h||D,draggingDelete:J.draggingDelete}),Q)}:void 0,O=Object.assign(Object.assign(Object.assign(Object.assign({},k.root),E),y?.root),i),X=Object.assign(Object.assign({},k.tracks),y?.tracks),Y=se(B.tracks,v?.tracks);return ve(q.createElement(nl,Object.assign({},S,{classNames:Object.assign({handle:se(B.handle,v?.handle),rail:se(B.rail,v?.rail),track:se(B.track,v?.track)},Y?{tracks:Y}:{}),styles:Object.assign({handle:Object.assign(Object.assign({},k.handle),y?.handle),rail:Object.assign(Object.assign({},k.rail),y?.rail),track:Object.assign(Object.assign({},k.track),y?.track)},Object.keys(X).length?{tracks:X}:{}),step:S.step,range:r,className:T,style:O,disabled:I,ref:t,prefixCls:Pe,handleRender:R,activeHandleRender:P,onChangeComplete:ge})))});var ul=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const ua=e=>{const{prefixCls:t,colors:n,type:r,color:o,range:a=!1,className:i,activeIndex:s,onActive:l,onDragStart:u,onDragChange:f,onKeyDelete:h}=e,m=ul(e,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"]),p=Object.assign(Object.assign({},m),{track:!1}),C=c.useMemo(()=>`linear-gradient(90deg, ${n.map(E=>`${E.color} ${E.percent}%`).join(", ")})`,[n]),v=c.useMemo(()=>!o||!r?null:r==="alpha"?o.toRgbString():`hsl(${o.toHsb().h}, 100%, 50%)`,[o,r]),y=ft(u),S=ft(f),b=c.useMemo(()=>({onDragStart:y,onDragChange:S}),[]),x=ft((M,E)=>{const{onFocus:B,style:k,className:D,onKeyDown:$}=M.props,I=Object.assign({},k);return r==="gradient"&&(I.background=zo(n,E.value)),c.cloneElement(M,{onFocus:A=>{l?.(E.index),B?.(A)},style:I,className:se(D,{[`${t}-slider-handle-active`]:s===E.index}),onKeyDown:A=>{(A.key==="Delete"||A.key==="Backspace")&&h&&h(E.index),$?.(A)}})}),j=c.useMemo(()=>({direction:"ltr",handleRender:x}),[]);return c.createElement(sa.Provider,{value:j},c.createElement(ia.Provider,{value:b},c.createElement(ca,Object.assign({},p,{className:se(i,`${t}-slider`),tooltip:{open:!1},range:{editable:a,minCount:2},styles:{rail:{background:C},handle:v?{background:v}:{}},classNames:{rail:`${t}-slider-rail`,handle:`${t}-slider-handle`}}))))},dl=e=>{const{value:t,onChange:n,onChangeComplete:r}=e,o=i=>n(i[0]),a=i=>r(i[0]);return c.createElement(ua,Object.assign({},e,{value:[t],onChange:o,onChangeComplete:a}))};function Gr(e){return Ue(e).sort((t,n)=>t.percent-n.percent)}const fl=e=>{const{prefixCls:t,mode:n,onChange:r,onChangeComplete:o,onActive:a,activeIndex:i,onGradientDragging:s,colors:l}=e,u=n==="gradient",f=c.useMemo(()=>l.map(S=>({percent:S.percent,color:S.color.toRgbString()})),[l]),h=c.useMemo(()=>f.map(S=>S.percent),[f]),m=c.useRef(f),p=({rawValues:S,draggingIndex:b,draggingValue:x})=>{if(S.length>f.length){const j=zo(f,x),M=Ue(f);M.splice(b,0,{percent:x,color:j}),m.current=M}else m.current=f;s(!0),r(new vt(Gr(m.current)),!0)},C=({deleteIndex:S,draggingIndex:b,draggingValue:x})=>{let j=Ue(m.current);S!==-1?j.splice(S,1):(j[b]=Object.assign(Object.assign({},j[b]),{percent:x}),j=Gr(j)),r(new vt(j),!0)},v=S=>{const b=Ue(f);b.splice(S,1);const x=new vt(b);r(x),o(x)},y=S=>{o(new vt(f)),i>=S.length&&a(S.length-1),s(!1)};return u?c.createElement(ua,{min:0,max:100,prefixCls:t,className:`${t}-gradient-slider`,colors:f,color:null,value:h,range:!0,onChangeComplete:y,disabled:!1,type:"gradient",activeIndex:i,onActive:a,onDragStart:p,onDragChange:C,onKeyDelete:v}):null},hl=c.memo(fl);var gl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const pl={slider:dl},Vr=()=>{const e=c.useContext(ea),{mode:t,onModeChange:n,modeOptions:r,prefixCls:o,allowClear:a,value:i,disabledAlpha:s,onChange:l,onClear:u,onChangeComplete:f,activeIndex:h,gradientDragging:m}=e,p=gl(e,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),C=q.useMemo(()=>i.cleared?[{percent:0,color:new vt("")},{percent:100,color:new vt("")}]:i.getColors(),[i]),v=!i.isGradient(),[y,S]=q.useState(i);In(()=>{var N;v||S((N=C[h])===null||N===void 0?void 0:N.color)},[m,h]);const b=q.useMemo(()=>{var N;return v?i:m?y:(N=C[h])===null||N===void 0?void 0:N.color},[i,h,v,y,m]),[x,j]=q.useState(b),[M,E]=q.useState(0),B=x?.equals(b)?b:x;In(()=>{j(b)},[M,b?.toHexString()]);const k=(N,V)=>{let K=lt(N);if(i.cleared){const ne=K.toRgb();if(!ne.r&&!ne.g&&!ne.b&&V){const{type:H,value:le=0}=V;K=new vt({h:H==="hue"?le:0,s:1,b:1,a:H==="alpha"?le/100:1})}else K=Rn(K)}if(t==="single")return K;const U=Ue(C);return U[h]=Object.assign(Object.assign({},U[h]),{color:K}),new vt(U)},D=(N,V,K)=>{const U=k(N,K);j(U.isGradient()?U.getColors()[h].color:U),l(U,V)},$=(N,V)=>{f(k(N,V)),E(K=>K+1)},I=N=>{l(k(N))};let A=null;const z=r.length>1;return(a||z)&&(A=q.createElement("div",{className:`${o}-operation`},z&&q.createElement(Ds,{size:"small",options:r,value:t,onChange:n}),q.createElement(na,Object.assign({prefixCls:o,value:i,onChange:N=>{l(N),u?.()}},p)))),q.createElement(q.Fragment,null,A,q.createElement(hl,Object.assign({},e,{colors:C})),q.createElement($i,{prefixCls:o,value:B?.toHsb(),disabledAlpha:s,onChange:(N,V)=>{D(N,!0,V)},onChangeComplete:(N,V)=>{$(N,V)},components:pl}),q.createElement(Fs,Object.assign({value:b,onChange:I,prefixCls:o,disabledAlpha:s},p)))},qr=()=>{const{prefixCls:e,value:t,presets:n,onChange:r}=c.useContext(ta);return Array.isArray(n)?q.createElement(Xa,{value:t,presets:n,prefixCls:e,onChange:r}):null},ml=e=>{const{prefixCls:t,presets:n,panelRender:r,value:o,onChange:a,onClear:i,allowClear:s,disabledAlpha:l,mode:u,onModeChange:f,modeOptions:h,onChangeComplete:m,activeIndex:p,onActive:C,format:v,onFormatChange:y,gradientDragging:S,onGradientDragging:b,disabledFormat:x}=e,j=`${t}-inner`,M=q.useMemo(()=>({prefixCls:t,value:o,onChange:a,onClear:i,allowClear:s,disabledAlpha:l,mode:u,onModeChange:f,modeOptions:h,onChangeComplete:m,activeIndex:p,onActive:C,format:v,onFormatChange:y,gradientDragging:S,onGradientDragging:b,disabledFormat:x}),[t,o,a,i,s,l,u,f,h,m,p,C,v,y,S,b,x]),E=q.useMemo(()=>({prefixCls:t,value:o,presets:n,onChange:a}),[t,o,n,a]),B=q.createElement("div",{className:`${j}-content`},q.createElement(Vr,null),Array.isArray(n)&&q.createElement(vr,null),q.createElement(qr,null));return q.createElement(ea.Provider,{value:M},q.createElement(ta.Provider,{value:E},q.createElement("div",{className:j},typeof r=="function"?r(B,{components:{Picker:Vr,Presets:qr}}):B)))};var vl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const bl=c.forwardRef((e,t)=>{const{color:n,prefixCls:r,open:o,disabled:a,format:i,className:s,showText:l,activeIndex:u}=e,f=vl(e,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),h=`${r}-trigger`,m=`${h}-text`,p=`${m}-cell`,[C]=Ho("ColorPicker"),v=q.useMemo(()=>{if(!l)return"";if(typeof l=="function")return l(n);if(n.cleared)return C.transparent;if(n.isGradient())return n.getColors().map((x,j)=>{const M=u!==-1&&u!==j;return q.createElement("span",{key:j,className:se(p,M&&`${p}-inactive`)},x.color.toRgbString()," ",x.percent,"%")});const S=n.toHexString().toUpperCase(),b=mr(n);switch(i){case"rgb":return n.toRgbString();case"hsb":return n.toHsbString();default:return b<100?`${S.slice(0,7)},${b}%`:S}},[n,i,l,u]),y=c.useMemo(()=>n.cleared?q.createElement(na,{prefixCls:r}):q.createElement(Oo,{prefixCls:r,color:n.toCssString()}),[n,r]);return q.createElement("div",Object.assign({ref:t,className:se(h,s,{[`${h}-active`]:o,[`${h}-disabled`]:a})},Ya(f)),y,l&&q.createElement("div",{className:m},v))});function Cl(e,t,n){const[r]=Ho("ColorPicker"),[o,a]=yt(e,{value:t}),[i,s]=c.useState("single"),[l,u]=c.useMemo(()=>{const v=(Array.isArray(n)?n:[n]).filter(x=>x);v.length||v.push("single");const y=new Set(v),S=[],b=(x,j)=>{y.has(x)&&S.push({label:j,value:x})};return b("single",r.singleColor),b("gradient",r.gradientColor),[S,y]},[n]),[f,h]=c.useState(null),m=ft(v=>{h(v),a(v)}),p=c.useMemo(()=>{const v=lt(o||"");return v.equals(f)?f:v},[o,f]),C=c.useMemo(()=>{var v;return u.has(i)?i:(v=l[0])===null||v===void 0?void 0:v.value},[u,i,l]);return c.useEffect(()=>{s(p.isGradient()?"gradient":"single")},[p]),[p,m,C,s,l]}const da=(e,t)=>({backgroundImage:`conic-gradient(${t} 25%, transparent 25% 50%, ${t} 50% 75%, transparent 75% 100%)`,backgroundSize:`${e} ${e}`}),Ur=(e,t)=>{const{componentCls:n,borderRadiusSM:r,colorPickerInsetShadow:o,lineWidth:a,colorFillSecondary:i}=e;return{[`${n}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:r,width:t,height:t,boxShadow:o,flex:"none"},da("50%",e.colorFillSecondary)),{[`${n}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${W(a)} ${i}`,borderRadius:"inherit"}})}},yl=e=>{const{componentCls:t,antCls:n,fontSizeSM:r,lineHeightSM:o,colorPickerAlphaInputWidth:a,marginXXS:i,paddingXXS:s,controlHeightSM:l,marginXS:u,fontSizeIcon:f,paddingXS:h,colorTextPlaceholder:m,colorPickerInputNumberHandleWidth:p,lineWidth:C}=e;return{[`${t}-input-container`]:{display:"flex",[`${t}-steppers${n}-input-number`]:{fontSize:r,lineHeight:o,[`${n}-input-number-input`]:{paddingInlineStart:s,paddingInlineEnd:0},[`${n}-input-number-handler-wrap`]:{width:p}},[`${t}-steppers${t}-alpha-input`]:{flex:`0 0 ${W(a)}`,marginInlineStart:i},[`${t}-format-select${n}-select`]:{marginInlineEnd:u,width:"auto","&-single":{[`${n}-select-selector`]:{padding:0,border:0},[`${n}-select-arrow`]:{insetInlineEnd:0},[`${n}-select-selection-item`]:{paddingInlineEnd:e.calc(f).add(i).equal(),fontSize:r,lineHeight:W(l)},[`${n}-select-item-option-content`]:{fontSize:r,lineHeight:o},[`${n}-select-dropdown`]:{[`${n}-select-item`]:{minHeight:"auto"}}}},[`${t}-input`]:{gap:i,alignItems:"center",flex:1,width:0,[`${t}-hsb-input,${t}-rgb-input`]:{display:"flex",gap:i,alignItems:"center"},[`${t}-steppers`]:{flex:1},[`${t}-hex-input${n}-input-affix-wrapper`]:{flex:1,padding:`0 ${W(h)}`,[`${n}-input`]:{fontSize:r,textTransform:"uppercase",lineHeight:W(e.calc(l).sub(e.calc(C).mul(2)).equal())},[`${n}-input-prefix`]:{color:m}}}}}},Sl=e=>{const{componentCls:t,controlHeightLG:n,borderRadiusSM:r,colorPickerInsetShadow:o,marginSM:a,colorBgElevated:i,colorFillSecondary:s,lineWidthBold:l,colorPickerHandlerSize:u}=e;return{userSelect:"none",[`${t}-select`]:{[`${t}-palette`]:{minHeight:e.calc(n).mul(4).equal(),overflow:"hidden",borderRadius:r},[`${t}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:o,inset:0},marginBottom:a},[`${t}-handler`]:{width:u,height:u,border:`${W(l)} solid ${i}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${o}, 0 0 0 1px ${s}`}}},wl=e=>{const{componentCls:t,antCls:n,colorTextQuaternary:r,paddingXXS:o,colorPickerPresetColorSize:a,fontSizeSM:i,colorText:s,lineHeightSM:l,lineWidth:u,borderRadius:f,colorFill:h,colorWhite:m,marginXXS:p,paddingXS:C,fontHeightSM:v}=e;return{[`${t}-presets`]:{[`${n}-collapse-item > ${n}-collapse-header`]:{padding:0,[`${n}-collapse-expand-icon`]:{height:v,color:r,paddingInlineEnd:o}},[`${n}-collapse`]:{display:"flex",flexDirection:"column",gap:p},[`${n}-collapse-item > ${n}-collapse-content > ${n}-collapse-content-box`]:{padding:`${W(C)} 0`},"&-label":{fontSize:i,color:s,lineHeight:l},"&-items":{display:"flex",flexWrap:"wrap",gap:e.calc(p).mul(1.5).equal(),[`${t}-presets-color`]:{position:"relative",cursor:"pointer",width:a,height:a,"&::before":{content:'""',pointerEvents:"none",width:e.calc(a).add(e.calc(u).mul(4)).equal(),height:e.calc(a).add(e.calc(u).mul(4)).equal(),position:"absolute",top:e.calc(u).mul(-2).equal(),insetInlineStart:e.calc(u).mul(-2).equal(),borderRadius:f,border:`${W(u)} solid transparent`,transition:`border-color ${e.motionDurationMid} ${e.motionEaseInBack}`},"&:hover::before":{borderColor:h},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.calc(a).div(13).mul(5).equal(),height:e.calc(a).div(13).mul(8).equal(),border:`${W(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`},[`&${t}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:m,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`},[`&${t}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:i,color:r}}}},xl=e=>{const{componentCls:t,colorPickerInsetShadow:n,colorBgElevated:r,colorFillSecondary:o,lineWidthBold:a,colorPickerHandlerSizeSM:i,colorPickerSliderHeight:s,marginSM:l,marginXS:u}=e,f=e.calc(i).sub(e.calc(a).mul(2).equal()).equal(),h=e.calc(i).add(e.calc(a).mul(2).equal()).equal(),m={"&:after":{transform:"scale(1)",boxShadow:`${n}, 0 0 0 1px ${e.colorPrimaryActive}`}};return{[`${t}-slider`]:[da(W(s),e.colorFillSecondary),{margin:0,padding:0,height:s,borderRadius:e.calc(s).div(2).equal(),"&-rail":{height:s,borderRadius:e.calc(s).div(2).equal(),boxShadow:n},[`& ${t}-slider-handle`]:{width:f,height:f,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:h,height:h,borderRadius:"100%"},"&:after":{width:i,height:i,border:`${W(a)} solid ${r}`,boxShadow:`${n}, 0 0 0 1px ${o}`,outline:"none",insetInlineStart:e.calc(a).mul(-1).equal(),top:e.calc(a).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":m}}],[`${t}-slider-container`]:{display:"flex",gap:l,marginBottom:l,[`${t}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${t}-gradient-slider`]:{marginBottom:u,[`& ${t}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":m}}}},ir=(e,t,n)=>({borderInlineEndWidth:e.lineWidth,borderColor:t,boxShadow:`0 0 0 ${W(e.controlOutlineWidth)} ${n}`,outline:0}),$l=e=>{const{componentCls:t}=e;return{"&-rtl":{[`${t}-presets-color`]:{"&::after":{direction:"ltr"}},[`${t}-clear`]:{"&::after":{direction:"ltr"}}}}},Jr=(e,t,n)=>{const{componentCls:r,borderRadiusSM:o,lineWidth:a,colorSplit:i,colorBorder:s,red6:l}=e;return{[`${r}-clear`]:Object.assign(Object.assign({width:t,height:t,borderRadius:o,border:`${W(a)} solid ${i}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${e.motionDurationFast}`},n),{"&::after":{content:'""',position:"absolute",insetInlineEnd:e.calc(a).mul(-1).equal(),top:e.calc(a).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:l},"&:hover":{borderColor:s}})}},Rl=e=>{const{componentCls:t,colorError:n,colorWarning:r,colorErrorHover:o,colorWarningHover:a,colorErrorOutline:i,colorWarningOutline:s}=e;return{[`&${t}-status-error`]:{borderColor:n,"&:hover":{borderColor:o},[`&${t}-trigger-active`]:Object.assign({},ir(e,n,i))},[`&${t}-status-warning`]:{borderColor:r,"&:hover":{borderColor:a},[`&${t}-trigger-active`]:Object.assign({},ir(e,r,s))}}},Pl=e=>{const{componentCls:t,controlHeightLG:n,controlHeightSM:r,controlHeight:o,controlHeightXS:a,borderRadius:i,borderRadiusSM:s,borderRadiusXS:l,borderRadiusLG:u,fontSizeLG:f}=e;return{[`&${t}-lg`]:{minWidth:n,minHeight:n,borderRadius:u,[`${t}-color-block, ${t}-clear`]:{width:o,height:o,borderRadius:i},[`${t}-trigger-text`]:{fontSize:f}},[`&${t}-sm`]:{minWidth:r,minHeight:r,borderRadius:s,[`${t}-color-block, ${t}-clear`]:{width:a,height:a,borderRadius:l},[`${t}-trigger-text`]:{lineHeight:W(a)}}}},jl=e=>{const{antCls:t,componentCls:n,colorPickerWidth:r,colorPrimary:o,motionDurationMid:a,colorBgElevated:i,colorTextDisabled:s,colorText:l,colorBgContainerDisabled:u,borderRadius:f,marginXS:h,marginSM:m,controlHeight:p,controlHeightSM:C,colorBgTextActive:v,colorPickerPresetColorSize:y,colorPickerPreviewSize:S,lineWidth:b,colorBorder:x,paddingXXS:j,fontSize:M,colorPrimaryHover:E,controlOutline:B}=e;return[{[n]:Object.assign({[`${n}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:r,[`& > ${t}-divider`]:{margin:`${W(m)} 0 ${W(h)}`}},[`${n}-panel`]:Object.assign({},Sl(e))},xl(e)),Ur(e,S)),yl(e)),wl(e)),Jr(e,y,{marginInlineStart:"auto"})),{[`${n}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:h}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:p,minHeight:p,borderRadius:f,border:`${W(b)} solid ${x}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${a}`,background:i,padding:e.calc(j).sub(b).equal(),[`${n}-trigger-text`]:{marginInlineStart:h,marginInlineEnd:e.calc(h).sub(e.calc(j).sub(b)).equal(),fontSize:M,color:l,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:s}}},"&:hover":{borderColor:E},[`&${n}-trigger-active`]:Object.assign({},ir(e,o,B)),"&-disabled":{color:s,background:u,cursor:"not-allowed","&:hover":{borderColor:v},[`${n}-trigger-text`]:{color:s}}},Jr(e,C)),Ur(e,C)),Rl(e)),Pl(e))},$l(e))},Ka(e,{focusElCls:`${n}-trigger-active`})]},Ml=Kt("ColorPicker",e=>{const{colorTextQuaternary:t,marginSM:n}=e,r=8,o=Gt(e,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${t}`,colorPickerSliderHeight:r,colorPickerPreviewSize:e.calc(r).mul(2).add(n).equal()});return[jl(o)]});var El=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const nn=e=>{const{mode:t,value:n,defaultValue:r,format:o,defaultFormat:a,allowClear:i=!1,presets:s,children:l,trigger:u="click",open:f,disabled:h,placement:m="bottomLeft",arrow:p=!0,panelRender:C,showText:v,style:y,className:S,size:b,rootClassName:x,prefixCls:j,styles:M,disabledAlpha:E=!1,onFormatChange:B,onChange:k,onClear:D,onOpenChange:$,onChangeComplete:I,getPopupContainer:A,autoAdjustOverflow:z=!0,destroyTooltipOnHide:N,destroyOnHidden:V,disabledFormat:K}=e,U=El(e,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide","destroyOnHidden","disabledFormat"]),{getPrefixCls:ne,direction:H,colorPicker:le}=c.useContext(Pt),be=c.useContext(No),pe=h??be,[oe,ee]=yt(!1,{value:f,postState:Me=>!pe&&Me,onChange:$}),[ce,Z]=yt(o,{value:o,defaultValue:a,onChange:B}),te=ne("color-picker",j),[ue,Se,$e,ge,we]=Cl(r,n,t),Pe=c.useMemo(()=>mr(ue)<100,[ue]),[ve,ae]=q.useState(null),d=Me=>{if(I){let Te=lt(Me);E&&Pe&&(Te=Rn(Me)),I(Te)}},T=(Me,Te)=>{let ze=lt(Me);E&&Pe&&(ze=Rn(ze)),Se(ze),ae(null),k&&k(ze,ze.toCssString()),Te||d(ze)},[w,R]=q.useState(0),[P,O]=q.useState(!1),X=Me=>{if(ge(Me),Me==="single"&&ue.isGradient())R(0),T(new vt(ue.getColors()[0].color)),ae(ue);else if(Me==="gradient"&&!ue.isGradient()){const Te=Pe?Rn(ue):ue;T(new vt(ve||[{percent:0,color:Te},{percent:100,color:Te}]))}},{status:Y}=q.useContext(Ga),{compactSize:F,compactItemClassnames:J}=Va(te,H),Q=Nn(Me=>{var Te;return(Te=b??F)!==null&&Te!==void 0?Te:Me}),he=Ao(te),[L,_,ie]=Ml(te,he),re={[`${te}-rtl`]:H},Ce=se(x,ie,he,re),xe=se(qa(te,Y),{[`${te}-sm`]:Q==="small",[`${te}-lg`]:Q==="large"},J,le?.className,Ce,S,_),Be=se(te,Ce),Xe={open:oe,trigger:u,placement:m,arrow:p,rootClassName:x,getPopupContainer:A,autoAdjustOverflow:z,destroyOnHidden:V??!!N},Ne=Object.assign(Object.assign({},le?.style),y);return L(q.createElement(Ua,Object.assign({style:M?.popup,styles:{body:M?.popupOverlayInner},onOpenChange:Me=>{(!Me||!pe)&&ee(Me)},content:q.createElement(Ja,{form:!0},q.createElement(ml,{mode:$e,onModeChange:X,modeOptions:we,prefixCls:te,value:ue,allowClear:i,disabled:pe,disabledAlpha:E,presets:s,panelRender:C,format:ce,onFormatChange:Z,onChange:T,onChangeComplete:d,onClear:D,activeIndex:w,onActive:R,gradientDragging:P,onGradientDragging:O,disabledFormat:K})),classNames:{root:Be}},Xe),l||q.createElement(bl,Object.assign({activeIndex:oe?w:-1,open:oe,className:xe,style:Ne,prefixCls:te,disabled:pe,showText:v,format:ce},U,{color:ue}))))},Il=Za(nn,void 0,e=>Object.assign(Object.assign({},e),{placement:"bottom",autoAdjustOverflow:!1}),"color-picker",e=>e);nn._InternalPanelDoNotUseOrYouWillBeFired=Il;var Ol={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},Tl=function(t,n){return c.createElement(Bt,Fe({},t,{ref:n,icon:Ol}))},kl=c.forwardRef(Tl),Al={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},Dl=function(t,n){return c.createElement(Bt,Fe({},t,{ref:n,icon:Al}))},Bl=c.forwardRef(Dl);function Nl(e,t,n){return typeof n=="boolean"?n:e.length?!0:ko(t).some(o=>o.type===Lo)}var fa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function _n({suffixCls:e,tagName:t,displayName:n}){return r=>c.forwardRef((a,i)=>c.createElement(r,Object.assign({ref:i,suffixCls:e,tagName:t},a)))}const yr=c.forwardRef((e,t)=>{const{prefixCls:n,suffixCls:r,className:o,tagName:a}=e,i=fa(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:s}=c.useContext(Pt),l=s("layout",n),[u,f,h]=_o(l),m=r?`${l}-${r}`:l;return u(c.createElement(a,Object.assign({className:se(n||m,o,f,h),ref:t},i)))}),zl=c.forwardRef((e,t)=>{const{direction:n}=c.useContext(Pt),[r,o]=c.useState([]),{prefixCls:a,className:i,rootClassName:s,children:l,hasSider:u,tagName:f,style:h}=e,m=fa(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),p=Hn(m,["suffixCls"]),{getPrefixCls:C,className:v,style:y}=pr("layout"),S=C("layout",a),b=Nl(r,l,u),[x,j,M]=_o(S),E=se(S,{[`${S}-has-sider`]:b,[`${S}-rtl`]:n==="rtl"},v,i,s,j,M),B=c.useMemo(()=>({siderHook:{addSider:k=>{o(D=>[].concat(Ue(D),[k]))},removeSider:k=>{o(D=>D.filter($=>$!==k))}}}),[]);return x(c.createElement(Qa.Provider,{value:B},c.createElement(f,Object.assign({ref:t,className:E,style:Object.assign(Object.assign({},y),h)},p),l)))}),Hl=_n({tagName:"div",displayName:"Layout"})(zl),Ll=_n({suffixCls:"header",tagName:"header",displayName:"Header"})(yr),_l=_n({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(yr),Wl=_n({suffixCls:"content",tagName:"main",displayName:"Content"})(yr),ln=Hl;ln.Header=Ll;ln.Footer=_l;ln.Content=Wl;ln.Sider=Lo;ln._InternalSiderContext=ei;var Fl={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},Xl=function(){var t=c.useRef([]),n=c.useRef(null);return c.useEffect(function(){var r=Date.now(),o=!1;t.current.forEach(function(a){if(a){o=!0;var i=a.style;i.transitionDuration=".3s, .3s, .3s, .06s",n.current&&r-n.current<100&&(i.transitionDuration="0s, 0s")}}),o&&(n.current=Date.now())}),t.current},Zr=0,Yl=ti();function Kl(){var e;return Yl?(e=Zr,Zr+=1):e="TEST_OR_SSR",e}const Gl=(function(e){var t=c.useState(),n=fe(t,2),r=n[0],o=n[1];return c.useEffect(function(){o("rc_progress_".concat(Kl()))},[]),e||r});var Qr=function(t){var n=t.bg,r=t.children;return c.createElement("div",{style:{width:"100%",height:"100%",background:n}},r)};function eo(e,t){return Object.keys(e).map(function(n){var r=parseFloat(n),o="".concat(Math.floor(r*t),"%");return"".concat(e[n]," ").concat(o)})}var Vl=c.forwardRef(function(e,t){var n=e.prefixCls,r=e.color,o=e.gradientId,a=e.radius,i=e.style,s=e.ptg,l=e.strokeLinecap,u=e.strokeWidth,f=e.size,h=e.gapDegree,m=r&&dt(r)==="object",p=m?"#FFF":void 0,C=f/2,v=c.createElement("circle",{className:"".concat(n,"-circle-path"),r:a,cx:C,cy:C,stroke:p,strokeLinecap:l,strokeWidth:u,opacity:s===0?0:1,style:i,ref:t});if(!m)return v;var y="".concat(o,"-conic"),S=h?"".concat(180+h/2,"deg"):"0deg",b=eo(r,(360-h)/360),x=eo(r,1),j="conic-gradient(from ".concat(S,", ").concat(b.join(", "),")"),M="linear-gradient(to ".concat(h?"bottom":"top",", ").concat(x.join(", "),")");return c.createElement(c.Fragment,null,c.createElement("mask",{id:y},v),c.createElement("foreignObject",{x:0,y:0,width:f,height:f,mask:"url(#".concat(y,")")},c.createElement(Qr,{bg:M},c.createElement(Qr,{bg:j}))))}),tn=100,Gn=function(t,n,r,o,a,i,s,l,u,f){var h=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,m=r/100*360*((360-i)/360),p=i===0?0:{bottom:0,top:180,left:90,right:-90}[s],C=(100-o)/100*n;u==="round"&&o!==100&&(C+=f/2,C>=n&&(C=n-.01));var v=tn/2;return{stroke:typeof l=="string"?l:void 0,strokeDasharray:"".concat(n,"px ").concat(t),strokeDashoffset:C+h,transform:"rotate(".concat(a+m+p,"deg)"),transformOrigin:"".concat(v,"px ").concat(v,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},ql=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function to(e){var t=e??[];return Array.isArray(t)?t:[t]}var Ul=function(t){var n=Ie(Ie({},Fl),t),r=n.id,o=n.prefixCls,a=n.steps,i=n.strokeWidth,s=n.trailWidth,l=n.gapDegree,u=l===void 0?0:l,f=n.gapPosition,h=n.trailColor,m=n.strokeLinecap,p=n.style,C=n.className,v=n.strokeColor,y=n.percent,S=Rt(n,ql),b=tn/2,x=Gl(r),j="".concat(x,"-gradient"),M=b-i/2,E=Math.PI*2*M,B=u>0?90+u/2:-90,k=E*((360-u)/360),D=dt(a)==="object"?a:{count:a,gap:2},$=D.count,I=D.gap,A=to(y),z=to(v),N=z.find(function(be){return be&&dt(be)==="object"}),V=N&&dt(N)==="object",K=V?"butt":m,U=Gn(E,k,0,100,B,u,f,h,K,i),ne=Xl(),H=function(){var pe=0;return A.map(function(oe,ee){var ce=z[ee]||z[z.length-1],Z=Gn(E,k,pe,oe,B,u,f,ce,K,i);return pe+=oe,c.createElement(Vl,{key:ee,color:ce,ptg:oe,radius:M,prefixCls:o,gradientId:j,style:Z,strokeLinecap:K,strokeWidth:i,gapDegree:u,ref:function(ue){ne[ee]=ue},size:tn})}).reverse()},le=function(){var pe=Math.round($*(A[0]/100)),oe=100/$,ee=0;return new Array($).fill(null).map(function(ce,Z){var te=Z<=pe-1?z[0]:h,ue=te&&dt(te)==="object"?"url(#".concat(j,")"):void 0,Se=Gn(E,k,ee,oe,B,u,f,te,"butt",i,I);return ee+=(k-Se.strokeDashoffset+I)*100/k,c.createElement("circle",{key:Z,className:"".concat(o,"-circle-path"),r:M,cx:b,cy:b,stroke:ue,strokeWidth:i,opacity:1,style:Se,ref:function(ge){ne[Z]=ge}})})};return c.createElement("svg",Fe({className:se("".concat(o,"-circle"),C),viewBox:"0 0 ".concat(tn," ").concat(tn),style:p,id:r,role:"presentation"},S),!$&&c.createElement("circle",{className:"".concat(o,"-circle-trail"),r:M,cx:b,cy:b,stroke:h,strokeLinecap:K,strokeWidth:s||i,style:U}),$?le():H())};function $t(e){return!e||e<0?0:e>100?100:e}function kn({success:e,successPercent:t}){let n=t;return e&&"progress"in e&&(n=e.progress),e&&"percent"in e&&(n=e.percent),n}const Jl=({percent:e,success:t,successPercent:n})=>{const r=$t(kn({success:t,successPercent:n}));return[r,$t($t(e)-r)]},Zl=({success:e={},strokeColor:t})=>{const{strokeColor:n}=e;return[n||tr.green,t||null]},Wn=(e,t,n)=>{var r,o,a,i;let s=-1,l=-1;if(t==="step"){const u=n.steps,f=n.strokeWidth;typeof e=="string"||typeof e>"u"?(s=e==="small"?2:14,l=f??8):typeof e=="number"?[s,l]=[e,e]:[s=14,l=8]=Array.isArray(e)?e:[e.width,e.height],s*=u}else if(t==="line"){const u=n?.strokeWidth;typeof e=="string"||typeof e>"u"?l=u||(e==="small"?6:8):typeof e=="number"?[s,l]=[e,e]:[s=-1,l=8]=Array.isArray(e)?e:[e.width,e.height]}else(t==="circle"||t==="dashboard")&&(typeof e=="string"||typeof e>"u"?[s,l]=e==="small"?[60,60]:[120,120]:typeof e=="number"?[s,l]=[e,e]:Array.isArray(e)&&(s=(o=(r=e[0])!==null&&r!==void 0?r:e[1])!==null&&o!==void 0?o:120,l=(i=(a=e[0])!==null&&a!==void 0?a:e[1])!==null&&i!==void 0?i:120));return[s,l]},Ql=3,ec=e=>Ql/e*100,tc=e=>{const{prefixCls:t,trailColor:n=null,strokeLinecap:r="round",gapPosition:o,gapDegree:a,width:i=120,type:s,children:l,success:u,size:f=i,steps:h}=e,[m,p]=Wn(f,"circle");let{strokeWidth:C}=e;C===void 0&&(C=Math.max(ec(m),6));const v={width:m,height:p,fontSize:m*.15+6},y=c.useMemo(()=>{if(a||a===0)return a;if(s==="dashboard")return 75},[a,s]),S=Jl(e),b=o||s==="dashboard"&&"bottom"||void 0,x=Object.prototype.toString.call(e.strokeColor)==="[object Object]",j=Zl({success:u,strokeColor:e.strokeColor}),M=se(`${t}-inner`,{[`${t}-circle-gradient`]:x}),E=c.createElement(Ul,{steps:h,percent:h?S[1]:S,strokeWidth:C,trailWidth:C,strokeColor:h?j[1]:j,strokeLinecap:r,trailColor:n,prefixCls:t,gapDegree:y,gapPosition:b}),B=m<=20,k=c.createElement("div",{className:M,style:v},E,!B&&l);return B?c.createElement(Bo,{title:l},k):k},An="--progress-line-stroke-color",ha="--progress-percent",no=e=>{const t=e?"100%":"-100%";return new ni(`antProgress${e?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${t}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${t}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},nc=e=>{const{componentCls:t,iconCls:n}=e;return{[t]:Object.assign(Object.assign({},Vt(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize},[`${t}-outer`]:{display:"inline-flex",alignItems:"center",width:"100%"},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",flex:1,overflow:"hidden",verticalAlign:"middle",backgroundColor:e.remainingColor,borderRadius:e.lineBorderRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.defaultColor}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",background:e.defaultColor,borderRadius:e.lineBorderRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-layout-bottom`]:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",[`${t}-text`]:{width:"max-content",marginInlineStart:0,marginTop:e.marginXXS}},[`${t}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${An})`]},height:"100%",width:`calc(1 / var(${ha}) * 100%)`,display:"block"},[`&${t}-bg-inner`]:{minWidth:"max-content","&::after":{content:"none"},[`${t}-text-inner`]:{color:e.colorWhite,[`&${t}-text-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,color:e.colorText,lineHeight:1,width:"2em",whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[n]:{fontSize:e.fontSize},[`&${t}-text-outer`]:{width:"max-content"},[`&${t}-text-outer${t}-text-start`]:{width:"max-content",marginInlineStart:0,marginInlineEnd:e.marginXS}},[`${t}-text-inner`]:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",marginInlineStart:0,padding:`0 ${W(e.paddingXXS)}`,[`&${t}-text-start`]:{justifyContent:"start"},[`&${t}-text-end`]:{justifyContent:"end"}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.lineBorderRadius,opacity:0,animationName:no(),animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-rtl${t}-status-active`]:{[`${t}-bg::before`]:{animationName:no(!0)}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},rc=e=>{const{componentCls:t,iconCls:n}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.remainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.circleTextColor,fontSize:e.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[n]:{fontSize:e.circleIconFontSize}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},oc=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.remainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.defaultColor}}}}}},ac=e=>{const{componentCls:t,iconCls:n}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${n}`]:{fontSize:e.fontSizeSM}}}},ic=e=>({circleTextColor:e.colorText,defaultColor:e.colorInfo,remainingColor:e.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${e.fontSize/e.fontSizeSM}em`}),sc=Kt("Progress",e=>{const t=e.calc(e.marginXXS).div(2).equal(),n=Gt(e,{progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[nc(n),rc(n),oc(n),ac(n)]},ic);var lc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const cc=e=>{let t=[];return Object.keys(e).forEach(n=>{const r=parseFloat(n.replace(/%/g,""));Number.isNaN(r)||t.push({key:r,value:e[n]})}),t=t.sort((n,r)=>n.key-r.key),t.map(({key:n,value:r})=>`${r} ${n}%`).join(", ")},uc=(e,t)=>{const{from:n=tr.blue,to:r=tr.blue,direction:o=t==="rtl"?"to left":"to right"}=e,a=lc(e,["from","to","direction"]);if(Object.keys(a).length!==0){const s=cc(a),l=`linear-gradient(${o}, ${s})`;return{background:l,[An]:l}}const i=`linear-gradient(${o}, ${n}, ${r})`;return{background:i,[An]:i}},dc=e=>{const{prefixCls:t,direction:n,percent:r,size:o,strokeWidth:a,strokeColor:i,strokeLinecap:s="round",children:l,trailColor:u=null,percentPosition:f,success:h}=e,{align:m,type:p}=f,C=i&&typeof i!="string"?uc(i,n):{[An]:i,background:i},v=s==="square"||s==="butt"?0:void 0,y=o??[-1,a||(o==="small"?6:8)],[S,b]=Wn(y,"line",{strokeWidth:a}),x={backgroundColor:u||void 0,borderRadius:v},j=Object.assign(Object.assign({width:`${$t(r)}%`,height:b,borderRadius:v},C),{[ha]:$t(r)/100}),M=kn(e),E={width:`${$t(M)}%`,height:b,borderRadius:v,backgroundColor:h?.strokeColor},B={width:S<0?"100%":S},k=c.createElement("div",{className:`${t}-inner`,style:x},c.createElement("div",{className:se(`${t}-bg`,`${t}-bg-${p}`),style:j},p==="inner"&&l),M!==void 0&&c.createElement("div",{className:`${t}-success-bg`,style:E})),D=p==="outer"&&m==="start",$=p==="outer"&&m==="end";return p==="outer"&&m==="center"?c.createElement("div",{className:`${t}-layout-bottom`},k,l):c.createElement("div",{className:`${t}-outer`,style:B},D&&l,k,$&&l)},fc=e=>{const{size:t,steps:n,rounding:r=Math.round,percent:o=0,strokeWidth:a=8,strokeColor:i,trailColor:s=null,prefixCls:l,children:u}=e,f=r(n*(o/100)),m=t??[t==="small"?2:14,a],[p,C]=Wn(m,"step",{steps:n,strokeWidth:a}),v=p/n,y=Array.from({length:n});for(let S=0;S<n;S++){const b=Array.isArray(i)?i[S]:i;y[S]=c.createElement("div",{key:S,className:se(`${l}-steps-item`,{[`${l}-steps-item-active`]:S<=f-1}),style:{backgroundColor:S<=f-1?b:s,width:v,height:C}})}return c.createElement("div",{className:`${l}-steps-outer`},y,u)};var hc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const gc=["normal","exception","active","success"],ro=c.forwardRef((e,t)=>{const{prefixCls:n,className:r,rootClassName:o,steps:a,strokeColor:i,percent:s=0,size:l="default",showInfo:u=!0,type:f="line",status:h,format:m,style:p,percentPosition:C={}}=e,v=hc(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style","percentPosition"]),{align:y="end",type:S="outer"}=C,b=Array.isArray(i)?i[0]:i,x=typeof i=="string"||Array.isArray(i)?i:void 0,j=c.useMemo(()=>{if(b){const H=typeof b=="string"?b:Object.values(b)[0];return new er(H).isLight()}return!1},[i]),M=c.useMemo(()=>{var H,le;const be=kn(e);return parseInt(be!==void 0?(H=be??0)===null||H===void 0?void 0:H.toString():(le=s??0)===null||le===void 0?void 0:le.toString(),10)},[s,e.success,e.successPercent]),E=c.useMemo(()=>!gc.includes(h)&&M>=100?"success":h||"normal",[h,M]),{getPrefixCls:B,direction:k,progress:D}=c.useContext(Pt),$=B("progress",n),[I,A,z]=sc($),N=f==="line",V=N&&!a,K=c.useMemo(()=>{if(!u)return null;const H=kn(e);let le;const be=m||(oe=>`${oe}%`),pe=N&&j&&S==="inner";return S==="inner"||m||E!=="exception"&&E!=="success"?le=be($t(s),$t(H)):E==="exception"?le=N?c.createElement(ri,null):c.createElement(Do,null):E==="success"&&(le=N?c.createElement(oi,null):c.createElement(Wo,null)),c.createElement("span",{className:se(`${$}-text`,{[`${$}-text-bright`]:pe,[`${$}-text-${y}`]:V,[`${$}-text-${S}`]:V}),title:typeof le=="string"?le:void 0},le)},[u,s,M,E,f,$,m]);let U;f==="line"?U=a?c.createElement(fc,Object.assign({},e,{strokeColor:x,prefixCls:$,steps:typeof a=="object"?a.count:a}),K):c.createElement(dc,Object.assign({},e,{strokeColor:b,prefixCls:$,direction:k,percentPosition:{align:y,type:S}}),K):(f==="circle"||f==="dashboard")&&(U=c.createElement(tc,Object.assign({},e,{strokeColor:b,prefixCls:$,progressStatus:E}),K));const ne=se($,`${$}-status-${E}`,{[`${$}-${f==="dashboard"&&"circle"||f}`]:f!=="line",[`${$}-inline-circle`]:f==="circle"&&Wn(l,"circle")[0]<=20,[`${$}-line`]:V,[`${$}-line-align-${y}`]:V,[`${$}-line-position-${S}`]:V,[`${$}-steps`]:a,[`${$}-show-info`]:u,[`${$}-${l}`]:typeof l=="string",[`${$}-rtl`]:k==="rtl"},D?.className,r,o,A,z);return I(c.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},D?.style),p),className:ne,role:"progressbar","aria-valuenow":M,"aria-valuemin":0,"aria-valuemax":100},Hn(v,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),U))});var pc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},mc=function(t,n){return c.createElement(Bt,Fe({},t,{ref:n,icon:pc}))},vc=c.forwardRef(mc),bc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},Cc=function(t,n){return c.createElement(Bt,Fe({},t,{ref:n,icon:bc}))},yc=c.forwardRef(Cc),Sc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.3 506.3L781.7 405.6a7.23 7.23 0 00-11.7 5.7V476H548V254h64.8c6 0 9.4-7 5.7-11.7L517.7 114.7a7.14 7.14 0 00-11.3 0L405.6 242.3a7.23 7.23 0 005.7 11.7H476v222H254v-64.8c0-6-7-9.4-11.7-5.7L114.7 506.3a7.14 7.14 0 000 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h222v222h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H548V548h222v64.8c0 6 7 9.4 11.7 5.7l127.5-100.8a7.3 7.3 0 00.1-11.4z"}}]},name:"drag",theme:"outlined"},wc=function(t,n){return c.createElement(Bt,Fe({},t,{ref:n,icon:Sc}))},xc=c.forwardRef(wc),$c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"},Rc=function(t,n){return c.createElement(Bt,Fe({},t,{ref:n,icon:$c}))},Pc=c.forwardRef(Rc),jc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},Mc=function(t,n){return c.createElement(Bt,Fe({},t,{ref:n,icon:jc}))},ga=c.forwardRef(Mc);function Ec(e,t,n,r){const o=e&&typeof e=="object"?{...e}:{};return o[t]=o[t]&&typeof o[t]=="object"?{...o[t]}:{},o[t][n]=r,o.lastUpdated=new Date().toISOString(),o}const Ic=({visible:e,jsonKey:t,displayLabel:n,entityData:r,onSave:o,onClose:a,settingsKey:i})=>{const[s]=Yn.useForm(),[l,u]=c.useState(!1),[f]=c.useState(()=>ai),h=async()=>{try{u(!0);const C=(await s.validateFields()).name.trim();!f.isSignedIn&&f.restoreSession&&(console.log("📚 SaveAsModal: Attempting to restore session..."),f.restoreSession());const v=f.isSignedIn&&f.accessToken;if(console.log("📚 SaveAsModal: Auth check:",{isSignedIn:f.isSignedIn,hasToken:!!f.accessToken,isAuthenticated:v}),!v){Ft.error("Not signed in to Google Drive. Please sign in first."),u(!1);return}const y=i||t,S=f.getSettings(),b=S[`${y}LibraryFile`]||"library.json",x=S[`${y}Folder`]||"/",j=x==="/"?`/${b}`:`${x}/${b}`;console.log(`📚 SaveAsModal (${t}): Saving "${C}" to: ${j}`,{settingsKey:y,fileName:b,folderPath:x});let M=null;const E=await f.findFile(b,x);if(E.found?(M=E.fileId,console.log("📚 SaveAsModal: Library file found:",M)):(console.log("📚 SaveAsModal: Library file not found, creating new file..."),M=(await f.createNewLibrary(b,x)).fileId,console.log("📚 SaveAsModal: New library file created:",M)),!M)throw new Error("Failed to find or create library file");let B;try{B=await f.loadLibraryById(M),console.log("📚 SaveAsModal: Loaded current library:",B)}catch(D){console.warn("📚 SaveAsModal: Could not load library, starting fresh:",D),B={}}const k=Ec(B,t,C,r);console.log("📚 SaveAsModal: Merged library:",{[t]:Object.keys(k[t]||{})}),await f.saveLibraryToFile(M,k),console.log(`📚 SaveAsModal: Successfully saved ${n}: "${C}"`),Ft.success(`${n} "${C}" saved successfully`),await o(C,r),s.resetFields(),a()}catch(p){console.error("📚 SaveAsModal: Error saving:",p),Ft.error(p.message||`Failed to save ${n.toLowerCase()}`)}finally{u(!1)}},m=()=>{s.resetFields(),a()};return g.jsx(ii,{open:e,title:`Save ${n} As`,onCancel:m,footer:[g.jsx(je,{onClick:m,disabled:l,children:"Cancel"},"cancel"),g.jsx(je,{type:"primary",icon:g.jsx(ga,{}),loading:l,onClick:h,children:"Save"},"save")],width:500,children:g.jsx(Yn,{form:s,layout:"vertical",style:{marginTop:24},children:g.jsx(Yn.Item,{label:`${n} Name`,name:"name",rules:[{required:!0,message:`Please enter a ${n.toLowerCase()} name`},{min:1,message:"Name must be at least 1 character"},{max:100,message:"Name must be less than 100 characters"}],tooltip:`Choose a unique name for this ${n.toLowerCase()}`,children:g.jsx(si,{placeholder:`Enter ${n.toLowerCase()} name`,autoFocus:!0,autoComplete:"off",onPressEnter:()=>h()})})})})};class Ze{grid;colors;metadata;constructor(t=0,n=0,r=null,o={},a={},i="MC"){if(r)this.grid=r;else{this.grid=[];for(let s=0;s<n;s++)this.grid.push(new Array(t).fill(i))}this.colors=o,this.metadata=a}static fromJSON(t){return new Ze(0,0,t.grid||[],t.colors||{},t.metadata||{})}toJSON(){return{grid:this.grid,colors:this.colors,metadata:this.metadata}}setColor(t,n,r){this.colors[t]={id:t,color:n,label:r||t}}setStitch(t,n,r){t>=0&&t<this.grid.length&&n>=0&&n<this.grid[t].length&&(this.grid[t][n]=r)}getRowCount(){return this.grid.length}getStitchCount(){return this.grid.length>0?this.grid[0].length:0}getColorsUsed(){const t=new Set;return this.grid.forEach(n=>{n.forEach(r=>{r&&t.add(r)})}),Array.from(t).map(n=>this.colors[n]).filter(Boolean)}getRowInstructions(t){if(t<0||t>=this.grid.length)return[];const n=this.grid[t],r=[];let o=null,a=0;for(let i=0;i<n.length;i++){const s=n[i];s===o?a++:(o!==null&&r.push({colorId:o,color:this.colors[o],stitchCount:a}),o=s,a=1)}return o!==null&&r.push({colorId:o,color:this.colors[o],stitchCount:a}),r}resizeToFit(t,n,r="MC"){const o=this.getStitchCount(),a=this.getRowCount();if(o===0||a===0)return;const i=[];for(let s=0;s<n;s++){const l=[],u=Math.floor(s*a/n);for(let f=0;f<t;f++){const h=Math.floor(f*o/t);l.push(this.grid[u]?this.grid[u][h]:r)}i.push(l)}this.grid=i}extractSection(t,n,r=0,o=null){o=o||this.getRowCount();const a=[];for(let i=r;i<Math.min(o,this.getRowCount());i++){const s=[];for(let l=t;l<Math.min(n,this.getStitchCount());l++)s.push(this.grid[i]?this.grid[i][l]:"MC");a.push(s)}return new Ze(0,0,a,this.colors,{...this.metadata,isSection:!0,originalStitchRange:[t,n],originalRowRange:[r,o]})}}class jn{rows;colorworkMapping;constructor(){this.rows=[],this.colorworkMapping=null}addRow(t){this.rows.push(t)}setColorworkMapping(t,n){this.colorworkMapping={mappedRows:t,colorworkPattern:n}}generateKnittingInstructions(){return this.generateShapingInstructions()}generateColorworkInstructions(){return this.colorworkMapping?this.colorworkMapping.mappedRows.map((t,n)=>({row:n+1,machineRow:this.rows[n]?.rowNumber||n+1,colorwork:this.generateRowColorworkSequence(t.colorwork),stitchCount:t.totalStitches})):[]}generateRowColorworkSequence(t){const n=[];let r=null,o=0;for(const a of t)a===r?o++:(r!==null&&n.push({colorId:r,stitchCount:o}),r=a,o=1);return r!==null&&n.push({colorId:r,stitchCount:o}),n}hasColorwork(){return this.colorworkMapping!==null}generateShapingInstructions(){if(this.rows.length===0)return[];const t=[],n=this.rows[0].leftStitchesInWork,r=this.rows[0].rightStitchesInWork,o=this.rows[this.rows.length-1].leftStitchesInWork,a=this.rows[this.rows.length-1].rightStitchesInWork;if(n===o&&r===a)t.push(`Knit ${this.rows.length} rows (RC=${this.rows[this.rows.length-1].rowNumber}, ${this.rows[this.rows.length-1].leftStitchesInWork+this.rows[this.rows.length-1].rightStitchesInWork} sts in work).`);else{const i=this.rows[0];let s=1,l=i;for(const u of this.rows){const f=u.leftStitchesInWork-l.leftStitchesInWork,h=u.rightStitchesInWork-l.rightStitchesInWork;if(f===0&&h===0){s++;continue}else{let m="";f>0?m+=`Increase ${f} stitch${f>1?"es":""} on the left. `:f<0&&(m+=`Decrease ${-f} stitch${f<-1?"es":""} on the left. `),h>0?m+=`Increase ${h} stitch${h>1?"es":""} on the right. `:h<0&&(m+=`Decrease ${-h} stitch${h<-1?"es":""} on the right. `),l=u,m=s>1?`${m}Knit ${s} rows. `:`${m}Knit 1 row. `,m+=`(RC=${u.rowNumber}, ${u.leftStitchesInWork+u.rightStitchesInWork} sts in work)`,s=1,t.push(m)}}}return t}}jn.Row=class{constructor(e,t,n){this.rowNumber=e,this.leftStitchesInWork=t,this.rightStitchesInWork=n,this.colorwork=null}setColorwork(e,t){this.colorwork={colors:e,pattern:t}}getColorworkInstructions(){if(!this.colorwork)return null;const e=[];let t=null,n=0;for(const r of this.colorwork.colors)if(r===t)n++;else{if(t!==null){const o=this.colorwork.pattern.colors[t];e.push({colorId:t,colorLabel:o?.label||t,colorHex:o?.color||"#000000",stitchCount:n})}t=r,n=1}if(t!==null){const r=this.colorwork.pattern.colors[t];e.push({colorId:t,colorLabel:r?.label||t,colorHex:r?.color||"#000000",stitchCount:n})}return e}};class Sr{constructor(t,n,r=1){this.stitchesPerFourInches=t,this.rowsPerFourInches=n,this.scalingFactor=r}getStitchesPerInch(){return this.stitchesPerFourInches/4}getRowsPerInch(){return this.rowsPerFourInches/4}getEffectiveStitchesPerInch(){return this.getStitchesPerInch()/this.scalingFactor}getEffectiveRowsPerInch(){return this.getRowsPerInch()/this.scalingFactor}}const pa=new Sr(19,30);class nt{height;baseA;baseB;baseBHorizontalOffset;successors;modificationScale;finishingSteps;label;constructor(t,n,r,o=0,a=[],i=[],s=1,l=null){this.height=t,this.baseA=n,this.baseB=r,this.baseBHorizontalOffset=o,this.successors=a,this.modificationScale=s,this.finishingSteps=i,this.label=l}setSizeModifier(t){this.modificationScale=t}getHeight(){return this.height*this.modificationScale}getLowerBase(){return this.baseA*this.modificationScale}getUpperBase(){return this.baseB*this.modificationScale}getOffset(){return this.baseBHorizontalOffset*this.modificationScale}static fromObject(t){if(!t||typeof t!="object"||Array.isArray(t)&&t.length===0)return null;const n=Array.isArray(t.successors)?t.successors.map(h=>nt.fromObject(h)).filter(h=>h!=null):[],r=typeof t.height=="number"?t.height:Number(t.height)||0,o=typeof t.baseA=="number"?t.baseA:Number(t.baseA)||0,a=typeof t.baseB=="number"?t.baseB:Number(t.baseB)||0,i=typeof t.baseBHorizontalOffset=="number"?t.baseBHorizontalOffset:Number(t.baseBHorizontalOffset)||0,s=Array.isArray(t.finishingSteps)?t.finishingSteps:t.finishingSteps?[t.finishingSteps]:[],l=typeof t.sizeModifier=="number"?t.sizeModifier:Number(t.sizeModifier)||1,u=typeof t.label=="string"?t.label:t.label==null?null:String(t.label),f=new nt(r,o,a,i,n,s,l,u);try{t.id?f.id=t.id:t._id?f.id=t._id:(nt._nextId||(nt._nextId=1),f.id=`trap-${nt._nextId++}`)}catch{f.id=t&&(t.id||t._id)?t.id||t._id:`trap-${Date.now()}`}return f.label=u===void 0?null:u,f.isHem=!!t.isHem,f.shortRows=Array.isArray(t.shortRows)?t.shortRows.map(h=>({...h})):[],f}toJSON(){return{height:this.height,baseA:this.baseA,baseB:this.baseB,baseBHorizontalOffset:this.baseBHorizontalOffset,successors:(this.successors||[]).map(t=>typeof t.toJSON=="function"?t.toJSON():t),finishingSteps:this.finishingSteps||[],sizeModifier:this.modificationScale||1,label:this.label||null,isHem:!!this.isHem,shortRows:Array.isArray(this.shortRows)?this.shortRows.map(t=>({...t})):[]}}getUpperBaseWidthInStitches(t=pa){return Math.round(this.getUpperBase()*t.getStitchesPerInch())}getStitchPlan(t,n,r=1){const o=t.getStitchesPerInch()*n,a=t.getRowsPerInch()*n,i=Math.round(this.getLowerBase()*o),s=Math.floor(i/2),l=i%2===0?s:s+1,u=Math.round(this.getHeight()*a),f=this.getUpperBase()-this.getLowerBase(),h=f/2-this.getOffset(),m=f/2+this.getOffset(),p=Math.round(h*o),C=Math.round(m*o),v=Math.abs(p/u),y=Math.abs(C/u);let S=0,b=0;const x=new jn(t,n);let j=new jn.Row(r-1,s,l);for(let M=r;M<r+u;M++){let E=0,B=0;for(S+=v,b+=y;S>=1;)p>0?E+=1:E-=1,S-=1;for(;b>=1;)C>0?B+=1:B-=1,b-=1;const k=j.leftStitchesInWork+E,D=j.rightStitchesInWork+B,$=new jn.Row(M,k,D);x.addRow($),j=$}return x}generateKnittingInstructions(t,n,r=1,o=!1,a=null){const i=this.getStitchPlan(t,n,r),s=[];if(o&&i.rows.length>0&&s.push(`Cast on ${i.rows[0].leftStitchesInWork+i.rows[0].rightStitchesInWork} stitches.`),s.push(...i.generateKnittingInstructions(a)),s.push(...this.finishingSteps),this.successors.length>1){s.push(`Divide into ${this.successors.length} sections:`);for(let l=0;l<this.successors.length;l++){const u=this.successors[l],f=u.getUpperBaseWidthInStitches(t,n);if(u.getHeight()>0){s.push(`Section ${l+1}: ${f} stitches`);const h=u.generateKnittingInstructions(t,n,i.rows.length>0?i.rows[i.rows.length-1].rowNumber+1:r,!1,a?a.getChild(i.rows.length):null);s.push(...h)}else s.push(`Section ${l+1}: bind off ${u.getUpperBaseWidthInStitches(t,n)} stitches.`)}}else if(this.successors.length===1){const l=this.successors[0],u=l.getUpperBaseWidthInStitches(t,n);if(l.getHeight()>0){const f=l.generateKnittingInstructions(t,n,i.rows.length>0?i.rows[i.rows.length-1].rowNumber+1:r,!1,a?a.getChild(i.rows.length):null);s.push(...f)}else s.push(`Bind off ${u} stitches.`)}else i.rows.length>0&&s.push(`Bind off ${i.rows[i.rows.length-1].leftStitchesInWork+i.rows[i.rows.length-1].rightStitchesInWork} stitches.`);return s}}class Xt{constructor(t,n=pa,r=1.006,o=null){t instanceof nt||(t=nt.fromObject(t)),this.shape=t,this.gauge=n,this.sizeModifier=r,this.visualMotif=o,this.shape.setSizeModifier(r)}generateKnittingInstructions(){return this.shape?this.shape.generateKnittingInstructions(this.gauge,this.sizeModifier,1,!0,this.visualMotif):[]}static fromObject(t){return new Xt(nt.fromObject(t.shapes),t.gauge,t.sizeModifier,t.visualMotif)}toJSON(){return{shapes:this.shape&&typeof this.shape.toJSON=="function"?this.shape.toJSON():this.shape,gauge:this.gauge,sizeModifier:this.sizeModifier,visualMotif:this.visualMotif}}}class ma{constructor(){this.defaultStretchMode="repeat",this.defaultAlignmentMode="center"}combinePatterns(t,n,r={}){const{stretchMode:o=this.defaultStretchMode,alignmentMode:a=this.defaultAlignmentMode}=r,i=this.generatePanelStitchPlan(t),s=this.mapColorworkToShape(i,n,{stretchMode:o,alignmentMode:a});return i.setColorworkMapping(s,n),s.forEach((l,u)=>{i.rows[u]&&i.rows[u].setColorwork(l.colorwork,n)}),new wr(t,n,s,i)}generatePanelStitchPlan(t){if(!t.shape)return{rows:[]};const n=t.gauge,r=t.sizeModifier;return t.shape.getStitchPlan(n,r,1)}mapColorworkToShape(t,n,r={}){const{stretchMode:o,alignmentMode:a}=r,i=[];if(!t.rows||t.rows.length===0)return i;const s=n.getRowCount();for(let l=0;l<t.rows.length;l++){const u=t.rows[l],f=u.leftStitchesInWork+u.rightStitchesInWork,h=this.mapRowIndex(l,t.rows.length,s,o),m=this.mapRowStitches(n,h,f,u.leftStitchesInWork,{stretchMode:o,alignmentMode:a});i.push({panelRow:l+1,machineRow:u.rowNumber,leftStitches:u.leftStitchesInWork,rightStitches:u.rightStitchesInWork,totalStitches:f,colorwork:m,colorworkRowIndex:h})}return i}mapRowIndex(t,n,r,o){if(r===0)return 0;switch(o){case"stretch":return Math.floor(t*r/n);case"repeat":return t%r;case"center":{const a=Math.floor((n-r)/2);return t<a||t>=a+r?-1:t-a}default:return t%r}}mapRowStitches(t,n,r,o,a={}){const{stretchMode:i}=a;if(n<0||n>=t.getRowCount())return Array(r).fill("MC");const s=t.grid[n],l=s.length,u=[];for(let f=0;f<r;f++){let h;switch(i){case"stretch":h=Math.floor(f*l/r);break;case"repeat":h=f%l;break;case"center":{const p=Math.floor((r-l)/2);if(f<p||f>=p+l){u.push("MC");continue}h=f-p;break}default:h=f%l}const m=s[h]||"MC";u.push(m)}return u}handleShapingEdgeCases(t){return t}}class wr{constructor(t,n,r,o){this.panel=t,this.colorworkPattern=n,this.mappedRows=r,this.stitchPlan=o,this.metadata={created:new Date().toISOString(),panelType:"shaped",hasColorwork:!0}}getRowCount(){return this.mappedRows.length}getRowColorwork(t){return t<0||t>=this.mappedRows.length?null:this.mappedRows[t]}getColorsUsed(){return this.colorworkPattern.getColorsUsed()}toJSON(){return{panel:{shape:this.panel.shape,gauge:this.panel.gauge,sizeModifier:this.panel.sizeModifier},colorworkPattern:this.colorworkPattern.toJSON(),mappedRows:this.mappedRows,metadata:this.metadata}}static fromJSON(t){const n=new Xt(nt.fromJSON(t.panel.shape),new Sr(t.panel.gauge.stitchesPerFourInches,t.panel.gauge.rowsPerFourInches),t.panel.sizeModifier),r=Ze.fromJSON(t.colorworkPattern);return new wr(n,r,t.mappedRows,t.stitchPlan)}}class Oc{constructor(){this.cellSize=20,this.showGrid=!0,this.showRowNumbers=!0,this.showStitchNumbers=!1}generateChart(t,n={}){const{cellSize:r=this.cellSize,showGrid:o=this.showGrid,showRowNumbers:a=this.showRowNumbers,showStitchNumbers:i=this.showStitchNumbers,width:s=null,height:l=null}=n,u=t.getRowCount(),f=t.getStitchCount();if(u===0||f===0)return this.createEmptyChart();const h=s||f*r+(i?30:10),m=l||u*r+(a?30:10);return{svg:this.renderSVG(t,{cellSize:r,showGrid:o,showRowNumbers:a,showStitchNumbers:i}),dimensions:{width:h,height:m},cellSize:r,pattern:t}}generateRowInstructions(t){const n=[];for(let r=0;r<t.getRowCount();r++){const o=t.getRowInstructions(r);n.push({row:r+1,stitches:o,totalStitches:t.getStitchCount(),description:this.formatRowInstructions(o,r+1)})}return n}renderSVG(t,n={}){const{cellSize:r=this.cellSize,showGrid:o=this.showGrid,showRowNumbers:a=this.showRowNumbers,showStitchNumbers:i=this.showStitchNumbers}=n,s=t.getRowCount(),l=t.getStitchCount(),u=a?30:5,f=i?30:5,h=l*r+u+5,m=s*r+f+5,p=[];p.push(`<rect width="${h}" height="${m}" fill="white" stroke="none"/>`);for(let v=0;v<s;v++)for(let y=0;y<l;y++){const S=u+y*r,b=f+v*r,x=t.grid[v][y],j=t.colors[x],M=j?j.color:"#ffffff";p.push(`<rect x="${S}" y="${b}" width="${r}" height="${r}" fill="${M}" stroke="${o?"#cccccc":"none"}" stroke-width="0.5"/>`)}if(a)for(let v=0;v<s;v++){const y=f+v*r+r/2;p.push(`<text x="20" y="${y+4}" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">${s-v}</text>`)}if(i)for(let v=0;v<l;v++){const y=u+v*r+r/2;p.push(`<text x="${y}" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">${v+1}</text>`)}return`<svg width="${h}" height="${m}" xmlns="http://www.w3.org/2000/svg">
            ${p.join(`
`)}
        </svg>`}formatRowInstructions(t,n){if(t.length===0)return`Row ${n}: No stitches`;const r=t.map(o=>{const a=o.color?o.color.label:o.colorId;return`${o.stitchCount} ${a}`});return`Row ${n}: ${r.join(", ")}`}createEmptyChart(){return{svg:'<svg width="100" height="50" xmlns="http://www.w3.org/2000/svg"><text x="50" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">No Pattern</text></svg>',dimensions:{width:100,height:50},cellSize:this.cellSize,pattern:null}}generateLegend(t){return t.getColorsUsed().map(r=>({id:r.id,label:r.label,color:r.color,description:`${r.label} (${r.color})`}))}}class oo{constructor(t,n,r,o,a=null){this.row=t,this.machineRow=n,this.shaping=r,this.colorwork=o,this.visualChart=a}hasShaping(){return this.shaping&&(this.shaping.description.includes("Increase")||this.shaping.description.includes("Decrease"))}hasColorwork(){return this.colorwork&&this.colorwork.colorSequence&&this.colorwork.colorSequence.length>0}toString(){let t=`Row ${this.row}`;return this.machineRow&&this.machineRow!==this.row&&(t+=` (RC: ${this.machineRow})`),this.hasShaping()&&(t+=`: ${this.shaping.description}`),this.hasColorwork()&&(t+=` Colorwork: ${this.colorwork.description}`),t}}class va{constructor(){this.colorworkVisualizer=new Oc}generateInstructions(t,n="compact"){const r=this.generateCombinedInstructions(t);switch(n){case"compact":return this.formatCompactInstructions(r);case"detailed":return r;case"visual":return this.formatVisualInstructions(r);default:return r}}formatCompactInstructions(t){return t.filter(n=>n.hasShaping()||n.hasColorwork()||n.row%5===1).slice(0,10)}formatVisualInstructions(t){return t.filter(n=>n.visualChart).slice(0,5)}generateCombinedInstructions(t){const n=this.generateShapingInstructions(t.panel),r=this.generateColorworkInstructions(t);return this.synchronizeInstructions(n,r,t)}generateShapingInstructions(t){return t.generateKnittingInstructions()}generateColorworkInstructions(t){const n=[];for(const r of t.mappedRows){const o=this.generateRowColorworkInstructions(r);n.push({row:r.panelRow,machineRow:r.machineRow,colorwork:o,stitchCount:r.totalStitches})}return n}generateRowColorworkInstructions(t){const n=[];let r=null,o=0;for(const a of t.colorwork)a===r?o++:(r!==null&&n.push({colorId:r,stitchCount:o}),r=a,o=1);return r!==null&&n.push({colorId:r,stitchCount:o}),n}synchronizeInstructions(t,n,r){const o=[],a=r.colorworkPattern.colors,i=this.parseShapingInstructions(t);for(const s of n){const l=i[s.machineRow]||null,u=new oo(s.row,s.machineRow,l,{colorSequence:s.colorwork,totalStitches:s.stitchCount,description:this.formatColorworkDescription(s.colorwork,a)},this.generateRowVisualChart(r,s.row-1));o.push(u)}return this.addRemainingShapingInstructions(o,t,i),o}parseShapingInstructions(t){const n={};return t.forEach((r,o)=>{if(typeof r=="string"){const a=r.match(/(?:Row|RC[=:]?)\s*(\d+)/i);if(a){const i=parseInt(a[1]);n[i]={type:"text",description:r,index:o}}else n[`general_${o}`]={type:"general",description:r,index:o}}}),n}formatColorworkDescription(t,n){return t.length===0?"No colorwork":t.map(o=>{const a=n[o.colorId],i=a?a.label:o.colorId;return`${o.stitchCount} ${i}`}).join(", ")}generateRowVisualChart(t,n){if(n<0||n>=t.mappedRows.length)return null;const r=t.mappedRows[n],o={grid:[r.colorwork],colors:t.colorworkPattern.colors,getRowCount:()=>1,getStitchCount:()=>r.colorwork.length};return this.colorworkVisualizer.generateChart(o,{cellSize:15,showRowNumbers:!1,showStitchNumbers:!1,showGrid:!0})}addRemainingShapingInstructions(t,n){n.forEach((r,o)=>{if(typeof r=="string"&&(r.toLowerCase().includes("cast on")||r.toLowerCase().includes("bind off")||r.toLowerCase().includes("hang hem")||!r.match(/(?:Row|RC[=:]?)\s*(\d+)/i))){const i=new oo(null,null,{type:"general",description:r,index:o},null,null);r.toLowerCase().includes("cast on")?t.unshift(i):t.push(i)}})}}var Vn={},Zt={},ao;function ba(){if(ao)return Zt;ao=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.bind=void 0;function e(t,n){var r=n.type,o=n.listener,a=n.options;return t.addEventListener(r,o,a),function(){t.removeEventListener(r,o,a)}}return Zt.bind=e,Zt}var It={},io;function Tc(){if(io)return It;io=1;var e=It&&It.__assign||function(){return e=Object.assign||function(a){for(var i,s=1,l=arguments.length;s<l;s++){i=arguments[s];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},e.apply(this,arguments)};Object.defineProperty(It,"__esModule",{value:!0}),It.bindAll=void 0;var t=ba();function n(a){if(!(typeof a>"u"))return typeof a=="boolean"?{capture:a}:a}function r(a,i){if(i==null)return a;var s=e(e({},a),{options:e(e({},n(i)),n(a.options))});return s}function o(a,i,s){var l=i.map(function(u){var f=r(u,s);return(0,t.bind)(a,f)});return function(){l.forEach(function(f){return f()})}}return It.bindAll=o,It}var so;function kc(){return so||(so=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var t=ba();Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return t.bind}});var n=Tc();Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return n.bindAll}})})(Vn)),Vn}var Yt=kc(),Ca="data-pdnd-honey-pot";function ya(e){return e instanceof Element&&e.hasAttribute(Ca)}function Sa(e){var t=document.elementsFromPoint(e.x,e.y),n=fe(t,2),r=n[0],o=n[1];return r?ya(r)?o??null:r:null}var Ac=2147483647;function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lo(Object(n),!0).forEach(function(r){Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var an=2,uo=an/2;function Dc(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function Bc(e){return{x:e.x-uo,y:e.y-uo}}function Nc(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function zc(e){return{x:Math.min(e.x,window.innerWidth-an),y:Math.min(e.y,window.innerHeight-an)}}function fo(e){var t=e.client,n=zc(Nc(Bc(Dc(t))));return DOMRect.fromRect({x:n.x,y:n.y,width:an,height:an})}function ho(e){var t=e.clientRect;return{left:"".concat(t.left,"px"),top:"".concat(t.top,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")}}function Hc(e){var t=e.client,n=e.clientRect;return t.x>=n.x&&t.x<=n.x+n.width&&t.y>=n.y&&t.y<=n.y+n.height}function Lc(e){var t=e.initial,n=document.createElement("div");n.setAttribute(Ca,"true");var r=fo({client:t});Object.assign(n.style,co(co({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},ho({clientRect:r})),{},{pointerEvents:"auto",zIndex:Ac})),document.body.appendChild(n);var o=Yt.bind(window,{type:"pointermove",listener:function(i){var s={x:i.clientX,y:i.clientY};r=fo({client:s}),Object.assign(n.style,ho({clientRect:r}))},options:{capture:!0}});return function(i){var s=i.current;if(o(),Hc({client:s,clientRect:r})){n.remove();return}function l(){u(),n.remove()}var u=Yt.bindAll(window,[{type:"pointerdown",listener:l},{type:"pointermove",listener:l},{type:"focusin",listener:l},{type:"focusout",listener:l},{type:"dragstart",listener:l},{type:"dragenter",listener:l},{type:"dragover",listener:l}],{capture:!0})}}function _c(){var e=null;function t(){return e=null,Yt.bind(window,{type:"pointermove",listener:function(o){e={x:o.clientX,y:o.clientY}},options:{capture:!0}})}function n(){var r=null;return function(a){var i=a.eventName,s=a.payload;if(i==="onDragStart"){var l=s.location.initial.input,u=e??{x:l.clientX,y:l.clientY};r=Lc({initial:u})}if(i==="onDrop"){var f,h=s.location.current.input;(f=r)===null||f===void 0||f({current:{x:h.clientX,y:h.clientY}}),r=null,e=null}}}return{bindEvents:t,getOnPostDispatch:n}}function qt(e){var t=null;return function(){if(!t){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=e.apply(this,o);t={result:i}}return t.result}}var Wc=qt(function(){return navigator.userAgent.includes("Firefox")}),xr=qt(function(){var t=navigator,n=t.userAgent;return n.includes("AppleWebKit")&&!n.includes("Chrome")}),sr={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function Fc(e){var t=e.dragLeave;return xr()?t.hasOwnProperty(sr.isLeavingWindow):!1}(function(){if(typeof window>"u"||!xr())return;function t(){return{enterCount:0,isOverWindow:!1}}var n=t();function r(){n=t()}Yt.bindAll(window,[{type:"dragstart",listener:function(){n.enterCount=0,n.isOverWindow=!0}},{type:"drop",listener:r},{type:"dragend",listener:r},{type:"dragenter",listener:function(a){!n.isOverWindow&&n.enterCount===0&&(a[sr.isEnteringWindow]=!0),n.isOverWindow=!0,n.enterCount++}},{type:"dragleave",listener:function(a){n.enterCount--,n.isOverWindow&&n.enterCount===0&&(a[sr.isLeavingWindow]=!0,n.isOverWindow=!1)}}],{capture:!0})})();function Xc(e){return"nodeName"in e}function Yc(e){return Xc(e)&&e.ownerDocument!==document}function Kc(e){var t=e.dragLeave,n=t.type,r=t.relatedTarget;return n!=="dragleave"?!1:xr()?Fc({dragLeave:t}):r==null?!0:Wc()?Yc(r):r instanceof HTMLIFrameElement}function Gc(e){var t=e.onDragEnd;return[{type:"pointermove",listener:(function(){var n=0;return function(){if(n<20){n++;return}t()}})()},{type:"pointerdown",listener:t}]}function rn(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var Vc=function(t){var n=[],r=null,o=function(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];n=s,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return o.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},o},qn=Vc(function(e){return e()}),$n=(function(){var e=null;function t(r){var o=requestAnimationFrame(function(){e=null,r()});e={frameId:o,fn:r}}function n(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}return{schedule:t,flush:n}})();function qc(e){var t=e.source,n=e.initial,r=e.dispatchEvent,o={dropTargets:[]};function a(s){r(s),o={dropTargets:s.payload.location.current.dropTargets}}var i={start:function(l){var u=l.nativeSetDragImage,f={current:n,previous:o,initial:n};a({eventName:"onGenerateDragPreview",payload:{source:t,location:f,nativeSetDragImage:u}}),$n.schedule(function(){a({eventName:"onDragStart",payload:{source:t,location:f}})})},dragUpdate:function(l){var u=l.current;$n.flush(),qn.cancel(),a({eventName:"onDropTargetChange",payload:{source:t,location:{initial:n,previous:o,current:u}}})},drag:function(l){var u=l.current;qn(function(){$n.flush();var f={initial:n,previous:o,current:u};a({eventName:"onDrag",payload:{source:t,location:f}})})},drop:function(l){var u=l.current,f=l.updatedSourcePayload;$n.flush(),qn.cancel(),a({eventName:"onDrop",payload:{source:f??t,location:{current:u,previous:o,initial:n}}})}};return i}var lr={isActive:!1};function wa(){return!lr.isActive}function Uc(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function Jc(e){var t=e.current,n=e.next;if(t.length!==n.length)return!0;for(var r=0;r<t.length;r++)if(t[r].element!==n[r].element)return!0;return!1}function Zc(e){var t=e.event,n=e.dragType,r=e.getDropTargetsOver,o=e.dispatchEvent;if(!wa())return;var a=Qc({event:t,dragType:n,getDropTargetsOver:r});lr.isActive=!0;var i={current:a};Un({event:t,current:a.dropTargets});var s=qc({source:n.payload,dispatchEvent:o,initial:a});function l(p){var C=Jc({current:i.current.dropTargets,next:p.dropTargets});i.current=p,C&&s.dragUpdate({current:i.current})}function u(p){var C=rn(p),v=ya(p.target)?Sa({x:C.clientX,y:C.clientY}):p.target,y=r({target:v,input:C,source:n.payload,current:i.current.dropTargets});y.length&&(p.preventDefault(),Un({event:p,current:y})),l({dropTargets:y,input:C})}function f(){i.current.dropTargets.length&&l({dropTargets:[],input:i.current.input}),s.drop({current:i.current,updatedSourcePayload:null}),h()}function h(){lr.isActive=!1,m()}var m=Yt.bindAll(window,[{type:"dragover",listener:function(C){u(C),s.drag({current:i.current})}},{type:"dragenter",listener:u},{type:"dragleave",listener:function(C){Kc({dragLeave:C})&&(l({input:i.current.input,dropTargets:[]}),n.startedFrom==="external"&&f())}},{type:"drop",listener:function(C){if(i.current={dropTargets:i.current.dropTargets,input:rn(C)},!i.current.dropTargets.length){f();return}C.preventDefault(),Un({event:C,current:i.current.dropTargets}),s.drop({current:i.current,updatedSourcePayload:n.type==="external"?n.getDropPayload(C):null}),h()}},{type:"dragend",listener:function(C){i.current={dropTargets:i.current.dropTargets,input:rn(C)},f()}}].concat(Ue(Gc({onDragEnd:f}))),{capture:!0});s.start({nativeSetDragImage:Uc(t)})}function Un(e){var t,n=e.event,r=e.current,o=(t=r[0])===null||t===void 0?void 0:t.dropEffect;o!=null&&n.dataTransfer&&(n.dataTransfer.dropEffect=o)}function Qc(e){var t=e.event,n=e.dragType,r=e.getDropTargetsOver,o=rn(t);if(n.startedFrom==="external")return{input:o,dropTargets:[]};var a=r({input:o,source:n.payload,target:t.target,current:[]});return{input:o,dropTargets:a}}var go={canStart:wa,start:Zc},cr=new Map;function eu(e){var t=e.typeKey,n=e.mount,r=cr.get(t);if(r)return r.usageCount++,r;var o={typeKey:t,unmount:n(),usageCount:1};return cr.set(t,o),o}function tu(e){var t=eu(e);return function(){t.usageCount--,!(t.usageCount>0)&&(t.unmount(),cr.delete(e.typeKey))}}function $r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){t.forEach(function(o){return o()})}}function xa(e,t){var n=t.attribute,r=t.value;return e.setAttribute(n,r),function(){return e.removeAttribute(n)}}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?po(Object(n),!0).forEach(function(r){Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jn(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nu(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){s=!0,a=u},f:function(){try{i||n.return==null||n.return()}finally{if(s)throw a}}}}function nu(e,t){if(e){if(typeof e=="string")return mo(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mo(e,t):void 0}}function mo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Zn(e){return e.slice(0).reverse()}function ru(e){var t=e.typeKey,n=e.defaultDropEffect,r=new WeakMap,o="data-drop-target-for-".concat(t),a="[".concat(o,"]");function i(p){return r.set(p.element,p),function(){return r.delete(p.element)}}function s(p){var C=$r(xa(p.element,{attribute:o,value:"true"}),i(p));return qt(C)}function l(p){var C,v,y,S,b=p.source,x=p.target,j=p.input,M=p.result,E=M===void 0?[]:M;if(x==null)return E;if(!(x instanceof Element))return x instanceof Node?l({source:b,target:x.parentElement,input:j,result:E}):E;var B=x.closest(a);if(B==null)return E;var k=r.get(B);if(k==null)return E;var D={input:j,source:b,element:k.element};if(k.canDrop&&!k.canDrop(D))return l({source:b,target:k.element.parentElement,input:j,result:E});var $=(C=(v=k.getData)===null||v===void 0?void 0:v.call(k,D))!==null&&C!==void 0?C:{},I=(y=(S=k.getDropEffect)===null||S===void 0?void 0:S.call(k,D))!==null&&y!==void 0?y:n,A={data:$,element:k.element,dropEffect:I,isActiveDueToStickiness:!1};return l({source:b,target:k.element.parentElement,input:j,result:[].concat(Ue(E),[A])})}function u(p){var C=p.eventName,v=p.payload,y=Jn(v.location.current.dropTargets),S;try{for(y.s();!(S=y.n()).done;){var b,x=S.value,j=r.get(x.element),M=xt(xt({},v),{},{self:x});j==null||(b=j[C])===null||b===void 0||b.call(j,M)}}catch(E){y.e(E)}finally{y.f()}}var f={onGenerateDragPreview:u,onDrag:u,onDragStart:u,onDrop:u,onDropTargetChange:function(C){var v=C.payload,y=new Set(v.location.current.dropTargets.map(function(U){return U.element})),S=new Set,b=Jn(v.location.previous.dropTargets),x;try{for(b.s();!(x=b.n()).done;){var j,M=x.value;S.add(M.element);var E=r.get(M.element),B=y.has(M.element),k=xt(xt({},v),{},{self:M});if(E==null||(j=E.onDropTargetChange)===null||j===void 0||j.call(E,k),!B){var D;E==null||(D=E.onDragLeave)===null||D===void 0||D.call(E,k)}}}catch(U){b.e(U)}finally{b.f()}var $=Jn(v.location.current.dropTargets),I;try{for($.s();!(I=$.n()).done;){var A,z,N=I.value;if(!S.has(N.element)){var V=xt(xt({},v),{},{self:N}),K=r.get(N.element);K==null||(A=K.onDropTargetChange)===null||A===void 0||A.call(K,V),K==null||(z=K.onDragEnter)===null||z===void 0||z.call(K,V)}}}catch(U){$.e(U)}finally{$.f()}}};function h(p){f[p.eventName](p)}function m(p){var C=p.source,v=p.target,y=p.input,S=p.current,b=l({source:C,target:v,input:y});if(b.length>=S.length)return b;for(var x=Zn(S),j=Zn(b),M=[],E=0;E<x.length;E++){var B,k=x[E],D=j[E];if(D!=null){M.push(D);continue}var $=M[E-1],I=x[E-1];if($?.element!==I?.element)break;var A=r.get(k.element);if(!A)break;var z={input:y,source:C,element:A.element};if(A.canDrop&&!A.canDrop(z)||!((B=A.getIsSticky)!==null&&B!==void 0&&B.call(A,z)))break;M.push(xt(xt({},k),{},{isActiveDueToStickiness:!0}))}return Zn(M)}return{dropTargetForConsumers:s,getIsOver:m,dispatchEvent:h}}function ou(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=au(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){s=!0,a=u},f:function(){try{i||n.return==null||n.return()}finally{if(s)throw a}}}}function au(e,t){if(e){if(typeof e=="string")return vo(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vo(e,t):void 0}}function vo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function iu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bo(Object(n),!0).forEach(function(r){Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function su(){var e=new Set,t=null;function n(a){t&&(!a.canMonitor||a.canMonitor(t.canMonitorArgs))&&t.active.add(a)}function r(a){var i=iu({},a);e.add(i),n(i);function s(){e.delete(i),t&&t.active.delete(i)}return qt(s)}function o(a){var i=a.eventName,s=a.payload;if(i==="onGenerateDragPreview"){t={canMonitorArgs:{initial:s.location.initial,source:s.source},active:new Set};var l=ou(e),u;try{for(l.s();!(u=l.n()).done;){var f=u.value;n(f)}}catch(y){l.e(y)}finally{l.f()}}if(t){for(var h=Array.from(t.active),m=0,p=h;m<p.length;m++){var C=p[m];if(t.active.has(C)){var v;(v=C[i])===null||v===void 0||v.call(C,s)}}i==="onDrop"&&(t.active.clear(),t=null)}}return{dispatchEvent:o,monitorForConsumers:r}}function lu(e){var t=e.typeKey,n=e.mount,r=e.dispatchEventToSource,o=e.onPostDispatch,a=e.defaultDropEffect,i=su(),s=ru({typeKey:t,defaultDropEffect:a});function l(h){r?.(h),s.dispatchEvent(h),i.dispatchEvent(h),o?.(h)}function u(h){var m=h.event,p=h.dragType;go.start({event:m,dragType:p,getDropTargetsOver:s.getIsOver,dispatchEvent:l})}function f(){function h(){var m={canStart:go.canStart,start:u};return n(m)}return tu({typeKey:t,mount:h})}return{registerUsage:f,dropTarget:s.dropTargetForConsumers,monitor:i.monitorForConsumers}}var cu=qt(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),uu="pdnd:android-fallback",Co="text/plain",du="text/uri-list",fu="application/vnd.pdnd",Dn=new WeakMap;function hu(e){return Dn.set(e.element,e),function(){Dn.delete(e.element)}}var yo=_c(),$a=lu({typeKey:"element",defaultDropEffect:"move",mount:function(t){return $r(yo.bindEvents(),Yt.bind(document,{type:"dragstart",listener:function(r){var o,a,i,s,l,u;if(t.canStart(r)&&!r.defaultPrevented&&r.dataTransfer){var f=r.target;if(!(f instanceof HTMLElement))return null;var h=Dn.get(f);if(!h)return null;var m=rn(r),p={element:h.element,dragHandle:(o=h.dragHandle)!==null&&o!==void 0?o:null,input:m};if(h.canDrag&&!h.canDrag(p))return r.preventDefault(),null;if(h.dragHandle){var C=Sa({x:m.clientX,y:m.clientY});if(!h.dragHandle.contains(C))return r.preventDefault(),null}var v=(a=(i=h.getInitialDataForExternal)===null||i===void 0?void 0:i.call(h,p))!==null&&a!==void 0?a:null;if(v)for(var y=0,S=Object.entries(v);y<S.length;y++){var b=fe(S[y],2),x=b[0],j=b[1];r.dataTransfer.setData(x,j??"")}cu()&&!r.dataTransfer.types.includes(Co)&&!r.dataTransfer.types.includes(du)&&r.dataTransfer.setData(Co,uu),r.dataTransfer.setData(fu,"");var M={element:h.element,dragHandle:(s=h.dragHandle)!==null&&s!==void 0?s:null,data:(l=(u=h.getInitialData)===null||u===void 0?void 0:u.call(h,p))!==null&&l!==void 0?l:{}},E={type:"element",payload:M,startedFrom:"internal"};t.start({event:r,dragType:E})}}}))},dispatchEventToSource:function(t){var n,r,o=t.eventName,a=t.payload;(n=Dn.get(a.source.element))===null||n===void 0||(r=n[o])===null||r===void 0||r.call(n,a)},onPostDispatch:yo.getOnPostDispatch()}),gu=$a.dropTarget;function pu(e){var t=$r($a.registerUsage(),hu(e),xa(e.element,{attribute:"draggable",value:"true"}));return qt(t)}const{Text:Ee}=sn,{Option:ut}=Ot,mu=q.memo(({layer:e,children:t,onLayerReorder:n,dragItemHoverStyle:r,dragItemNormalStyle:o})=>{const a=c.useRef(null),[i,s]=c.useState(!1);return c.useEffect(()=>{const l=a.current;if(!l)return;const u=pu({element:l,getInitialData:()=>({layerId:e.id,type:"layer"}),onDragStart:()=>{l.style.opacity="0.5"},onDrop:()=>{l.style.opacity="1"}}),f=gu({element:l,onDragEnter:()=>s(!0),onDragLeave:()=>s(!1),onDrop:({source:h})=>{s(!1);const m=h.data.layerId;m&&m!==e.id&&n(m,e.id)},canDrop:({source:h})=>h.data.type==="layer"&&h.data.layerId!==e.id});return()=>{u(),f()}},[e.id,n]),g.jsx("div",{ref:a,style:i?r:o,children:t})}),vu=({shape:e,patternLayers:t=[],gauge:n=null,onLayersChange:r=(...a)=>{},onGaugeChange:o=(...a)=>{}})=>{const a=c.useRef(null),[i,s]=c.useState(1),[l,u]=c.useState({x:0,y:0}),[f,h]=c.useState(!1),[m,p]=c.useState({x:0,y:0}),[C,v]=c.useState({width:800,height:600}),y=c.useRef(!1),S=nr(li);c.useEffect(()=>{console.log("📚 Library patterns loaded:",S)},[S]);const b=c.useMemo(()=>{const d={solid:{name:"Solid Color",type:"solid",defaultConfig:{colors:[{color:"#ffffff"}]}},stripes:{name:"Horizontal Stripes",type:"stripes",defaultConfig:{colors:[{color:"#ffffff",rows:2},{color:"#000000",rows:2}],width:4}},vstripes:{name:"Vertical Stripes",type:"vstripes",defaultConfig:{colors:[{color:"#ffffff",columns:2},{color:"#000000",columns:2}],height:4}},checkerboard:{name:"Checkerboard",type:"checkerboard",defaultConfig:{cellSize:2,colors:[{color:"#ffffff"},{color:"#000000"}]}},argyle:{name:"Argyle",type:"argyle",defaultConfig:{colors:[{color:"#ffffff"},{color:"#ff0000"},{color:"#0000ff"}]}},row:{name:"Row",type:"row",defaultConfig:{elements:[]}},vstack:{name:"Vertical Stack",type:"vstack",defaultConfig:{elements:[]}}};return S&&typeof S=="object"&&Object.entries(S).forEach(([T,w])=>{const R=`custom-${T}`;d[R]={name:w.name||T,type:"custom",customPattern:w.pattern,customColors:w.colors,defaultConfig:{pattern:w.pattern,colors:w.colors||{}}}}),d},[S]);c.useEffect(()=>{console.log("🎨 Available patterns:",Object.keys(b),b)},[b]);const[x,j]=c.useState(new Set),M=(d,T,w,R=0,P=0,O,X=[],Y=null)=>{const F=[];if(E(T,w,R,P,F),F.length===0)return;let J=Math.min(...F.map(_=>Math.min(_.topLeft.x,_.topRight.x,_.bottomLeft.x,_.bottomRight.x))),Q=Math.max(...F.map(_=>Math.max(_.topLeft.x,_.topRight.x,_.bottomLeft.x,_.bottomRight.x))),he=Math.min(...F.map(_=>Math.min(_.topLeft.y,_.topRight.y,_.bottomLeft.y,_.bottomRight.y))),L=Math.max(...F.map(_=>Math.max(_.topLeft.y,_.topRight.y,_.bottomLeft.y,_.bottomRight.y)));if(d.save(),d.beginPath(),F.forEach((_,ie)=>{d.moveTo(_.topLeft.x,_.topLeft.y),d.lineTo(_.topRight.x,_.topRight.y),d.lineTo(_.bottomRight.x,_.bottomRight.y),d.lineTo(_.bottomLeft.x,_.bottomLeft.y),d.closePath()}),d.clip(),X&&X.length>0&&Y){let _={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};z(T,1,0,0,_),B(d,X,T,J,he,Q-J,L-he,w,Y,_)}else d.fillStyle=O,d.globalAlpha=.3,d.fillRect(J,he,Q-J,L-he),d.globalAlpha=1;d.restore(),d.strokeStyle="#a1a8af",d.lineWidth=3,d.lineJoin="round",F.forEach(_=>{d.beginPath(),d.moveTo(_.topLeft.x,_.topLeft.y),d.lineTo(_.topRight.x,_.topRight.y),d.lineTo(_.bottomRight.x,_.bottomRight.y),d.lineTo(_.bottomLeft.x,_.bottomLeft.y),d.closePath(),d.stroke()})},E=(d,T,w=0,R=0,P=[])=>{const O=Math.max(d.baseA,d.baseB)*T,X=w+(O-d.baseB*T)/2+(d.baseBHorizontalOffset||0)*T,Y=w+(O+d.baseB*T)/2+(d.baseBHorizontalOffset||0)*T,F=w+(O-d.baseA*T)/2,J=w+(O+d.baseA*T)/2,Q=R,he=R+d.height*T;if(P.push({topLeft:{x:X,y:Q},topRight:{x:Y,y:Q},bottomLeft:{x:F,y:he},bottomRight:{x:J,y:he}}),d.successors&&d.successors.length>0){const L=d.successors.map(re=>Math.max(re.baseA,re.baseB)*T),_=L.reduce((re,Ce)=>re+Ce,0);let ie=w+(O-_)/2;for(let re=d.successors.length-1;re>=0;re--){const Ce=d.successors[re],xe=L[re];E(Ce,T,ie,Q-Ce.height*T,P),ie+=xe}}},B=(d,T,w,R,P,O,X,Y,F,J=null)=>{const Q=J?J.maxX-J.minX:Math.max(w.baseA,w.baseB),he=J?J.maxY-J.minY:w.height,L=F.scalingFactor||1,_=Q*L,ie=he*L,re=F.stitchesPerFourInches/4,Ce=F.rowsPerFourInches/4,xe=Math.round(_*re),Be=Math.round(ie*Ce),Xe=O/xe,Ne=X/Be,Me=k(xe,Be,T);for(let Te=0;Te<Be;Te++)for(let ze=0;ze<xe;ze++){const Ke=R+ze*Xe,it=P+Te*Ne,De=Me[Te]&&Me[Te][ze];De&&De!=="transparent"&&(d.fillStyle=De,d.fillRect(Ke,it,Xe,Ne))}},k=(d,T,w,R,P)=>{const O=Array(T).fill().map(()=>Array(d).fill("transparent"));return[...w].reverse().forEach(X=>{D(O,d,T,X)}),O},D=(d,T,w,R)=>{let{pattern:P,settings:O}=R;if(R.patternType==="stripes"&&R.patternConfig&&R.patternConfig.colors?R.patternConfig.colors.some(Be=>Be.rows===0)&&(P=bt("stripes",R.patternConfig,w)):R.patternType==="vstripes"&&R.patternConfig&&R.patternConfig.colors&&R.patternConfig.colors.some(Be=>Be.columns===0)&&(P=bt("vstripes",R.patternConfig,T)),!P||!P.grid||P.grid.length===0)return;const X=P.getRowCount(),Y=P.getStitchCount();if(X===0||Y===0)return;const{repeatMode:F="none",repeatCountX:J=0,repeatCountY:Q=0,offsetHorizontal:he=0,offsetVertical:L=0}=O,_=F==="x"||F==="both",ie=F==="y"||F==="both",re=Math.floor((T-Y)/2),Ce=Math.floor((w-X)/2);for(let xe=0;xe<w;xe++)for(let Be=0;Be<T;Be++){const Xe=Be-re-he,Ne=xe-Ce-L;let Me=0,Te=0;if(_&&Y>0&&(Me=Math.floor(Xe/Y)),ie&&X>0&&(Te=Math.floor(Ne/X)),_&&J>0){const He=Math.floor(J/2),_e=(J%2===0,-He),Oe=J%2===0?He-1:He;if(Me<_e||Me>Oe)continue}if(ie&&Q>0){const He=Math.floor(Q/2),_e=(Q%2===0,-He),Oe=Q%2===0?He-1:He;if(Te<_e||Te>Oe)continue}if(!_&&(Xe<0||Xe>=Y)||!ie&&(Ne<0||Ne>=X))continue;let ze,Ke;if(_)ze=(Xe%Y+Y)%Y;else if(ze=Xe,ze<0||ze>=Y)continue;if(ie)Ke=(Ne%X+X)%X;else if(Ke=Ne,Ke<0||Ke>=X)continue;const it=P.grid[Ke][ze],De=P.colors[it];if(De){const He=R.settings.colorMapping?.[it]||De.color;He&&He!=="transparent"&&(d[xe][Be]=He)}}},$=(d,T,w,R,P,O,X,Y,F,J,Q,he)=>{const L=window.devicePixelRatio||1,_=30*L,ie=30*L,re=X*P*L;d.save(),d.setTransform(L,0,0,L,0,0),d.fillStyle="#f0f0f0",d.fillRect(0,w-ie/L,T,ie/L),d.fillRect(0,0,_/L,w),d.strokeStyle="#d0d0d0",d.lineWidth=1,d.beginPath(),d.moveTo(0,w-ie/L),d.lineTo(T,w-ie/L),d.moveTo(_/L,0),d.lineTo(_/L,w),d.stroke(),d.fillStyle="#666",d.font="10px Arial",d.textAlign="center",d.textBaseline="middle",d.fillStyle="#333",d.font="10px Arial",d.textAlign="center",d.textBaseline="middle";const Ce=(Y.maxX-Y.minX)*X*P,xe=(Y.maxY-Y.minY)*X*P,Be=F,Xe=J,Ne=Be-Ce/2,Me=Xe+xe/2,Te=Ne,ze=Me,Ke=Math.ceil(Q),it=Math.ceil(he);for(let _e=0;_e<=Ke;_e++){const Oe=Te+_e*re/L;Oe>=_/L&&Oe<=T&&(d.strokeStyle="#666",d.lineWidth=1,d.beginPath(),d.moveTo(Oe,w-8),d.lineTo(Oe,w),d.stroke(),d.fillStyle="#333",d.fillText(_e.toString(),Oe,w-15));const Qe=Oe+re/L/2;if(Qe>=_/L&&Qe<=T&&_e<Ke&&(d.strokeStyle="#999",d.lineWidth=1,d.beginPath(),d.moveTo(Qe,w-4),d.lineTo(Qe,w),d.stroke()),_e<Ke){const ot=Oe+re/L/4,Je=Oe+3*re/L/4;ot>=_/L&&ot<=T&&(d.strokeStyle="#ccc",d.lineWidth=1,d.beginPath(),d.moveTo(ot,w-2),d.lineTo(ot,w),d.stroke()),Je>=_/L&&Je<=T&&(d.strokeStyle="#ccc",d.lineWidth=1,d.beginPath(),d.moveTo(Je,w-2),d.lineTo(Je,w),d.stroke())}}const De=Te+Q*re/L;De>=_/L&&De<=T&&(d.fillStyle="#555",d.font="italic 10px Arial",d.fillText(`${Q.toFixed(1)}"`,De+20,w-10)),d.textAlign="center",d.textBaseline="middle";for(let _e=0;_e<=it;_e++){const Oe=ze-_e*re/L;Oe>=ie/L&&Oe<=w&&(d.strokeStyle="#666",d.lineWidth=1,d.beginPath(),d.moveTo(_/L-8,Oe),d.lineTo(_/L,Oe),d.stroke(),d.save(),d.translate(15,Oe),d.rotate(-Math.PI/2),d.fillStyle="#333",d.fillText(_e.toString(),0,0),d.restore());const Qe=Oe-re/L/2;if(Qe>=ie/L&&Qe<=w&&_e<it&&(d.strokeStyle="#999",d.lineWidth=1,d.beginPath(),d.moveTo(_/L-4,Qe),d.lineTo(_/L,Qe),d.stroke()),_e<it){const ot=Oe-re/L/4,Je=Oe-3*re/L/4;ot>=ie/L&&ot<=w&&(d.strokeStyle="#ccc",d.lineWidth=1,d.beginPath(),d.moveTo(_/L-2,ot),d.lineTo(_/L,ot),d.stroke()),Je>=ie/L&&Je<=w&&(d.strokeStyle="#ccc",d.lineWidth=1,d.beginPath(),d.moveTo(_/L-2,Je),d.lineTo(_/L,Je),d.stroke())}}const He=ze-he*re/L;He>=ie/L&&He<=w&&(d.save(),d.translate(10,He-20),d.rotate(-Math.PI/2),d.fillStyle="#555",d.font="italic 10px Arial",d.textAlign="center",d.fillText(`${he.toFixed(1)}"`,0,0),d.restore()),d.restore()},I=(d,T,w,R=0,P=0,O,X=[],Y=null)=>{const F=Math.max(T.baseA,T.baseB)*w,J=R+(F-T.baseB*w)/2+(T.baseBHorizontalOffset||0)*w,Q=R+(F+T.baseB*w)/2+(T.baseBHorizontalOffset||0)*w,he=R+(F-T.baseA*w)/2,L=R+(F+T.baseA*w)/2,_=P,ie=P+T.height*w;if(d.save(),d.beginPath(),d.moveTo(J,_),d.lineTo(Q,_),d.lineTo(L,ie),d.lineTo(he,ie),d.closePath(),d.clip(),X&&X.length>0&&Y){const re={baseA:T.baseA,baseB:T.baseB,height:T.height,baseBHorizontalOffset:T.baseBHorizontalOffset||0};B(d,X,re,he,_,L-he,ie-_,w,Y)}else d.fillStyle=O,d.fill();d.restore(),d.strokeStyle="#1890ff",d.lineWidth=3,d.beginPath(),d.moveTo(J,_),d.lineTo(Q,_),d.lineTo(L,ie),d.lineTo(he,ie),d.closePath(),d.stroke()},A=(d,T,w,R=0,P=0,O={minX:0,maxX:0,minY:0,maxY:0},X,Y=[],F=null)=>{if(z(T,w,R,P,O),I(d,T,w,R,P,X,Y,F),T.successors&&T.successors.length>0){const J=Math.max(T.baseA,T.baseB)*w,Q=T.successors.map(ie=>Math.max(ie.baseA,ie.baseB)*w),he=Q.reduce((ie,re)=>ie+re,0);let L=R+(J-he)/2;const _=P;for(let ie=T.successors.length-1;ie>=0;ie--){const re=T.successors[ie],Ce=Q[ie];A(d,re,w,L,_-re.height*w,O,X,Y,F),L+=Ce}}},z=(d,T,w=0,R=0,P={minX:0,maxX:0,minY:0,maxY:0})=>{const O=Math.max(d.baseA,d.baseB)*T,X=w+(O-d.baseB*T)/2+(d.baseBHorizontalOffset||0)*T,Y=w+(O+d.baseB*T)/2+(d.baseBHorizontalOffset||0)*T,F=w+(O-d.baseA*T)/2,J=w+(O+d.baseA*T)/2,Q=R,he=R+d.height*T;if(P.minX=Math.min(P.minX,X,Y,F,J),P.maxX=Math.max(P.maxX,X,Y,F,J),P.minY=Math.min(P.minY,Q,he),P.maxY=Math.max(P.maxY,Q,he),d.successors&&d.successors.length>0){const L=d.successors.map(re=>Math.max(re.baseA,re.baseB)*T),_=L.reduce((re,Ce)=>re+Ce,0);let ie=w+(O-_)/2;for(let re=d.successors.length-1;re>=0;re--){const Ce=d.successors[re],xe=L[re];z(Ce,T,ie,Q-Ce.height*T,P),ie+=xe}}},N=d=>{d.button===0&&(d.preventDefault(),h(!0),p({x:d.clientX,y:d.clientY}))},V=d=>{if(!f)return;d.preventDefault();const T=d.clientX-m.x,w=d.clientY-m.y;u(R=>({x:R.x+T,y:R.y+w})),p({x:d.clientX,y:d.clientY})},K=d=>{d.preventDefault(),h(!1)},U=d=>{d.preventDefault()},ne=()=>{s(1),u({x:0,y:0})};c.useEffect(()=>{const d=T=>{if(!a.current)return;T.key==="="||T.key==="+"?(T.preventDefault(),s(R=>Math.min(R*1.2,5))):T.key==="-"?(T.preventDefault(),s(R=>Math.max(R/1.2,.1))):T.key==="0"&&(T.ctrlKey||T.metaKey)&&(T.preventDefault(),ne());const w=20;T.key==="ArrowUp"?(T.preventDefault(),u(R=>({...R,y:R.y+w}))):T.key==="ArrowDown"?(T.preventDefault(),u(R=>({...R,y:R.y-w}))):T.key==="ArrowLeft"?(T.preventDefault(),u(R=>({...R,x:R.x+w}))):T.key==="ArrowRight"&&(T.preventDefault(),u(R=>({...R,x:R.x-w})))};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[]),c.useEffect(()=>{const d=a.current;if(!d||!e)return;const T=d.getContext("2d"),w=window.devicePixelRatio||1,R=30,P=30;d.width=C.width*w,d.height=C.height*w,d.style.width=`${C.width}px`,d.style.height=`${C.height}px`,T.scale(w,w),T.clearRect(0,0,C.width,C.height),T.save(),T.translate((C.width-R)/2+l.x+R,(C.height-P)/2+l.y+P),T.scale(i,i);let O={minX:0,maxX:0,minY:0,maxY:0};const Y=document.createElement("canvas").getContext("2d");A(Y,e,1,0,0,O,"#1890ff");const F=O.maxX-O.minX,J=O.maxY-O.minY,Q=(C.width-R)*.8,he=(C.height-P)*.8,L=Math.min(Q/F,he/J),_=-O.minX*L-F*L/2,ie=-O.minY*L-J*L/2;T.translate(_,ie);const re={...O};M(T,e,L,0,0,"#1890ff",t,n),T.restore();let Ce={minX:0,maxX:0,minY:0,maxY:0};z(e,1,0,0,Ce);const xe=n?.scalingFactor||1,Be=(Ce.maxX-Ce.minX)*xe,Xe=(Ce.maxY-Ce.minY)*xe,Ne=(C.width-R)/2+l.x+R,Me=(C.height-P)/2+l.y+P;$(T,C.width,C.height,e,i,{x:l.x,y:l.y},L,re,Ne,Me,Be,Xe)},[e,t,n,i,l,C]),c.useEffect(()=>{const d=()=>{const T=document.querySelector(".canvas-container");T&&v({width:T.clientWidth-20,height:T.clientHeight-20})};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),c.useEffect(()=>{if(t.length===0&&!y.current){y.current=!0;const d={id:Date.now(),name:"solid color bg",pattern:bt("solid",{colors:[{color:"#cfcfcf"}]}),patternType:"solid",patternConfig:{colors:[{color:"#cfcfcf"}]},priority:1,settings:{repeatMode:"both",repeatCountX:0,repeatCountY:0,offsetHorizontal:0,offsetVertical:0,colorMapping:{}}};r([d])}},[t.length,r]);const H=c.useCallback((d,T,w)=>{r(R=>R.map(P=>P.id===d?{...P,settings:{...P.settings,[T]:w}}:P))},[r]),le=(d,T,w)=>{const R=typeof w=="string"?w:w.toHexString(),P=t.map(O=>{if(O.id===d){const X={...O.settings.colorMapping,[T]:R};return{...O,settings:{...O.settings,colorMapping:X}}}return O});r(P)},be=c.useCallback((d,T)=>{r(w=>{const R=w.findIndex(Y=>Y.id===d),P=w.findIndex(Y=>Y.id===T);if(R===-1||P===-1)return w;const O=[...w],[X]=O.splice(R,1);return O.splice(P,0,X),O})},[r]),pe=c.useCallback(d=>{j(T=>{const w=new Set(T);return w.has(d)?w.delete(d):w.add(d),w})},[]),oe=c.useCallback(()=>{const d="checkerboard",T={id:Date.now(),name:`Layer ${t.length+1}`,pattern:bt(b[d].type,b[d].defaultConfig),patternType:b[d].type,patternConfig:b[d].defaultConfig,priority:t.length+1,settings:{repeatMode:"none",repeatCountX:0,repeatCountY:0,offsetHorizontal:0,offsetVertical:0,colorMapping:{}}};r(w=>[T,...w])},[t.length,r]),ee=c.useMemo(()=>({fontSize:"12px"}),[]),ce=c.useMemo(()=>({minWidth:30,fontSize:"11px"}),[]),Z=c.useMemo(()=>({width:"100%"}),[]),te=c.useMemo(()=>({width:"100%"}),[]),ue=c.useMemo(()=>({marginBottom:8,transition:"all 0.2s ease"}),[]),Se=c.useMemo(()=>({...ue,border:"2px dashed #1890ff",borderRadius:"4px"}),[ue]),$e=c.useMemo(()=>({...ue,border:"none",borderRadius:"0"}),[ue]),ge=c.useCallback(d=>d.patternKey||d.patternType||"checkerboard",[]),we=c.useCallback(d=>{r(T=>T.filter(w=>w.id!==d))},[r]),Pe=c.useCallback(d=>{r(T=>{const w=T.find(P=>P.id===d);return w?[{...w,id:Date.now(),name:`${w.name} Copy`,priority:T.length+1},...T]:T})},[r]),ve=c.useCallback((d,T)=>{const w=b[T].type,R={...b[T].defaultConfig,patterns:b},P=bt(w,R);r(O=>O.map(X=>X.id===d?{...X,pattern:P,patternType:w,patternKey:T,patternConfig:R,settings:{...X.settings,colorMapping:{}}}:X))},[r,b]),ae=c.useCallback((d,T)=>{r(w=>w.map(R=>{if(R.id===d){const P={...T,patterns:b},O=bt(R.patternType,P);return{...R,patternConfig:T,pattern:O}}return R}))},[r,b]);return g.jsxs("div",{className:"colorwork-canvas-editor",children:[g.jsx("div",{className:"canvas-header",style:{display:"flex",alignItems:"center",padding:"8px 16px",borderBottom:"1px solid #f0f0f0",background:"#fafafa"},children:g.jsxs(Ye,{children:[g.jsxs(Ee,{children:["Zoom: ",Math.round(i*100),"%"]}),g.jsx(je,{icon:g.jsx(kl,{}),onClick:()=>s(d=>Math.min(d*1.2,5)),size:"small",title:"Zoom in (+)"}),g.jsx(ca,{min:.1,max:5,step:.1,value:i,onChange:s,style:{width:100},tooltip:{formatter:d=>`${Math.round(d*100)}%`}}),g.jsx(je,{icon:g.jsx(Bl,{}),onClick:()=>s(d=>Math.max(d/1.2,.1)),size:"small",title:"Zoom out (-)"}),g.jsx(je,{icon:g.jsx(Pc,{}),onClick:ne,size:"small",title:"Reset view (Ctrl+0)",children:"Reset"}),g.jsx(Ee,{style:{fontSize:"11px",color:"#666",marginLeft:8},children:"Drag to pan • +/- to zoom • Arrows to move"})]})}),g.jsxs("div",{className:"canvas-main-layout",children:[g.jsx("div",{className:"canvas-container",children:g.jsx("canvas",{ref:a,className:"main-canvas",onMouseDown:N,onMouseMove:V,onMouseUp:K,onMouseLeave:K,onContextMenu:U,style:{cursor:f?"grabbing":"grab",userSelect:"none",touchAction:"none"}})}),g.jsx("div",{className:"side-panel",children:g.jsx(st,{title:"Colorwork Layers",size:"small",children:g.jsxs(Ye,{direction:"vertical",style:{width:"100%"},size:"small",children:[g.jsx(je,{type:"primary",icon:g.jsx(On,{}),onClick:oe,style:{width:"100%"},size:"small",children:"+ New Layer"}),g.jsx("div",{className:"layers-list",children:t.map((d,T)=>g.jsx(mu,{layer:d,index:T,onLayerReorder:be,dragItemHoverStyle:Se,dragItemNormalStyle:$e,children:g.jsx(ci,{size:"small",ghost:!0,activeKey:x.has(d.id)?[]:[d.id],onChange:()=>pe(d.id),items:[{key:d.id,label:g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[g.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx(xc,{className:"drag-handle",style:{cursor:"grab"}}),d.name]}),g.jsxs("div",{style:{display:"flex",gap:4},children:[g.jsx(je,{size:"small",type:"text",icon:g.jsx(rr,{}),onClick:w=>{w.stopPropagation(),Pe(d.id)},title:"Make a copy"}),g.jsx(je,{size:"small",danger:!0,type:"text",icon:g.jsx(or,{}),onClick:w=>{w.stopPropagation(),we(d.id)},disabled:t.length===1,title:"Delete layer"})]})]}),children:g.jsxs(Ye,{direction:"vertical",style:te,size:"small",children:[g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Pattern:"}),g.jsx(Ot,{value:ge(d),onChange:w=>ve(d.id,w),style:Z,size:"small",children:Object.entries(b).map(([w,R])=>g.jsx(ut,{value:w,children:R.name},w))})]}),d.patternType==="stripes"&&g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Pattern Width (stitches):"}),g.jsx(We,{value:d.patternConfig?.width||4,onChange:w=>{const R={...d.patternConfig,width:w||4};ae(d.id,R)},min:1,max:20,size:"small",style:Z})]}),d.patternType==="vstripes"&&g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Pattern Height (rows):"}),g.jsx(We,{value:d.patternConfig?.height||4,onChange:w=>{const R={...d.patternConfig,height:w||4};ae(d.id,R)},min:1,max:20,size:"small",style:Z})]}),d.patternType==="checkerboard"&&g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Cell Size (n x n):"}),g.jsx(We,{value:d.patternConfig?.cellSize||2,onChange:w=>{const R={...d.patternConfig,cellSize:w||2};ae(d.id,R)},min:1,max:10,size:"small",style:Z,formatter:w=>`${w} x ${w}`,parser:w=>w.replace(" x "+w.split(" x ")[1],"")})]}),d.patternType==="stripes"&&g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Stripe Configuration:"}),g.jsx(Ee,{style:{fontSize:"11px",color:"#666",display:"block",marginTop:2},children:"Enter 0 rows to fill remaining space with that color"}),d.patternConfig.colors.map((P,O)=>P.rows===0?O:-1).filter(P=>P!==-1).filter(P=>P!==0&&P!==d.patternConfig.colors.length-1).length>0?g.jsx(Ee,{style:{fontSize:"11px",color:"#ff6b35",display:"block",marginTop:2},children:"Warning: Only first or last colors should have 0 rows"}):null,g.jsxs(Ye,{direction:"vertical",size:"small",style:{marginTop:8},children:[d.patternConfig.colors.map((w,R)=>g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx(We,{value:w.rows,onChange:P=>{const O=[...d.patternConfig.colors];O[R].rows=P||0,ae(d.id,{...d.patternConfig,colors:O})},min:0,size:"small",style:{width:60},placeholder:"0"}),g.jsx(Ee,{children:w.rows===0?"rows (fill)":"rows"}),d.patternConfig.colors.length>1&&g.jsx(je,{size:"small",danger:!0,onClick:()=>{const P=d.patternConfig.colors.filter((O,X)=>X!==R);ae(d.id,{...d.patternConfig,colors:P})},children:"Remove"})]},R)),g.jsx(je,{size:"small",onClick:()=>{const w=[...d.patternConfig.colors,{color:"#ff0000",rows:2}];ae(d.id,{...d.patternConfig,colors:w})},children:"Add Color"})]})]}),d.patternType==="vstripes"&&g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Vertical Stripe Configuration:"}),g.jsx(Ee,{style:{fontSize:"11px",color:"#666",display:"block",marginTop:2},children:"Enter 0 columns to fill remaining space with that color"}),d.patternConfig.colors.map((P,O)=>P.columns===0?O:-1).filter(P=>P!==-1).filter(P=>P!==0&&P!==d.patternConfig.colors.length-1).length>0?g.jsx(Ee,{style:{fontSize:"11px",color:"#ff6b35",display:"block",marginTop:2},children:"Warning: Only first or last colors should have 0 columns"}):null,g.jsxs(Ye,{direction:"vertical",size:"small",style:{marginTop:8},children:[d.patternConfig.colors.map((w,R)=>g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx(We,{value:w.columns,onChange:P=>{const O=[...d.patternConfig.colors];O[R].columns=P||0,ae(d.id,{...d.patternConfig,colors:O})},min:0,size:"small",style:{width:60},placeholder:"0"}),g.jsx(Ee,{children:w.columns===0?"cols (fill)":"cols"}),d.patternConfig.colors.length>1&&g.jsx(je,{size:"small",danger:!0,onClick:()=>{const P=d.patternConfig.colors.filter((O,X)=>X!==R);ae(d.id,{...d.patternConfig,colors:P})},children:"Remove"})]},R)),g.jsx(je,{size:"small",onClick:()=>{const w=[...d.patternConfig.colors,{color:"#ff0000",columns:2}];ae(d.id,{...d.patternConfig,colors:w})},children:"Add Color"})]})]}),(d.patternType==="row"||d.patternType==="vstack")&&g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:d.patternType==="row"?"Row:":"Vertical Stack:"}),g.jsx(Ee,{style:{fontSize:"11px",color:"#666",display:"block",marginTop:2,marginBottom:8},children:d.patternType==="row"?"Stack elements left to right. Use stripes for bands or custom shapes (with repeat count).":"Stack elements top to bottom. Use stripes for bands, custom shapes (with repeat count), or rows for horizontal composition."}),g.jsxs(Ye,{direction:"vertical",size:"small",style:{width:"100%"},children:[(d.patternConfig.elements||[]).map((w,R)=>g.jsxs("div",{style:{border:"1px solid #d9d9d9",padding:8,borderRadius:4},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[g.jsx(Ee,{style:{fontSize:"11px",fontWeight:"bold"},children:w.elementType==="stripes"?`Stripes ${R+1}`:w.elementType==="shape"&&w.shapeKey?b[w.shapeKey]?.name||"Shape":w.elementType==="sequence"?`Sequence ${R+1}`:`Element ${R+1}`}),g.jsxs(Ye,{size:"small",children:[g.jsx(je,{size:"small",disabled:R===0,onClick:()=>{const P=[...d.patternConfig.elements||[]];[P[R-1],P[R]]=[P[R],P[R-1]],ae(d.id,{...d.patternConfig,elements:P})},children:"↑"}),g.jsx(je,{size:"small",disabled:R===(d.patternConfig.elements||[]).length-1,onClick:()=>{const P=[...d.patternConfig.elements||[]];[P[R],P[R+1]]=[P[R+1],P[R]],ae(d.id,{...d.patternConfig,elements:P})},children:"↓"}),g.jsx(je,{size:"small",danger:!0,onClick:()=>{const P=(d.patternConfig.elements||[]).filter((O,X)=>X!==R);ae(d.id,{...d.patternConfig,elements:P})},children:"Remove"})]})]}),g.jsxs(Ot,{value:w.elementType||"stripes",onChange:P=>{const O=[...d.patternConfig.elements||[]];P==="stripes"?O[R]={elementType:"stripes",stripeConfig:d.patternType==="row"?{colors:[{color:"#ffffff",columns:2}]}:{colors:[{color:"#ffffff",rows:2}]}}:P==="sequence"?O[R]={elementType:"sequence",shapes:[],repeatCount:1,alignment:"center"}:P.startsWith("custom-")&&(O[R]={elementType:"shape",shapeKey:P,repeatCount:1}),ae(d.id,{...d.patternConfig,elements:O})},size:"small",style:{width:"100%",marginBottom:8},children:[g.jsx(ut,{value:"stripes",children:"Stripes"}),Object.entries(b).filter(([P])=>P.startsWith("custom-")).map(([P,O])=>g.jsx(ut,{value:P,children:O.name},P))]}),w.elementType==="stripes"&&w.stripeConfig&&g.jsxs("div",{style:{marginTop:8,paddingLeft:8,borderLeft:"2px solid #e8e8e8"},children:[g.jsx(Ee,{style:{fontSize:"10px",display:"block",marginBottom:4},children:"Stripe width (sts):"}),w.stripeConfig.colors.map((P,O)=>g.jsx("div",{style:{display:"flex",gap:4,alignItems:"center",marginBottom:4},children:g.jsx(We,{value:d.patternType==="row"?P.columns:P.rows,onChange:X=>{const Y=[...d.patternConfig.elements||[]],F=[...w.stripeConfig.colors];d.patternType==="row"?F[O]={...F[O],columns:X||1}:F[O]={...F[O],rows:X||1},Y[R]={...w,stripeConfig:{colors:F}},ae(d.id,{...d.patternConfig,elements:Y})},min:1,size:"small",style:{width:50}})},O))]}),w.elementType==="shape"&&w.shapeKey&&g.jsx("div",{style:{marginTop:8,paddingLeft:8,borderLeft:"2px solid #e8e8e8"},children:g.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[g.jsx(Ee,{style:{fontSize:"10px"},children:"Repeat:"}),g.jsx(We,{value:w.repeatCount||1,onChange:P=>{const O=[...d.patternConfig.elements||[]];O[R]={...w,repeatCount:P||1},ae(d.id,{...d.patternConfig,elements:O})},min:1,size:"small",style:{width:60}})]})}),(w.elementType==="vstack"||w.elementType==="row")&&g.jsxs("div",{style:{marginTop:8,paddingLeft:8,borderLeft:"2px solid #e8e8e8"},children:[g.jsxs(Ee,{style:{fontSize:"10px",display:"block",marginBottom:4},children:[w.elementType==="vstack"?"Vertical":"Row"," Stack:"]}),g.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center",marginBottom:6},children:[g.jsx(Ee,{style:{fontSize:"10px"},children:"Repeat:"}),g.jsx(We,{value:w.repeatCount||1,onChange:P=>{const O=[...d.patternConfig.elements||[]];O[R]={...w,repeatCount:P||1},ae(d.id,{...d.patternConfig,elements:O})},min:1,size:"small",style:{width:60}})]}),(w.elements||[]).filter(P=>P.elementType==="stripes").map((P,O)=>{const X=(w.elements||[]).findIndex((Y,F)=>Y===P&&F>=O);return g.jsxs("div",{style:{marginBottom:6},children:[g.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center",marginBottom:4},children:[g.jsx(Ee,{style:{fontSize:"10px",color:"#666"},children:"Stripes"}),g.jsx(je,{size:"small",danger:!0,onClick:()=>{const Y=[...d.patternConfig.elements||[]],F=(w.elements||[]).filter((J,Q)=>Q!==X);Y[R]={...w,elements:F},ae(d.id,{...d.patternConfig,elements:Y})},children:"×"})]}),P.stripeConfig&&P.stripeConfig.colors.map((Y,F)=>g.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center",marginBottom:4,marginLeft:8},children:[g.jsx(nn,{value:Y.color,onChange:J=>{const Q=[...d.patternConfig.elements||[]],he=[...w.elements||[]],L={...P.stripeConfig};L.colors=[...L.colors],L.colors[F]={...Y,color:J.toHexString()},he[X]={...P,stripeConfig:L},Q[R]={...w,elements:he},ae(d.id,{...d.patternConfig,elements:Q})},size:"small"}),g.jsx(We,{value:w.elementType==="vstack"?Y.rows:Y.columns,onChange:J=>{const Q=[...d.patternConfig.elements||[]],he=[...w.elements||[]],L={...P.stripeConfig};L.colors=[...L.colors],w.elementType==="vstack"?L.colors[F]={...Y,rows:J||1}:L.colors[F]={...Y,columns:J||1},he[X]={...P,stripeConfig:L},Q[R]={...w,elements:he},ae(d.id,{...d.patternConfig,elements:Q})},min:1,size:"small",style:{width:50}}),g.jsx(je,{size:"small",danger:!0,onClick:()=>{const J=[...d.patternConfig.elements||[]],Q=[...w.elements||[]],he={...P.stripeConfig};he.colors=he.colors.filter((L,_)=>_!==F),Q[X]={...P,stripeConfig:he},J[R]={...w,elements:Q},ae(d.id,{...d.patternConfig,elements:J})},children:"×"})]},F)),g.jsx(je,{size:"small",onClick:()=>{const Y=[...d.patternConfig.elements||[]],F=[...w.elements||[]],J={...P.stripeConfig};J.colors=[...J.colors,w.elementType==="vstack"?{color:"#ffffff",rows:2}:{color:"#ffffff",columns:2}],F[X]={...P,stripeConfig:J},Y[R]={...w,elements:F},ae(d.id,{...d.patternConfig,elements:Y})},style:{marginLeft:8},children:"+ Stripe"})]},`stripe-${O}`)}),(w.elements||[]).filter(P=>P.elementType==="shape").map((P,O)=>{const X=(w.elements||[]).findIndex((Y,F)=>Y===P&&F>=O);return g.jsx("div",{style:{marginBottom:6},children:g.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center",marginBottom:4},children:[g.jsx(Ot,{value:P.shapeKey||"",onChange:Y=>{const F=[...d.patternConfig.elements||[]],J=[...w.elements||[]];J[X]={...P,shapeKey:Y},F[R]={...w,elements:J},ae(d.id,{...d.patternConfig,elements:F})},size:"small",style:{flex:1},children:Object.keys(b).map(Y=>g.jsx(ut,{value:Y,children:b[Y].name},Y))}),g.jsx(Ee,{style:{fontSize:"9px"},children:"x"}),g.jsx(We,{value:P.repeatCount||1,onChange:Y=>{const F=[...d.patternConfig.elements||[]],J=[...w.elements||[]];J[X]={...P,repeatCount:Y||1},F[R]={...w,elements:J},ae(d.id,{...d.patternConfig,elements:F})},min:1,size:"small",style:{width:50}}),g.jsx(je,{size:"small",danger:!0,onClick:()=>{const Y=[...d.patternConfig.elements||[]],F=(w.elements||[]).filter((J,Q)=>Q!==X);Y[R]={...w,elements:F},ae(d.id,{...d.patternConfig,elements:Y})},children:"×"})]})},`shape-${O}`)}),g.jsxs("div",{style:{display:"flex",gap:4},children:[g.jsx(je,{size:"small",onClick:()=>{const P=[...d.patternConfig.elements||[]],O=[...w.elements||[],{elementType:"stripes",stripeConfig:w.elementType==="vstack"?{colors:[{color:"#ffffff",rows:2}]}:{colors:[{color:"#ffffff",columns:2}]}}];P[R]={...w,elements:O},ae(d.id,{...d.patternConfig,elements:P})},children:"+ Stripes"}),g.jsx(je,{size:"small",onClick:()=>{const P=[...d.patternConfig.elements||[]],O=[...w.elements||[],{elementType:"shape",shapeKey:Object.keys(b)[0]||"",repeatCount:1}];P[R]={...w,elements:O},ae(d.id,{...d.patternConfig,elements:P})},children:"+ Shape"})]})]}),w.elementType==="sequence"&&g.jsxs("div",{style:{marginTop:8,paddingLeft:8,borderLeft:"2px solid #e8e8e8"},children:[g.jsx(Ee,{style:{fontSize:"10px",display:"block",marginBottom:4},children:"Shapes in sequence:"}),g.jsx(Ee,{style:{fontSize:"9px",color:"#999",display:"block",marginBottom:4},children:"(Add shapes to create a sequence)"}),g.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center",marginTop:4},children:[g.jsx(Ee,{style:{fontSize:"10px"},children:"Repeat Sequence:"}),g.jsx(We,{value:w.repeatCount||1,onChange:P=>{const O=[...d.patternConfig.elements||[]];O[R]={...w,repeatCount:P||1},ae(d.id,{...d.patternConfig,elements:O})},min:0,size:"small",style:{width:60}})]}),g.jsxs(Ot,{value:w.alignment||"center",onChange:P=>{const O=[...d.patternConfig.elements||[]];O[R]={...w,alignment:P},ae(d.id,{...d.patternConfig,elements:O})},size:"small",style:{width:"100%",marginTop:4},children:[g.jsx(ut,{value:"start",children:d.patternType==="row"?"Left":"Top"}),g.jsx(ut,{value:"center",children:"Center"}),g.jsx(ut,{value:"end",children:d.patternType==="row"?"Right":"Bottom"})]})]}),(()=>{let P=[];if(w.elementType==="stripes"&&w.stripeConfig)P=w.stripeConfig.colors.map((O,X)=>({id:`stripe-${X}`,label:w.stripeConfig.colors.length>1?`Color ${X+1}`:"Color",defaultColor:O.color}));else if(w.elementType==="shape"&&w.shapeKey&&b[w.shapeKey]){const O=b[w.shapeKey],X=bt(w.shapeKey,O.defaultConfig||{}),Y=X.getColorsUsed?.()||[],F=new Set(Y.map(J=>J.id));P=Object.entries(X.colors).filter(([J])=>F.has(J)&&J!=="transparent").map(([J,Q])=>({id:J,label:Q.label,defaultColor:Q.color}))}return P.length>0?g.jsxs("div",{style:{marginTop:12,paddingTop:8,borderTop:"1px solid #e8e8e8"},children:[g.jsx(Ee,{style:{fontSize:"10px",fontWeight:"bold",display:"block",marginBottom:6},children:"Colors:"}),P.map(O=>g.jsxs("div",{style:{marginBottom:4,display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:8},children:[g.jsx(Ee,{style:{fontSize:"10px"},children:O.label}),g.jsx(nn,{value:w.colorMapping?.[O.id]||O.defaultColor,onChange:X=>{const Y=[...d.patternConfig.elements||[]];Y[R]={...w,colorMapping:{...w.colorMapping||{},[O.id]:X.toHexString()}},ae(d.id,{...d.patternConfig,elements:Y})},showText:!1,size:"small"})]},O.id))]}):null})()]},R)),g.jsx(je,{size:"small",onClick:()=>{const w=[...d.patternConfig.elements||[],{elementType:"stripes",stripeConfig:d.patternType==="row"?{colors:[{color:"#ffffff",columns:2}]}:{colors:[{color:"#ffffff",rows:2}]}}];ae(d.id,{...d.patternConfig,elements:w})},children:"Add Element"})]})]}),g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Repeat:"}),g.jsxs(Ot,{value:d.settings.repeatMode||"none",onChange:w=>H(d.id,"repeatMode",w),style:Z,size:"small",children:[g.jsx(ut,{value:"none",children:"Non-repeating"}),g.jsx(ut,{value:"x",children:"Repeat Horizontal"}),g.jsx(ut,{value:"y",children:"Repeat Vertical"}),g.jsx(ut,{value:"both",children:"Repeat Both Directions"})]})]}),(d.settings.repeatMode==="x"||d.settings.repeatMode==="both")&&g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Horizontal Repeats (0=infinity):"}),g.jsx(We,{value:d.settings.repeatCountX||0,onChange:w=>H(d.id,"repeatCountX",w||0),min:0,max:50,size:"small",style:Z,formatter:w=>w===0?"infinity":w,parser:w=>w==="infinity"?0:parseInt(w)||0})]}),(d.settings.repeatMode==="y"||d.settings.repeatMode==="both")&&g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Vertical Repeats (0=infinity):"}),g.jsx(We,{value:d.settings.repeatCountY||0,onChange:w=>H(d.id,"repeatCountY",w||0),min:0,max:50,size:"small",style:Z,formatter:w=>w===0?"infinity":w,parser:w=>w==="infinity"?0:parseInt(w)||0})]}),g.jsxs(qe,{gutter:4,children:[g.jsxs(Ae,{span:12,children:[g.jsx(Ee,{style:ee,children:"Horizontal Offset:"}),g.jsx(We,{value:d.settings.offsetHorizontal,onChange:w=>H(d.id,"offsetHorizontal",w||0),size:"small",style:Z})]}),g.jsxs(Ae,{span:12,children:[g.jsx(Ee,{style:ee,children:"Vertical Offset:"}),g.jsx(We,{value:d.settings.offsetVertical,onChange:w=>H(d.id,"offsetVertical",w||0),size:"small",style:Z})]})]}),g.jsxs("div",{children:[g.jsx(Ee,{style:ee,children:"Color Assignment:"}),g.jsx("div",{style:{marginTop:4},children:d.pattern&&d.pattern.colors&&(()=>{const w=d.pattern.getColorsUsed?.()||[],R=new Set(w.map(O=>O.id));return Object.entries(d.pattern.colors).filter(([O])=>w.length>0?R.has(O)&&O!=="transparent":O!=="transparent").map(([O,X])=>g.jsxs("div",{style:{marginBottom:4,display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:8},children:[g.jsx(Ee,{style:ce,children:X.label}),g.jsx(nn,{value:d.settings.colorMapping?.[O]||X.color,onChange:Y=>le(d.id,O,Y),showText:!1,size:"small"})]},O))})()})]})]})}]})},d.id))})]})})})]})]})};function on(e=[{color:"#ffffff"}]){const t={};return e.forEach((n,r)=>{t[r]={id:r,label:`Color ${r+1}`,color:n.color}}),new Ze(0,0,[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],t,{width:4,height:4})}function bu(e=2,t=[{color:"#ffffff"},{color:"#000000"}]){const n=e*2,r=[];for(let a=0;a<n;a++){const i=[];for(let s=0;s<n;s++){const l=Math.floor(a/e),u=Math.floor(s/e),f=(l+u)%2;i.push(f)}r.push(i)}const o={};return t.forEach((a,i)=>{o[i]={id:i,label:`Color ${i+1}`,color:a.color}}),new Ze(0,0,r,o,{width:n,height:n})}function Cu(e=[{color:"#ffffff"},{color:"#ff0000"},{color:"#0000ff"}]){const t={};return e.forEach((n,r)=>{t[r]={id:r,label:`Color ${r+1}`,color:n.color}}),new Ze(0,0,[[0,0,1,1,1,1,0,0],[0,1,1,2,2,1,1,0],[1,1,2,2,2,2,1,1],[1,2,2,0,0,2,2,1],[1,2,2,0,0,2,2,1],[1,1,2,2,2,2,1,1],[0,1,1,2,2,1,1,0],[0,0,1,1,1,1,0,0]],t,{width:8,height:8})}function bt(e,t,n=null){if(console.log("🎯 generatePattern called:",{type:e,hasConfig:!!t,configKeys:t?Object.keys(t):[]}),e==="stripes"){const{colors:r}=t;let o;const a=r.filter(m=>m.rows===0),i=r.reduce((m,p)=>m+(p.rows||0),0);a.length>0&&n?o=n:a.length>0&&!n?o=Math.max(i*2,20):o=Math.max(i,1);const s=t.width||4,l=[];let u=0,f=0;if(r.length>=2&&r[0].rows===0&&r[r.length-1].rows===0){const m=o-i,p=Math.floor(m/2),C=m%2;r.forEach((v,y)=>{if(y===0){const S=p+C;for(let b=0;b<S;b++)l.push(new Array(s).fill(y))}else if(y===r.length-1){const S=p;for(let b=0;b<S;b++)l.push(new Array(s).fill(y))}else for(let S=0;S<v.rows;S++)l.push(new Array(s).fill(y))})}else if(r.every(m=>m.rows===0)){const m=Math.floor(o/r.length);let p=o-m*r.length;r.forEach((C,v)=>{let y=m+(v<p?1:0);for(let S=0;S<y;S++)l.push(new Array(s).fill(v))})}else{const m=Math.max(0,o-i);r.forEach((p,C)=>{if(p.rows===0)if(C===0){const v=m;for(let y=0;y<v&&u<o;y++)l.push(new Array(s).fill(f)),u++}else if(C===r.length-1){const v=o-u;for(let y=0;y<v;y++)l.push(new Array(s).fill(f)),u++}else{const v=a.length>1?Math.floor(m/a.length):m;for(let y=0;y<v&&u<o;y++)l.push(new Array(s).fill(f)),u++}else for(let v=0;v<p.rows&&u<o;v++)l.push(new Array(s).fill(f)),u++;f++})}for(;l.length<o;){const m=o-l.length,p=l.slice(0,Math.min(l.length,m));l.push(...p)}const h={};return r.forEach((m,p)=>{h[p]={id:p,label:`Color ${p+1}`,color:m.color}}),new Ze(0,0,l,h,{width:s,height:o})}else if(e==="vstripes"){const{colors:r}=t;let o;const a=r.filter(p=>p.columns===0),i=r.reduce((p,C)=>p+(C.columns||0),0);a.length>0&&n?o=n:a.length>0&&!n?o=Math.max(i*2,20):o=Math.max(i,1);const s=t.height||4,l=Array(s).fill().map(()=>[]);let u=0,f=0;const h=Math.max(0,o-i);if(r.length>=2&&r[0].columns===0&&r[r.length-1].columns===0){const p=o-i,C=Math.floor(p/2),v=p%2;r.forEach((y,S)=>{if(S===0){const b=C+v;for(let x=0;x<b;x++)for(let j=0;j<s;j++)l[j].push(S)}else if(S===r.length-1){const b=C;for(let x=0;x<b;x++)for(let j=0;j<s;j++)l[j].push(S)}else for(let b=0;b<y.columns;b++)for(let x=0;x<s;x++)l[x].push(S)})}else if(r.every(p=>p.columns===0)){const p=Math.floor(o/r.length);let C=o-p*r.length;r.forEach((v,y)=>{let S=p+(y<C?1:0);for(let b=0;b<S;b++)for(let x=0;x<s;x++)l[x].push(y)})}else r.forEach((p,C)=>{if(p.columns===0)if(C===0){const v=h;for(let y=0;y<v&&u<o;y++){for(let S=0;S<s;S++)l[S].push(f);u++}}else if(C===r.length-1){const v=o-u;for(let y=0;y<v;y++){for(let S=0;S<s;S++)l[S].push(f);u++}}else{const v=a.length>1?Math.floor(h/a.length):h;for(let y=0;y<v&&u<o;y++){for(let S=0;S<s;S++)l[S].push(f);u++}}else for(let v=0;v<p.columns&&u<o;v++){for(let y=0;y<s;y++)l[y].push(f);u++}f++});for(;l[0].length<o;){const p=o-l[0].length;for(let C=0;C<s;C++){const v=l[C].slice(0,Math.min(l[C].length,p));l[C].push(...v)}}const m={};return r.forEach((p,C)=>{m[C]={id:C,label:`Color ${C+1}`,color:p.color}}),new Ze(0,0,l,m,{width:o,height:s})}else if(e==="custom"||typeof e=="string"&&e.startsWith("custom-")){if(t.pattern&&Array.isArray(t.pattern)){const r={},o=t.colors||{};return Object.entries(o).forEach(([a,i])=>{a==="CCX"?r[a]={id:a,label:"Transparent",color:"transparent"}:typeof i=="string"?r[a]={id:a,label:a,color:i}:i&&typeof i=="object"&&i.color?r[a]=i:r[a]={id:a,label:a,color:"#ffffff"}}),new Ze(0,0,t.pattern,r,{})}return on([{color:"#ffffff"}])}else{if(e==="solid")return on(t.colors||[{color:"#ffffff"}]);if(e==="checkerboard")return bu(t.cellSize||2,t.colors||[{color:"#ffffff"},{color:"#000000"}]);if(e==="argyle")return Cu(t.colors||[{color:"#ffffff"},{color:"#ff0000"},{color:"#0000ff"}]);if(e==="row")return ur(t.elements||[],t.patterns||{});if(e==="vstack")return yu(t.elements||[],t.patterns||{})}return on([{color:"#ffffff"}])}function ur(e=[],t={}){if(console.log("🎨 createRowPattern called:",e),!e||e.length===0)return on([{color:"#ffffff"}]);const n={};let r=0;const o=[];e.forEach((l,u)=>{if(l.elementType==="stripes"&&l.stripeConfig){const f=l.stripeConfig.colors||[],h={};f.forEach((m,p)=>{const C=`c${r}`,v=f.length>1?`Stripes-${u+1} C${p+1}`:`Stripes-${u+1}`;n[C]={id:C,label:v,color:m.color||"#ffffff"},h[p]=C,r++}),o.push({type:"stripes",width:f.reduce((m,p)=>m+(p.columns||1),0),colorMapping:h,stripeConfig:l.stripeConfig})}else if(l.elementType==="shape"&&l.shapeKey&&t[l.shapeKey]){const f=t[l.shapeKey],h=f.name||"Shape",m=bt(l.shapeKey,f.defaultConfig||{}),p=l.repeatCount||1,C={};Object.entries(m.colors).forEach(([v,y])=>{const S=`c${r}`;n[S]={id:S,label:`${h} ${y.label}`,color:y.color},C[v]=S,r++}),o.push({type:"shape",pattern:m,repeatCount:p,colorMapping:C,width:m.getStitchCount()*p})}});const a=Math.max(...o.map(l=>l.type==="shape"&&l.pattern?l.pattern.getRowCount():10))||10,i=o.reduce((l,u)=>l+(u.width||4),0),s=[];for(let l=0;l<a;l++){const u=[];o.forEach(f=>{if(f.type==="stripes")f.stripeConfig.colors.forEach((h,m)=>{const p=f.colorMapping[m],C=h.columns||1;for(let v=0;v<C;v++)u.push(p)});else if(f.type==="shape"&&f.pattern){const h=f.pattern.getRowCount(),m=f.pattern.getStitchCount(),p=m*f.repeatCount;for(let C=0;C<p;C++){const v=l%h,y=C%m,S=f.pattern.grid[v][y],b=f.colorMapping[S];u.push(b)}}}),s.push(u)}return new Ze(0,0,s,n,{width:i,height:a})}function yu(e=[],t={}){if(console.log("🎨 createVStackPattern called:",e),!e||e.length===0)return on([{color:"#ffffff"}]);const n={};let r=0;const o=[];e.forEach((h,m)=>{if(h.elementType==="stripes"&&h.stripeConfig){const p=h.stripeConfig.colors||[],C={};p.forEach((v,y)=>{const S=`c${r}`,b=p.length>1?`Stripes-${m+1} C${y+1}`:`Stripes-${m+1}`,x=h.colorMapping&&h.colorMapping[`stripe-${y}`]?h.colorMapping[`stripe-${y}`]:v.color||"#ffffff";n[S]={id:S,label:b,color:x},C[y]=S,r++}),o.push({type:"stripes",height:p.reduce((v,y)=>v+(y.rows||1),0),colorMapping:C,stripeConfig:h.stripeConfig})}else if(h.elementType==="row"&&h.elements){const p=ur(h.elements,t),C=h.repeatCount||1,v={};Object.entries(p.colors).forEach(([y,S])=>{const b=`c${r}`;n[b]={id:b,label:`Row-${m+1} ${S.label}`,color:S.color},v[y]=b,r++}),o.push({type:"row",pattern:p,repeatCount:C,colorMapping:v,height:p.getRowCount()*C})}else if(h.elementType==="shape"&&h.shapeKey&&t[h.shapeKey]){const p=t[h.shapeKey];p.name,bt(h.shapeKey,p.defaultConfig||{});const C=h.repeatCount||1,v=[{elementType:"shape",shapeKey:h.shapeKey,repeatCount:C}],y=ur(v,t),S={};Object.entries(y.colors).forEach(([b,x])=>{const j=`c${r}`,M=h.colorMapping&&h.colorMapping[b]?h.colorMapping[b]:x.color;n[j]={id:j,label:x.label,color:M},S[b]=j,r++}),o.push({type:"implicit-row",pattern:y,colorMapping:S,height:y.getRowCount()})}});const a=(h,m)=>m===0?h:a(m,h%m),i=(h,m)=>h*m/a(h,m),s=o.map(h=>h.type==="row"&&h.pattern||h.type==="implicit-row"&&h.pattern?h.pattern.getStitchCount():1);let l=s.reduce((h,m)=>i(h,m),1);l>500&&(l=Math.max(...s)),l=Math.max(l,10);const u=o.reduce((h,m)=>h+(m.height||4),0),f=[];return o.forEach(h=>{if(h.type==="stripes")h.stripeConfig.colors.forEach((m,p)=>{const C=h.colorMapping[p],v=m.rows||1;for(let y=0;y<v;y++){const S=Array(l).fill(C);f.push(S)}});else if(h.type==="row"&&h.pattern){const m=h.pattern.getStitchCount();for(let p=0;p<h.repeatCount;p++)for(let C=0;C<h.pattern.getRowCount();C++){const v=[];for(let y=0;y<l;y++){const S=y%m,b=h.pattern.grid[C][S],x=h.colorMapping[b];v.push(x)}f.push(v)}}else if(h.type==="implicit-row"&&h.pattern){const m=h.pattern.getStitchCount();for(let p=0;p<h.pattern.getRowCount();p++){const C=[];for(let v=0;v<l;v++){const y=v%m,S=h.pattern.grid[p][y],b=h.colorMapping[S];C.push(b)}f.push(C)}}}),new Ze(0,0,f,n,{width:l,height:u})}const{Text:mt,Title:Su}=sn,wu=({stitchPlan:e,currentRow:t=0})=>{if(!e||!e.rows||e.rows.length===0)return g.jsx("div",{className:"row-by-row-instructions",children:g.jsx(mt,{type:"secondary",children:"No instructions available"})});const n=e.generateKnittingInstructions();return g.jsx("div",{className:"row-by-row-instructions",children:n.map((r,o)=>{const a=o===t,i=o<t,s=e.rows[o];return g.jsxs(st,{size:"small",style:{marginBottom:8,backgroundColor:a?"#e6f7ff":i?"#f6ffed":"white",border:a?"2px solid #1890ff":"1px solid #d9d9d9"},children:[g.jsx(qe,{children:g.jsx(Ae,{span:24,children:g.jsxs(Su,{level:5,children:["Row ",o+1,s&&s.rowNumber&&s.rowNumber!==o+1&&` (RC: ${s.rowNumber})`]})})}),typeof r=="string"&&g.jsx(qe,{style:{marginBottom:8},children:g.jsxs(Ae,{span:24,children:[g.jsx(mt,{strong:!0,children:"Shaping: "}),g.jsx(mt,{children:r})]})}),r.hasShaping&&r.hasShaping()&&g.jsx(qe,{style:{marginBottom:8},children:g.jsxs(Ae,{span:24,children:[g.jsx(mt,{strong:!0,children:"Shaping: "}),g.jsx(mt,{children:r.shaping.description})]})}),s&&s.getColorworkInstructions&&s.getColorworkInstructions()&&g.jsxs(g.Fragment,{children:[g.jsx(qe,{style:{marginBottom:8},children:g.jsxs(Ae,{span:24,children:[g.jsx(mt,{strong:!0,children:"Colorwork: "}),g.jsx(Ye,{wrap:!0,children:s.getColorworkInstructions().map((l,u)=>g.jsxs(Tn,{style:{backgroundColor:l.colorHex,color:$u(l.colorHex),fontWeight:"bold",border:"1px solid #d9d9d9"},children:[l.stitchCount," ",l.colorLabel]},u))})]})}),g.jsx(qe,{style:{marginTop:8},children:g.jsx(Ae,{span:24,children:g.jsx(xu,{colorworkInstructions:s.getColorworkInstructions(),totalStitches:s.leftStitchesInWork+s.rightStitchesInWork})})})]}),r.hasColorwork&&r.hasColorwork()&&g.jsxs(g.Fragment,{children:[g.jsx(qe,{style:{marginBottom:8},children:g.jsxs(Ae,{span:24,children:[g.jsx(mt,{strong:!0,children:"Colorwork: "}),g.jsx(mt,{children:r.colorwork.description})]})}),g.jsx(qe,{children:g.jsx(Ae,{span:24,children:g.jsx(Ye,{wrap:!0,children:r.colorwork.colorSequence.map((l,u)=>g.jsxs(Tn,{color:r.colorwork.pattern?.colors[l.colorId]?.color,style:{color:"black",fontWeight:"bold",border:"1px solid #d9d9d9"},children:[l.stitchCount," ",l.colorId]},u))})})}),r.visualChart&&g.jsx(qe,{style:{marginTop:8},children:g.jsx(Ae,{span:24,children:g.jsx("div",{dangerouslySetInnerHTML:{__html:r.visualChart.svg},style:{maxWidth:"100%",overflow:"auto",border:"1px solid #f0f0f0",borderRadius:"4px",padding:"4px"}})})})]}),s&&g.jsx(qe,{style:{marginTop:8},children:g.jsx(Ae,{span:24,children:g.jsxs(mt,{type:"secondary",style:{fontSize:"12px"},children:[s.leftStitchesInWork+s.rightStitchesInWork," stitches (",s.leftStitchesInWork," left, ",s.rightStitchesInWork," right)"]})})})]},o)})})},xu=({colorworkInstructions:e,totalStitches:t})=>{if(!e||e.length===0)return null;const n=Math.max(8,Math.min(20,400/t)),r=t*n,o=20;let a=0;const i=e.map((s,l)=>{const u=s.stitchCount*n,f=g.jsx("rect",{x:a,y:0,width:u,height:o,fill:s.colorHex,stroke:"#000",strokeWidth:"0.5"},l);return a+=u,f});return g.jsxs("div",{style:{marginTop:4},children:[g.jsx(mt,{strong:!0,style:{fontSize:"11px"},children:"Visual Pattern:"}),g.jsx("div",{style:{marginTop:2},children:g.jsx("svg",{width:r,height:o,style:{border:"1px solid #ddd",borderRadius:"2px"},children:i})})]})},$u=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16);return(.299*n+.587*r+.114*o)/255>.5?"#000000":"#ffffff"};class Ru{constructor(){this.composer=new ma,this.instructionGenerator=new va}createColorworkStitchPlan(t,n,r={}){return this.composer.combinePatterns(t,n,r).stitchPlan}generateCombinedInstructions(t,n,r={}){const o=this.composer.combinePatterns(t,n,r);return this.instructionGenerator.generateCombinedInstructions(o)}createBasicStitchPlan(t){if(!t.shape)return{rows:[]};const n=t.gauge,r=t.sizeModifier;return t.shape.getStitchPlan(n,r,1)}}const{Title:Pu,Text:Ct}=sn,ju=({combinedPattern:e,instructions:t=[],knittingProgress:n,onRowComplete:r,onBackToSettings:o})=>{const[a,i]=c.useState(null),[s,l]=c.useState(null);c.useEffect(()=>{if(e)if(e.stitchPlan&&e.stitchPlan.hasColorwork())i(e.stitchPlan);else{const m=new Ru,p=e.panel,C=e.colorworkPattern;try{const v=m.createColorworkStitchPlan(p,C);i(v)}catch(v){console.error("Error creating enhanced stitch plan:",v)}}},[e]),c.useEffect(()=>{if(a&&a.rows[n.currentRow]){const m=a.rows[n.currentRow];l(m)}},[a,n.currentRow]);const u=()=>{n.currentRow>0},f=()=>{n.currentRow<t.length-1&&r(n.currentRow)},h=Math.round(n.completedRows.length/t.length*100);return g.jsxs("div",{className:"interactive-knitting-view",style:{padding:"24px",background:"#f5f5f5",minHeight:"100vh"},children:[g.jsx("div",{className:"knitting-header",style:{marginBottom:"24px"},children:g.jsxs(qe,{justify:"space-between",align:"middle",children:[g.jsx(Ae,{children:g.jsx(je,{onClick:o,icon:g.jsx(Mr,{}),children:"Back to Settings"})}),g.jsxs(Ae,{children:[g.jsx(Pu,{level:2,style:{margin:0,textAlign:"center"},children:"Interactive Knitting"}),g.jsxs(Ct,{type:"secondary",style:{display:"block",textAlign:"center"},children:["Row ",n.currentRow+1," of ",t.length]})]}),g.jsx(Ae,{children:g.jsx(ro,{type:"circle",percent:h,size:60,strokeColor:"#52c41a"})})]})}),g.jsxs(qe,{gutter:[24,24],children:[g.jsx(Ae,{xs:24,lg:8,children:g.jsxs(Ye,{direction:"vertical",style:{width:"100%"},size:"large",children:[g.jsx(st,{title:`Row ${n.currentRow+1}`,extra:g.jsx(Tn,{color:n.completedRows.includes(n.currentRow)?"green":"blue",children:n.completedRows.includes(n.currentRow)?"Complete":"In Progress"}),children:s&&g.jsxs(Ye,{direction:"vertical",style:{width:"100%"},children:[g.jsxs("div",{children:[g.jsx(Ct,{strong:!0,children:"Shaping:"}),g.jsx("div",{style:{marginTop:8,padding:12,background:"#f0f8ff",borderRadius:6},children:g.jsxs(Ct,{children:[s.leftStitchesInWork+s.rightStitchesInWork," stitches total (",s.leftStitchesInWork," left, ",s.rightStitchesInWork," right)"]})})]}),s.getColorworkInstructions&&s.getColorworkInstructions()&&g.jsxs("div",{children:[g.jsx(Ct,{strong:!0,children:"Colorwork:"}),g.jsxs("div",{style:{marginTop:8},children:[g.jsx(Ye,{wrap:!0,children:s.getColorworkInstructions().map((m,p)=>g.jsxs(Tn,{style:{backgroundColor:m.colorHex,color:Iu(m.colorHex),fontWeight:"bold",border:"1px solid #d9d9d9",fontSize:"14px",padding:"6px 12px"},children:[m.stitchCount," ",m.colorLabel]},p))}),g.jsxs("div",{style:{marginTop:12},children:[g.jsx(Ct,{strong:!0,style:{fontSize:"12px"},children:"Pattern:"}),g.jsx(Mu,{colorworkInstructions:s.getColorworkInstructions(),totalStitches:s.leftStitchesInWork+s.rightStitchesInWork})]})]})]}),g.jsx(vr,{}),g.jsxs(qe,{gutter:[8,8],children:[g.jsx(Ae,{span:8,children:g.jsx(je,{icon:g.jsx(Mr,{}),onClick:u,disabled:n.currentRow===0,block:!0,size:"small",children:"Prev"})}),g.jsx(Ae,{span:8,children:g.jsx(je,{type:"primary",icon:g.jsx(Wo,{}),onClick:f,disabled:n.currentRow>=t.length-1,block:!0,children:"Done"})}),g.jsx(Ae,{span:8,children:g.jsx(je,{icon:g.jsx(ui,{}),onClick:f,disabled:n.currentRow>=t.length-1,block:!0,size:"small",children:"Next"})})]})]})}),g.jsx(st,{title:"Progress Overview",size:"small",children:g.jsxs(Ye,{direction:"vertical",style:{width:"100%"},children:[g.jsxs("div",{children:[g.jsxs(Ct,{children:["Completed Rows: ",n.completedRows.length]}),g.jsx(ro,{percent:h,showInfo:!1,strokeColor:"#52c41a"})]}),g.jsx("div",{children:g.jsxs(Ct,{type:"secondary",style:{fontSize:"12px"},children:["Remaining: ",t.length-n.completedRows.length," rows"]})})]})})]})}),g.jsx(Ae,{xs:24,lg:16,children:g.jsxs(Ye,{direction:"vertical",style:{width:"100%"},size:"large",children:[g.jsx(st,{title:"Panel with Current Row Highlighted",children:g.jsx("div",{style:{background:"white",padding:"20px",borderRadius:"8px",textAlign:"center"},children:g.jsx(Eu,{combinedPattern:e,currentRow:n.currentRow,completedRows:n.completedRows})})}),g.jsx(st,{title:"All Instructions",children:a&&g.jsx(wu,{stitchPlan:a,currentRow:n.currentRow})})]})})]})]})},Mu=({colorworkInstructions:e,totalStitches:t})=>{if(!e||e.length===0)return null;const n=Math.max(2,Math.min(8,300/t)),r=t*n,o=20;let a=0;const i=e.map((s,l)=>{const u=s.stitchCount*n,f=g.jsx("rect",{x:a,y:0,width:u,height:o,fill:s.colorHex,stroke:"#666",strokeWidth:"0.5"},l);return a+=u,f});return g.jsx("div",{style:{marginTop:8},children:g.jsx("svg",{width:r,height:o,style:{border:"1px solid #ddd",borderRadius:"4px",display:"block"},children:i})})},Eu=({combinedPattern:e,currentRow:t,completedRows:n})=>{if(!e||!e.stitchPlan)return g.jsx(Ct,{type:"secondary",children:"Panel visualization unavailable"});const r=e.stitchPlan.rows,o=Math.max(...r.map(a=>a.leftStitchesInWork+a.rightStitchesInWork));return g.jsxs("div",{style:{maxWidth:"400px",margin:"0 auto"},children:[g.jsxs(Ct,{strong:!0,style:{fontSize:"12px"},children:["Panel Shape (Row ",t+1," highlighted)"]}),g.jsx("div",{style:{marginTop:8},children:r.map((a,i)=>{const s=a.leftStitchesInWork+a.rightStitchesInWork,l=s/o*100;let u="#f0f0f0";return n.includes(i)?u="#52c41a":i===t&&(u="#1890ff"),g.jsx("div",{style:{width:`${l}%`,height:"6px",backgroundColor:u,margin:"1px auto",borderRadius:"3px",border:i===t?"2px solid #1890ff":"none"},title:`Row ${i+1}: ${s} stitches`},i)})}),g.jsx("div",{style:{marginTop:8,fontSize:"10px"},children:g.jsxs(Ye,{children:[g.jsx("span",{style:{color:"#52c41a"},children:"● Completed"}),g.jsx("span",{style:{color:"#1890ff"},children:"● Current"}),g.jsx("span",{style:{color:"#f0f0f0"},children:"● Remaining"})]})})]})},Iu=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16);return(.299*n+.587*r+.114*o)/255>.5?"#000000":"#ffffff"},Ou=(e,t,n,r=0,o=0,a,i=[],s=null)=>{const l=[];if(Ra(t,n,r,o,l),l.length===0)return;let u=Math.min(...l.map(p=>Math.min(p.topLeft.x,p.topRight.x,p.bottomLeft.x,p.bottomRight.x))),f=Math.max(...l.map(p=>Math.max(p.topLeft.x,p.topRight.x,p.bottomLeft.x,p.bottomRight.x))),h=Math.min(...l.map(p=>Math.min(p.topLeft.y,p.topRight.y,p.bottomLeft.y,p.bottomRight.y))),m=Math.max(...l.map(p=>Math.max(p.topLeft.y,p.topRight.y,p.bottomLeft.y,p.bottomRight.y)));e.save(),e.beginPath(),l.forEach((p,C)=>{e.moveTo(p.topLeft.x,p.topLeft.y),e.lineTo(p.topRight.x,p.topRight.y),e.lineTo(p.bottomRight.x,p.bottomRight.y),e.lineTo(p.bottomLeft.x,p.bottomLeft.y),e.closePath()}),e.clip(),i&&i.length>0&&s?Tu(e,i,t,u,h,f-u,m-h,n,s):(e.fillStyle=a,e.globalAlpha=.3,e.fillRect(u,h,f-u,m-h),e.globalAlpha=1),e.restore(),e.strokeStyle="#a1a8af",e.lineWidth=3,e.lineJoin="round",l.forEach(p=>{e.beginPath(),e.moveTo(p.topLeft.x,p.topLeft.y),e.lineTo(p.topRight.x,p.topRight.y),e.lineTo(p.bottomRight.x,p.bottomRight.y),e.lineTo(p.bottomLeft.x,p.bottomLeft.y),e.closePath(),e.stroke()})},Ra=(e,t,n=0,r=0,o=[])=>{const a=Math.max(e.baseA,e.baseB)*t,i=n+(a-e.baseB*t)/2+(e.baseBHorizontalOffset||0)*t,s=n+(a+e.baseB*t)/2+(e.baseBHorizontalOffset||0)*t,l=n+(a-e.baseA*t)/2,u=n+(a+e.baseA*t)/2,f=r,h=r+e.height*t;if(o.push({topLeft:{x:i,y:f},topRight:{x:s,y:f},bottomLeft:{x:l,y:h},bottomRight:{x:u,y:h}}),e.successors&&e.successors.length>0){const m=e.successors.map(v=>Math.max(v.baseA,v.baseB)*t),p=m.reduce((v,y)=>v+y,0);let C=n+(a-p)/2;for(let v=e.successors.length-1;v>=0;v--){const y=e.successors[v],S=m[v];Ra(y,t,C,f-y.height*t,o),C+=S}}},Tu=(e,t,n,r,o,a,i,s,l)=>{const u=Math.max(n.baseA,n.baseB),f=n.height,h=l.stitchesPerFourInches/4,m=l.rowsPerFourInches/4,p=Math.round(u*h),C=Math.round(f*m),v=a/p,y=i/C,S=ku(p,C,t);for(let b=0;b<C;b++)for(let x=0;x<p;x++){const j=r+x*v,M=o+b*y,E=S[b]&&S[b][x];E&&E!=="transparent"&&(e.fillStyle=E,e.fillRect(j,M,v,y))}},ku=(e,t,n)=>{const r=Array(t).fill().map(()=>Array(e).fill("transparent"));return n.sort((o,a)=>o.priority-a.priority).forEach(o=>{Au(r,e,t,o)}),r},Au=(e,t,n,r)=>{const{pattern:o,settings:a}=r;if(!o||!o.grid||o.grid.length===0)return;const i=o.getRowCount(),s=o.getStitchCount();if(i===0||s===0)return;const{repeatMode:l="both",repeatCountX:u=0,repeatCountY:f=0,repeatHorizontal:h=!0,repeatVertical:m=!0,offsetHorizontal:p=0,offsetVertical:C=0}=a,v=l?l==="x"||l==="both":h,y=l?l==="y"||l==="both":m,S=Math.floor((t-s)/2),b=Math.floor((n-i)/2);for(let x=0;x<n;x++)for(let j=0;j<t;j++){const M=j-S-p,E=x-b-C;let B=0,k=0;if(v&&s>0&&(B=Math.floor(M/s)),y&&i>0&&(k=Math.floor(E/i)),v&&u&&u>0&&Math.abs(B)>=u||y&&f&&f>0&&Math.abs(k)>=f||!v&&(M<0||M>=s)||!y&&(E<0||E>=i))continue;let D,$;if(v)D=(M%s+s)%s;else if(D=M,D<0||D>=s)continue;if(y)$=(E%i+i)%i;else if($=E,$<0||$>=i)continue;const I=o.grid[$][D],A=o.colors[I];A&&A.color&&(e[x][j]=A.color)}},So=(e,t,n,r=0,o=0,a={minX:0,maxX:0,minY:0,maxY:0},i,s=[],l=null)=>{Pa(t,n,r,o,a),Ou(e,t,n,r,o,i,s,l)},Pa=(e,t,n=0,r=0,o={minX:0,maxX:0,minY:0,maxY:0})=>{const a=Math.max(e.baseA,e.baseB)*t,i=n+(a-e.baseB*t)/2+(e.baseBHorizontalOffset||0)*t,s=n+(a+e.baseB*t)/2+(e.baseBHorizontalOffset||0)*t,l=n+(a-e.baseA*t)/2,u=n+(a+e.baseA*t)/2,f=r,h=r+e.height*t;if(o.minX=Math.min(o.minX,i,s,l,u),o.maxX=Math.max(o.maxX,i,s,l,u),o.minY=Math.min(o.minY,f,h),o.maxY=Math.max(o.maxY,f,h),e.successors&&e.successors.length>0){const m=e.successors.map(v=>Math.max(v.baseA,v.baseB)*t),p=m.reduce((v,y)=>v+y,0);let C=n+(a-p)/2;for(let v=e.successors.length-1;v>=0;v--){const y=e.successors[v],S=m[v];Pa(y,t,C,f-y.height*t,o),C+=S}}},Du=({shape:e,patternLayers:t=[],gauge:n=null,label:r="",size:o=200,padding:a=10,showPatterns:i=!0})=>{const{token:s}=Fo.useToken(),l=s.colorPrimary,u=c.useRef(null);return c.useEffect(()=>{const f=u.current;if(!f||!e)return;const h=f.getContext("2d"),m=window.devicePixelRatio||1;f.width=o*m,f.height=o*m,f.style.width=`${o}px`,f.style.height=`${o}px`,h.scale(m,m),h.clearRect(0,0,o,o);let p={minX:0,maxX:0,minY:0,maxY:0};const v=document.createElement("canvas").getContext("2d");So(v,e,1,0,0,p,l);const y=p.maxX-p.minX,S=p.maxY-p.minY,b=o-2*a,x=o-2*a,j=Math.min(b/y,x/S),M=y*j,E=S*j,B=(o-M)/2-p.minX*j+a,k=(o-E)/2-p.minY*j+a;h.save(),h.translate(B,k),p={minX:0,maxX:0,minY:0,maxY:0},So(h,e,j,0,0,p,l,i?t:[],n),h.restore()},[e,t,n,o,a,i,l]),g.jsxs("div",{style:{width:o+a*2,height:o+a*3,float:"left"},children:[g.jsx("canvas",{ref:u,style:{border:"1px solid #d9d9d9",borderRadius:"6px",backgroundColor:"#fafafa"}}),r&&g.jsx("div",{style:{textAlign:"center",marginTop:4,fontSize:"12px"},children:r})]})},{Text:Qn}=sn,Ju=c.forwardRef((e,t)=>{const{initialPanel:n=null,initialColorwork:r=null,project:o=null,previewKey:a=null,allSelectedPanelKeys:i=[],stage:s,onStageChange:l,getPanelLabel:u,onRequestPreviewKeyChange:f}=e,h=di(),[m,p]=c.useState([]),C=c.useRef(null),v=c.useRef(null),y=c.useRef(a??null),[S,b]=c.useState("settings"),x=s??S,[j,M]=c.useState({currentRow:0,completedRows:[],currentSection:0}),[E,B]=c.useState(()=>({shape:wo(o?.panelShape||n?.shape)||xo(),gauge:n?.gauge||new Sr(19,30),sizeModifier:n?.sizeModifier||1})),k=c.useMemo(()=>r||Bu(),[r]),D=nr(R=>R?.colorworkGrid?.colors),$=c.useMemo(()=>{const R=D?Object.values(D):null;return R&&R.length>0?R.map(P=>P.color):["#cfcfcf"]},[D]),I=c.useMemo(()=>a?i.findIndex(R=>R===a):-1,[a,i]),A=I>-1&&I<i.length-1,z=A?i[I+1]:null,N=c.useMemo(()=>a?u&&u(a)||a:"",[a,u]),V=I>=0?I+1:0,K=c.useMemo(()=>{if(!E.gauge)return null;const R=E.gauge;return{stitchesPerFourInches:typeof R?.stitchesPerFourInches=="number"?R.stitchesPerFourInches:E.gauge.getStitchesPerInch()*4,rowsPerFourInches:typeof R?.rowsPerFourInches=="number"?R.rowsPerFourInches:E.gauge.getRowsPerInch()*4,scalingFactor:typeof R?.scalingFactor=="number"?R.scalingFactor:1}},[E.gauge]),U=nr(R=>a?R?.knittingDesign?.patternData?.panels?.patternLayers?.[a]:null),ne=()=>[{id:1,name:"Base Pattern",pattern:new Ze(0,0,[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],{0:{id:0,label:"Color 1",color:"#cfcfcf"}},{width:4,height:4}),patternType:"solid",patternConfig:{colors:[{color:"#cfcfcf"}]},priority:1,settings:{repeatMode:"both",repeatCountX:0,repeatCountY:0,offsetHorizontal:0,offsetVertical:0,colorMapping:{}}}],[H,le]=c.useState(()=>U||ne()),be=R=>{le(P=>{const O=typeof R=="function"?R(P):R;return a&&h(fi({panelKey:a,layers:O})),O})};c.useEffect(()=>{if(!a){y.current=null;return}if(U)le(U),C.current=Qt(U),v.current=null;else if(a!==y.current){const R=v.current||C.current,P=R&&Array.isArray(R)?Qt(R):ne();be(P),v.current=null}y.current=a},[a,U]),c.useEffect(()=>{C.current=Qt(H)},[H]);const pe=c.useMemo(()=>({stretchMode:"repeat",alignmentMode:"center",instructionFormat:"compact"}),[]),[oe,ee]=c.useState(null),[ce,Z]=c.useState([]),[te]=c.useState(new ma),[ue]=c.useState(new va);c.useEffect(()=>{Se()},[E,k,pe,$]),c.useEffect(()=>{const R=wo(o?.panelShape||n?.shape)||xo();B(P=>({...P,shape:R,gauge:n?.gauge||P.gauge,sizeModifier:n?.sizeModifier||P.sizeModifier}))},[o?.id,n?.gauge,n?.shape,n?.sizeModifier]);const Se=()=>{if(!(!E.shape||!k))try{const R={};$.forEach((F,J)=>{R[J]={id:J,label:`Color ${J+1}`,color:F}});const P=new Ze(0,0,k.grid,R,{width:k.metadata?.width||k.getStitchCount?.()||8,height:k.metadata?.height||k.getRowCount?.()||8}),O=new Xt(E.shape,E.gauge,E.sizeModifier),X=te.combinePatterns(O,P,pe),Y=ue.generateInstructions(X,pe.instructionFormat);ee(X),Z(Y)}catch(R){console.error("Error generating combined pattern:",R)}},$e=(R,P)=>{B(O=>({...O,[R]:P}))},ge=R=>{l&&l(R),s===void 0&&b(R)},we=()=>{ge("knitting"),M({currentRow:0,completedRows:[],currentSection:0})};c.useImperativeHandle(t,()=>({startKnitting:we}));const Pe=()=>{ge("settings")},ve=R=>{M(P=>({...P,currentRow:Math.min(R+1,ce.length-1),completedRows:[...P.completedRows,R]}))},ae=R=>{if(!a)return;const P=Qt(R&&Array.isArray(R)?R:H),O=E.gauge,X=E.gauge?{stitchesPerFourInches:typeof O?.stitchesPerFourInches=="number"?O.stitchesPerFourInches:E.gauge.getStitchesPerInch()*4,rowsPerFourInches:typeof O?.rowsPerFourInches=="number"?O.rowsPerFourInches:E.gauge.getRowsPerInch()*4,scalingFactor:typeof O?.scalingFactor=="number"?O.scalingFactor:1}:null,Y=E.shape&&typeof E.shape?.toJSON=="function"?E.shape.toJSON():E.shape,F=N||a;p(J=>[...J.filter(L=>L.panelKey!==a),{panelKey:a,label:F,layers:P,gauge:X,shape:Y,timestamp:Date.now()}].sort((L,_)=>{const ie=i.indexOf(L.panelKey),re=i.indexOf(_.panelKey),Ce=ie===-1?Number.MAX_SAFE_INTEGER:ie,xe=re===-1?Number.MAX_SAFE_INTEGER:re;return Ce===xe?L.timestamp-_.timestamp:Ce-xe}))},d=()=>{if(!a)return;const R=Qt(H);v.current=R,ae(R),A&&z?f?.(z):v.current=null},T=()=>g.jsxs("div",{className:"colorwork-settings-view",children:[m.length>0&&g.jsxs("div",{style:{marginBottom:16},children:[g.jsx(Qn,{strong:!0,style:{display:"block",marginBottom:8},children:"Captured panels"}),g.jsx(Ye,{size:16,wrap:!0,children:m.map(R=>{const P=R.shape instanceof nt?R.shape:R.shape?nt.fromObject(R.shape):null,O=R.gauge||K;return P?g.jsx(Du,{shape:P,patternLayers:R.layers,gauge:O,label:R.label,size:140,padding:8},R.panelKey):null})})]}),g.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:12},children:[g.jsx(Qn,{strong:!0,children:N?`Editing ${N}${i.length>1?` (${V} of ${i.length})`:""}`:"Select a panel to edit"}),g.jsxs(Ye,{children:[!A&&a&&g.jsx(Qn,{type:"secondary",children:"All selected panels captured"}),g.jsx(je,{type:"primary",onClick:d,disabled:!a,children:A?"Save & Next Panel":"Save Panel"})]})]}),g.jsx(vu,{shape:E.shape,patternLayers:H,gauge:E.gauge,onLayersChange:R=>be(R),onGaugeChange:R=>$e("gauge",R)})]}),w=()=>g.jsx(ju,{combinedPattern:oe,instructions:ce,knittingProgress:j,onRowComplete:ve,onBackToSettings:Pe});return g.jsxs("div",{className:"colorwork-panel-editor",children:[x==="settings"&&T(),x==="knitting"&&w()]})});function wo(e){if(!e)return null;if(e instanceof nt)return e;if(typeof e=="object"){const t=n=>{if(!n)return null;const r=n.height||0,o=n.baseA||0,a=n.baseB||0,i=n.baseBHorizontalOffset||0,s=n.finishingSteps||[],l=[];return n.successors&&Array.isArray(n.successors)&&n.successors.forEach(u=>{const f=t(u);f&&l.push(f)}),new nt(r,o,a,i,l,s)};return t(e)}return null}function xo(){return new nt(40,20,30,0)}function Bu(){return new Ze(0,0,[[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0]],{0:{id:0,label:"Color 1",color:"#ffffff"},1:{id:1,label:"Color 2",color:"#000000"}},{width:8,height:8})}function Qt(e){return Array.isArray(e)?e.map(t=>{const n=t?.pattern;let r=n;return n instanceof Ze?r=Ze.fromJSON(n.toJSON()):n&&typeof n=="object"&&"grid"in n&&(r=Ze.fromJSON(n)),{...t,pattern:r,patternConfig:$o(t?.patternConfig),settings:$o(t?.settings)}}):[]}function $o(e){if(e==null)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return console.warn("Failed to clone value, returning original reference",t),e}}const ja=(e,t=.7)=>{if(!e)return e;let n=e.replace("#","");n.length===3&&(n=n.split("").map(i=>i+i).join(""));const r=Math.max(0,Math.min(255,Math.floor(parseInt(n.slice(0,2),16)*t))),o=Math.max(0,Math.min(255,Math.floor(parseInt(n.slice(2,4),16)*t))),a=Math.max(0,Math.min(255,Math.floor(parseInt(n.slice(4,6),16)*t)));return`#${r.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`},Ro=(e,t={})=>{const n=typeof t.width=="number"?t.width:Math.max(1,(e.baseA||10)*.25),r=typeof t.height=="number"?t.height:Math.max(.5,(e.height||10)*.15),o=Math.max(0,typeof t.baseStart=="number"?t.baseStart:n),a=Math.max(0,typeof t.basePivot=="number"?t.basePivot:n);return{id:t.id||`sr-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,label:t.label||null,baseA:o,baseB:a,baseBHorizontalOffset:0,height:r,successors:[],isHem:!1,shortRows:[]}},Po=(e,t,n={},r=1,o=0,a=0)=>{const i=Math.max(0,Math.min(1,typeof n.posX=="number"?n.posX:.5));let s=Math.max(0,Math.min(1,typeof n.posY=="number"?n.posY:0));if(e.isHem){const I=1-Math.abs(s-.5)*2;s=Math.max(0,Math.min(1,I))}const l=Math.max(e.baseA,e.baseB)*r,u=o+(l-e.baseB*r)/2+(e.baseBHorizontalOffset||0)*r,f=o+(l+e.baseB*r)/2+(e.baseBHorizontalOffset||0)*r,h=o+(l-e.baseA*r)/2,m=o+(l+e.baseA*r)/2,p=($,I,A)=>$+(I-$)*A,C=p(u,h,s),y=p(f,m,s)-C,S=C+y*i,b=Math.max(t.baseA,t.baseB)*r,x=(t.baseBHorizontalOffset||0)*r,j=S-(b/2+x),M=(e.isHem?e.height*.5:e.height)*r,E=a,B=a+M,k=E+(B-E)*s;return{childXOffset:j,childYOffset:k,anchorX:S,anchorY:k}},Nu=(e,t,n=0,r=0,o)=>{const a=Math.max(e.baseA,e.baseB)*t,i=n+(a-e.baseB*t)/2+0*t,s=n+(a+e.baseB*t)/2+0*t,l=n+(a-e.baseA*t)/2,u=n+(a+e.baseA*t)/2,f=r+e.height*t,h=r,m=ja(o,.7);return g.jsx("g",{children:g.jsx("polygon",{points:`${i},${f} ${s},${f} ${u},${h} ${l},${h}`,fill:m,fillOpacity:.65,stroke:"#666",strokeWidth:1,strokeLinejoin:"round","data-shortrow-id":e.id})},e.id||`${n}-${r}`)},zu=(e,t,n=0,r=0,o,a,i)=>{const s=e,l=(s.isHem?s.height*.5:s.height)*t,u=Math.max(s.baseA,s.baseB)*t,f=n+(u-s.baseB*t)/2+(s.baseBHorizontalOffset||0)*t,h=n+(u+s.baseB*t)/2+(s.baseBHorizontalOffset||0)*t,m=n+(u-s.baseA*t)/2,p=n+(u+s.baseA*t)/2,C=r,v=r+l,y=a&&e.id&&e.id===a,S=(f+h+m+p)/4,b=(C+v)/2,x=s.isHem?ja(o,.6):o;return g.jsxs("g",{children:[g.jsx("polygon",{points:`${f},${C} ${h},${C} ${p},${v} ${m},${v}`,fill:x,fillOpacity:y?.95:.85,stroke:y?"#1677ff":"#a1a8af",strokeWidth:y?4:3,strokeLinejoin:"round",style:{cursor:i?"pointer":"default"},onClick:i?()=>i(e.id):void 0,"data-trapezoid-id":e.id,role:i?"button":void 0,tabIndex:i?0:void 0}),e.label?g.jsx("text",{x:S,y:b,textAnchor:"middle",dominantBaseline:"central",style:{pointerEvents:"none",fontWeight:700,fontSize:"24px"},fill:"#ffffff",stroke:"#000000",strokeWidth:2,children:e.label}):null]},e.id||`${n}-${r}`)},dr=(e,t,n=0,r=0,o={minX:0,maxX:0,minY:0,maxY:0},a,i,s,l=null)=>{const u=[],f=Math.max(e.baseA,e.baseB)*t,h=n+(f-e.baseB*t)/2+(e.baseBHorizontalOffset||0)*t,m=n+(f+e.baseB*t)/2+(e.baseBHorizontalOffset||0)*t,p=n+(f-e.baseA*t)/2,C=n+(f+e.baseA*t)/2,v=r,y=(e.isHem?e.height*.5:e.height)*t,S=r+y;if(o.minX=Math.min(o.minX,h,m,p,C),o.maxX=Math.max(o.maxX,h,m,p,C),o.minY=Math.min(o.minY,v,S),o.maxY=Math.max(o.maxY,v,S),e.shortRows&&e.shortRows.length)for(let b of e.shortRows){const x=Ro(e,b),{childXOffset:j,childYOffset:M}=Po(e,x,b,t,n,r),E=j+(Math.max(x.baseA,x.baseB)*t-x.baseB*t)/2,B=j+(Math.max(x.baseA,x.baseB)*t+x.baseB*t)/2,k=M+x.height*t,D=M;o.minX=Math.min(o.minX,E),o.maxX=Math.max(o.maxX,B),o.minY=Math.min(o.minY,D),o.maxY=Math.max(o.maxY,k,o.maxY)}if(u.push(zu(e,t,n,r,a,i,s)),e.shortRows&&e.shortRows.length)for(let b of e.shortRows){const x=Ro(e,b),{childXOffset:j,childYOffset:M,anchorX:E,anchorY:B}=Po(e,x,b,t,n,r);u.push(Nu(x,t,j,M,a)),b.id&&b.id===l&&u.push(g.jsx("g",{children:g.jsx("circle",{cx:E,cy:B,r:4,fill:"#000"})},`marker-${b.id}`))}if(e.successors&&e.successors.length>0){const b=e.successors.map(M=>Math.max(M.baseA,M.baseB)*t),x=b.reduce((M,E)=>M+E,0);let j=n+(f-x)/2;for(let M=0;M<e.successors.length;M++){const E=e.successors[M],B=b[M],k={minX:o.minX,maxX:o.maxX,minY:o.minY,maxY:o.maxY},D=(E.isHem?E.height*.5:E.height)*t;u.push(...dr(E,t,j,v-D,k,a,i,s)),o.minX=k.minX,o.maxX=k.maxX,o.minY=k.minY,o.maxY=k.maxY,j+=B}}return u},Hu=({shape:e,label:t="",size:n=200,padding:r=10,selectedId:o=null,onSelect:a=null,selectedShortRowId:i=null})=>{const{token:s}=Fo.useToken(),l=s.colorPrimary;let u={minX:0,maxX:0,minY:0,maxY:0};dr(e,1,0,0,u,l,null,null);const f=u.maxX-u.minX,h=u.maxY-u.minY,m=n-2*r,p=n-2*r,C=Math.min(m/f,p/h),v=f*C,y=h*C,S=(n-v)/2-u.minX*C+r,b=(n-y)/2-u.minY*C+r;u={minX:0,maxX:0,minY:0,maxY:0};const x=dr(e,C,0,0,u,l,o,a,i);return g.jsxs("div",{style:{},children:[g.jsx("svg",{width:n,height:n,viewBox:`0 0 ${n} ${n+4}`,preserveAspectRatio:"none",children:g.jsx("g",{transform:`translate(${S}, ${b})`,children:x})}),t]})},{Text:et}=sn,Rr=()=>`trap-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,Lu=()=>({id:Rr(),height:40,baseA:20,baseB:30,baseBHorizontalOffset:0,successors:[],label:null,isHem:!1,shortRows:[]}),_u=()=>({id:Rr(),height:12,baseA:16,baseB:12,baseBHorizontalOffset:0,successors:[],label:null,isHem:!1,shortRows:[]}),Wu=()=>({id:`sr-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,label:null,posX:.5,posY:.5,height:2,baseStart:5,basePivot:1});function At(e){return JSON.parse(JSON.stringify(e))}function fr(e,t,n=null){if(!e)return{node:null,parent:null,indexInParent:-1};if(e.id===t)return{node:e,parent:n,indexInParent:-1};for(let r=0;r<(e.successors||[]).length;r++){const o=e.successors[r],a=fr(o,t,e);if(a.node)return{...a,indexInParent:n===e?r:a.indexInParent}}return{node:null,parent:null,indexInParent:-1}}function Fu(e){const t={};let n=0;const r=[e],o=a=>{let i="";for(a+=1;a>0;){const s=(a-1)%26;i=String.fromCharCode(65+s)+i,a=Math.floor((a-1)/26)}return i};for(;r.length;){const a=r.pop();if(a&&(t[a.id]=o(n++),a.successors&&a.successors.length))for(let i=a.successors.length-1;i>=0;i--)r.push(a.successors[i])}return t}function en(e){const t=Fu(e),n=r=>{if(!r)return r;const o={...r};return o.label=t[r.id],o.title=t[r.id]?`Trapezoid ${t[r.id]}`:"Trapezoid",o.successors&&o.successors.length&&(o.successors=o.successors.map(n)),o};return n(e)}function Wt(e,t,n){const r=At(e),o=[r];for(;o.length;){const a=o.pop();if(a.id===t){n(a);break}(a.successors||[]).forEach(i=>o.push(i))}return r}function Xu(e,t){if(e.id===t)return e;const n=At(e),r=[n];for(;r.length;){const o=r.shift();if(!o.successors)continue;const a=o.successors.findIndex(i=>i.id===t);if(a!==-1){o.successors.splice(a,1);break}o.successors.forEach(i=>r.push(i))}return n}function Yu(e,t){const n=At(e),r=[n];for(;r.length;){const o=r.pop();if(o.id===t){o.successors=o.successors||[],o.successors.push(_u());break}(o.successors||[]).forEach(a=>r.push(a))}return n}function jo(e,t,n,r){const o=At(e),a=[o];for(;a.length;){const i=a.pop();if(i.id===t){if(!i.successors)break;const s=i.successors,[l]=s.splice(n,1);s.splice(r,0,l);break}(i.successors||[]).forEach(s=>a.push(s))}return o}function Zu(){const[e,t]=c.useState(()=>en(Lu())),[n,r]=c.useState(e.id),[o,a]=c.useState(null),[i,s]=c.useState(!1),[l,u]=c.useState(!1),{setMenuItems:f}=hi(),h=c.useMemo(()=>fr(e,n),[e,n]),m=h.node||e,p=c.useCallback(($,I)=>{t(A=>Wt(A,m.id,z=>{z[$]=I??0}))},[m?.id]),C=c.useCallback(($,I)=>{t(A=>Wt(A,m.id,z=>{z[$]=!!I}))},[m?.id]),v=c.useCallback(()=>t($=>en(Yu($,m.id))),[m?.id]),y=c.useCallback(()=>t($=>en(Xu($,m.id))),[m?.id]),S=c.useCallback(()=>{if(m.id===e.id){t(N=>({...At(N),id:N.id}));return}const{parent:$}=fr(e,m.id);if(!$)return;const I=At(m);I.id=Rr();const A=At(e),z=[A];for(;z.length;){const N=z.pop();if(N.id===$.id){const V=N.successors.findIndex(K=>K.id===m.id);N.successors.splice(V+1,0,I);break}(N.successors||[]).forEach(V=>z.push(V))}t(en(A))},[e,m]),b=m?.successors||[],x=m?.shortRows||[],j=c.useCallback($=>{try{if(!$){Ft.error("No panel data provided");return}const I=Xt.fromObject($);t(en(I.shape)),r(I.shape.id),Ft.success(`Loaded panel: ${$.name||"Untitled"}`)}catch(I){console.error("PanelShapeCreator: Error loading panel",I),Ft.error("Failed to load panel: "+String(I))}},[]),M=c.useCallback(async($,I)=>{console.log(`Panel "${$}" saved successfully`)},[]);c.useEffect(()=>(f([{key:"panel-save-as",label:"Save As...",icon:g.jsx(ga,{}),onClick:()=>u(!0)},{key:"panel-open",label:"Open...",icon:g.jsx(pi,{}),onClick:()=>s(!0)}]),()=>f([])),[f]);const E=c.useCallback(()=>{t($=>Wt($,m.id,I=>{I.shortRows=I.shortRows||[],I.shortRows.push(Wu())}))},[m?.id]),B=c.useCallback(()=>{o&&(t($=>Wt($,m.id,I=>{I.shortRows=(I.shortRows||[]).filter(A=>A.id!==o)})),a(null))},[m?.id,o]),k=c.useCallback(()=>{o&&t($=>Wt($,m.id,I=>{I.shortRows=I.shortRows||[];const A=I.shortRows.findIndex(N=>N.id===o);if(A===-1)return;const z={...I.shortRows[A],id:`sr-${Date.now()}-${Math.random().toString(36).slice(2,6)}`};I.shortRows.splice(A+1,0,z)}))},[m?.id,o]),D=c.useCallback(($,I,A)=>{const z=I==="posX"||I==="posY"?Math.max(0,Math.min(1,A)):A;t(N=>Wt(N,m.id,V=>{if(!V.shortRows)return;const K=V.shortRows.findIndex(U=>U.id===$);K!==-1&&(V.shortRows[K]={...V.shortRows[K],[I]:z})}))},[m?.id]);return g.jsxs("div",{style:{display:"flex",height:"calc(100vh - 64px)"},children:[g.jsx("div",{style:{flex:1,minWidth:360,padding:16},children:g.jsx(st,{size:"small",title:"Preview",children:g.jsx(Hu,{shape:e,size:560,padding:20,selectedId:n,selectedShortRowId:o,onSelect:$=>$&&r($)},JSON.stringify(e))})}),g.jsxs("div",{style:{width:440,padding:16},children:[g.jsxs(Ye,{direction:"vertical",style:{width:"100%"},children:[g.jsxs(Ye,{style:{marginBottom:8},children:[g.jsx(je,{size:"small",onClick:()=>r(e.id),disabled:m.id===e.id,children:"Select Root"}),g.jsx(je,{size:"small",onClick:()=>h.parent&&r(h.parent.id),disabled:!h.parent,children:"Select Parent"})]}),g.jsxs(st,{size:"small",title:"Geometry",children:[g.jsxs(qe,{gutter:8,children:[g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Height"}),g.jsx(We,{value:m.height,min:0,onChange:$=>p("height",$),style:{width:"100%"}})]}),g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Lower Base (A)"}),g.jsx(We,{value:m.baseA,min:0,onChange:$=>p("baseA",$),style:{width:"100%"}})]})]}),g.jsxs(qe,{gutter:8,style:{marginTop:8},children:[g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Upper Base (B)"}),g.jsx(We,{value:m.baseB,min:0,onChange:$=>p("baseB",$),style:{width:"100%"}})]}),g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Horizontal Offset"}),g.jsx(We,{value:m.baseBHorizontalOffset,onChange:$=>p("baseBHorizontalOffset",$),style:{width:"100%"}})]})]}),g.jsx(qe,{style:{marginTop:12},gutter:8,children:g.jsx(Ae,{span:24,children:g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[g.jsx(et,{style:{whiteSpace:"nowrap",marginRight:8},children:"Is Hem"}),g.jsx(mi,{checked:!!m.isHem,onChange:$=>C("isHem",$)})]})})})]}),g.jsxs(st,{size:"small",title:"Children",children:[g.jsxs(Ye,{style:{marginBottom:8},children:[g.jsx(je,{icon:g.jsx(On,{}),onClick:v,children:"Add Child"}),g.jsx(je,{icon:g.jsx(rr,{}),onClick:S,children:"Duplicate"}),g.jsx(je,{icon:g.jsx(or,{}),danger:!0,onClick:y,disabled:m.id===e.id,children:"Remove"})]}),g.jsx(wn,{size:"small",bordered:!0,dataSource:b,rowKey:$=>`${$.id}-${$.label||"none"}`,locale:{emptyText:"No children"},renderItem:($,I)=>g.jsx(wn.Item,{style:{cursor:"pointer",background:$.id===n?"#f0f7ff":"transparent"},onClick:()=>r($.id),actions:[g.jsx(je,{icon:g.jsx(yc,{}),size:"small",disabled:I===0,onClick:A=>{A.stopPropagation(),t(z=>jo(z,m.id,I,I-1))}},"up"),g.jsx(je,{icon:g.jsx(vc,{}),size:"small",disabled:I===b.length-1,onClick:A=>{A.stopPropagation(),t(z=>jo(z,m.id,I,I+1))}},"down")],children:g.jsxs(Ye,{children:[g.jsx(et,{strong:!0,children:$.label?`Trapezoid ${$.label}`:"Trapezoid"}),g.jsxs(et,{type:"secondary",children:["h:",$.height," A:",$.baseA," B:",$.baseB," off:",$.baseBHorizontalOffset]})]})})})]}),g.jsxs(st,{size:"small",title:"Short Rows",children:[g.jsxs(Ye,{style:{marginBottom:8},children:[g.jsx(je,{icon:g.jsx(On,{}),onClick:E,children:"Add Short Row"}),g.jsx(je,{icon:g.jsx(rr,{}),onClick:k,disabled:!o,children:"Duplicate"}),g.jsx(je,{icon:g.jsx(or,{}),danger:!0,onClick:B,disabled:!o,children:"Remove"})]}),g.jsx(wn,{size:"small",bordered:!0,dataSource:x,rowKey:$=>`${$.id}-${$.label||"none"}`,locale:{emptyText:"No short rows"},renderItem:($,I)=>g.jsx(wn.Item,{style:{cursor:"pointer",background:$.id===o?"#f0f7ff":"transparent"},onClick:()=>a($.id),children:g.jsxs(Ye,{direction:"vertical",children:[g.jsx(et,{strong:!0,children:$.label?$.label:`Short Row ${I+1}`}),g.jsxs(et,{type:"secondary",children:["x:",($.posX||0).toFixed(2)," y:",($.posY||0).toFixed(2)," h:",($.height||0).toFixed(2),'" A:',($.baseStart||0).toFixed(2)," B:",($.basePivot||0).toFixed(2)]})]})})}),o?(()=>{const $=(x||[]).find(I=>I.id===o);return $?g.jsxs("div",{style:{marginTop:12},children:[g.jsx(et,{strong:!0,style:{display:"block",marginBottom:8},children:$.label||`Short Row ${x.indexOf($)+1}`}),g.jsxs(qe,{gutter:8,children:[g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Pos X"}),g.jsx(We,{min:0,max:1,step:.01,value:$.posX,onChange:I=>D($.id,"posX",I),style:{width:"100%"}})]}),g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Pos Y"}),g.jsx(We,{min:0,max:1,step:.01,value:$.posY,onChange:I=>D($.id,"posY",I),style:{width:"100%"}})]})]}),g.jsxs(qe,{gutter:8,style:{marginTop:8},children:[g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Height (in)"}),g.jsx(We,{min:0,step:.1,value:$.height,onChange:I=>D($.id,"height",I),style:{width:"100%"}})]}),g.jsx(Ae,{span:12,children:g.jsx(et,{children:" "})})]}),g.jsxs(qe,{gutter:8,style:{marginTop:8},children:[g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Base Start (in)"}),g.jsx(We,{min:0,step:.1,value:$.baseStart,onChange:I=>D($.id,"baseStart",I),style:{width:"100%"}})]}),g.jsxs(Ae,{span:12,children:[g.jsx(et,{children:"Base Pivot (in)"}),g.jsx(We,{min:0,step:.1,value:$.basePivot,onChange:I=>D($.id,"basePivot",I),style:{width:"100%"}})]})]})]}):null})():null]}),g.jsx(vr,{}),g.jsx(et,{type:"secondary",children:"Tip: Select a child to edit its geometry, use arrows to reorder, or Add Child to grow the tree."})]}),g.jsx(gi,{visible:i,jsonKey:"panels",displayLabel:"Panel",onOpen:j,onClose:()=>s(!1)}),g.jsx(Ic,{visible:l,jsonKey:"panels",displayLabel:"Panel",entityData:new Xt(e,void 0,1).toJSON(),onSave:M,onClose:()=>u(!1)})]})]})}export{st as C,Sr as G,ln as L,Zu as P,Ic as S,Ds as a,Ju as b};
//# sourceMappingURL=PanelShapeCreator-C0yu9UAY.js.map
